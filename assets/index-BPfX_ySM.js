const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-Cn2kv6Gb.js","assets/base-CnoJFnk4.js","assets/native-CEfK0Qmw.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const A of c.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&r(A)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();function Kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hA={exports:{}},qi={};var hm;function OC(){if(hm)return qi;hm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function o(r,s,c){var A=null;if(c!==void 0&&(A=""+c),s.key!==void 0&&(A=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:t,type:r,key:A,ref:s!==void 0?s:null,props:c}}return qi.Fragment=e,qi.jsx=o,qi.jsxs=o,qi}var mm;function VC(){return mm||(mm=1,hA.exports=OC()),hA.exports}var C=VC(),mA={exports:{}},St={};var pm;function qC(){if(pm)return St;pm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),A=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function E(G){return G===null||typeof G!="object"?null:(G=S&&G[S]||G["@@iterator"],typeof G=="function"?G:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,b={};function M(G,D,te){this.props=G,this.context=D,this.refs=b,this.updater=te||x}M.prototype.isReactComponent={},M.prototype.setState=function(G,D){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,D,"setState")},M.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function O(){}O.prototype=M.prototype;function N(G,D,te){this.props=G,this.context=D,this.refs=b,this.updater=te||x}var j=N.prototype=new O;j.constructor=N,k(j,M.prototype),j.isPureReactComponent=!0;var L=Array.isArray;function H(){}var P={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function B(G,D,te){var se=te.ref;return{$$typeof:t,type:G,key:D,ref:se!==void 0?se:null,props:te}}function q(G,D){return B(G.type,D,G.props)}function Z(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function ne(G){var D={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(te){return D[te]})}var U=/\/+/g;function X(G,D){return typeof G=="object"&&G!==null&&G.key!=null?ne(""+G.key):D.toString(36)}function F(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(H,H):(G.status="pending",G.then(function(D){G.status==="pending"&&(G.status="fulfilled",G.value=D)},function(D){G.status==="pending"&&(G.status="rejected",G.reason=D)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function R(G,D,te,se,re){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var Me=!1;if(G===null)Me=!0;else switch(ve){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(G.$$typeof){case t:case e:Me=!0;break;case p:return Me=G._init,R(Me(G._payload),D,te,se,re)}}if(Me)return re=re(G),Me=se===""?"."+X(G,0):se,L(re)?(te="",Me!=null&&(te=Me.replace(U,"$&/")+"/"),R(re,D,te,"",function(Ne){return Ne})):re!=null&&(Z(re)&&(re=q(re,te+(re.key==null||G&&G.key===re.key?"":(""+re.key).replace(U,"$&/")+"/")+Me)),D.push(re)),1;Me=0;var Ve=se===""?".":se+":";if(L(G))for(var ae=0;ae<G.length;ae++)se=G[ae],ve=Ve+X(se,ae),Me+=R(se,D,te,ve,re);else if(ae=E(G),typeof ae=="function")for(G=ae.call(G),ae=0;!(se=G.next()).done;)se=se.value,ve=Ve+X(se,ae++),Me+=R(se,D,te,ve,re);else if(ve==="object"){if(typeof G.then=="function")return R(F(G),D,te,se,re);throw D=String(G),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return Me}function K(G,D,te){if(G==null)return G;var se=[],re=0;return R(G,se,"","",function(ve){return D.call(te,ve,re++)}),se}function V(G){if(G._status===-1){var D=G._result;D=D(),D.then(function(te){(G._status===0||G._status===-1)&&(G._status=1,G._result=te)},function(te){(G._status===0||G._status===-1)&&(G._status=2,G._result=te)}),G._status===-1&&(G._status=0,G._result=D)}if(G._status===1)return G._result.default;throw G._result}var ge=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},me={map:K,forEach:function(G,D,te){K(G,function(){D.apply(this,arguments)},te)},count:function(G){var D=0;return K(G,function(){D++}),D},toArray:function(G){return K(G,function(D){return D})||[]},only:function(G){if(!Z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return St.Activity=y,St.Children=me,St.Component=M,St.Fragment=o,St.Profiler=s,St.PureComponent=N,St.StrictMode=r,St.Suspense=m,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,St.__COMPILER_RUNTIME={__proto__:null,c:function(G){return P.H.useMemoCache(G)}},St.cache=function(G){return function(){return G.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(G,D,te){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var se=k({},G.props),re=G.key;if(D!=null)for(ve in D.key!==void 0&&(re=""+D.key),D)!_.call(D,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&D.ref===void 0||(se[ve]=D[ve]);var ve=arguments.length-2;if(ve===1)se.children=te;else if(1<ve){for(var Me=Array(ve),Ve=0;Ve<ve;Ve++)Me[Ve]=arguments[Ve+2];se.children=Me}return B(G.type,re,se)},St.createContext=function(G){return G={$$typeof:A,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:c,_context:G},G},St.createElement=function(G,D,te){var se,re={},ve=null;if(D!=null)for(se in D.key!==void 0&&(ve=""+D.key),D)_.call(D,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(re[se]=D[se]);var Me=arguments.length-2;if(Me===1)re.children=te;else if(1<Me){for(var Ve=Array(Me),ae=0;ae<Me;ae++)Ve[ae]=arguments[ae+2];re.children=Ve}if(G&&G.defaultProps)for(se in Me=G.defaultProps,Me)re[se]===void 0&&(re[se]=Me[se]);return B(G,ve,re)},St.createRef=function(){return{current:null}},St.forwardRef=function(G){return{$$typeof:f,render:G}},St.isValidElement=Z,St.lazy=function(G){return{$$typeof:p,_payload:{_status:-1,_result:G},_init:V}},St.memo=function(G,D){return{$$typeof:g,type:G,compare:D===void 0?null:D}},St.startTransition=function(G){var D=P.T,te={};P.T=te;try{var se=G(),re=P.S;re!==null&&re(te,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(H,ge)}catch(ve){ge(ve)}finally{D!==null&&te.types!==null&&(D.types=te.types),P.T=D}},St.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},St.use=function(G){return P.H.use(G)},St.useActionState=function(G,D,te){return P.H.useActionState(G,D,te)},St.useCallback=function(G,D){return P.H.useCallback(G,D)},St.useContext=function(G){return P.H.useContext(G)},St.useDebugValue=function(){},St.useDeferredValue=function(G,D){return P.H.useDeferredValue(G,D)},St.useEffect=function(G,D){return P.H.useEffect(G,D)},St.useEffectEvent=function(G){return P.H.useEffectEvent(G)},St.useId=function(){return P.H.useId()},St.useImperativeHandle=function(G,D,te){return P.H.useImperativeHandle(G,D,te)},St.useInsertionEffect=function(G,D){return P.H.useInsertionEffect(G,D)},St.useLayoutEffect=function(G,D){return P.H.useLayoutEffect(G,D)},St.useMemo=function(G,D){return P.H.useMemo(G,D)},St.useOptimistic=function(G,D){return P.H.useOptimistic(G,D)},St.useReducer=function(G,D,te){return P.H.useReducer(G,D,te)},St.useRef=function(G){return P.H.useRef(G)},St.useState=function(G){return P.H.useState(G)},St.useSyncExternalStore=function(G,D,te){return P.H.useSyncExternalStore(G,D,te)},St.useTransition=function(){return P.H.useTransition()},St.version="19.2.3",St}var vm;function ld(){return vm||(vm=1,mA.exports=qC()),mA.exports}var T=ld();const xa=Kv(T);var pA={exports:{}},Yi={},vA={exports:{}},yA={};var ym;function YC(){return ym||(ym=1,(function(t){function e(R,K){var V=R.length;R.push(K);e:for(;0<V;){var ge=V-1>>>1,me=R[ge];if(0<s(me,K))R[ge]=K,R[V]=me,V=ge;else break e}}function o(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var K=R[0],V=R.pop();if(V!==K){R[0]=V;e:for(var ge=0,me=R.length,G=me>>>1;ge<G;){var D=2*(ge+1)-1,te=R[D],se=D+1,re=R[se];if(0>s(te,V))se<me&&0>s(re,te)?(R[ge]=re,R[se]=V,ge=se):(R[ge]=te,R[D]=V,ge=D);else if(se<me&&0>s(re,V))R[ge]=re,R[se]=V,ge=se;else break e}}return K}function s(R,K){var V=R.sortIndex-K.sortIndex;return V!==0?V:R.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var A=Date,f=A.now();t.unstable_now=function(){return A.now()-f}}var m=[],g=[],p=1,y=null,S=3,E=!1,x=!1,k=!1,b=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function j(R){for(var K=o(g);K!==null;){if(K.callback===null)r(g);else if(K.startTime<=R)r(g),K.sortIndex=K.expirationTime,e(m,K);else break;K=o(g)}}function L(R){if(k=!1,j(R),!x)if(o(m)!==null)x=!0,H||(H=!0,ne());else{var K=o(g);K!==null&&F(L,K.startTime-R)}}var H=!1,P=-1,_=5,B=-1;function q(){return b?!0:!(t.unstable_now()-B<_)}function Z(){if(b=!1,H){var R=t.unstable_now();B=R;var K=!0;try{e:{x=!1,k&&(k=!1,O(P),P=-1),E=!0;var V=S;try{t:{for(j(R),y=o(m);y!==null&&!(y.expirationTime>R&&q());){var ge=y.callback;if(typeof ge=="function"){y.callback=null,S=y.priorityLevel;var me=ge(y.expirationTime<=R);if(R=t.unstable_now(),typeof me=="function"){y.callback=me,j(R),K=!0;break t}y===o(m)&&r(m),j(R)}else r(m);y=o(m)}if(y!==null)K=!0;else{var G=o(g);G!==null&&F(L,G.startTime-R),K=!1}}break e}finally{y=null,S=V,E=!1}K=void 0}}finally{K?ne():H=!1}}}var ne;if(typeof N=="function")ne=function(){N(Z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=Z,ne=function(){X.postMessage(null)}}else ne=function(){M(Z,0)};function F(R,K){P=M(function(){R(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(R){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var V=S;S=K;try{return R()}finally{S=V}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(R,K){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=S;S=R;try{return K()}finally{S=V}},t.unstable_scheduleCallback=function(R,K,V){var ge=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ge+V:ge):V=ge,R){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=V+me,R={id:p++,callback:K,priorityLevel:R,startTime:V,expirationTime:me,sortIndex:-1},V>ge?(R.sortIndex=V,e(g,R),o(m)===null&&R===o(g)&&(k?(O(P),P=-1):k=!0,F(L,V-ge))):(R.sortIndex=me,e(m,R),x||E||(x=!0,H||(H=!0,ne()))),R},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(R){var K=S;return function(){var V=S;S=K;try{return R.apply(this,arguments)}finally{S=V}}}})(yA)),yA}var Sm;function jC(){return Sm||(Sm=1,vA.exports=YC()),vA.exports}var SA={exports:{}},Ln={};var Cm;function JC(){if(Cm)return Ln;Cm=1;var t=ld();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var r={d:{f:o,r:function(){throw Error(e(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(m,g,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:m,containerInfo:g,implementation:p}}var A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(m,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(m,g,null,p)},Ln.flushSync=function(m){var g=A.T,p=r.p;try{if(A.T=null,r.p=2,m)return m()}finally{A.T=g,r.p=p,r.d.f()}},Ln.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Ln.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Ln.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var p=g.as,y=f(p,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:E}):p==="script"&&r.d.X(m,{crossOrigin:y,integrity:S,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ln.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=f(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Ln.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,y=f(p,g.crossOrigin);r.d.L(m,p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ln.preloadModule=function(m,g){if(typeof m=="string")if(g){var p=f(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Ln.requestFormReset=function(m){r.d.r(m)},Ln.unstable_batchedUpdates=function(m,g){return m(g)},Ln.useFormState=function(m,g,p){return A.H.useFormState(m,g,p)},Ln.useFormStatus=function(){return A.H.useHostTransitionStatus()},Ln.version="19.2.3",Ln}var Tm;function XC(){if(Tm)return SA.exports;Tm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),SA.exports=JC(),SA.exports}var wm;function WC(){if(wm)return Yi;wm=1;var t=jC(),e=ld(),o=XC();function r(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,i=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(i=a.return),n=a.return;while(n)}return a.tag===3?i:null}function A(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function f(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(r(188))}function g(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(r(188));return a!==n?null:n}for(var i=n,l=a;;){var h=i.return;if(h===null)break;var v=h.alternate;if(v===null){if(l=h.return,l!==null){i=l;continue}break}if(h.child===v.child){for(v=h.child;v;){if(v===i)return m(h),n;if(v===l)return m(h),a;v=v.sibling}throw Error(r(188))}if(i.return!==l.return)i=h,l=v;else{for(var w=!1,I=h.child;I;){if(I===i){w=!0,i=h,l=v;break}if(I===l){w=!0,l=h,i=v;break}I=I.sibling}if(!w){for(I=v.child;I;){if(I===i){w=!0,i=v,l=h;break}if(I===l){w=!0,l=v,i=h;break}I=I.sibling}if(!w)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?n:a}function p(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=p(n),a!==null)return a;n=n.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),N=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ne(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var U=Symbol.for("react.client.reference");function X(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===U?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case M:return"Profiler";case b:return"StrictMode";case L:return"Suspense";case H:return"SuspenseList";case B:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case N:return n.displayName||"Context";case O:return(n._context.displayName||"Context")+".Consumer";case j:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return a=n.displayName||null,a!==null?a:X(n.type)||"Memo";case _:a=n._payload,n=n._init;try{return X(n(a))}catch{}}return null}var F=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},ge=[],me=-1;function G(n){return{current:n}}function D(n){0>me||(n.current=ge[me],ge[me]=null,me--)}function te(n,a){me++,ge[me]=n.current,n.current=a}var se=G(null),re=G(null),ve=G(null),Me=G(null);function Ve(n,a){switch(te(ve,a),te(re,n),te(se,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Uh(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Uh(a),n=zh(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}D(se),te(se,n)}function ae(){D(se),D(re),D(ve)}function Ne(n){n.memoizedState!==null&&te(Me,n);var a=se.current,i=zh(a,n.type);a!==i&&(te(re,n),te(se,i))}function nt(n){re.current===n&&(D(se),D(re)),Me.current===n&&(D(Me),Hi._currentValue=V)}var Te,W;function he(n){if(Te===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);Te=a&&a[1]||"",W=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+n+W}var Se=!1;function ue(n,a){if(!n||Se)return"";Se=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(de){var ce=de}Reflect.construct(n,[],ye)}else{try{ye.call()}catch(de){ce=de}n.call(ye.prototype)}}else{try{throw Error()}catch(de){ce=de}(ye=n())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(de){if(de&&ce&&typeof de.stack=="string")return[de.stack,ce.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=l.DetermineComponentFrameRoot(),w=v[0],I=v[1];if(w&&I){var z=w.split(`
`),le=I.split(`
`);for(h=l=0;l<z.length&&!z[l].includes("DetermineComponentFrameRoot");)l++;for(;h<le.length&&!le[h].includes("DetermineComponentFrameRoot");)h++;if(l===z.length||h===le.length)for(l=z.length-1,h=le.length-1;1<=l&&0<=h&&z[l]!==le[h];)h--;for(;1<=l&&0<=h;l--,h--)if(z[l]!==le[h]){if(l!==1||h!==1)do if(l--,h--,0>h||z[l]!==le[h]){var fe=`
`+z[l].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=l&&0<=h);break}}}finally{Se=!1,Error.prepareStackTrace=i}return(i=n?n.displayName||n.name:"")?he(i):""}function Ce(n,a){switch(n.tag){case 26:case 27:case 5:return he(n.type);case 16:return he("Lazy");case 13:return n.child!==a&&a!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return ue(n.type,!1);case 11:return ue(n.type.render,!1);case 1:return ue(n.type,!0);case 31:return he("Activity");default:return""}}function Pe(n){try{var a="",i=null;do a+=Ce(n,i),i=n,n=n.return;while(n);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ge=Object.prototype.hasOwnProperty,be=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,je=t.unstable_shouldYield,at=t.unstable_requestPaint,qe=t.unstable_now,Rt=t.unstable_getCurrentPriorityLevel,gt=t.unstable_ImmediatePriority,$e=t.unstable_UserBlockingPriority,mt=t.unstable_NormalPriority,Je=t.unstable_LowPriority,Ct=t.unstable_IdlePriority,ht=t.log,Tt=t.unstable_setDisableYieldValue,Ht=null,Ut=null;function fn(n){if(typeof ht=="function"&&Tt(n),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Ht,n)}catch{}}var oe=Math.clz32?Math.clz32:Fe,it=Math.log,lt=Math.LN2;function Fe(n){return n>>>=0,n===0?32:31-(it(n)/lt|0)|0}var wt=256,Dt=262144,Nt=4194304;function pt(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function cn(n,a,i){var l=n.pendingLanes;if(l===0)return 0;var h=0,v=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var I=l&134217727;return I!==0?(l=I&~v,l!==0?h=pt(l):(w&=I,w!==0?h=pt(w):i||(i=I&~n,i!==0&&(h=pt(i))))):(I=l&~v,I!==0?h=pt(I):w!==0?h=pt(w):i||(i=l&~n,i!==0&&(h=pt(i)))),h===0?0:a!==0&&a!==h&&(a&v)===0&&(v=h&-h,i=a&-a,v>=i||v===32&&(i&4194048)!==0)?a:h}function jt(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Ae(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ke(){var n=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),n}function De(n){for(var a=[],i=0;31>i;i++)a.push(n);return a}function Re(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Be(n,a,i,l,h,v){var w=n.pendingLanes;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=i,n.entangledLanes&=i,n.errorRecoveryDisabledLanes&=i,n.shellSuspendCounter=0;var I=n.entanglements,z=n.expirationTimes,le=n.hiddenUpdates;for(i=w&~i;0<i;){var fe=31-oe(i),ye=1<<fe;I[fe]=0,z[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var de=ce[fe];de!==null&&(de.lane&=-536870913)}i&=~ye}l!==0&&He(n,l,0),v!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=v&~(w&~a))}function He(n,a,i){n.pendingLanes|=a,n.suspendedLanes&=~a;var l=31-oe(a);n.entangledLanes|=a,n.entanglements[l]=n.entanglements[l]|1073741824|i&261930}function st(n,a){var i=n.entangledLanes|=a;for(n=n.entanglements;i;){var l=31-oe(i),h=1<<l;h&a|n[l]&a&&(n[l]|=a),i&=~h}}function vt(n,a){var i=a&-a;return i=(i&42)!==0?1:rt(i),(i&(n.suspendedLanes|a))!==0?0:i}function rt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function et(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ye(){var n=K.p;return n!==0?n:(n=window.event,n===void 0?32:lm(n.type))}function We(n,a){var i=K.p;try{return K.p=n,a()}finally{K.p=i}}var _e=Math.random().toString(36).slice(2),Le="__reactFiber$"+_e,Qe="__reactProps$"+_e,Jt="__reactContainer$"+_e,Mt="__reactEvents$"+_e,Zt="__reactListeners$"+_e,dn="__reactHandles$"+_e,Gt="__reactResources$"+_e,sn="__reactMarker$"+_e;function ot(n){delete n[Le],delete n[Qe],delete n[Mt],delete n[Zt],delete n[dn]}function dt(n){var a=n[Le];if(a)return a;for(var i=n.parentNode;i;){if(a=i[Jt]||i[Le]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(n=qh(n);n!==null;){if(i=n[Le])return i;n=qh(n)}return a}n=i,i=n.parentNode}return null}function ke(n){if(n=n[Le]||n[Jt]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function Et(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(r(33))}function xt(n){var a=n[Gt];return a||(a=n[Gt]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function $(n){n[sn]=!0}var Ee=new Set,xe={};function Ue(n,a){ct(n,a),ct(n+"Capture",a)}function ct(n,a){for(xe[n]=a,n=0;n<a.length;n++)Ee.add(a[n])}var ut=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tn={},Ze={};function Bt(n){return Ge.call(Ze,n)?!0:Ge.call(tn,n)?!1:ut.test(n)?Ze[n]=!0:(tn[n]=!0,!1)}function Xt(n,a,i){if(Bt(a))if(i===null)n.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+i)}}function wn(n,a,i){if(i===null)n.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+i)}}function J(n,a,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttributeNS(a,i,""+l)}}function Ie(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oe(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function bt(n,a,i){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,v=l.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return h.call(this)},set:function(w){i=""+w,v.call(this,w)}}),Object.defineProperty(n,a,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Wt(n){if(!n._valueTracker){var a=Oe(n)?"checked":"value";n._valueTracker=bt(n,a,""+n[a])}}function En(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var i=a.getValue(),l="";return n&&(l=Oe(n)?n.checked?"true":"false":n.value),n=l,n!==i?(a.setValue(n),!0):!1}function Pn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var uc=/[\n"\\]/g;function Hn(n){return n.replace(uc,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ro(n,a,i,l,h,v,w,I){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),a!=null?w==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Ie(a)):n.value!==""+Ie(a)&&(n.value=""+Ie(a)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),a!=null?sr(n,w,Ie(a)):i!=null?sr(n,w,Ie(i)):l!=null&&n.removeAttribute("value"),h==null&&v!=null&&(n.defaultChecked=!!v),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+Ie(I):n.removeAttribute("name")}function Do(n,a,i,l,h,v,w,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),a!=null||i!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){Wt(n);return}i=i!=null?""+Ie(i):"",a=a!=null?""+Ie(a):i,I||a===n.value||(n.value=a),n.defaultValue=a}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=I?n.checked:!!l,n.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),Wt(n)}function sr(n,a,i){a==="number"&&Pn(n.ownerDocument)===n||n.defaultValue===""+i||(n.defaultValue=""+i)}function ma(n,a,i,l){if(n=n.options,a){a={};for(var h=0;h<i.length;h++)a["$"+i[h]]=!0;for(i=0;i<n.length;i++)h=a.hasOwnProperty("$"+n[i].value),n[i].selected!==h&&(n[i].selected=h),h&&l&&(n[i].defaultSelected=!0)}else{for(i=""+Ie(i),a=null,h=0;h<n.length;h++){if(n[h].value===i){n[h].selected=!0,l&&(n[h].defaultSelected=!0);return}a!==null||n[h].disabled||(a=n[h])}a!==null&&(a.selected=!0)}}function Dd(n,a,i){if(a!=null&&(a=""+Ie(a),a!==n.value&&(n.value=a),i==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=i!=null?""+Ie(i):""}function Nd(n,a,i,l){if(a==null){if(l!=null){if(i!=null)throw Error(r(92));if(F(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),a=i}i=Ie(a),n.defaultValue=i,l=n.textContent,l===i&&l!==""&&l!==null&&(n.value=l),Wt(n)}function lr(n,a){if(a){var i=n.firstChild;if(i&&i===n.lastChild&&i.nodeType===3){i.nodeValue=a;return}}n.textContent=a}var z0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gd(n,a,i){var l=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":l?n.setProperty(a,i):typeof i!="number"||i===0||z0.has(a)?a==="float"?n.cssFloat=i:n[a]=(""+i).trim():n[a]=i+"px"}function Bd(n,a,i){if(a!=null&&typeof a!="object")throw Error(r(62));if(n=n.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var h in a)l=a[h],a.hasOwnProperty(h)&&i[h]!==l&&Gd(n,h,l)}else for(var v in a)a.hasOwnProperty(v)&&Gd(n,v,a[v])}function Ac(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var F0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),K0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ls(n){return K0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Ia(){}var dc=null;function gc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var cr=null,ur=null;function _d(n){var a=ke(n);if(a&&(n=a.stateNode)){var i=n[Qe]||null;e:switch(n=a.stateNode,a.type){case"input":if(Ro(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=n;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Hn(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var l=i[a];if(l!==n&&l.form===n.form){var h=l[Qe]||null;if(!h)throw Error(r(90));Ro(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<i.length;a++)l=i[a],l.form===n.form&&En(l)}break e;case"textarea":Dd(n,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&ma(n,!!i.multiple,a,!1)}}}var fc=!1;function Ld(n,a,i){if(fc)return n(a,i);fc=!0;try{var l=n(a);return l}finally{if(fc=!1,(cr!==null||ur!==null)&&(Js(),cr&&(a=cr,n=ur,ur=cr=null,_d(a),n)))for(a=0;a<n.length;a++)_d(n[a])}}function ri(n,a){var i=n.stateNode;if(i===null)return null;var l=i[Qe]||null;if(l===null)return null;i=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(i&&typeof i!="function")throw Error(r(231,a,typeof i));return i}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=!1;if(Ma)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){hc=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{hc=!1}var eo=null,mc=null,cs=null;function Ud(){if(cs)return cs;var n,a=mc,i=a.length,l,h="value"in eo?eo.value:eo.textContent,v=h.length;for(n=0;n<i&&a[n]===h[n];n++);var w=i-n;for(l=1;l<=w&&a[i-l]===h[v-l];l++);return cs=h.slice(n,1<l?1-l:void 0)}function us(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function As(){return!0}function zd(){return!1}function Qn(n){function a(i,l,h,v,w){this._reactName=i,this._targetInst=h,this.type=l,this.nativeEvent=v,this.target=w,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(i=n[I],this[I]=i?i(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?As:zd,this.isPropagationStopped=zd,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),a}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ds=Qn(No),si=y({},No,{view:0,detail:0}),H0=Qn(si),pc,vc,li,gs=y({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==li&&(li&&n.type==="mousemove"?(pc=n.screenX-li.screenX,vc=n.screenY-li.screenY):vc=pc=0,li=n),pc)},movementY:function(n){return"movementY"in n?n.movementY:vc}}),Fd=Qn(gs),Q0=y({},gs,{dataTransfer:0}),O0=Qn(Q0),V0=y({},si,{relatedTarget:0}),yc=Qn(V0),q0=y({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),Y0=Qn(q0),j0=y({},No,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),J0=Qn(j0),X0=y({},No,{data:0}),Kd=Qn(X0),W0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eS(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=$0[n])?!!a[n]:!1}function Sc(){return eS}var tS=y({},si,{key:function(n){if(n.key){var a=W0[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=us(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Z0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(n){return n.type==="keypress"?us(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?us(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),nS=Qn(tS),aS=y({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hd=Qn(aS),oS=y({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),rS=Qn(oS),iS=y({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=Qn(iS),lS=y({},gs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),cS=Qn(lS),uS=y({},No,{newState:0,oldState:0}),AS=Qn(uS),dS=[9,13,27,32],Cc=Ma&&"CompositionEvent"in window,ci=null;Ma&&"documentMode"in document&&(ci=document.documentMode);var gS=Ma&&"TextEvent"in window&&!ci,Qd=Ma&&(!Cc||ci&&8<ci&&11>=ci),Od=" ",Vd=!1;function qd(n,a){switch(n){case"keyup":return dS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ar=!1;function fS(n,a){switch(n){case"compositionend":return Yd(a);case"keypress":return a.which!==32?null:(Vd=!0,Od);case"textInput":return n=a.data,n===Od&&Vd?null:n;default:return null}}function hS(n,a){if(Ar)return n==="compositionend"||!Cc&&qd(n,a)?(n=Ud(),cs=mc=eo=null,Ar=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qd&&a.locale!=="ko"?null:a.data;default:return null}}var mS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jd(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!mS[n.type]:a==="textarea"}function Jd(n,a,i,l){cr?ur?ur.push(l):ur=[l]:cr=l,a=nl(a,"onChange"),0<a.length&&(i=new ds("onChange","change",null,i,l),n.push({event:i,listeners:a}))}var ui=null,Ai=null;function pS(n){Dh(n,0)}function fs(n){var a=Et(n);if(En(a))return n}function Xd(n,a){if(n==="change")return a}var Wd=!1;if(Ma){var Tc;if(Ma){var wc="oninput"in document;if(!wc){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),wc=typeof Zd.oninput=="function"}Tc=wc}else Tc=!1;Wd=Tc&&(!document.documentMode||9<document.documentMode)}function $d(){ui&&(ui.detachEvent("onpropertychange",eg),Ai=ui=null)}function eg(n){if(n.propertyName==="value"&&fs(Ai)){var a=[];Jd(a,Ai,n,gc(n)),Ld(pS,a)}}function vS(n,a,i){n==="focusin"?($d(),ui=a,Ai=i,ui.attachEvent("onpropertychange",eg)):n==="focusout"&&$d()}function yS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fs(Ai)}function SS(n,a){if(n==="click")return fs(a)}function CS(n,a){if(n==="input"||n==="change")return fs(a)}function TS(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Jn=typeof Object.is=="function"?Object.is:TS;function di(n,a){if(Jn(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var i=Object.keys(n),l=Object.keys(a);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var h=i[l];if(!Ge.call(a,h)||!Jn(n[h],a[h]))return!1}return!0}function tg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ng(n,a){var i=tg(n);n=0;for(var l;i;){if(i.nodeType===3){if(l=n+i.textContent.length,n<=a&&l>=a)return{node:i,offset:a-n};n=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=tg(i)}}function ag(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?ag(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function og(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Pn(n.document);a instanceof n.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)n=a.contentWindow;else break;a=Pn(n.document)}return a}function Ec(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var wS=Ma&&"documentMode"in document&&11>=document.documentMode,dr=null,bc=null,gi=null,kc=!1;function rg(n,a,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;kc||dr==null||dr!==Pn(l)||(l=dr,"selectionStart"in l&&Ec(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),gi&&di(gi,l)||(gi=l,l=nl(bc,"onSelect"),0<l.length&&(a=new ds("onSelect","select",null,a,i),n.push({event:a,listeners:l}),a.target=dr)))}function Go(n,a){var i={};return i[n.toLowerCase()]=a.toLowerCase(),i["Webkit"+n]="webkit"+a,i["Moz"+n]="moz"+a,i}var gr={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionrun:Go("Transition","TransitionRun"),transitionstart:Go("Transition","TransitionStart"),transitioncancel:Go("Transition","TransitionCancel"),transitionend:Go("Transition","TransitionEnd")},xc={},ig={};Ma&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function Bo(n){if(xc[n])return xc[n];if(!gr[n])return n;var a=gr[n],i;for(i in a)if(a.hasOwnProperty(i)&&i in ig)return xc[n]=a[i];return n}var sg=Bo("animationend"),lg=Bo("animationiteration"),cg=Bo("animationstart"),ES=Bo("transitionrun"),bS=Bo("transitionstart"),kS=Bo("transitioncancel"),ug=Bo("transitionend"),Ag=new Map,Ic="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ic.push("scrollEnd");function pa(n,a){Ag.set(n,a),Ue(a,[n])}var hs=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},na=[],fr=0,Mc=0;function ms(){for(var n=fr,a=Mc=fr=0;a<n;){var i=na[a];na[a++]=null;var l=na[a];na[a++]=null;var h=na[a];na[a++]=null;var v=na[a];if(na[a++]=null,l!==null&&h!==null){var w=l.pending;w===null?h.next=h:(h.next=w.next,w.next=h),l.pending=h}v!==0&&dg(i,h,v)}}function ps(n,a,i,l){na[fr++]=n,na[fr++]=a,na[fr++]=i,na[fr++]=l,Mc|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Pc(n,a,i,l){return ps(n,a,i,l),vs(n)}function _o(n,a){return ps(n,null,null,a),vs(n)}function dg(n,a,i){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i);for(var h=!1,v=n.return;v!==null;)v.childLanes|=i,l=v.alternate,l!==null&&(l.childLanes|=i),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(h=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,h&&a!==null&&(h=31-oe(i),n=v.hiddenUpdates,l=n[h],l===null?n[h]=[a]:l.push(a),a.lane=i|536870912),v):null}function vs(n){if(50<Bi)throw Bi=0,zu=null,Error(r(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var hr={};function xS(n,a,i,l){this.tag=n,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(n,a,i,l){return new xS(n,a,i,l)}function Rc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Pa(n,a){var i=n.alternate;return i===null?(i=Xn(n.tag,a,n.key,n.mode),i.elementType=n.elementType,i.type=n.type,i.stateNode=n.stateNode,i.alternate=n,n.alternate=i):(i.pendingProps=a,i.type=n.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=n.flags&65011712,i.childLanes=n.childLanes,i.lanes=n.lanes,i.child=n.child,i.memoizedProps=n.memoizedProps,i.memoizedState=n.memoizedState,i.updateQueue=n.updateQueue,a=n.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=n.sibling,i.index=n.index,i.ref=n.ref,i.refCleanup=n.refCleanup,i}function gg(n,a){n.flags&=65011714;var i=n.alternate;return i===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=i.childLanes,n.lanes=i.lanes,n.child=i.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=i.memoizedProps,n.memoizedState=i.memoizedState,n.updateQueue=i.updateQueue,n.type=i.type,a=i.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function ys(n,a,i,l,h,v){var w=0;if(l=n,typeof n=="function")Rc(n)&&(w=1);else if(typeof n=="string")w=DC(n,i,se.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case B:return n=Xn(31,i,a,h),n.elementType=B,n.lanes=v,n;case k:return Lo(i.children,h,v,a);case b:w=8,h|=24;break;case M:return n=Xn(12,i,a,h|2),n.elementType=M,n.lanes=v,n;case L:return n=Xn(13,i,a,h),n.elementType=L,n.lanes=v,n;case H:return n=Xn(19,i,a,h),n.elementType=H,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:w=10;break e;case O:w=9;break e;case j:w=11;break e;case P:w=14;break e;case _:w=16,l=null;break e}w=29,i=Error(r(130,n===null?"null":typeof n,"")),l=null}return a=Xn(w,i,a,h),a.elementType=n,a.type=l,a.lanes=v,a}function Lo(n,a,i,l){return n=Xn(7,n,l,a),n.lanes=i,n}function Dc(n,a,i){return n=Xn(6,n,null,a),n.lanes=i,n}function fg(n){var a=Xn(18,null,null,0);return a.stateNode=n,a}function Nc(n,a,i){return a=Xn(4,n.children!==null?n.children:[],n.key,a),a.lanes=i,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var hg=new WeakMap;function aa(n,a){if(typeof n=="object"&&n!==null){var i=hg.get(n);return i!==void 0?i:(a={value:n,source:a,stack:Pe(a)},hg.set(n,a),a)}return{value:n,source:a,stack:Pe(a)}}var mr=[],pr=0,Ss=null,fi=0,oa=[],ra=0,to=null,wa=1,Ea="";function Ra(n,a){mr[pr++]=fi,mr[pr++]=Ss,Ss=n,fi=a}function mg(n,a,i){oa[ra++]=wa,oa[ra++]=Ea,oa[ra++]=to,to=n;var l=wa;n=Ea;var h=32-oe(l)-1;l&=~(1<<h),i+=1;var v=32-oe(a)+h;if(30<v){var w=h-h%5;v=(l&(1<<w)-1).toString(32),l>>=w,h-=w,wa=1<<32-oe(a)+h|i<<h|l,Ea=v+n}else wa=1<<v|i<<h|l,Ea=n}function Gc(n){n.return!==null&&(Ra(n,1),mg(n,1,0))}function Bc(n){for(;n===Ss;)Ss=mr[--pr],mr[pr]=null,fi=mr[--pr],mr[pr]=null;for(;n===to;)to=oa[--ra],oa[ra]=null,Ea=oa[--ra],oa[ra]=null,wa=oa[--ra],oa[ra]=null}function pg(n,a){oa[ra++]=wa,oa[ra++]=Ea,oa[ra++]=to,wa=a.id,Ea=a.overflow,to=n}var Rn=null,un=null,Kt=!1,no=null,ia=!1,_c=Error(r(519));function ao(n){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hi(aa(a,n)),_c}function vg(n){var a=n.stateNode,i=n.type,l=n.memoizedProps;switch(a[Le]=n,a[Qe]=l,i){case"dialog":Lt("cancel",a),Lt("close",a);break;case"iframe":case"object":case"embed":Lt("load",a);break;case"video":case"audio":for(i=0;i<Li.length;i++)Lt(Li[i],a);break;case"source":Lt("error",a);break;case"img":case"image":case"link":Lt("error",a),Lt("load",a);break;case"details":Lt("toggle",a);break;case"input":Lt("invalid",a),Do(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Lt("invalid",a);break;case"textarea":Lt("invalid",a),Nd(a,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||l.suppressHydrationWarning===!0||_h(a.textContent,i)?(l.popover!=null&&(Lt("beforetoggle",a),Lt("toggle",a)),l.onScroll!=null&&Lt("scroll",a),l.onScrollEnd!=null&&Lt("scrollend",a),l.onClick!=null&&(a.onclick=Ia),a=!0):a=!1,a||ao(n,!0)}function yg(n){for(Rn=n.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:ia=!1;return;case 27:case 3:ia=!0;return;default:Rn=Rn.return}}function vr(n){if(n!==Rn)return!1;if(!Kt)return yg(n),Kt=!0,!1;var a=n.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=n.type,i=!(i!=="form"&&i!=="button")||eA(n.type,n.memoizedProps)),i=!i),i&&un&&ao(n),yg(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));un=Vh(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));un=Vh(n)}else a===27?(a=un,vo(n.type)?(n=rA,rA=null,un=n):un=a):un=Rn?la(n.stateNode.nextSibling):null;return!0}function Uo(){un=Rn=null,Kt=!1}function Lc(){var n=no;return n!==null&&(Yn===null?Yn=n:Yn.push.apply(Yn,n),no=null),n}function hi(n){no===null?no=[n]:no.push(n)}var Uc=G(null),zo=null,Da=null;function oo(n,a,i){te(Uc,a._currentValue),a._currentValue=i}function Na(n){n._currentValue=Uc.current,D(Uc)}function zc(n,a,i){for(;n!==null;){var l=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),n===i)break;n=n.return}}function Fc(n,a,i,l){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var v=h.dependencies;if(v!==null){var w=h.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=h;for(var z=0;z<a.length;z++)if(I.context===a[z]){v.lanes|=i,I=v.alternate,I!==null&&(I.lanes|=i),zc(v.return,i,n),l||(w=null);break e}v=I.next}}else if(h.tag===18){if(w=h.return,w===null)throw Error(r(341));w.lanes|=i,v=w.alternate,v!==null&&(v.lanes|=i),zc(w,i,n),w=null}else w=h.child;if(w!==null)w.return=h;else for(w=h;w!==null;){if(w===n){w=null;break}if(h=w.sibling,h!==null){h.return=w.return,w=h;break}w=w.return}h=w}}function yr(n,a,i,l){n=null;for(var h=a,v=!1;h!==null;){if(!v){if((h.flags&524288)!==0)v=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var w=h.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var I=h.type;Jn(h.pendingProps.value,w.value)||(n!==null?n.push(I):n=[I])}}else if(h===Me.current){if(w=h.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Hi):n=[Hi])}h=h.return}n!==null&&Fc(a,n,i,l),a.flags|=262144}function Cs(n){for(n=n.firstContext;n!==null;){if(!Jn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fo(n){zo=n,Da=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Dn(n){return Sg(zo,n)}function Ts(n,a){return zo===null&&Fo(n),Sg(n,a)}function Sg(n,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},Da===null){if(n===null)throw Error(r(308));Da=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Da=Da.next=a;return i}var IS=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(i,l){n.push(l)}};this.abort=function(){a.aborted=!0,n.forEach(function(i){return i()})}},MS=t.unstable_scheduleCallback,PS=t.unstable_NormalPriority,yn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new IS,data:new Map,refCount:0}}function mi(n){n.refCount--,n.refCount===0&&MS(PS,function(){n.controller.abort()})}var pi=null,Hc=0,Sr=0,Cr=null;function RS(n,a){if(pi===null){var i=pi=[];Hc=0,Sr=Vu(),Cr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Hc++,a.then(Cg,Cg),a}function Cg(){if(--Hc===0&&pi!==null){Cr!==null&&(Cr.status="fulfilled");var n=pi;pi=null,Sr=0,Cr=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function DS(n,a){var i=[],l={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return n.then(function(){l.status="fulfilled",l.value=a;for(var h=0;h<i.length;h++)(0,i[h])(a)},function(h){for(l.status="rejected",l.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),l}var Tg=R.S;R.S=function(n,a){ih=qe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&RS(n,a),Tg!==null&&Tg(n,a)};var Ko=G(null);function Qc(){var n=Ko.current;return n!==null?n:ln.pooledCache}function ws(n,a){a===null?te(Ko,Ko.current):te(Ko,a.pool)}function wg(){var n=Qc();return n===null?null:{parent:yn._currentValue,pool:n}}var Tr=Error(r(460)),Oc=Error(r(474)),Es=Error(r(542)),bs={then:function(){}};function Eg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bg(n,a,i){switch(i=n[i],i===void 0?n.push(a):i!==a&&(a.then(Ia,Ia),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,xg(n),n;default:if(typeof a.status=="string")a.then(Ia,Ia);else{if(n=ln,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=a,n.status="pending",n.then(function(l){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=l}},function(l){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,xg(n),n}throw Qo=a,Tr}}function Ho(n){try{var a=n._init;return a(n._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Qo=i,Tr):i}}var Qo=null;function kg(){if(Qo===null)throw Error(r(459));var n=Qo;return Qo=null,n}function xg(n){if(n===Tr||n===Es)throw Error(r(483))}var wr=null,vi=0;function ks(n){var a=vi;return vi+=1,wr===null&&(wr=[]),bg(wr,n,a)}function yi(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function xs(n,a){throw a.$$typeof===S?Error(r(525)):(n=Object.prototype.toString.call(a),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function Ig(n){function a(ee,Y){if(n){var ie=ee.deletions;ie===null?(ee.deletions=[Y],ee.flags|=16):ie.push(Y)}}function i(ee,Y){if(!n)return null;for(;Y!==null;)a(ee,Y),Y=Y.sibling;return null}function l(ee){for(var Y=new Map;ee!==null;)ee.key!==null?Y.set(ee.key,ee):Y.set(ee.index,ee),ee=ee.sibling;return Y}function h(ee,Y){return ee=Pa(ee,Y),ee.index=0,ee.sibling=null,ee}function v(ee,Y,ie){return ee.index=ie,n?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<Y?(ee.flags|=67108866,Y):ie):(ee.flags|=67108866,Y)):(ee.flags|=1048576,Y)}function w(ee){return n&&ee.alternate===null&&(ee.flags|=67108866),ee}function I(ee,Y,ie,pe){return Y===null||Y.tag!==6?(Y=Dc(ie,ee.mode,pe),Y.return=ee,Y):(Y=h(Y,ie),Y.return=ee,Y)}function z(ee,Y,ie,pe){var At=ie.type;return At===k?fe(ee,Y,ie.props.children,pe,ie.key):Y!==null&&(Y.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===_&&Ho(At)===Y.type)?(Y=h(Y,ie.props),yi(Y,ie),Y.return=ee,Y):(Y=ys(ie.type,ie.key,ie.props,null,ee.mode,pe),yi(Y,ie),Y.return=ee,Y)}function le(ee,Y,ie,pe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ie.containerInfo||Y.stateNode.implementation!==ie.implementation?(Y=Nc(ie,ee.mode,pe),Y.return=ee,Y):(Y=h(Y,ie.children||[]),Y.return=ee,Y)}function fe(ee,Y,ie,pe,At){return Y===null||Y.tag!==7?(Y=Lo(ie,ee.mode,pe,At),Y.return=ee,Y):(Y=h(Y,ie),Y.return=ee,Y)}function ye(ee,Y,ie){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Dc(""+Y,ee.mode,ie),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return ie=ys(Y.type,Y.key,Y.props,null,ee.mode,ie),yi(ie,Y),ie.return=ee,ie;case x:return Y=Nc(Y,ee.mode,ie),Y.return=ee,Y;case _:return Y=Ho(Y),ye(ee,Y,ie)}if(F(Y)||ne(Y))return Y=Lo(Y,ee.mode,ie,null),Y.return=ee,Y;if(typeof Y.then=="function")return ye(ee,ks(Y),ie);if(Y.$$typeof===N)return ye(ee,Ts(ee,Y),ie);xs(ee,Y)}return null}function ce(ee,Y,ie,pe){var At=Y!==null?Y.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return At!==null?null:I(ee,Y,""+ie,pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:return ie.key===At?z(ee,Y,ie,pe):null;case x:return ie.key===At?le(ee,Y,ie,pe):null;case _:return ie=Ho(ie),ce(ee,Y,ie,pe)}if(F(ie)||ne(ie))return At!==null?null:fe(ee,Y,ie,pe,null);if(typeof ie.then=="function")return ce(ee,Y,ks(ie),pe);if(ie.$$typeof===N)return ce(ee,Y,Ts(ee,ie),pe);xs(ee,ie)}return null}function de(ee,Y,ie,pe,At){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return ee=ee.get(ie)||null,I(Y,ee,""+pe,At);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case E:return ee=ee.get(pe.key===null?ie:pe.key)||null,z(Y,ee,pe,At);case x:return ee=ee.get(pe.key===null?ie:pe.key)||null,le(Y,ee,pe,At);case _:return pe=Ho(pe),de(ee,Y,ie,pe,At)}if(F(pe)||ne(pe))return ee=ee.get(ie)||null,fe(Y,ee,pe,At,null);if(typeof pe.then=="function")return de(ee,Y,ie,ks(pe),At);if(pe.$$typeof===N)return de(ee,Y,ie,Ts(Y,pe),At);xs(Y,pe)}return null}function Xe(ee,Y,ie,pe){for(var At=null,Qt=null,tt=Y,It=Y=0,Ft=null;tt!==null&&It<ie.length;It++){tt.index>It?(Ft=tt,tt=null):Ft=tt.sibling;var Ot=ce(ee,tt,ie[It],pe);if(Ot===null){tt===null&&(tt=Ft);break}n&&tt&&Ot.alternate===null&&a(ee,tt),Y=v(Ot,Y,It),Qt===null?At=Ot:Qt.sibling=Ot,Qt=Ot,tt=Ft}if(It===ie.length)return i(ee,tt),Kt&&Ra(ee,It),At;if(tt===null){for(;It<ie.length;It++)tt=ye(ee,ie[It],pe),tt!==null&&(Y=v(tt,Y,It),Qt===null?At=tt:Qt.sibling=tt,Qt=tt);return Kt&&Ra(ee,It),At}for(tt=l(tt);It<ie.length;It++)Ft=de(tt,ee,It,ie[It],pe),Ft!==null&&(n&&Ft.alternate!==null&&tt.delete(Ft.key===null?It:Ft.key),Y=v(Ft,Y,It),Qt===null?At=Ft:Qt.sibling=Ft,Qt=Ft);return n&&tt.forEach(function(wo){return a(ee,wo)}),Kt&&Ra(ee,It),At}function ft(ee,Y,ie,pe){if(ie==null)throw Error(r(151));for(var At=null,Qt=null,tt=Y,It=Y=0,Ft=null,Ot=ie.next();tt!==null&&!Ot.done;It++,Ot=ie.next()){tt.index>It?(Ft=tt,tt=null):Ft=tt.sibling;var wo=ce(ee,tt,Ot.value,pe);if(wo===null){tt===null&&(tt=Ft);break}n&&tt&&wo.alternate===null&&a(ee,tt),Y=v(wo,Y,It),Qt===null?At=wo:Qt.sibling=wo,Qt=wo,tt=Ft}if(Ot.done)return i(ee,tt),Kt&&Ra(ee,It),At;if(tt===null){for(;!Ot.done;It++,Ot=ie.next())Ot=ye(ee,Ot.value,pe),Ot!==null&&(Y=v(Ot,Y,It),Qt===null?At=Ot:Qt.sibling=Ot,Qt=Ot);return Kt&&Ra(ee,It),At}for(tt=l(tt);!Ot.done;It++,Ot=ie.next())Ot=de(tt,ee,It,Ot.value,pe),Ot!==null&&(n&&Ot.alternate!==null&&tt.delete(Ot.key===null?It:Ot.key),Y=v(Ot,Y,It),Qt===null?At=Ot:Qt.sibling=Ot,Qt=Ot);return n&&tt.forEach(function(QC){return a(ee,QC)}),Kt&&Ra(ee,It),At}function on(ee,Y,ie,pe){if(typeof ie=="object"&&ie!==null&&ie.type===k&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:e:{for(var At=ie.key;Y!==null;){if(Y.key===At){if(At=ie.type,At===k){if(Y.tag===7){i(ee,Y.sibling),pe=h(Y,ie.props.children),pe.return=ee,ee=pe;break e}}else if(Y.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===_&&Ho(At)===Y.type){i(ee,Y.sibling),pe=h(Y,ie.props),yi(pe,ie),pe.return=ee,ee=pe;break e}i(ee,Y);break}else a(ee,Y);Y=Y.sibling}ie.type===k?(pe=Lo(ie.props.children,ee.mode,pe,ie.key),pe.return=ee,ee=pe):(pe=ys(ie.type,ie.key,ie.props,null,ee.mode,pe),yi(pe,ie),pe.return=ee,ee=pe)}return w(ee);case x:e:{for(At=ie.key;Y!==null;){if(Y.key===At)if(Y.tag===4&&Y.stateNode.containerInfo===ie.containerInfo&&Y.stateNode.implementation===ie.implementation){i(ee,Y.sibling),pe=h(Y,ie.children||[]),pe.return=ee,ee=pe;break e}else{i(ee,Y);break}else a(ee,Y);Y=Y.sibling}pe=Nc(ie,ee.mode,pe),pe.return=ee,ee=pe}return w(ee);case _:return ie=Ho(ie),on(ee,Y,ie,pe)}if(F(ie))return Xe(ee,Y,ie,pe);if(ne(ie)){if(At=ne(ie),typeof At!="function")throw Error(r(150));return ie=At.call(ie),ft(ee,Y,ie,pe)}if(typeof ie.then=="function")return on(ee,Y,ks(ie),pe);if(ie.$$typeof===N)return on(ee,Y,Ts(ee,ie),pe);xs(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Y!==null&&Y.tag===6?(i(ee,Y.sibling),pe=h(Y,ie),pe.return=ee,ee=pe):(i(ee,Y),pe=Dc(ie,ee.mode,pe),pe.return=ee,ee=pe),w(ee)):i(ee,Y)}return function(ee,Y,ie,pe){try{vi=0;var At=on(ee,Y,ie,pe);return wr=null,At}catch(tt){if(tt===Tr||tt===Es)throw tt;var Qt=Xn(29,tt,null,ee.mode);return Qt.lanes=pe,Qt.return=ee,Qt}}}var Oo=Ig(!0),Mg=Ig(!1),ro=!1;function Vc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qc(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function io(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function so(n,a,i){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(qt&2)!==0){var h=l.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),l.pending=a,a=vs(n),dg(n,null,i),a}return ps(n,l,a,i),vs(n)}function Si(n,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var l=a.lanes;l&=n.pendingLanes,i|=l,a.lanes=i,st(n,i)}}function Yc(n,a){var i=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var h=null,v=null;if(i=i.firstBaseUpdate,i!==null){do{var w={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};v===null?h=v=w:v=v.next=w,i=i.next}while(i!==null);v===null?h=v=a:v=v.next=a}else h=v=a;i={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:v,shared:l.shared,callbacks:l.callbacks},n.updateQueue=i;return}n=i.lastBaseUpdate,n===null?i.firstBaseUpdate=a:n.next=a,i.lastBaseUpdate=a}var jc=!1;function Ci(){if(jc){var n=Cr;if(n!==null)throw n}}function Ti(n,a,i,l){jc=!1;var h=n.updateQueue;ro=!1;var v=h.firstBaseUpdate,w=h.lastBaseUpdate,I=h.shared.pending;if(I!==null){h.shared.pending=null;var z=I,le=z.next;z.next=null,w===null?v=le:w.next=le,w=z;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,I=fe.lastBaseUpdate,I!==w&&(I===null?fe.firstBaseUpdate=le:I.next=le,fe.lastBaseUpdate=z))}if(v!==null){var ye=h.baseState;w=0,fe=le=z=null,I=v;do{var ce=I.lane&-536870913,de=ce!==I.lane;if(de?(zt&ce)===ce:(l&ce)===ce){ce!==0&&ce===Sr&&(jc=!0),fe!==null&&(fe=fe.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Xe=n,ft=I;ce=a;var on=i;switch(ft.tag){case 1:if(Xe=ft.payload,typeof Xe=="function"){ye=Xe.call(on,ye,ce);break e}ye=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=ft.payload,ce=typeof Xe=="function"?Xe.call(on,ye,ce):Xe,ce==null)break e;ye=y({},ye,ce);break e;case 2:ro=!0}}ce=I.callback,ce!==null&&(n.flags|=64,de&&(n.flags|=8192),de=h.callbacks,de===null?h.callbacks=[ce]:de.push(ce))}else de={lane:ce,tag:I.tag,payload:I.payload,callback:I.callback,next:null},fe===null?(le=fe=de,z=ye):fe=fe.next=de,w|=ce;if(I=I.next,I===null){if(I=h.shared.pending,I===null)break;de=I,I=de.next,de.next=null,h.lastBaseUpdate=de,h.shared.pending=null}}while(!0);fe===null&&(z=ye),h.baseState=z,h.firstBaseUpdate=le,h.lastBaseUpdate=fe,v===null&&(h.shared.lanes=0),go|=w,n.lanes=w,n.memoizedState=ye}}function Pg(n,a){if(typeof n!="function")throw Error(r(191,n));n.call(a)}function Rg(n,a){var i=n.callbacks;if(i!==null)for(n.callbacks=null,n=0;n<i.length;n++)Pg(i[n],a)}var Er=G(null),Is=G(0);function Dg(n,a){n=Ha,te(Is,n),te(Er,a),Ha=n|a.baseLanes}function Jc(){te(Is,Ha),te(Er,Er.current)}function Xc(){Ha=Is.current,D(Er),D(Is)}var Wn=G(null),sa=null;function lo(n){var a=n.alternate;te(pn,pn.current&1),te(Wn,n),sa===null&&(a===null||Er.current!==null||a.memoizedState!==null)&&(sa=n)}function Wc(n){te(pn,pn.current),te(Wn,n),sa===null&&(sa=n)}function Ng(n){n.tag===22?(te(pn,pn.current),te(Wn,n),sa===null&&(sa=n)):co()}function co(){te(pn,pn.current),te(Wn,Wn.current)}function Zn(n){D(Wn),sa===n&&(sa=null),D(pn)}var pn=G(0);function Ms(n){for(var a=n;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||aA(i)||oA(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ga=0,kt=null,nn=null,Sn=null,Ps=!1,br=!1,Vo=!1,Rs=0,wi=0,kr=null,NS=0;function hn(){throw Error(r(321))}function Zc(n,a){if(a===null)return!1;for(var i=0;i<a.length&&i<n.length;i++)if(!Jn(n[i],a[i]))return!1;return!0}function $c(n,a,i,l,h,v){return Ga=v,kt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=n===null||n.memoizedState===null?pf:fu,Vo=!1,v=i(l,h),Vo=!1,br&&(v=Bg(a,i,l,h)),Gg(n),v}function Gg(n){R.H=ki;var a=nn!==null&&nn.next!==null;if(Ga=0,Sn=nn=kt=null,Ps=!1,wi=0,kr=null,a)throw Error(r(300));n===null||Cn||(n=n.dependencies,n!==null&&Cs(n)&&(Cn=!0))}function Bg(n,a,i,l){kt=n;var h=0;do{if(br&&(kr=null),wi=0,br=!1,25<=h)throw Error(r(301));if(h+=1,Sn=nn=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}R.H=vf,v=a(i,l)}while(br);return v}function GS(){var n=R.H,a=n.useState()[0];return a=typeof a.then=="function"?Ei(a):a,n=n.useState()[0],(nn!==null?nn.memoizedState:null)!==n&&(kt.flags|=1024),a}function eu(){var n=Rs!==0;return Rs=0,n}function tu(n,a,i){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~i}function nu(n){if(Ps){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ps=!1}Ga=0,Sn=nn=kt=null,br=!1,wi=Rs=0,kr=null}function zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?kt.memoizedState=Sn=n:Sn=Sn.next=n,Sn}function vn(){if(nn===null){var n=kt.alternate;n=n!==null?n.memoizedState:null}else n=nn.next;var a=Sn===null?kt.memoizedState:Sn.next;if(a!==null)Sn=a,nn=n;else{if(n===null)throw kt.alternate===null?Error(r(467)):Error(r(310));nn=n,n={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Sn===null?kt.memoizedState=Sn=n:Sn=Sn.next=n}return Sn}function Ds(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ei(n){var a=wi;return wi+=1,kr===null&&(kr=[]),n=bg(kr,n,a),a=kt,(Sn===null?a.memoizedState:Sn.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?pf:fu),n}function Ns(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ei(n);if(n.$$typeof===N)return Dn(n)}throw Error(r(438,String(n)))}function au(n){var a=null,i=kt.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var l=kt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=Ds(),kt.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(n),l=0;l<n;l++)i[l]=q;return a.index++,i}function Ba(n,a){return typeof a=="function"?a(n):a}function Gs(n){var a=vn();return ou(a,nn,n)}function ou(n,a,i){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=n.baseQueue,v=l.pending;if(v!==null){if(h!==null){var w=h.next;h.next=v.next,v.next=w}a.baseQueue=h=v,l.pending=null}if(v=n.baseState,h===null)n.memoizedState=v;else{a=h.next;var I=w=null,z=null,le=a,fe=!1;do{var ye=le.lane&-536870913;if(ye!==le.lane?(zt&ye)===ye:(Ga&ye)===ye){var ce=le.revertLane;if(ce===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ye===Sr&&(fe=!0);else if((Ga&ce)===ce){le=le.next,ce===Sr&&(fe=!0);continue}else ye={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},z===null?(I=z=ye,w=v):z=z.next=ye,kt.lanes|=ce,go|=ce;ye=le.action,Vo&&i(v,ye),v=le.hasEagerState?le.eagerState:i(v,ye)}else ce={lane:ye,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},z===null?(I=z=ce,w=v):z=z.next=ce,kt.lanes|=ye,go|=ye;le=le.next}while(le!==null&&le!==a);if(z===null?w=v:z.next=I,!Jn(v,n.memoizedState)&&(Cn=!0,fe&&(i=Cr,i!==null)))throw i;n.memoizedState=v,n.baseState=w,n.baseQueue=z,l.lastRenderedState=v}return h===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function ru(n){var a=vn(),i=a.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=n;var l=i.dispatch,h=i.pending,v=a.memoizedState;if(h!==null){i.pending=null;var w=h=h.next;do v=n(v,w.action),w=w.next;while(w!==h);Jn(v,a.memoizedState)||(Cn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),i.lastRenderedState=v}return[v,l]}function _g(n,a,i){var l=kt,h=vn(),v=Kt;if(v){if(i===void 0)throw Error(r(407));i=i()}else i=a();var w=!Jn((nn||h).memoizedState,i);if(w&&(h.memoizedState=i,Cn=!0),h=h.queue,lu(zg.bind(null,l,h,n),[n]),h.getSnapshot!==a||w||Sn!==null&&Sn.memoizedState.tag&1){if(l.flags|=2048,xr(9,{destroy:void 0},Ug.bind(null,l,h,i,a),null),ln===null)throw Error(r(349));v||(Ga&127)!==0||Lg(l,a,i)}return i}function Lg(n,a,i){n.flags|=16384,n={getSnapshot:a,value:i},a=kt.updateQueue,a===null?(a=Ds(),kt.updateQueue=a,a.stores=[n]):(i=a.stores,i===null?a.stores=[n]:i.push(n))}function Ug(n,a,i,l){a.value=i,a.getSnapshot=l,Fg(a)&&Kg(n)}function zg(n,a,i){return i(function(){Fg(a)&&Kg(n)})}function Fg(n){var a=n.getSnapshot;n=n.value;try{var i=a();return!Jn(n,i)}catch{return!0}}function Kg(n){var a=_o(n,2);a!==null&&jn(a,n,2)}function iu(n){var a=zn();if(typeof n=="function"){var i=n;if(n=i(),Vo){fn(!0);try{i()}finally{fn(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:n},a}function Hg(n,a,i,l){return n.baseState=i,ou(n,nn,typeof l=="function"?l:Ba)}function BS(n,a,i,l,h){if(Ls(n))throw Error(r(485));if(n=a.action,n!==null){var v={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){v.listeners.push(w)}};R.T!==null?i(!0):v.isTransition=!1,l(v),i=a.pending,i===null?(v.next=a.pending=v,Qg(a,v)):(v.next=i.next,a.pending=i.next=v)}}function Qg(n,a){var i=a.action,l=a.payload,h=n.state;if(a.isTransition){var v=R.T,w={};R.T=w;try{var I=i(h,l),z=R.S;z!==null&&z(w,I),Og(n,a,I)}catch(le){su(n,a,le)}finally{v!==null&&w.types!==null&&(v.types=w.types),R.T=v}}else try{v=i(h,l),Og(n,a,v)}catch(le){su(n,a,le)}}function Og(n,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Vg(n,a,l)},function(l){return su(n,a,l)}):Vg(n,a,i)}function Vg(n,a,i){a.status="fulfilled",a.value=i,qg(a),n.state=i,a=n.pending,a!==null&&(i=a.next,i===a?n.pending=null:(i=i.next,a.next=i,Qg(n,i)))}function su(n,a,i){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=i,qg(a),a=a.next;while(a!==l)}n.action=null}function qg(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Yg(n,a){return a}function jg(n,a){if(Kt){var i=ln.formState;if(i!==null){e:{var l=kt;if(Kt){if(un){t:{for(var h=un,v=ia;h.nodeType!==8;){if(!v){h=null;break t}if(h=la(h.nextSibling),h===null){h=null;break t}}v=h.data,h=v==="F!"||v==="F"?h:null}if(h){un=la(h.nextSibling),l=h.data==="F!";break e}}ao(l)}l=!1}l&&(a=i[0])}}return i=zn(),i.memoizedState=i.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:a},i.queue=l,i=ff.bind(null,kt,l),l.dispatch=i,l=iu(!1),v=gu.bind(null,kt,!1,l.queue),l=zn(),h={state:a,dispatch:null,action:n,pending:null},l.queue=h,i=BS.bind(null,kt,h,v,i),h.dispatch=i,l.memoizedState=n,[a,i,!1]}function Jg(n){var a=vn();return Xg(a,nn,n)}function Xg(n,a,i){if(a=ou(n,a,Yg)[0],n=Gs(Ba)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Ei(a)}catch(w){throw w===Tr?Es:w}else l=a;a=vn();var h=a.queue,v=h.dispatch;return i!==a.memoizedState&&(kt.flags|=2048,xr(9,{destroy:void 0},_S.bind(null,h,i),null)),[l,v,n]}function _S(n,a){n.action=a}function Wg(n){var a=vn(),i=nn;if(i!==null)return Xg(a,i,n);vn(),a=a.memoizedState,i=vn();var l=i.queue.dispatch;return i.memoizedState=n,[a,l,!1]}function xr(n,a,i,l){return n={tag:n,create:i,deps:l,inst:a,next:null},a=kt.updateQueue,a===null&&(a=Ds(),kt.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=n.next=n:(l=i.next,i.next=n,n.next=l,a.lastEffect=n),n}function Zg(){return vn().memoizedState}function Bs(n,a,i,l){var h=zn();kt.flags|=n,h.memoizedState=xr(1|a,{destroy:void 0},i,l===void 0?null:l)}function _s(n,a,i,l){var h=vn();l=l===void 0?null:l;var v=h.memoizedState.inst;nn!==null&&l!==null&&Zc(l,nn.memoizedState.deps)?h.memoizedState=xr(a,v,i,l):(kt.flags|=n,h.memoizedState=xr(1|a,v,i,l))}function $g(n,a){Bs(8390656,8,n,a)}function lu(n,a){_s(2048,8,n,a)}function LS(n){kt.flags|=4;var a=kt.updateQueue;if(a===null)a=Ds(),kt.updateQueue=a,a.events=[n];else{var i=a.events;i===null?a.events=[n]:i.push(n)}}function ef(n){var a=vn().memoizedState;return LS({ref:a,nextImpl:n}),function(){if((qt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function tf(n,a){return _s(4,2,n,a)}function nf(n,a){return _s(4,4,n,a)}function af(n,a){if(typeof a=="function"){n=n();var i=a(n);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function of(n,a,i){i=i!=null?i.concat([n]):null,_s(4,4,af.bind(null,a,n),i)}function cu(){}function rf(n,a){var i=vn();a=a===void 0?null:a;var l=i.memoizedState;return a!==null&&Zc(a,l[1])?l[0]:(i.memoizedState=[n,a],n)}function sf(n,a){var i=vn();a=a===void 0?null:a;var l=i.memoizedState;if(a!==null&&Zc(a,l[1]))return l[0];if(l=n(),Vo){fn(!0);try{n()}finally{fn(!1)}}return i.memoizedState=[l,a],l}function uu(n,a,i){return i===void 0||(Ga&1073741824)!==0&&(zt&261930)===0?n.memoizedState=a:(n.memoizedState=i,n=lh(),kt.lanes|=n,go|=n,i)}function lf(n,a,i,l){return Jn(i,a)?i:Er.current!==null?(n=uu(n,i,l),Jn(n,a)||(Cn=!0),n):(Ga&42)===0||(Ga&1073741824)!==0&&(zt&261930)===0?(Cn=!0,n.memoizedState=i):(n=lh(),kt.lanes|=n,go|=n,a)}function cf(n,a,i,l,h){var v=K.p;K.p=v!==0&&8>v?v:8;var w=R.T,I={};R.T=I,gu(n,!1,a,i);try{var z=h(),le=R.S;if(le!==null&&le(I,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var fe=DS(z,l);bi(n,a,fe,ta(n))}else bi(n,a,l,ta(n))}catch(ye){bi(n,a,{then:function(){},status:"rejected",reason:ye},ta())}finally{K.p=v,w!==null&&I.types!==null&&(w.types=I.types),R.T=w}}function US(){}function Au(n,a,i,l){if(n.tag!==5)throw Error(r(476));var h=uf(n).queue;cf(n,h,a,V,i===null?US:function(){return Af(n),i(l)})}function uf(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:V},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:i},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Af(n){var a=uf(n);a.next===null&&(a=n.alternate.memoizedState),bi(n,a.next.queue,{},ta())}function du(){return Dn(Hi)}function df(){return vn().memoizedState}function gf(){return vn().memoizedState}function zS(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var i=ta();n=io(i);var l=so(a,n,i);l!==null&&(jn(l,a,i),Si(l,a,i)),a={cache:Kc()},n.payload=a;return}a=a.return}}function FS(n,a,i){var l=ta();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ls(n)?hf(a,i):(i=Pc(n,a,i,l),i!==null&&(jn(i,n,l),mf(i,a,l)))}function ff(n,a,i){var l=ta();bi(n,a,i,l)}function bi(n,a,i,l){var h={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ls(n))hf(a,h);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var w=a.lastRenderedState,I=v(w,i);if(h.hasEagerState=!0,h.eagerState=I,Jn(I,w))return ps(n,a,h,0),ln===null&&ms(),!1}catch{}if(i=Pc(n,a,h,l),i!==null)return jn(i,n,l),mf(i,a,l),!0}return!1}function gu(n,a,i,l){if(l={lane:2,revertLane:Vu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ls(n)){if(a)throw Error(r(479))}else a=Pc(n,i,l,2),a!==null&&jn(a,n,2)}function Ls(n){var a=n.alternate;return n===kt||a!==null&&a===kt}function hf(n,a){br=Ps=!0;var i=n.pending;i===null?a.next=a:(a.next=i.next,i.next=a),n.pending=a}function mf(n,a,i){if((i&4194048)!==0){var l=a.lanes;l&=n.pendingLanes,i|=l,a.lanes=i,st(n,i)}}var ki={readContext:Dn,use:Ns,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};ki.useEffectEvent=hn;var pf={readContext:Dn,use:Ns,useCallback:function(n,a){return zn().memoizedState=[n,a===void 0?null:a],n},useContext:Dn,useEffect:$g,useImperativeHandle:function(n,a,i){i=i!=null?i.concat([n]):null,Bs(4194308,4,af.bind(null,a,n),i)},useLayoutEffect:function(n,a){return Bs(4194308,4,n,a)},useInsertionEffect:function(n,a){Bs(4,2,n,a)},useMemo:function(n,a){var i=zn();a=a===void 0?null:a;var l=n();if(Vo){fn(!0);try{n()}finally{fn(!1)}}return i.memoizedState=[l,a],l},useReducer:function(n,a,i){var l=zn();if(i!==void 0){var h=i(a);if(Vo){fn(!0);try{i(a)}finally{fn(!1)}}}else h=a;return l.memoizedState=l.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},l.queue=n,n=n.dispatch=FS.bind(null,kt,n),[l.memoizedState,n]},useRef:function(n){var a=zn();return n={current:n},a.memoizedState=n},useState:function(n){n=iu(n);var a=n.queue,i=ff.bind(null,kt,a);return a.dispatch=i,[n.memoizedState,i]},useDebugValue:cu,useDeferredValue:function(n,a){var i=zn();return uu(i,n,a)},useTransition:function(){var n=iu(!1);return n=cf.bind(null,kt,n.queue,!0,!1),zn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,i){var l=kt,h=zn();if(Kt){if(i===void 0)throw Error(r(407));i=i()}else{if(i=a(),ln===null)throw Error(r(349));(zt&127)!==0||Lg(l,a,i)}h.memoizedState=i;var v={value:i,getSnapshot:a};return h.queue=v,$g(zg.bind(null,l,v,n),[n]),l.flags|=2048,xr(9,{destroy:void 0},Ug.bind(null,l,v,i,a),null),i},useId:function(){var n=zn(),a=ln.identifierPrefix;if(Kt){var i=Ea,l=wa;i=(l&~(1<<32-oe(l)-1)).toString(32)+i,a="_"+a+"R_"+i,i=Rs++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=NS++,a="_"+a+"r_"+i.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:du,useFormState:jg,useActionState:jg,useOptimistic:function(n){var a=zn();a.memoizedState=a.baseState=n;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=gu.bind(null,kt,!0,i),i.dispatch=a,[n,a]},useMemoCache:au,useCacheRefresh:function(){return zn().memoizedState=zS.bind(null,kt)},useEffectEvent:function(n){var a=zn(),i={impl:n};return a.memoizedState=i,function(){if((qt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},fu={readContext:Dn,use:Ns,useCallback:rf,useContext:Dn,useEffect:lu,useImperativeHandle:of,useInsertionEffect:tf,useLayoutEffect:nf,useMemo:sf,useReducer:Gs,useRef:Zg,useState:function(){return Gs(Ba)},useDebugValue:cu,useDeferredValue:function(n,a){var i=vn();return lf(i,nn.memoizedState,n,a)},useTransition:function(){var n=Gs(Ba)[0],a=vn().memoizedState;return[typeof n=="boolean"?n:Ei(n),a]},useSyncExternalStore:_g,useId:df,useHostTransitionStatus:du,useFormState:Jg,useActionState:Jg,useOptimistic:function(n,a){var i=vn();return Hg(i,nn,n,a)},useMemoCache:au,useCacheRefresh:gf};fu.useEffectEvent=ef;var vf={readContext:Dn,use:Ns,useCallback:rf,useContext:Dn,useEffect:lu,useImperativeHandle:of,useInsertionEffect:tf,useLayoutEffect:nf,useMemo:sf,useReducer:ru,useRef:Zg,useState:function(){return ru(Ba)},useDebugValue:cu,useDeferredValue:function(n,a){var i=vn();return nn===null?uu(i,n,a):lf(i,nn.memoizedState,n,a)},useTransition:function(){var n=ru(Ba)[0],a=vn().memoizedState;return[typeof n=="boolean"?n:Ei(n),a]},useSyncExternalStore:_g,useId:df,useHostTransitionStatus:du,useFormState:Wg,useActionState:Wg,useOptimistic:function(n,a){var i=vn();return nn!==null?Hg(i,nn,n,a):(i.baseState=n,[n,i.queue.dispatch])},useMemoCache:au,useCacheRefresh:gf};vf.useEffectEvent=ef;function hu(n,a,i,l){a=n.memoizedState,i=i(l,a),i=i==null?a:y({},a,i),n.memoizedState=i,n.lanes===0&&(n.updateQueue.baseState=i)}var mu={enqueueSetState:function(n,a,i){n=n._reactInternals;var l=ta(),h=io(l);h.payload=a,i!=null&&(h.callback=i),a=so(n,h,l),a!==null&&(jn(a,n,l),Si(a,n,l))},enqueueReplaceState:function(n,a,i){n=n._reactInternals;var l=ta(),h=io(l);h.tag=1,h.payload=a,i!=null&&(h.callback=i),a=so(n,h,l),a!==null&&(jn(a,n,l),Si(a,n,l))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var i=ta(),l=io(i);l.tag=2,a!=null&&(l.callback=a),a=so(n,l,i),a!==null&&(jn(a,n,i),Si(a,n,i))}};function yf(n,a,i,l,h,v,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,v,w):a.prototype&&a.prototype.isPureReactComponent?!di(i,l)||!di(h,v):!0}function Sf(n,a,i,l){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,l),a.state!==n&&mu.enqueueReplaceState(a,a.state,null)}function qo(n,a){var i=a;if("ref"in a){i={};for(var l in a)l!=="ref"&&(i[l]=a[l])}if(n=n.defaultProps){i===a&&(i=y({},i));for(var h in n)i[h]===void 0&&(i[h]=n[h])}return i}function Cf(n){hs(n)}function Tf(n){console.error(n)}function wf(n){hs(n)}function Us(n,a){try{var i=n.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Ef(n,a,i){try{var l=n.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function pu(n,a,i){return i=io(i),i.tag=3,i.payload={element:null},i.callback=function(){Us(n,a)},i}function bf(n){return n=io(n),n.tag=3,n}function kf(n,a,i,l){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var v=l.value;n.payload=function(){return h(v)},n.callback=function(){Ef(a,i,l)}}var w=i.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){Ef(a,i,l),typeof h!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var I=l.stack;this.componentDidCatch(l.value,{componentStack:I!==null?I:""})})}function KS(n,a,i,l,h){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=i.alternate,a!==null&&yr(a,i,h,!0),i=Wn.current,i!==null){switch(i.tag){case 31:case 13:return sa===null?Xs():i.alternate===null&&mn===0&&(mn=3),i.flags&=-257,i.flags|=65536,i.lanes=h,l===bs?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([l]):a.add(l),Hu(n,l,h)),!1;case 22:return i.flags|=65536,l===bs?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([l]):i.add(l)),Hu(n,l,h)),!1}throw Error(r(435,i.tag))}return Hu(n,l,h),Xs(),!1}if(Kt)return a=Wn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,l!==_c&&(n=Error(r(422),{cause:l}),hi(aa(n,i)))):(l!==_c&&(a=Error(r(423),{cause:l}),hi(aa(a,i))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,l=aa(l,i),h=pu(n.stateNode,l,h),Yc(n,h),mn!==4&&(mn=2)),!1;var v=Error(r(520),{cause:l});if(v=aa(v,i),Gi===null?Gi=[v]:Gi.push(v),mn!==4&&(mn=2),a===null)return!0;l=aa(l,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,n=h&-h,i.lanes|=n,n=pu(i.stateNode,l,n),Yc(i,n),!1;case 1:if(a=i.type,v=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fo===null||!fo.has(v))))return i.flags|=65536,h&=-h,i.lanes|=h,h=bf(h),kf(h,n,i,l),Yc(i,h),!1}i=i.return}while(i!==null);return!1}var vu=Error(r(461)),Cn=!1;function Nn(n,a,i,l){a.child=n===null?Mg(a,null,i,l):Oo(a,n.child,i,l)}function xf(n,a,i,l,h){i=i.render;var v=a.ref;if("ref"in l){var w={};for(var I in l)I!=="ref"&&(w[I]=l[I])}else w=l;return Fo(a),l=$c(n,a,i,w,v,h),I=eu(),n!==null&&!Cn?(tu(n,a,h),_a(n,a,h)):(Kt&&I&&Gc(a),a.flags|=1,Nn(n,a,l,h),a.child)}function If(n,a,i,l,h){if(n===null){var v=i.type;return typeof v=="function"&&!Rc(v)&&v.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=v,Mf(n,a,v,l,h)):(n=ys(i.type,null,l,a,a.mode,h),n.ref=a.ref,n.return=a,a.child=n)}if(v=n.child,!ku(n,h)){var w=v.memoizedProps;if(i=i.compare,i=i!==null?i:di,i(w,l)&&n.ref===a.ref)return _a(n,a,h)}return a.flags|=1,n=Pa(v,l),n.ref=a.ref,n.return=a,a.child=n}function Mf(n,a,i,l,h){if(n!==null){var v=n.memoizedProps;if(di(v,l)&&n.ref===a.ref)if(Cn=!1,a.pendingProps=l=v,ku(n,h))(n.flags&131072)!==0&&(Cn=!0);else return a.lanes=n.lanes,_a(n,a,h)}return yu(n,a,i,l,h)}function Pf(n,a,i,l){var h=l.children,v=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|i:i,n!==null){for(l=a.child=n.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~v}else l=0,a.child=null;return Rf(n,a,v,i,l)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&ws(a,v!==null?v.cachePool:null),v!==null?Dg(a,v):Jc(),Ng(a);else return l=a.lanes=536870912,Rf(n,a,v!==null?v.baseLanes|i:i,i,l)}else v!==null?(ws(a,v.cachePool),Dg(a,v),co(),a.memoizedState=null):(n!==null&&ws(a,null),Jc(),co());return Nn(n,a,h,i),a.child}function xi(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Rf(n,a,i,l,h){var v=Qc();return v=v===null?null:{parent:yn._currentValue,pool:v},a.memoizedState={baseLanes:i,cachePool:v},n!==null&&ws(a,null),Jc(),Ng(a),n!==null&&yr(n,a,l,!0),a.childLanes=h,null}function zs(n,a){return a=Ks({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function Df(n,a,i){return Oo(a,n.child,null,i),n=zs(a,a.pendingProps),n.flags|=2,Zn(a),a.memoizedState=null,n}function HS(n,a,i){var l=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(Kt){if(l.mode==="hidden")return n=zs(a,l),a.lanes=536870912,xi(null,n);if(Wc(a),(n=un)?(n=Oh(n,ia),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:to!==null?{id:wa,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},i=fg(n),i.return=a,a.child=i,Rn=a,un=null)):n=null,n===null)throw ao(a);return a.lanes=536870912,null}return zs(a,l)}var v=n.memoizedState;if(v!==null){var w=v.dehydrated;if(Wc(a),h)if(a.flags&256)a.flags&=-257,a=Df(n,a,i);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(r(558));else if(Cn||yr(n,a,i,!1),h=(i&n.childLanes)!==0,Cn||h){if(l=ln,l!==null&&(w=vt(l,i),w!==0&&w!==v.retryLane))throw v.retryLane=w,_o(n,w),jn(l,n,w),vu;Xs(),a=Df(n,a,i)}else n=v.treeContext,un=la(w.nextSibling),Rn=a,Kt=!0,no=null,ia=!1,n!==null&&pg(a,n),a=zs(a,l),a.flags|=4096;return a}return n=Pa(n.child,{mode:l.mode,children:l.children}),n.ref=a.ref,a.child=n,n.return=a,n}function Fs(n,a){var i=a.ref;if(i===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(n===null||n.ref!==i)&&(a.flags|=4194816)}}function yu(n,a,i,l,h){return Fo(a),i=$c(n,a,i,l,void 0,h),l=eu(),n!==null&&!Cn?(tu(n,a,h),_a(n,a,h)):(Kt&&l&&Gc(a),a.flags|=1,Nn(n,a,i,h),a.child)}function Nf(n,a,i,l,h,v){return Fo(a),a.updateQueue=null,i=Bg(a,l,i,h),Gg(n),l=eu(),n!==null&&!Cn?(tu(n,a,v),_a(n,a,v)):(Kt&&l&&Gc(a),a.flags|=1,Nn(n,a,i,v),a.child)}function Gf(n,a,i,l,h){if(Fo(a),a.stateNode===null){var v=hr,w=i.contextType;typeof w=="object"&&w!==null&&(v=Dn(w)),v=new i(l,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=mu,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=l,v.state=a.memoizedState,v.refs={},Vc(a),w=i.contextType,v.context=typeof w=="object"&&w!==null?Dn(w):hr,v.state=a.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(hu(a,i,w,l),v.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(w=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),w!==v.state&&mu.enqueueReplaceState(v,v.state,null),Ti(a,l,v,h),Ci(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(n===null){v=a.stateNode;var I=a.memoizedProps,z=qo(i,I);v.props=z;var le=v.context,fe=i.contextType;w=hr,typeof fe=="object"&&fe!==null&&(w=Dn(fe));var ye=i.getDerivedStateFromProps;fe=typeof ye=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,fe||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||le!==w)&&Sf(a,v,l,w),ro=!1;var ce=a.memoizedState;v.state=ce,Ti(a,l,v,h),Ci(),le=a.memoizedState,I||ce!==le||ro?(typeof ye=="function"&&(hu(a,i,ye,l),le=a.memoizedState),(z=ro||yf(a,i,z,l,ce,le,w))?(fe||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=le),v.props=l,v.state=le,v.context=w,l=z):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{v=a.stateNode,qc(n,a),w=a.memoizedProps,fe=qo(i,w),v.props=fe,ye=a.pendingProps,ce=v.context,le=i.contextType,z=hr,typeof le=="object"&&le!==null&&(z=Dn(le)),I=i.getDerivedStateFromProps,(le=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==ye||ce!==z)&&Sf(a,v,l,z),ro=!1,ce=a.memoizedState,v.state=ce,Ti(a,l,v,h),Ci();var de=a.memoizedState;w!==ye||ce!==de||ro||n!==null&&n.dependencies!==null&&Cs(n.dependencies)?(typeof I=="function"&&(hu(a,i,I,l),de=a.memoizedState),(fe=ro||yf(a,i,fe,l,ce,de,z)||n!==null&&n.dependencies!==null&&Cs(n.dependencies))?(le||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(l,de,z),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(l,de,z)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===n.memoizedProps&&ce===n.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ce===n.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=de),v.props=l,v.state=de,v.context=z,l=fe):(typeof v.componentDidUpdate!="function"||w===n.memoizedProps&&ce===n.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ce===n.memoizedState||(a.flags|=1024),l=!1)}return v=l,Fs(n,a),l=(a.flags&128)!==0,v||l?(v=a.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,n!==null&&l?(a.child=Oo(a,n.child,null,h),a.child=Oo(a,null,i,h)):Nn(n,a,i,h),a.memoizedState=v.state,n=a.child):n=_a(n,a,h),n}function Bf(n,a,i,l){return Uo(),a.flags|=256,Nn(n,a,i,l),a.child}var Su={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cu(n){return{baseLanes:n,cachePool:wg()}}function Tu(n,a,i){return n=n!==null?n.childLanes&~i:0,a&&(n|=ea),n}function _f(n,a,i){var l=a.pendingProps,h=!1,v=(a.flags&128)!==0,w;if((w=v)||(w=n!==null&&n.memoizedState===null?!1:(pn.current&2)!==0),w&&(h=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,n===null){if(Kt){if(h?lo(a):co(),(n=un)?(n=Oh(n,ia),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:to!==null?{id:wa,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},i=fg(n),i.return=a,a.child=i,Rn=a,un=null)):n=null,n===null)throw ao(a);return oA(n)?a.lanes=32:a.lanes=536870912,null}var I=l.children;return l=l.fallback,h?(co(),h=a.mode,I=Ks({mode:"hidden",children:I},h),l=Lo(l,h,i,null),I.return=a,l.return=a,I.sibling=l,a.child=I,l=a.child,l.memoizedState=Cu(i),l.childLanes=Tu(n,w,i),a.memoizedState=Su,xi(null,l)):(lo(a),wu(a,I))}var z=n.memoizedState;if(z!==null&&(I=z.dehydrated,I!==null)){if(v)a.flags&256?(lo(a),a.flags&=-257,a=Eu(n,a,i)):a.memoizedState!==null?(co(),a.child=n.child,a.flags|=128,a=null):(co(),I=l.fallback,h=a.mode,l=Ks({mode:"visible",children:l.children},h),I=Lo(I,h,i,null),I.flags|=2,l.return=a,I.return=a,l.sibling=I,a.child=l,Oo(a,n.child,null,i),l=a.child,l.memoizedState=Cu(i),l.childLanes=Tu(n,w,i),a.memoizedState=Su,a=xi(null,l));else if(lo(a),oA(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var le=w.dgst;w=le,l=Error(r(419)),l.stack="",l.digest=w,hi({value:l,source:null,stack:null}),a=Eu(n,a,i)}else if(Cn||yr(n,a,i,!1),w=(i&n.childLanes)!==0,Cn||w){if(w=ln,w!==null&&(l=vt(w,i),l!==0&&l!==z.retryLane))throw z.retryLane=l,_o(n,l),jn(w,n,l),vu;aA(I)||Xs(),a=Eu(n,a,i)}else aA(I)?(a.flags|=192,a.child=n.child,a=null):(n=z.treeContext,un=la(I.nextSibling),Rn=a,Kt=!0,no=null,ia=!1,n!==null&&pg(a,n),a=wu(a,l.children),a.flags|=4096);return a}return h?(co(),I=l.fallback,h=a.mode,z=n.child,le=z.sibling,l=Pa(z,{mode:"hidden",children:l.children}),l.subtreeFlags=z.subtreeFlags&65011712,le!==null?I=Pa(le,I):(I=Lo(I,h,i,null),I.flags|=2),I.return=a,l.return=a,l.sibling=I,a.child=l,xi(null,l),l=a.child,I=n.child.memoizedState,I===null?I=Cu(i):(h=I.cachePool,h!==null?(z=yn._currentValue,h=h.parent!==z?{parent:z,pool:z}:h):h=wg(),I={baseLanes:I.baseLanes|i,cachePool:h}),l.memoizedState=I,l.childLanes=Tu(n,w,i),a.memoizedState=Su,xi(n.child,l)):(lo(a),i=n.child,n=i.sibling,i=Pa(i,{mode:"visible",children:l.children}),i.return=a,i.sibling=null,n!==null&&(w=a.deletions,w===null?(a.deletions=[n],a.flags|=16):w.push(n)),a.child=i,a.memoizedState=null,i)}function wu(n,a){return a=Ks({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Ks(n,a){return n=Xn(22,n,null,a),n.lanes=0,n}function Eu(n,a,i){return Oo(a,n.child,null,i),n=wu(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Lf(n,a,i){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a),zc(n.return,a,i)}function bu(n,a,i,l,h,v){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:h,treeForkCount:v}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=l,w.tail=i,w.tailMode=h,w.treeForkCount=v)}function Uf(n,a,i){var l=a.pendingProps,h=l.revealOrder,v=l.tail;l=l.children;var w=pn.current,I=(w&2)!==0;if(I?(w=w&1|2,a.flags|=128):w&=1,te(pn,w),Nn(n,a,l,i),l=Kt?fi:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Lf(n,i,a);else if(n.tag===19)Lf(n,i,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(i=a.child,h=null;i!==null;)n=i.alternate,n!==null&&Ms(n)===null&&(h=i),i=i.sibling;i=h,i===null?(h=a.child,a.child=null):(h=i.sibling,i.sibling=null),bu(a,!1,h,i,v,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,h=a.child,a.child=null;h!==null;){if(n=h.alternate,n!==null&&Ms(n)===null){a.child=h;break}n=h.sibling,h.sibling=i,i=h,h=n}bu(a,!0,i,null,v,l);break;case"together":bu(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function _a(n,a,i){if(n!==null&&(a.dependencies=n.dependencies),go|=a.lanes,(i&a.childLanes)===0)if(n!==null){if(yr(n,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(r(153));if(a.child!==null){for(n=a.child,i=Pa(n,n.pendingProps),a.child=i,i.return=a;n.sibling!==null;)n=n.sibling,i=i.sibling=Pa(n,n.pendingProps),i.return=a;i.sibling=null}return a.child}function ku(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&Cs(n)))}function QS(n,a,i){switch(a.tag){case 3:Ve(a,a.stateNode.containerInfo),oo(a,yn,n.memoizedState.cache),Uo();break;case 27:case 5:Ne(a);break;case 4:Ve(a,a.stateNode.containerInfo);break;case 10:oo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Wc(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(lo(a),a.flags|=128,null):(i&a.child.childLanes)!==0?_f(n,a,i):(lo(a),n=_a(n,a,i),n!==null?n.sibling:null);lo(a);break;case 19:var h=(n.flags&128)!==0;if(l=(i&a.childLanes)!==0,l||(yr(n,a,i,!1),l=(i&a.childLanes)!==0),h){if(l)return Uf(n,a,i);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),te(pn,pn.current),l)break;return null;case 22:return a.lanes=0,Pf(n,a,i,a.pendingProps);case 24:oo(a,yn,n.memoizedState.cache)}return _a(n,a,i)}function zf(n,a,i){if(n!==null)if(n.memoizedProps!==a.pendingProps)Cn=!0;else{if(!ku(n,i)&&(a.flags&128)===0)return Cn=!1,QS(n,a,i);Cn=(n.flags&131072)!==0}else Cn=!1,Kt&&(a.flags&1048576)!==0&&mg(a,fi,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(n=Ho(a.elementType),a.type=n,typeof n=="function")Rc(n)?(l=qo(n,l),a.tag=1,a=Gf(null,a,n,l,i)):(a.tag=0,a=yu(null,a,n,l,i));else{if(n!=null){var h=n.$$typeof;if(h===j){a.tag=11,a=xf(null,a,n,l,i);break e}else if(h===P){a.tag=14,a=If(null,a,n,l,i);break e}}throw a=X(n)||n,Error(r(306,a,""))}}return a;case 0:return yu(n,a,a.type,a.pendingProps,i);case 1:return l=a.type,h=qo(l,a.pendingProps),Gf(n,a,l,h,i);case 3:e:{if(Ve(a,a.stateNode.containerInfo),n===null)throw Error(r(387));l=a.pendingProps;var v=a.memoizedState;h=v.element,qc(n,a),Ti(a,l,null,i);var w=a.memoizedState;if(l=w.cache,oo(a,yn,l),l!==v.cache&&Fc(a,[yn],i,!0),Ci(),l=w.element,v.isDehydrated)if(v={element:l,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=Bf(n,a,l,i);break e}else if(l!==h){h=aa(Error(r(424)),a),hi(h),a=Bf(n,a,l,i);break e}else for(n=a.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,un=la(n.firstChild),Rn=a,Kt=!0,no=null,ia=!0,i=Mg(a,null,l,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Uo(),l===h){a=_a(n,a,i);break e}Nn(n,a,l,i)}a=a.child}return a;case 26:return Fs(n,a),n===null?(i=Xh(a.type,null,a.pendingProps,null))?a.memoizedState=i:Kt||(i=a.type,n=a.pendingProps,l=al(ve.current).createElement(i),l[Le]=a,l[Qe]=n,Gn(l,i,n),$(l),a.stateNode=l):a.memoizedState=Xh(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Ne(a),n===null&&Kt&&(l=a.stateNode=Yh(a.type,a.pendingProps,ve.current),Rn=a,ia=!0,h=un,vo(a.type)?(rA=h,un=la(l.firstChild)):un=h),Nn(n,a,a.pendingProps.children,i),Fs(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&Kt&&((h=l=un)&&(l=yC(l,a.type,a.pendingProps,ia),l!==null?(a.stateNode=l,Rn=a,un=la(l.firstChild),ia=!1,h=!0):h=!1),h||ao(a)),Ne(a),h=a.type,v=a.pendingProps,w=n!==null?n.memoizedProps:null,l=v.children,eA(h,v)?l=null:w!==null&&eA(h,w)&&(a.flags|=32),a.memoizedState!==null&&(h=$c(n,a,GS,null,null,i),Hi._currentValue=h),Fs(n,a),Nn(n,a,l,i),a.child;case 6:return n===null&&Kt&&((n=i=un)&&(i=SC(i,a.pendingProps,ia),i!==null?(a.stateNode=i,Rn=a,un=null,n=!0):n=!1),n||ao(a)),null;case 13:return _f(n,a,i);case 4:return Ve(a,a.stateNode.containerInfo),l=a.pendingProps,n===null?a.child=Oo(a,null,l,i):Nn(n,a,l,i),a.child;case 11:return xf(n,a,a.type,a.pendingProps,i);case 7:return Nn(n,a,a.pendingProps,i),a.child;case 8:return Nn(n,a,a.pendingProps.children,i),a.child;case 12:return Nn(n,a,a.pendingProps.children,i),a.child;case 10:return l=a.pendingProps,oo(a,a.type,l.value),Nn(n,a,l.children,i),a.child;case 9:return h=a.type._context,l=a.pendingProps.children,Fo(a),h=Dn(h),l=l(h),a.flags|=1,Nn(n,a,l,i),a.child;case 14:return If(n,a,a.type,a.pendingProps,i);case 15:return Mf(n,a,a.type,a.pendingProps,i);case 19:return Uf(n,a,i);case 31:return HS(n,a,i);case 22:return Pf(n,a,i,a.pendingProps);case 24:return Fo(a),l=Dn(yn),n===null?(h=Qc(),h===null&&(h=ln,v=Kc(),h.pooledCache=v,v.refCount++,v!==null&&(h.pooledCacheLanes|=i),h=v),a.memoizedState={parent:l,cache:h},Vc(a),oo(a,yn,h)):((n.lanes&i)!==0&&(qc(n,a),Ti(a,null,null,i),Ci()),h=n.memoizedState,v=a.memoizedState,h.parent!==l?(h={parent:l,cache:l},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),oo(a,yn,l)):(l=v.cache,oo(a,yn,l),l!==h.cache&&Fc(a,[yn],i,!0))),Nn(n,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function La(n){n.flags|=4}function xu(n,a,i,l,h){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(dh())n.flags|=8192;else throw Qo=bs,Oc}else n.flags&=-16777217}function Ff(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!tm(a))if(dh())n.flags|=8192;else throw Qo=bs,Oc}function Hs(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Ke():536870912,n.lanes|=a,Rr|=a)}function Ii(n,a){if(!Kt)switch(n.tailMode){case"hidden":a=n.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?n.tail=null:i.sibling=null;break;case"collapsed":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function An(n){var a=n.alternate!==null&&n.alternate.child===n.child,i=0,l=0;if(a)for(var h=n.child;h!==null;)i|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)i|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=l,n.childLanes=i,a}function OS(n,a,i){var l=a.pendingProps;switch(Bc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(a),null;case 1:return An(a),null;case 3:return i=a.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Na(yn),ae(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(vr(a)?La(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Lc())),An(a),null;case 26:var h=a.type,v=a.memoizedState;return n===null?(La(a),v!==null?(An(a),Ff(a,v)):(An(a),xu(a,h,null,l,i))):v?v!==n.memoizedState?(La(a),An(a),Ff(a,v)):(An(a),a.flags&=-16777217):(n=n.memoizedProps,n!==l&&La(a),An(a),xu(a,h,n,l,i)),null;case 27:if(nt(a),i=ve.current,h=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==l&&La(a);else{if(!l){if(a.stateNode===null)throw Error(r(166));return An(a),null}n=se.current,vr(a)?vg(a):(n=Yh(h,l,i),a.stateNode=n,La(a))}return An(a),null;case 5:if(nt(a),h=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==l&&La(a);else{if(!l){if(a.stateNode===null)throw Error(r(166));return An(a),null}if(v=se.current,vr(a))vg(a);else{var w=al(ve.current);switch(v){case 1:v=w.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:v=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":v=w.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":v=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":v=w.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof l.is=="string"?w.createElement("select",{is:l.is}):w.createElement("select"),l.multiple?v.multiple=!0:l.size&&(v.size=l.size);break;default:v=typeof l.is=="string"?w.createElement(h,{is:l.is}):w.createElement(h)}}v[Le]=a,v[Qe]=l;e:for(w=a.child;w!==null;){if(w.tag===5||w.tag===6)v.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===a)break e;for(;w.sibling===null;){if(w.return===null||w.return===a)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}a.stateNode=v;e:switch(Gn(v,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&La(a)}}return An(a),xu(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,i),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==l&&La(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(r(166));if(n=ve.current,vr(a)){if(n=a.stateNode,i=a.memoizedProps,l=null,h=Rn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}n[Le]=a,n=!!(n.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||_h(n.nodeValue,i)),n||ao(a,!0)}else n=al(n).createTextNode(l),n[Le]=a,a.stateNode=n}return An(a),null;case 31:if(i=a.memoizedState,n===null||n.memoizedState!==null){if(l=vr(a),i!==null){if(n===null){if(!l)throw Error(r(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Le]=a}else Uo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;An(a),n=!1}else i=Lc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=i),n=!0;if(!n)return a.flags&256?(Zn(a),a):(Zn(a),null);if((a.flags&128)!==0)throw Error(r(558))}return An(a),null;case 13:if(l=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=vr(a),l!==null&&l.dehydrated!==null){if(n===null){if(!h)throw Error(r(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Le]=a}else Uo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;An(a),h=!1}else h=Lc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(Zn(a),a):(Zn(a),null)}return Zn(a),(a.flags&128)!==0?(a.lanes=i,a):(i=l!==null,n=n!==null&&n.memoizedState!==null,i&&(l=a.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==h&&(l.flags|=2048)),i!==n&&i&&(a.child.flags|=8192),Hs(a,a.updateQueue),An(a),null);case 4:return ae(),n===null&&Ju(a.stateNode.containerInfo),An(a),null;case 10:return Na(a.type),An(a),null;case 19:if(D(pn),l=a.memoizedState,l===null)return An(a),null;if(h=(a.flags&128)!==0,v=l.rendering,v===null)if(h)Ii(l,!1);else{if(mn!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(v=Ms(n),v!==null){for(a.flags|=128,Ii(l,!1),n=v.updateQueue,a.updateQueue=n,Hs(a,n),a.subtreeFlags=0,n=i,i=a.child;i!==null;)gg(i,n),i=i.sibling;return te(pn,pn.current&1|2),Kt&&Ra(a,l.treeForkCount),a.child}n=n.sibling}l.tail!==null&&qe()>Ys&&(a.flags|=128,h=!0,Ii(l,!1),a.lanes=4194304)}else{if(!h)if(n=Ms(v),n!==null){if(a.flags|=128,h=!0,n=n.updateQueue,a.updateQueue=n,Hs(a,n),Ii(l,!0),l.tail===null&&l.tailMode==="hidden"&&!v.alternate&&!Kt)return An(a),null}else 2*qe()-l.renderingStartTime>Ys&&i!==536870912&&(a.flags|=128,h=!0,Ii(l,!1),a.lanes=4194304);l.isBackwards?(v.sibling=a.child,a.child=v):(n=l.last,n!==null?n.sibling=v:a.child=v,l.last=v)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=qe(),n.sibling=null,i=pn.current,te(pn,h?i&1|2:i&1),Kt&&Ra(a,l.treeForkCount),n):(An(a),null);case 22:case 23:return Zn(a),Xc(),l=a.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(i&536870912)!==0&&(a.flags&128)===0&&(An(a),a.subtreeFlags&6&&(a.flags|=8192)):An(a),i=a.updateQueue,i!==null&&Hs(a,i.retryQueue),i=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==i&&(a.flags|=2048),n!==null&&D(Ko),null;case 24:return i=null,n!==null&&(i=n.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),Na(yn),An(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function VS(n,a){switch(Bc(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Na(yn),ae(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return nt(a),null;case 31:if(a.memoizedState!==null){if(Zn(a),a.alternate===null)throw Error(r(340));Uo()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(Zn(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Uo()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return D(pn),null;case 4:return ae(),null;case 10:return Na(a.type),null;case 22:case 23:return Zn(a),Xc(),n!==null&&D(Ko),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Na(yn),null;case 25:return null;default:return null}}function Kf(n,a){switch(Bc(a),a.tag){case 3:Na(yn),ae();break;case 26:case 27:case 5:nt(a);break;case 4:ae();break;case 31:a.memoizedState!==null&&Zn(a);break;case 13:Zn(a);break;case 19:D(pn);break;case 10:Na(a.type);break;case 22:case 23:Zn(a),Xc(),n!==null&&D(Ko);break;case 24:Na(yn)}}function Mi(n,a){try{var i=a.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var h=l.next;i=h;do{if((i.tag&n)===n){l=void 0;var v=i.create,w=i.inst;l=v(),w.destroy=l}i=i.next}while(i!==h)}}catch(I){en(a,a.return,I)}}function uo(n,a,i){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var v=h.next;l=v;do{if((l.tag&n)===n){var w=l.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,h=a;var z=i,le=I;try{le()}catch(fe){en(h,z,fe)}}}l=l.next}while(l!==v)}}catch(fe){en(a,a.return,fe)}}function Hf(n){var a=n.updateQueue;if(a!==null){var i=n.stateNode;try{Rg(a,i)}catch(l){en(n,n.return,l)}}}function Qf(n,a,i){i.props=qo(n.type,n.memoizedProps),i.state=n.memoizedState;try{i.componentWillUnmount()}catch(l){en(n,a,l)}}function Pi(n,a){try{var i=n.ref;if(i!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof i=="function"?n.refCleanup=i(l):i.current=l}}catch(h){en(n,a,h)}}function ba(n,a){var i=n.ref,l=n.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(h){en(n,a,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){en(n,a,h)}else i.current=null}function Of(n){var a=n.type,i=n.memoizedProps,l=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(h){en(n,n.return,h)}}function Iu(n,a,i){try{var l=n.stateNode;gC(l,n.type,i,a),l[Qe]=a}catch(h){en(n,n.return,h)}}function Vf(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&vo(n.type)||n.tag===4}function Mu(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Vf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&vo(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pu(n,a,i){var l=n.tag;if(l===5||l===6)n=n.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(n,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(n),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=Ia));else if(l!==4&&(l===27&&vo(n.type)&&(i=n.stateNode,a=null),n=n.child,n!==null))for(Pu(n,a,i),n=n.sibling;n!==null;)Pu(n,a,i),n=n.sibling}function Qs(n,a,i){var l=n.tag;if(l===5||l===6)n=n.stateNode,a?i.insertBefore(n,a):i.appendChild(n);else if(l!==4&&(l===27&&vo(n.type)&&(i=n.stateNode),n=n.child,n!==null))for(Qs(n,a,i),n=n.sibling;n!==null;)Qs(n,a,i),n=n.sibling}function qf(n){var a=n.stateNode,i=n.memoizedProps;try{for(var l=n.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);Gn(a,l,i),a[Le]=n,a[Qe]=i}catch(v){en(n,n.return,v)}}var Ua=!1,Tn=!1,Ru=!1,Yf=typeof WeakSet=="function"?WeakSet:Set,kn=null;function qS(n,a){if(n=n.containerInfo,Zu=ul,n=og(n),Ec(n)){if("selectionStart"in n)var i={start:n.selectionStart,end:n.selectionEnd};else e:{i=(i=n.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var h=l.anchorOffset,v=l.focusNode;l=l.focusOffset;try{i.nodeType,v.nodeType}catch{i=null;break e}var w=0,I=-1,z=-1,le=0,fe=0,ye=n,ce=null;t:for(;;){for(var de;ye!==i||h!==0&&ye.nodeType!==3||(I=w+h),ye!==v||l!==0&&ye.nodeType!==3||(z=w+l),ye.nodeType===3&&(w+=ye.nodeValue.length),(de=ye.firstChild)!==null;)ce=ye,ye=de;for(;;){if(ye===n)break t;if(ce===i&&++le===h&&(I=w),ce===v&&++fe===l&&(z=w),(de=ye.nextSibling)!==null)break;ye=ce,ce=ye.parentNode}ye=de}i=I===-1||z===-1?null:{start:I,end:z}}else i=null}i=i||{start:0,end:0}}else i=null;for($u={focusedElem:n,selectionRange:i},ul=!1,kn=a;kn!==null;)if(a=kn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,kn=n;else for(;kn!==null;){switch(a=kn,v=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(i=0;i<n.length;i++)h=n[i],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,i=a,h=v.memoizedProps,v=v.memoizedState,l=i.stateNode;try{var Xe=qo(i.type,h);n=l.getSnapshotBeforeUpdate(Xe,v),l.__reactInternalSnapshotBeforeUpdate=n}catch(ft){en(i,i.return,ft)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,i=n.nodeType,i===9)nA(n);else if(i===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":nA(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=a.sibling,n!==null){n.return=a.return,kn=n;break}kn=a.return}}function jf(n,a,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Fa(n,i),l&4&&Mi(5,i);break;case 1:if(Fa(n,i),l&4)if(n=i.stateNode,a===null)try{n.componentDidMount()}catch(w){en(i,i.return,w)}else{var h=qo(i.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(h,a,n.__reactInternalSnapshotBeforeUpdate)}catch(w){en(i,i.return,w)}}l&64&&Hf(i),l&512&&Pi(i,i.return);break;case 3:if(Fa(n,i),l&64&&(n=i.updateQueue,n!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{Rg(n,a)}catch(w){en(i,i.return,w)}}break;case 27:a===null&&l&4&&qf(i);case 26:case 5:Fa(n,i),a===null&&l&4&&Of(i),l&512&&Pi(i,i.return);break;case 12:Fa(n,i);break;case 31:Fa(n,i),l&4&&Wf(n,i);break;case 13:Fa(n,i),l&4&&Zf(n,i),l&64&&(n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(i=tC.bind(null,i),CC(n,i))));break;case 22:if(l=i.memoizedState!==null||Ua,!l){a=a!==null&&a.memoizedState!==null||Tn,h=Ua;var v=Tn;Ua=l,(Tn=a)&&!v?Ka(n,i,(i.subtreeFlags&8772)!==0):Fa(n,i),Ua=h,Tn=v}break;case 30:break;default:Fa(n,i)}}function Jf(n){var a=n.alternate;a!==null&&(n.alternate=null,Jf(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&ot(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gn=null,On=!1;function za(n,a,i){for(i=i.child;i!==null;)Xf(n,a,i),i=i.sibling}function Xf(n,a,i){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Ht,i)}catch{}switch(i.tag){case 26:Tn||ba(i,a),za(n,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Tn||ba(i,a);var l=gn,h=On;vo(i.type)&&(gn=i.stateNode,On=!1),za(n,a,i),zi(i.stateNode),gn=l,On=h;break;case 5:Tn||ba(i,a);case 6:if(l=gn,h=On,gn=null,za(n,a,i),gn=l,On=h,gn!==null)if(On)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(i.stateNode)}catch(v){en(i,a,v)}else try{gn.removeChild(i.stateNode)}catch(v){en(i,a,v)}break;case 18:gn!==null&&(On?(n=gn,Hh(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,i.stateNode),zr(n)):Hh(gn,i.stateNode));break;case 4:l=gn,h=On,gn=i.stateNode.containerInfo,On=!0,za(n,a,i),gn=l,On=h;break;case 0:case 11:case 14:case 15:uo(2,i,a),Tn||uo(4,i,a),za(n,a,i);break;case 1:Tn||(ba(i,a),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Qf(i,a,l)),za(n,a,i);break;case 21:za(n,a,i);break;case 22:Tn=(l=Tn)||i.memoizedState!==null,za(n,a,i),Tn=l;break;default:za(n,a,i)}}function Wf(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{zr(n)}catch(i){en(a,a.return,i)}}}function Zf(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{zr(n)}catch(i){en(a,a.return,i)}}function YS(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Yf),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Yf),a;default:throw Error(r(435,n.tag))}}function Os(n,a){var i=YS(n);a.forEach(function(l){if(!i.has(l)){i.add(l);var h=nC.bind(null,n,l);l.then(h,h)}})}function Vn(n,a){var i=a.deletions;if(i!==null)for(var l=0;l<i.length;l++){var h=i[l],v=n,w=a,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(vo(I.type)){gn=I.stateNode,On=!1;break e}break;case 5:gn=I.stateNode,On=!1;break e;case 3:case 4:gn=I.stateNode.containerInfo,On=!0;break e}I=I.return}if(gn===null)throw Error(r(160));Xf(v,w,h),gn=null,On=!1,v=h.alternate,v!==null&&(v.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)$f(a,n),a=a.sibling}var va=null;function $f(n,a){var i=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Vn(a,n),qn(n),l&4&&(uo(3,n,n.return),Mi(3,n),uo(5,n,n.return));break;case 1:Vn(a,n),qn(n),l&512&&(Tn||i===null||ba(i,i.return)),l&64&&Ua&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(i=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var h=va;if(Vn(a,n),qn(n),l&512&&(Tn||i===null||ba(i,i.return)),l&4){var v=i!==null?i.memoizedState:null;if(l=n.memoizedState,i===null)if(l===null)if(n.stateNode===null){e:{l=n.type,i=n.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":v=h.getElementsByTagName("title")[0],(!v||v[sn]||v[Le]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=h.createElement(l),h.head.insertBefore(v,h.querySelector("head > title"))),Gn(v,l,i),v[Le]=n,$(v),l=v;break e;case"link":var w=$h("link","href",h).get(l+(i.href||""));if(w){for(var I=0;I<w.length;I++)if(v=w[I],v.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&v.getAttribute("rel")===(i.rel==null?null:i.rel)&&v.getAttribute("title")===(i.title==null?null:i.title)&&v.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){w.splice(I,1);break t}}v=h.createElement(l),Gn(v,l,i),h.head.appendChild(v);break;case"meta":if(w=$h("meta","content",h).get(l+(i.content||""))){for(I=0;I<w.length;I++)if(v=w[I],v.getAttribute("content")===(i.content==null?null:""+i.content)&&v.getAttribute("name")===(i.name==null?null:i.name)&&v.getAttribute("property")===(i.property==null?null:i.property)&&v.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&v.getAttribute("charset")===(i.charSet==null?null:i.charSet)){w.splice(I,1);break t}}v=h.createElement(l),Gn(v,l,i),h.head.appendChild(v);break;default:throw Error(r(468,l))}v[Le]=n,$(v),l=v}n.stateNode=l}else em(h,n.type,n.stateNode);else n.stateNode=Zh(h,l,n.memoizedProps);else v!==l?(v===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):v.count--,l===null?em(h,n.type,n.stateNode):Zh(h,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Iu(n,n.memoizedProps,i.memoizedProps)}break;case 27:Vn(a,n),qn(n),l&512&&(Tn||i===null||ba(i,i.return)),i!==null&&l&4&&Iu(n,n.memoizedProps,i.memoizedProps);break;case 5:if(Vn(a,n),qn(n),l&512&&(Tn||i===null||ba(i,i.return)),n.flags&32){h=n.stateNode;try{lr(h,"")}catch(Xe){en(n,n.return,Xe)}}l&4&&n.stateNode!=null&&(h=n.memoizedProps,Iu(n,h,i!==null?i.memoizedProps:h)),l&1024&&(Ru=!0);break;case 6:if(Vn(a,n),qn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,i=n.stateNode;try{i.nodeValue=l}catch(Xe){en(n,n.return,Xe)}}break;case 3:if(il=null,h=va,va=ol(a.containerInfo),Vn(a,n),va=h,qn(n),l&4&&i!==null&&i.memoizedState.isDehydrated)try{zr(a.containerInfo)}catch(Xe){en(n,n.return,Xe)}Ru&&(Ru=!1,eh(n));break;case 4:l=va,va=ol(n.stateNode.containerInfo),Vn(a,n),qn(n),va=l;break;case 12:Vn(a,n),qn(n);break;case 31:Vn(a,n),qn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Os(n,l)));break;case 13:Vn(a,n),qn(n),n.child.flags&8192&&n.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(qs=qe()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Os(n,l)));break;case 22:h=n.memoizedState!==null;var z=i!==null&&i.memoizedState!==null,le=Ua,fe=Tn;if(Ua=le||h,Tn=fe||z,Vn(a,n),Tn=fe,Ua=le,qn(n),l&8192)e:for(a=n.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(i===null||z||Ua||Tn||Yo(n)),i=null,a=n;;){if(a.tag===5||a.tag===26){if(i===null){z=i=a;try{if(v=z.stateNode,h)w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=z.stateNode;var ye=z.memoizedProps.style,ce=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;I.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Xe){en(z,z.return,Xe)}}}else if(a.tag===6){if(i===null){z=a;try{z.stateNode.nodeValue=h?"":z.memoizedProps}catch(Xe){en(z,z.return,Xe)}}}else if(a.tag===18){if(i===null){z=a;try{var de=z.stateNode;h?Qh(de,!0):Qh(z.stateNode,!1)}catch(Xe){en(z,z.return,Xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=n.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Os(n,i))));break;case 19:Vn(a,n),qn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Os(n,l)));break;case 30:break;case 21:break;default:Vn(a,n),qn(n)}}function qn(n){var a=n.flags;if(a&2){try{for(var i,l=n.return;l!==null;){if(Vf(l)){i=l;break}l=l.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var h=i.stateNode,v=Mu(n);Qs(n,v,h);break;case 5:var w=i.stateNode;i.flags&32&&(lr(w,""),i.flags&=-33);var I=Mu(n);Qs(n,I,w);break;case 3:case 4:var z=i.stateNode.containerInfo,le=Mu(n);Pu(n,le,z);break;default:throw Error(r(161))}}catch(fe){en(n,n.return,fe)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function eh(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;eh(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Fa(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)jf(n,a.alternate,a),a=a.sibling}function Yo(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:uo(4,a,a.return),Yo(a);break;case 1:ba(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Qf(a,a.return,i),Yo(a);break;case 27:zi(a.stateNode);case 26:case 5:ba(a,a.return),Yo(a);break;case 22:a.memoizedState===null&&Yo(a);break;case 30:Yo(a);break;default:Yo(a)}n=n.sibling}}function Ka(n,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,h=n,v=a,w=v.flags;switch(v.tag){case 0:case 11:case 15:Ka(h,v,i),Mi(4,v);break;case 1:if(Ka(h,v,i),l=v,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(le){en(l,l.return,le)}if(l=v,h=l.updateQueue,h!==null){var I=l.stateNode;try{var z=h.shared.hiddenCallbacks;if(z!==null)for(h.shared.hiddenCallbacks=null,h=0;h<z.length;h++)Pg(z[h],I)}catch(le){en(l,l.return,le)}}i&&w&64&&Hf(v),Pi(v,v.return);break;case 27:qf(v);case 26:case 5:Ka(h,v,i),i&&l===null&&w&4&&Of(v),Pi(v,v.return);break;case 12:Ka(h,v,i);break;case 31:Ka(h,v,i),i&&w&4&&Wf(h,v);break;case 13:Ka(h,v,i),i&&w&4&&Zf(h,v);break;case 22:v.memoizedState===null&&Ka(h,v,i),Pi(v,v.return);break;case 30:break;default:Ka(h,v,i)}a=a.sibling}}function Du(n,a){var i=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==i&&(n!=null&&n.refCount++,i!=null&&mi(i))}function Nu(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&mi(n))}function ya(n,a,i,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)th(n,a,i,l),a=a.sibling}function th(n,a,i,l){var h=a.flags;switch(a.tag){case 0:case 11:case 15:ya(n,a,i,l),h&2048&&Mi(9,a);break;case 1:ya(n,a,i,l);break;case 3:ya(n,a,i,l),h&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&mi(n)));break;case 12:if(h&2048){ya(n,a,i,l),n=a.stateNode;try{var v=a.memoizedProps,w=v.id,I=v.onPostCommit;typeof I=="function"&&I(w,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){en(a,a.return,z)}}else ya(n,a,i,l);break;case 31:ya(n,a,i,l);break;case 13:ya(n,a,i,l);break;case 23:break;case 22:v=a.stateNode,w=a.alternate,a.memoizedState!==null?v._visibility&2?ya(n,a,i,l):Ri(n,a):v._visibility&2?ya(n,a,i,l):(v._visibility|=2,Ir(n,a,i,l,(a.subtreeFlags&10256)!==0||!1)),h&2048&&Du(w,a);break;case 24:ya(n,a,i,l),h&2048&&Nu(a.alternate,a);break;default:ya(n,a,i,l)}}function Ir(n,a,i,l,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=n,w=a,I=i,z=l,le=w.flags;switch(w.tag){case 0:case 11:case 15:Ir(v,w,I,z,h),Mi(8,w);break;case 23:break;case 22:var fe=w.stateNode;w.memoizedState!==null?fe._visibility&2?Ir(v,w,I,z,h):Ri(v,w):(fe._visibility|=2,Ir(v,w,I,z,h)),h&&le&2048&&Du(w.alternate,w);break;case 24:Ir(v,w,I,z,h),h&&le&2048&&Nu(w.alternate,w);break;default:Ir(v,w,I,z,h)}a=a.sibling}}function Ri(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=n,l=a,h=l.flags;switch(l.tag){case 22:Ri(i,l),h&2048&&Du(l.alternate,l);break;case 24:Ri(i,l),h&2048&&Nu(l.alternate,l);break;default:Ri(i,l)}a=a.sibling}}var Di=8192;function Mr(n,a,i){if(n.subtreeFlags&Di)for(n=n.child;n!==null;)nh(n,a,i),n=n.sibling}function nh(n,a,i){switch(n.tag){case 26:Mr(n,a,i),n.flags&Di&&n.memoizedState!==null&&NC(i,va,n.memoizedState,n.memoizedProps);break;case 5:Mr(n,a,i);break;case 3:case 4:var l=va;va=ol(n.stateNode.containerInfo),Mr(n,a,i),va=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Di,Di=16777216,Mr(n,a,i),Di=l):Mr(n,a,i));break;default:Mr(n,a,i)}}function ah(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Ni(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];kn=l,rh(l,n)}ah(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)oh(n),n=n.sibling}function oh(n){switch(n.tag){case 0:case 11:case 15:Ni(n),n.flags&2048&&uo(9,n,n.return);break;case 3:Ni(n);break;case 12:Ni(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Vs(n)):Ni(n);break;default:Ni(n)}}function Vs(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];kn=l,rh(l,n)}ah(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:uo(8,a,a.return),Vs(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,Vs(a));break;default:Vs(a)}n=n.sibling}}function rh(n,a){for(;kn!==null;){var i=kn;switch(i.tag){case 0:case 11:case 15:uo(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:mi(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,kn=l;else e:for(i=n;kn!==null;){l=kn;var h=l.sibling,v=l.return;if(Jf(l),l===i){kn=null;break e}if(h!==null){h.return=v,kn=h;break e}kn=v}}}var jS={getCacheForType:function(n){var a=Dn(yn),i=a.data.get(n);return i===void 0&&(i=n(),a.data.set(n,i)),i},cacheSignal:function(){return Dn(yn).controller.signal}},JS=typeof WeakMap=="function"?WeakMap:Map,qt=0,ln=null,_t=null,zt=0,$t=0,$n=null,Ao=!1,Pr=!1,Gu=!1,Ha=0,mn=0,go=0,jo=0,Bu=0,ea=0,Rr=0,Gi=null,Yn=null,_u=!1,qs=0,ih=0,Ys=1/0,js=null,fo=null,bn=0,ho=null,Dr=null,Qa=0,Lu=0,Uu=null,sh=null,Bi=0,zu=null;function ta(){return(qt&2)!==0&&zt!==0?zt&-zt:R.T!==null?Vu():Ye()}function lh(){if(ea===0)if((zt&536870912)===0||Kt){var n=Dt;Dt<<=1,(Dt&3932160)===0&&(Dt=262144),ea=n}else ea=536870912;return n=Wn.current,n!==null&&(n.flags|=32),ea}function jn(n,a,i){(n===ln&&($t===2||$t===9)||n.cancelPendingCommit!==null)&&(Nr(n,0),mo(n,zt,ea,!1)),Re(n,i),((qt&2)===0||n!==ln)&&(n===ln&&((qt&2)===0&&(jo|=i),mn===4&&mo(n,zt,ea,!1)),ka(n))}function ch(n,a,i){if((qt&6)!==0)throw Error(r(327));var l=!i&&(a&127)===0&&(a&n.expiredLanes)===0||jt(n,a),h=l?ZS(n,a):Ku(n,a,!0),v=l;do{if(h===0){Pr&&!l&&mo(n,a,0,!1);break}else{if(i=n.current.alternate,v&&!XS(i)){h=Ku(n,a,!1),v=!1;continue}if(h===2){if(v=a,n.errorRecoveryDisabledLanes&v)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var I=n;h=Gi;var z=I.current.memoizedState.isDehydrated;if(z&&(Nr(I,w).flags|=256),w=Ku(I,w,!1),w!==2){if(Gu&&!z){I.errorRecoveryDisabledLanes|=v,jo|=v,h=4;break e}v=Yn,Yn=h,v!==null&&(Yn===null?Yn=v:Yn.push.apply(Yn,v))}h=w}if(v=!1,h!==2)continue}}if(h===1){Nr(n,0),mo(n,a,0,!0);break}e:{switch(l=n,v=h,v){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:mo(l,a,ea,!Ao);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(h=qs+300-qe(),10<h)){if(mo(l,a,ea,!Ao),cn(l,0,!0)!==0)break e;Qa=a,l.timeoutHandle=Fh(uh.bind(null,l,i,Yn,js,_u,a,ea,jo,Rr,Ao,v,"Throttled",-0,0),h);break e}uh(l,i,Yn,js,_u,a,ea,jo,Rr,Ao,v,null,-0,0)}}break}while(!0);ka(n)}function uh(n,a,i,l,h,v,w,I,z,le,fe,ye,ce,de){if(n.timeoutHandle=-1,ye=a.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ia},nh(a,v,ye);var Xe=(v&62914560)===v?qs-qe():(v&4194048)===v?ih-qe():0;if(Xe=GC(ye,Xe),Xe!==null){Qa=v,n.cancelPendingCommit=Xe(vh.bind(null,n,a,v,i,l,h,w,I,z,fe,ye,null,ce,de)),mo(n,v,w,!le);return}}vh(n,a,v,i,l,h,w,I,z)}function XS(n){for(var a=n;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var h=i[l],v=h.getSnapshot;h=h.value;try{if(!Jn(v(),h))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function mo(n,a,i,l){a&=~Bu,a&=~jo,n.suspendedLanes|=a,n.pingedLanes&=~a,l&&(n.warmLanes|=a),l=n.expirationTimes;for(var h=a;0<h;){var v=31-oe(h),w=1<<v;l[v]=-1,h&=~w}i!==0&&He(n,i,a)}function Js(){return(qt&6)===0?(_i(0),!1):!0}function Fu(){if(_t!==null){if($t===0)var n=_t.return;else n=_t,Da=zo=null,nu(n),wr=null,vi=0,n=_t;for(;n!==null;)Kf(n.alternate,n),n=n.return;_t=null}}function Nr(n,a){var i=n.timeoutHandle;i!==-1&&(n.timeoutHandle=-1,mC(i)),i=n.cancelPendingCommit,i!==null&&(n.cancelPendingCommit=null,i()),Qa=0,Fu(),ln=n,_t=i=Pa(n.current,null),zt=a,$t=0,$n=null,Ao=!1,Pr=jt(n,a),Gu=!1,Rr=ea=Bu=jo=go=mn=0,Yn=Gi=null,_u=!1,(a&8)!==0&&(a|=a&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=a;0<l;){var h=31-oe(l),v=1<<h;a|=n[h],l&=~v}return Ha=a,ms(),i}function Ah(n,a){kt=null,R.H=ki,a===Tr||a===Es?(a=kg(),$t=3):a===Oc?(a=kg(),$t=4):$t=a===vu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,$n=a,_t===null&&(mn=1,Us(n,aa(a,n.current)))}function dh(){var n=Wn.current;return n===null?!0:(zt&4194048)===zt?sa===null:(zt&62914560)===zt||(zt&536870912)!==0?n===sa:!1}function gh(){var n=R.H;return R.H=ki,n===null?ki:n}function fh(){var n=R.A;return R.A=jS,n}function Xs(){mn=4,Ao||(zt&4194048)!==zt&&Wn.current!==null||(Pr=!0),(go&134217727)===0&&(jo&134217727)===0||ln===null||mo(ln,zt,ea,!1)}function Ku(n,a,i){var l=qt;qt|=2;var h=gh(),v=fh();(ln!==n||zt!==a)&&(js=null,Nr(n,a)),a=!1;var w=mn;e:do try{if($t!==0&&_t!==null){var I=_t,z=$n;switch($t){case 8:Fu(),w=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(a=!0);var le=$t;if($t=0,$n=null,Gr(n,I,z,le),i&&Pr){w=0;break e}break;default:le=$t,$t=0,$n=null,Gr(n,I,z,le)}}WS(),w=mn;break}catch(fe){Ah(n,fe)}while(!0);return a&&n.shellSuspendCounter++,Da=zo=null,qt=l,R.H=h,R.A=v,_t===null&&(ln=null,zt=0,ms()),w}function WS(){for(;_t!==null;)hh(_t)}function ZS(n,a){var i=qt;qt|=2;var l=gh(),h=fh();ln!==n||zt!==a?(js=null,Ys=qe()+500,Nr(n,a)):Pr=jt(n,a);e:do try{if($t!==0&&_t!==null){a=_t;var v=$n;t:switch($t){case 1:$t=0,$n=null,Gr(n,a,v,1);break;case 2:case 9:if(Eg(v)){$t=0,$n=null,mh(a);break}a=function(){$t!==2&&$t!==9||ln!==n||($t=7),ka(n)},v.then(a,a);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:Eg(v)?($t=0,$n=null,mh(a)):($t=0,$n=null,Gr(n,a,v,7));break;case 5:var w=null;switch(_t.tag){case 26:w=_t.memoizedState;case 5:case 27:var I=_t;if(w?tm(w):I.stateNode.complete){$t=0,$n=null;var z=I.sibling;if(z!==null)_t=z;else{var le=I.return;le!==null?(_t=le,Ws(le)):_t=null}break t}}$t=0,$n=null,Gr(n,a,v,5);break;case 6:$t=0,$n=null,Gr(n,a,v,6);break;case 8:Fu(),mn=6;break e;default:throw Error(r(462))}}$S();break}catch(fe){Ah(n,fe)}while(!0);return Da=zo=null,R.H=l,R.A=h,qt=i,_t!==null?0:(ln=null,zt=0,ms(),mn)}function $S(){for(;_t!==null&&!je();)hh(_t)}function hh(n){var a=zf(n.alternate,n,Ha);n.memoizedProps=n.pendingProps,a===null?Ws(n):_t=a}function mh(n){var a=n,i=a.alternate;switch(a.tag){case 15:case 0:a=Nf(i,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=Nf(i,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:nu(a);default:Kf(i,a),a=_t=gg(a,Ha),a=zf(i,a,Ha)}n.memoizedProps=n.pendingProps,a===null?Ws(n):_t=a}function Gr(n,a,i,l){Da=zo=null,nu(a),wr=null,vi=0;var h=a.return;try{if(KS(n,h,a,i,zt)){mn=1,Us(n,aa(i,n.current)),_t=null;return}}catch(v){if(h!==null)throw _t=h,v;mn=1,Us(n,aa(i,n.current)),_t=null;return}a.flags&32768?(Kt||l===1?n=!0:Pr||(zt&536870912)!==0?n=!1:(Ao=n=!0,(l===2||l===9||l===3||l===6)&&(l=Wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),ph(a,n)):Ws(a)}function Ws(n){var a=n;do{if((a.flags&32768)!==0){ph(a,Ao);return}n=a.return;var i=OS(a.alternate,a,Ha);if(i!==null){_t=i;return}if(a=a.sibling,a!==null){_t=a;return}_t=a=n}while(a!==null);mn===0&&(mn=5)}function ph(n,a){do{var i=VS(n.alternate,n);if(i!==null){i.flags&=32767,_t=i;return}if(i=n.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(n=n.sibling,n!==null)){_t=n;return}_t=n=i}while(n!==null);mn=6,_t=null}function vh(n,a,i,l,h,v,w,I,z){n.cancelPendingCommit=null;do Zs();while(bn!==0);if((qt&6)!==0)throw Error(r(327));if(a!==null){if(a===n.current)throw Error(r(177));if(v=a.lanes|a.childLanes,v|=Mc,Be(n,i,v,w,I,z),n===ln&&(_t=ln=null,zt=0),Dr=a,ho=n,Qa=i,Lu=v,Uu=h,sh=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,aC(mt,function(){return wh(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=R.T,R.T=null,h=K.p,K.p=2,w=qt,qt|=4;try{qS(n,a,i)}finally{qt=w,K.p=h,R.T=l}}bn=1,yh(),Sh(),Ch()}}function yh(){if(bn===1){bn=0;var n=ho,a=Dr,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=R.T,R.T=null;var l=K.p;K.p=2;var h=qt;qt|=4;try{$f(a,n);var v=$u,w=og(n.containerInfo),I=v.focusedElem,z=v.selectionRange;if(w!==I&&I&&I.ownerDocument&&ag(I.ownerDocument.documentElement,I)){if(z!==null&&Ec(I)){var le=z.start,fe=z.end;if(fe===void 0&&(fe=le),"selectionStart"in I)I.selectionStart=le,I.selectionEnd=Math.min(fe,I.value.length);else{var ye=I.ownerDocument||document,ce=ye&&ye.defaultView||window;if(ce.getSelection){var de=ce.getSelection(),Xe=I.textContent.length,ft=Math.min(z.start,Xe),on=z.end===void 0?ft:Math.min(z.end,Xe);!de.extend&&ft>on&&(w=on,on=ft,ft=w);var ee=ng(I,ft),Y=ng(I,on);if(ee&&Y&&(de.rangeCount!==1||de.anchorNode!==ee.node||de.anchorOffset!==ee.offset||de.focusNode!==Y.node||de.focusOffset!==Y.offset)){var ie=ye.createRange();ie.setStart(ee.node,ee.offset),de.removeAllRanges(),ft>on?(de.addRange(ie),de.extend(Y.node,Y.offset)):(ie.setEnd(Y.node,Y.offset),de.addRange(ie))}}}}for(ye=[],de=I;de=de.parentNode;)de.nodeType===1&&ye.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ye.length;I++){var pe=ye[I];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}ul=!!Zu,$u=Zu=null}finally{qt=h,K.p=l,R.T=i}}n.current=a,bn=2}}function Sh(){if(bn===2){bn=0;var n=ho,a=Dr,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=R.T,R.T=null;var l=K.p;K.p=2;var h=qt;qt|=4;try{jf(n,a.alternate,a)}finally{qt=h,K.p=l,R.T=i}}bn=3}}function Ch(){if(bn===4||bn===3){bn=0,at();var n=ho,a=Dr,i=Qa,l=sh;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,Dr=ho=null,Th(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(fo=null),et(i),a=a.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Ht,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=R.T,h=K.p,K.p=2,R.T=null;try{for(var v=n.onRecoverableError,w=0;w<l.length;w++){var I=l[w];v(I.value,{componentStack:I.stack})}}finally{R.T=a,K.p=h}}(Qa&3)!==0&&Zs(),ka(n),h=n.pendingLanes,(i&261930)!==0&&(h&42)!==0?n===zu?Bi++:(Bi=0,zu=n):Bi=0,_i(0)}}function Th(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,mi(a)))}function Zs(){return yh(),Sh(),Ch(),wh()}function wh(){if(bn!==5)return!1;var n=ho,a=Lu;Lu=0;var i=et(Qa),l=R.T,h=K.p;try{K.p=32>i?32:i,R.T=null,i=Uu,Uu=null;var v=ho,w=Qa;if(bn=0,Dr=ho=null,Qa=0,(qt&6)!==0)throw Error(r(331));var I=qt;if(qt|=4,oh(v.current),th(v,v.current,w,i),qt=I,_i(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Ht,v)}catch{}return!0}finally{K.p=h,R.T=l,Th(n,a)}}function Eh(n,a,i){a=aa(i,a),a=pu(n.stateNode,a,2),n=so(n,a,2),n!==null&&(Re(n,2),ka(n))}function en(n,a,i){if(n.tag===3)Eh(n,n,i);else for(;a!==null;){if(a.tag===3){Eh(a,n,i);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(fo===null||!fo.has(l))){n=aa(i,n),i=bf(2),l=so(a,i,2),l!==null&&(kf(i,l,a,n),Re(l,2),ka(l));break}}a=a.return}}function Hu(n,a,i){var l=n.pingCache;if(l===null){l=n.pingCache=new JS;var h=new Set;l.set(a,h)}else h=l.get(a),h===void 0&&(h=new Set,l.set(a,h));h.has(i)||(Gu=!0,h.add(i),n=eC.bind(null,n,a,i),a.then(n,n))}function eC(n,a,i){var l=n.pingCache;l!==null&&l.delete(a),n.pingedLanes|=n.suspendedLanes&i,n.warmLanes&=~i,ln===n&&(zt&i)===i&&(mn===4||mn===3&&(zt&62914560)===zt&&300>qe()-qs?(qt&2)===0&&Nr(n,0):Bu|=i,Rr===zt&&(Rr=0)),ka(n)}function bh(n,a){a===0&&(a=Ke()),n=_o(n,a),n!==null&&(Re(n,a),ka(n))}function tC(n){var a=n.memoizedState,i=0;a!==null&&(i=a.retryLane),bh(n,i)}function nC(n,a){var i=0;switch(n.tag){case 31:case 13:var l=n.stateNode,h=n.memoizedState;h!==null&&(i=h.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(a),bh(n,i)}function aC(n,a){return be(n,a)}var $s=null,Br=null,Qu=!1,el=!1,Ou=!1,po=0;function ka(n){n!==Br&&n.next===null&&(Br===null?$s=Br=n:Br=Br.next=n),el=!0,Qu||(Qu=!0,rC())}function _i(n,a){if(!Ou&&el){Ou=!0;do for(var i=!1,l=$s;l!==null;){if(n!==0){var h=l.pendingLanes;if(h===0)var v=0;else{var w=l.suspendedLanes,I=l.pingedLanes;v=(1<<31-oe(42|n)+1)-1,v&=h&~(w&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(i=!0,Mh(l,v))}else v=zt,v=cn(l,l===ln?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(v&3)===0||jt(l,v)||(i=!0,Mh(l,v));l=l.next}while(i);Ou=!1}}function oC(){kh()}function kh(){el=Qu=!1;var n=0;po!==0&&hC()&&(n=po);for(var a=qe(),i=null,l=$s;l!==null;){var h=l.next,v=xh(l,a);v===0?(l.next=null,i===null?$s=h:i.next=h,h===null&&(Br=i)):(i=l,(n!==0||(v&3)!==0)&&(el=!0)),l=h}bn!==0&&bn!==5||_i(n),po!==0&&(po=0)}function xh(n,a){for(var i=n.suspendedLanes,l=n.pingedLanes,h=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var w=31-oe(v),I=1<<w,z=h[w];z===-1?((I&i)===0||(I&l)!==0)&&(h[w]=Ae(I,a)):z<=a&&(n.expiredLanes|=I),v&=~I}if(a=ln,i=zt,i=cn(n,n===a?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,i===0||n===a&&($t===2||$t===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&we(l),n.callbackNode=null,n.callbackPriority=0;if((i&3)===0||jt(n,i)){if(a=i&-i,a===n.callbackPriority)return a;switch(l!==null&&we(l),et(i)){case 2:case 8:i=$e;break;case 32:i=mt;break;case 268435456:i=Ct;break;default:i=mt}return l=Ih.bind(null,n),i=be(i,l),n.callbackPriority=a,n.callbackNode=i,a}return l!==null&&l!==null&&we(l),n.callbackPriority=2,n.callbackNode=null,2}function Ih(n,a){if(bn!==0&&bn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var i=n.callbackNode;if(Zs()&&n.callbackNode!==i)return null;var l=zt;return l=cn(n,n===ln?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(ch(n,l,a),xh(n,qe()),n.callbackNode!=null&&n.callbackNode===i?Ih.bind(null,n):null)}function Mh(n,a){if(Zs())return null;ch(n,a,!0)}function rC(){pC(function(){(qt&6)!==0?be(gt,oC):kh()})}function Vu(){if(po===0){var n=Sr;n===0&&(n=wt,wt<<=1,(wt&261888)===0&&(wt=256)),po=n}return po}function Ph(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ls(""+n)}function Rh(n,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,n.id&&i.setAttribute("form",n.id),a.parentNode.insertBefore(i,a),n=new FormData(n),i.parentNode.removeChild(i),n}function iC(n,a,i,l,h){if(a==="submit"&&i&&i.stateNode===h){var v=Ph((h[Qe]||null).action),w=l.submitter;w&&(a=(a=w[Qe]||null)?Ph(a.formAction):w.getAttribute("formAction"),a!==null&&(v=a,w=null));var I=new ds("action","action",null,l,h);n.push({event:I,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(po!==0){var z=w?Rh(h,w):new FormData(h);Au(i,{pending:!0,data:z,method:h.method,action:v},null,z)}}else typeof v=="function"&&(I.preventDefault(),z=w?Rh(h,w):new FormData(h),Au(i,{pending:!0,data:z,method:h.method,action:v},v,z))},currentTarget:h}]})}}for(var qu=0;qu<Ic.length;qu++){var Yu=Ic[qu],sC=Yu.toLowerCase(),lC=Yu[0].toUpperCase()+Yu.slice(1);pa(sC,"on"+lC)}pa(sg,"onAnimationEnd"),pa(lg,"onAnimationIteration"),pa(cg,"onAnimationStart"),pa("dblclick","onDoubleClick"),pa("focusin","onFocus"),pa("focusout","onBlur"),pa(ES,"onTransitionRun"),pa(bS,"onTransitionStart"),pa(kS,"onTransitionCancel"),pa(ug,"onTransitionEnd"),ct("onMouseEnter",["mouseout","mouseover"]),ct("onMouseLeave",["mouseout","mouseover"]),ct("onPointerEnter",["pointerout","pointerover"]),ct("onPointerLeave",["pointerout","pointerover"]),Ue("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ue("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ue("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ue("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ue("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ue("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Li));function Dh(n,a){a=(a&4)!==0;for(var i=0;i<n.length;i++){var l=n[i],h=l.event;l=l.listeners;e:{var v=void 0;if(a)for(var w=l.length-1;0<=w;w--){var I=l[w],z=I.instance,le=I.currentTarget;if(I=I.listener,z!==v&&h.isPropagationStopped())break e;v=I,h.currentTarget=le;try{v(h)}catch(fe){hs(fe)}h.currentTarget=null,v=z}else for(w=0;w<l.length;w++){if(I=l[w],z=I.instance,le=I.currentTarget,I=I.listener,z!==v&&h.isPropagationStopped())break e;v=I,h.currentTarget=le;try{v(h)}catch(fe){hs(fe)}h.currentTarget=null,v=z}}}}function Lt(n,a){var i=a[Mt];i===void 0&&(i=a[Mt]=new Set);var l=n+"__bubble";i.has(l)||(Nh(a,n,2,!1),i.add(l))}function ju(n,a,i){var l=0;a&&(l|=4),Nh(i,n,l,a)}var tl="_reactListening"+Math.random().toString(36).slice(2);function Ju(n){if(!n[tl]){n[tl]=!0,Ee.forEach(function(i){i!=="selectionchange"&&(cC.has(i)||ju(i,!1,n),ju(i,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[tl]||(a[tl]=!0,ju("selectionchange",!1,a))}}function Nh(n,a,i,l){switch(lm(a)){case 2:var h=LC;break;case 8:h=UC;break;default:h=uA}i=h.bind(null,a,i,n),h=void 0,!hc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),l?h!==void 0?n.addEventListener(a,i,{capture:!0,passive:h}):n.addEventListener(a,i,!0):h!==void 0?n.addEventListener(a,i,{passive:h}):n.addEventListener(a,i,!1)}function Xu(n,a,i,l,h){var v=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var I=l.stateNode.containerInfo;if(I===h)break;if(w===4)for(w=l.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===h)return;w=w.return}for(;I!==null;){if(w=dt(I),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){l=v=w;continue e}I=I.parentNode}}l=l.return}Ld(function(){var le=v,fe=gc(i),ye=[];e:{var ce=Ag.get(n);if(ce!==void 0){var de=ds,Xe=n;switch(n){case"keypress":if(us(i)===0)break e;case"keydown":case"keyup":de=nS;break;case"focusin":Xe="focus",de=yc;break;case"focusout":Xe="blur",de=yc;break;case"beforeblur":case"afterblur":de=yc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=O0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=rS;break;case sg:case lg:case cg:de=Y0;break;case ug:de=sS;break;case"scroll":case"scrollend":de=H0;break;case"wheel":de=cS;break;case"copy":case"cut":case"paste":de=J0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=Hd;break;case"toggle":case"beforetoggle":de=AS}var ft=(a&4)!==0,on=!ft&&(n==="scroll"||n==="scrollend"),ee=ft?ce!==null?ce+"Capture":null:ce;ft=[];for(var Y=le,ie;Y!==null;){var pe=Y;if(ie=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ie===null||ee===null||(pe=ri(Y,ee),pe!=null&&ft.push(Ui(Y,pe,ie))),on)break;Y=Y.return}0<ft.length&&(ce=new de(ce,Xe,null,i,fe),ye.push({event:ce,listeners:ft}))}}if((a&7)===0){e:{if(ce=n==="mouseover"||n==="pointerover",de=n==="mouseout"||n==="pointerout",ce&&i!==dc&&(Xe=i.relatedTarget||i.fromElement)&&(dt(Xe)||Xe[Jt]))break e;if((de||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,de?(Xe=i.relatedTarget||i.toElement,de=le,Xe=Xe?dt(Xe):null,Xe!==null&&(on=c(Xe),ft=Xe.tag,Xe!==on||ft!==5&&ft!==27&&ft!==6)&&(Xe=null)):(de=null,Xe=le),de!==Xe)){if(ft=Fd,pe="onMouseLeave",ee="onMouseEnter",Y="mouse",(n==="pointerout"||n==="pointerover")&&(ft=Hd,pe="onPointerLeave",ee="onPointerEnter",Y="pointer"),on=de==null?ce:Et(de),ie=Xe==null?ce:Et(Xe),ce=new ft(pe,Y+"leave",de,i,fe),ce.target=on,ce.relatedTarget=ie,pe=null,dt(fe)===le&&(ft=new ft(ee,Y+"enter",Xe,i,fe),ft.target=ie,ft.relatedTarget=on,pe=ft),on=pe,de&&Xe)t:{for(ft=uC,ee=de,Y=Xe,ie=0,pe=ee;pe;pe=ft(pe))ie++;pe=0;for(var At=Y;At;At=ft(At))pe++;for(;0<ie-pe;)ee=ft(ee),ie--;for(;0<pe-ie;)Y=ft(Y),pe--;for(;ie--;){if(ee===Y||Y!==null&&ee===Y.alternate){ft=ee;break t}ee=ft(ee),Y=ft(Y)}ft=null}else ft=null;de!==null&&Gh(ye,ce,de,ft,!1),Xe!==null&&on!==null&&Gh(ye,on,Xe,ft,!0)}}e:{if(ce=le?Et(le):window,de=ce.nodeName&&ce.nodeName.toLowerCase(),de==="select"||de==="input"&&ce.type==="file")var Qt=Xd;else if(jd(ce))if(Wd)Qt=CS;else{Qt=yS;var tt=vS}else de=ce.nodeName,!de||de.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&Ac(le.elementType)&&(Qt=Xd):Qt=SS;if(Qt&&(Qt=Qt(n,le))){Jd(ye,Qt,i,fe);break e}tt&&tt(n,ce,le),n==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&sr(ce,"number",ce.value)}switch(tt=le?Et(le):window,n){case"focusin":(jd(tt)||tt.contentEditable==="true")&&(dr=tt,bc=le,gi=null);break;case"focusout":gi=bc=dr=null;break;case"mousedown":kc=!0;break;case"contextmenu":case"mouseup":case"dragend":kc=!1,rg(ye,i,fe);break;case"selectionchange":if(wS)break;case"keydown":case"keyup":rg(ye,i,fe)}var It;if(Cc)e:{switch(n){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else Ar?qd(n,i)&&(Ft="onCompositionEnd"):n==="keydown"&&i.keyCode===229&&(Ft="onCompositionStart");Ft&&(Qd&&i.locale!=="ko"&&(Ar||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&Ar&&(It=Ud()):(eo=fe,mc="value"in eo?eo.value:eo.textContent,Ar=!0)),tt=nl(le,Ft),0<tt.length&&(Ft=new Kd(Ft,n,null,i,fe),ye.push({event:Ft,listeners:tt}),It?Ft.data=It:(It=Yd(i),It!==null&&(Ft.data=It)))),(It=gS?fS(n,i):hS(n,i))&&(Ft=nl(le,"onBeforeInput"),0<Ft.length&&(tt=new Kd("onBeforeInput","beforeinput",null,i,fe),ye.push({event:tt,listeners:Ft}),tt.data=It)),iC(ye,n,le,i,fe)}Dh(ye,a)})}function Ui(n,a,i){return{instance:n,listener:a,currentTarget:i}}function nl(n,a){for(var i=a+"Capture",l=[];n!==null;){var h=n,v=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||v===null||(h=ri(n,i),h!=null&&l.unshift(Ui(n,h,v)),h=ri(n,a),h!=null&&l.push(Ui(n,h,v))),n.tag===3)return l;n=n.return}return[]}function uC(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Gh(n,a,i,l,h){for(var v=a._reactName,w=[];i!==null&&i!==l;){var I=i,z=I.alternate,le=I.stateNode;if(I=I.tag,z!==null&&z===l)break;I!==5&&I!==26&&I!==27||le===null||(z=le,h?(le=ri(i,v),le!=null&&w.unshift(Ui(i,le,z))):h||(le=ri(i,v),le!=null&&w.push(Ui(i,le,z)))),i=i.return}w.length!==0&&n.push({event:a,listeners:w})}var AC=/\r\n?/g,dC=/\u0000|\uFFFD/g;function Bh(n){return(typeof n=="string"?n:""+n).replace(AC,`
`).replace(dC,"")}function _h(n,a){return a=Bh(a),Bh(n)===a}function an(n,a,i,l,h,v){switch(i){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||lr(n,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&lr(n,""+l);break;case"className":wn(n,"class",l);break;case"tabIndex":wn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(n,i,l);break;case"style":Bd(n,l,v);break;case"data":if(a!=="object"){wn(n,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||i!=="href")){n.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(i);break}l=ls(""+l),n.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(i==="formAction"?(a!=="input"&&an(n,a,"name",h.name,h,null),an(n,a,"formEncType",h.formEncType,h,null),an(n,a,"formMethod",h.formMethod,h,null),an(n,a,"formTarget",h.formTarget,h,null)):(an(n,a,"encType",h.encType,h,null),an(n,a,"method",h.method,h,null),an(n,a,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(i);break}l=ls(""+l),n.setAttribute(i,l);break;case"onClick":l!=null&&(n.onclick=Ia);break;case"onScroll":l!=null&&Lt("scroll",n);break;case"onScrollEnd":l!=null&&Lt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=i}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}i=ls(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(i,""+l):n.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(i,""):n.removeAttribute(i);break;case"capture":case"download":l===!0?n.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(i,l):n.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(i,l):n.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(i):n.setAttribute(i,l);break;case"popover":Lt("beforetoggle",n),Lt("toggle",n),Xt(n,"popover",l);break;case"xlinkActuate":J(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":J(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":J(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":J(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":J(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":J(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":J(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":J(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":J(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xt(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=F0.get(i)||i,Xt(n,i,l))}}function Wu(n,a,i,l,h,v){switch(i){case"style":Bd(n,l,v);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=i}}break;case"children":typeof l=="string"?lr(n,l):(typeof l=="number"||typeof l=="bigint")&&lr(n,""+l);break;case"onScroll":l!=null&&Lt("scroll",n);break;case"onScrollEnd":l!=null&&Lt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Ia);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xe.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(h=i.endsWith("Capture"),a=i.slice(2,h?i.length-7:void 0),v=n[Qe]||null,v=v!=null?v[i]:null,typeof v=="function"&&n.removeEventListener(a,v,h),typeof l=="function")){typeof v!="function"&&v!==null&&(i in n?n[i]=null:n.hasAttribute(i)&&n.removeAttribute(i)),n.addEventListener(a,l,h);break e}i in n?n[i]=l:l===!0?n.setAttribute(i,""):Xt(n,i,l)}}}function Gn(n,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",n),Lt("load",n);var l=!1,h=!1,v;for(v in i)if(i.hasOwnProperty(v)){var w=i[v];if(w!=null)switch(v){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:an(n,a,v,w,i,null)}}h&&an(n,a,"srcSet",i.srcSet,i,null),l&&an(n,a,"src",i.src,i,null);return;case"input":Lt("invalid",n);var I=v=w=h=null,z=null,le=null;for(l in i)if(i.hasOwnProperty(l)){var fe=i[l];if(fe!=null)switch(l){case"name":h=fe;break;case"type":w=fe;break;case"checked":z=fe;break;case"defaultChecked":le=fe;break;case"value":v=fe;break;case"defaultValue":I=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,a));break;default:an(n,a,l,fe,i,null)}}Do(n,v,I,z,le,w,h,!1);return;case"select":Lt("invalid",n),l=w=v=null;for(h in i)if(i.hasOwnProperty(h)&&(I=i[h],I!=null))switch(h){case"value":v=I;break;case"defaultValue":w=I;break;case"multiple":l=I;default:an(n,a,h,I,i,null)}a=v,i=w,n.multiple=!!l,a!=null?ma(n,!!l,a,!1):i!=null&&ma(n,!!l,i,!0);return;case"textarea":Lt("invalid",n),v=h=l=null;for(w in i)if(i.hasOwnProperty(w)&&(I=i[w],I!=null))switch(w){case"value":l=I;break;case"defaultValue":h=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:an(n,a,w,I,i,null)}Nd(n,l,h,v);return;case"option":for(z in i)i.hasOwnProperty(z)&&(l=i[z],l!=null)&&(z==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":an(n,a,z,l,i,null));return;case"dialog":Lt("beforetoggle",n),Lt("toggle",n),Lt("cancel",n),Lt("close",n);break;case"iframe":case"object":Lt("load",n);break;case"video":case"audio":for(l=0;l<Li.length;l++)Lt(Li[l],n);break;case"image":Lt("error",n),Lt("load",n);break;case"details":Lt("toggle",n);break;case"embed":case"source":case"link":Lt("error",n),Lt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in i)if(i.hasOwnProperty(le)&&(l=i[le],l!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:an(n,a,le,l,i,null)}return;default:if(Ac(a)){for(fe in i)i.hasOwnProperty(fe)&&(l=i[fe],l!==void 0&&Wu(n,a,fe,l,i,void 0));return}}for(I in i)i.hasOwnProperty(I)&&(l=i[I],l!=null&&an(n,a,I,l,i,null))}function gC(n,a,i,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,v=null,w=null,I=null,z=null,le=null,fe=null;for(de in i){var ye=i[de];if(i.hasOwnProperty(de)&&ye!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":z=ye;default:l.hasOwnProperty(de)||an(n,a,de,null,l,ye)}}for(var ce in l){var de=l[ce];if(ye=i[ce],l.hasOwnProperty(ce)&&(de!=null||ye!=null))switch(ce){case"type":v=de;break;case"name":h=de;break;case"checked":le=de;break;case"defaultChecked":fe=de;break;case"value":w=de;break;case"defaultValue":I=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:de!==ye&&an(n,a,ce,de,l,ye)}}Ro(n,w,I,z,le,fe,v,h);return;case"select":de=w=I=ce=null;for(v in i)if(z=i[v],i.hasOwnProperty(v)&&z!=null)switch(v){case"value":break;case"multiple":de=z;default:l.hasOwnProperty(v)||an(n,a,v,null,l,z)}for(h in l)if(v=l[h],z=i[h],l.hasOwnProperty(h)&&(v!=null||z!=null))switch(h){case"value":ce=v;break;case"defaultValue":I=v;break;case"multiple":w=v;default:v!==z&&an(n,a,h,v,l,z)}a=I,i=w,l=de,ce!=null?ma(n,!!i,ce,!1):!!l!=!!i&&(a!=null?ma(n,!!i,a,!0):ma(n,!!i,i?[]:"",!1));return;case"textarea":de=ce=null;for(I in i)if(h=i[I],i.hasOwnProperty(I)&&h!=null&&!l.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:an(n,a,I,null,l,h)}for(w in l)if(h=l[w],v=i[w],l.hasOwnProperty(w)&&(h!=null||v!=null))switch(w){case"value":ce=h;break;case"defaultValue":de=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==v&&an(n,a,w,h,l,v)}Dd(n,ce,de);return;case"option":for(var Xe in i)ce=i[Xe],i.hasOwnProperty(Xe)&&ce!=null&&!l.hasOwnProperty(Xe)&&(Xe==="selected"?n.selected=!1:an(n,a,Xe,null,l,ce));for(z in l)ce=l[z],de=i[z],l.hasOwnProperty(z)&&ce!==de&&(ce!=null||de!=null)&&(z==="selected"?n.selected=ce&&typeof ce!="function"&&typeof ce!="symbol":an(n,a,z,ce,l,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in i)ce=i[ft],i.hasOwnProperty(ft)&&ce!=null&&!l.hasOwnProperty(ft)&&an(n,a,ft,null,l,ce);for(le in l)if(ce=l[le],de=i[le],l.hasOwnProperty(le)&&ce!==de&&(ce!=null||de!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,a));break;default:an(n,a,le,ce,l,de)}return;default:if(Ac(a)){for(var on in i)ce=i[on],i.hasOwnProperty(on)&&ce!==void 0&&!l.hasOwnProperty(on)&&Wu(n,a,on,void 0,l,ce);for(fe in l)ce=l[fe],de=i[fe],!l.hasOwnProperty(fe)||ce===de||ce===void 0&&de===void 0||Wu(n,a,fe,ce,l,de);return}}for(var ee in i)ce=i[ee],i.hasOwnProperty(ee)&&ce!=null&&!l.hasOwnProperty(ee)&&an(n,a,ee,null,l,ce);for(ye in l)ce=l[ye],de=i[ye],!l.hasOwnProperty(ye)||ce===de||ce==null&&de==null||an(n,a,ye,ce,l,de)}function Lh(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fC(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var h=i[l],v=h.transferSize,w=h.initiatorType,I=h.duration;if(v&&I&&Lh(w)){for(w=0,I=h.responseEnd,l+=1;l<i.length;l++){var z=i[l],le=z.startTime;if(le>I)break;var fe=z.transferSize,ye=z.initiatorType;fe&&Lh(ye)&&(z=z.responseEnd,w+=fe*(z<I?1:(I-le)/(z-le)))}if(--l,a+=8*(v+w)/(h.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Zu=null,$u=null;function al(n){return n.nodeType===9?n:n.ownerDocument}function Uh(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zh(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function eA(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var tA=null;function hC(){var n=window.event;return n&&n.type==="popstate"?n===tA?!1:(tA=n,!0):(tA=null,!1)}var Fh=typeof setTimeout=="function"?setTimeout:void 0,mC=typeof clearTimeout=="function"?clearTimeout:void 0,Kh=typeof Promise=="function"?Promise:void 0,pC=typeof queueMicrotask=="function"?queueMicrotask:typeof Kh<"u"?function(n){return Kh.resolve(null).then(n).catch(vC)}:Fh;function vC(n){setTimeout(function(){throw n})}function vo(n){return n==="head"}function Hh(n,a){var i=a,l=0;do{var h=i.nextSibling;if(n.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"||i==="/&"){if(l===0){n.removeChild(h),zr(a);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")zi(n.ownerDocument.documentElement);else if(i==="head"){i=n.ownerDocument.head,zi(i);for(var v=i.firstChild;v;){var w=v.nextSibling,I=v.nodeName;v[sn]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||i.removeChild(v),v=w}}else i==="body"&&zi(n.ownerDocument.body);i=h}while(i);zr(a)}function Qh(n,a){var i=n;n=0;do{var l=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(n===0)break;n--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||n++;i=l}while(i)}function nA(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":nA(i),ot(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}n.removeChild(i)}}function yC(n,a,i,l){for(;n.nodeType===1;){var h=i;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[sn])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var v=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=la(n.nextSibling),n===null)break}return null}function SC(n,a,i){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=la(n.nextSibling),n===null))return null;return n}function Oh(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=la(n.nextSibling),n===null))return null;return n}function aA(n){return n.data==="$?"||n.data==="$~"}function oA(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function CC(n,a){var i=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||i.readyState!=="loading")a();else{var l=function(){a(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function la(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var rA=null;function Vh(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var i=n.data;if(i==="/$"||i==="/&"){if(a===0)return la(n.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}n=n.nextSibling}return null}function qh(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var i=n.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return n;a--}else i!=="/$"&&i!=="/&"||a++}n=n.previousSibling}return null}function Yh(n,a,i){switch(a=al(i),n){case"html":if(n=a.documentElement,!n)throw Error(r(452));return n;case"head":if(n=a.head,!n)throw Error(r(453));return n;case"body":if(n=a.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function zi(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);ot(n)}var ca=new Map,jh=new Set;function ol(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Oa=K.d;K.d={f:TC,r:wC,D:EC,C:bC,L:kC,m:xC,X:MC,S:IC,M:PC};function TC(){var n=Oa.f(),a=Js();return n||a}function wC(n){var a=ke(n);a!==null&&a.tag===5&&a.type==="form"?Af(a):Oa.r(n)}var _r=typeof document>"u"?null:document;function Jh(n,a,i){var l=_r;if(l&&typeof a=="string"&&a){var h=Hn(a);h='link[rel="'+n+'"][href="'+h+'"]',typeof i=="string"&&(h+='[crossorigin="'+i+'"]'),jh.has(h)||(jh.add(h),n={rel:n,crossOrigin:i,href:a},l.querySelector(h)===null&&(a=l.createElement("link"),Gn(a,"link",n),$(a),l.head.appendChild(a)))}}function EC(n){Oa.D(n),Jh("dns-prefetch",n,null)}function bC(n,a){Oa.C(n,a),Jh("preconnect",n,a)}function kC(n,a,i){Oa.L(n,a,i);var l=_r;if(l&&n&&a){var h='link[rel="preload"][as="'+Hn(a)+'"]';a==="image"&&i&&i.imageSrcSet?(h+='[imagesrcset="'+Hn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(h+='[imagesizes="'+Hn(i.imageSizes)+'"]')):h+='[href="'+Hn(n)+'"]';var v=h;switch(a){case"style":v=Lr(n);break;case"script":v=Ur(n)}ca.has(v)||(n=y({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:n,as:a},i),ca.set(v,n),l.querySelector(h)!==null||a==="style"&&l.querySelector(Fi(v))||a==="script"&&l.querySelector(Ki(v))||(a=l.createElement("link"),Gn(a,"link",n),$(a),l.head.appendChild(a)))}}function xC(n,a){Oa.m(n,a);var i=_r;if(i&&n){var l=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+Hn(l)+'"][href="'+Hn(n)+'"]',v=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ur(n)}if(!ca.has(v)&&(n=y({rel:"modulepreload",href:n},a),ca.set(v,n),i.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Ki(v)))return}l=i.createElement("link"),Gn(l,"link",n),$(l),i.head.appendChild(l)}}}function IC(n,a,i){Oa.S(n,a,i);var l=_r;if(l&&n){var h=xt(l).hoistableStyles,v=Lr(n);a=a||"default";var w=h.get(v);if(!w){var I={loading:0,preload:null};if(w=l.querySelector(Fi(v)))I.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":a},i),(i=ca.get(v))&&iA(n,i);var z=w=l.createElement("link");$(z),Gn(z,"link",n),z._p=new Promise(function(le,fe){z.onload=le,z.onerror=fe}),z.addEventListener("load",function(){I.loading|=1}),z.addEventListener("error",function(){I.loading|=2}),I.loading|=4,rl(w,a,l)}w={type:"stylesheet",instance:w,count:1,state:I},h.set(v,w)}}}function MC(n,a){Oa.X(n,a);var i=_r;if(i&&n){var l=xt(i).hoistableScripts,h=Ur(n),v=l.get(h);v||(v=i.querySelector(Ki(h)),v||(n=y({src:n,async:!0},a),(a=ca.get(h))&&sA(n,a),v=i.createElement("script"),$(v),Gn(v,"link",n),i.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},l.set(h,v))}}function PC(n,a){Oa.M(n,a);var i=_r;if(i&&n){var l=xt(i).hoistableScripts,h=Ur(n),v=l.get(h);v||(v=i.querySelector(Ki(h)),v||(n=y({src:n,async:!0,type:"module"},a),(a=ca.get(h))&&sA(n,a),v=i.createElement("script"),$(v),Gn(v,"link",n),i.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},l.set(h,v))}}function Xh(n,a,i,l){var h=(h=ve.current)?ol(h):null;if(!h)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Lr(i.href),i=xt(h).hoistableStyles,l=i.get(a),l||(l={type:"style",instance:null,count:0,state:null},i.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){n=Lr(i.href);var v=xt(h).hoistableStyles,w=v.get(n);if(w||(h=h.ownerDocument||h,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,w),(v=h.querySelector(Fi(n)))&&!v._p&&(w.instance=v,w.state.loading=5),ca.has(n)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ca.set(n,i),v||RC(h,n,i,w.state))),a&&l===null)throw Error(r(528,""));return w}if(a&&l!==null)throw Error(r(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ur(i),i=xt(h).hoistableScripts,l=i.get(a),l||(l={type:"script",instance:null,count:0,state:null},i.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Lr(n){return'href="'+Hn(n)+'"'}function Fi(n){return'link[rel="stylesheet"]['+n+"]"}function Wh(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function RC(n,a,i,l){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=n.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Gn(a,"link",i),$(a),n.head.appendChild(a))}function Ur(n){return'[src="'+Hn(n)+'"]'}function Ki(n){return"script[async]"+n}function Zh(n,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var l=n.querySelector('style[data-href~="'+Hn(i.href)+'"]');if(l)return a.instance=l,$(l),l;var h=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),$(l),Gn(l,"style",h),rl(l,i.precedence,n),a.instance=l;case"stylesheet":h=Lr(i.href);var v=n.querySelector(Fi(h));if(v)return a.state.loading|=4,a.instance=v,$(v),v;l=Wh(i),(h=ca.get(h))&&iA(l,h),v=(n.ownerDocument||n).createElement("link"),$(v);var w=v;return w._p=new Promise(function(I,z){w.onload=I,w.onerror=z}),Gn(v,"link",l),a.state.loading|=4,rl(v,i.precedence,n),a.instance=v;case"script":return v=Ur(i.src),(h=n.querySelector(Ki(v)))?(a.instance=h,$(h),h):(l=i,(h=ca.get(v))&&(l=y({},i),sA(l,h)),n=n.ownerDocument||n,h=n.createElement("script"),$(h),Gn(h,"link",l),n.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,rl(l,i.precedence,n));return a.instance}function rl(n,a,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,v=h,w=0;w<l.length;w++){var I=l[w];if(I.dataset.precedence===a)v=I;else if(v!==h)break}v?v.parentNode.insertBefore(n,v.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(n,a.firstChild))}function iA(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function sA(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var il=null;function $h(n,a,i){if(il===null){var l=new Map,h=il=new Map;h.set(i,l)}else h=il,l=h.get(i),l||(l=new Map,h.set(i,l));if(l.has(n))return l;for(l.set(n,null),i=i.getElementsByTagName(n),h=0;h<i.length;h++){var v=i[h];if(!(v[sn]||v[Le]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var w=v.getAttribute(a)||"";w=n+w;var I=l.get(w);I?I.push(v):l.set(w,[v])}}return l}function em(n,a,i){n=n.ownerDocument||n,n.head.insertBefore(i,a==="title"?n.querySelector("head > title"):null)}function DC(n,a,i){if(i===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(n=a.disabled,typeof a.precedence=="string"&&n==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function tm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function NC(n,a,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Lr(l.href),v=a.querySelector(Fi(h));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=sl.bind(n),a.then(n,n)),i.state.loading|=4,i.instance=v,$(v);return}v=a.ownerDocument||a,l=Wh(l),(h=ca.get(h))&&iA(l,h),v=v.createElement("link"),$(v);var w=v;w._p=new Promise(function(I,z){w.onload=I,w.onerror=z}),Gn(v,"link",l),i.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(n.count++,i=sl.bind(n),a.addEventListener("load",i),a.addEventListener("error",i))}}var lA=0;function GC(n,a){return n.stylesheets&&n.count===0&&cl(n,n.stylesheets),0<n.count||0<n.imgCount?function(i){var l=setTimeout(function(){if(n.stylesheets&&cl(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+a);0<n.imgBytes&&lA===0&&(lA=62500*fC());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&cl(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>lA?50:800)+a);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function sl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ll=null;function cl(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ll=new Map,a.forEach(BC,n),ll=null,sl.call(n))}function BC(n,a){if(!(a.state.loading&4)){var i=ll.get(n);if(i)var l=i.get(null);else{i=new Map,ll.set(n,i);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<h.length;v++){var w=h[v];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(i.set(w.dataset.precedence,w),l=w)}l&&i.set(null,l)}h=a.instance,w=h.getAttribute("data-precedence"),v=i.get(w)||l,v===l&&i.set(null,h),i.set(w,h),this.count++,l=sl.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),v?v.parentNode.insertBefore(h,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),a.state.loading|=4}}var Hi={$$typeof:N,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function _C(n,a,i,l,h,v,w,I,z){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=De(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=De(0),this.hiddenUpdates=De(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=v,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function nm(n,a,i,l,h,v,w,I,z,le,fe,ye){return n=new _C(n,a,i,w,z,le,fe,ye,I),a=1,v===!0&&(a|=24),v=Xn(3,null,null,a),n.current=v,v.stateNode=n,a=Kc(),a.refCount++,n.pooledCache=a,a.refCount++,v.memoizedState={element:l,isDehydrated:i,cache:a},Vc(v),n}function am(n){return n?(n=hr,n):hr}function om(n,a,i,l,h,v){h=am(h),l.context===null?l.context=h:l.pendingContext=h,l=io(a),l.payload={element:i},v=v===void 0?null:v,v!==null&&(l.callback=v),i=so(n,l,a),i!==null&&(jn(i,n,a),Si(i,n,a))}function rm(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var i=n.retryLane;n.retryLane=i!==0&&i<a?i:a}}function cA(n,a){rm(n,a),(n=n.alternate)&&rm(n,a)}function im(n){if(n.tag===13||n.tag===31){var a=_o(n,67108864);a!==null&&jn(a,n,67108864),cA(n,67108864)}}function sm(n){if(n.tag===13||n.tag===31){var a=ta();a=rt(a);var i=_o(n,a);i!==null&&jn(i,n,a),cA(n,a)}}var ul=!0;function LC(n,a,i,l){var h=R.T;R.T=null;var v=K.p;try{K.p=2,uA(n,a,i,l)}finally{K.p=v,R.T=h}}function UC(n,a,i,l){var h=R.T;R.T=null;var v=K.p;try{K.p=8,uA(n,a,i,l)}finally{K.p=v,R.T=h}}function uA(n,a,i,l){if(ul){var h=AA(l);if(h===null)Xu(n,a,l,Al,i),cm(n,l);else if(FC(h,n,a,i,l))l.stopPropagation();else if(cm(n,l),a&4&&-1<zC.indexOf(n)){for(;h!==null;){var v=ke(h);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var w=pt(v.pendingLanes);if(w!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var z=1<<31-oe(w);I.entanglements[1]|=z,w&=~z}ka(v),(qt&6)===0&&(Ys=qe()+500,_i(0))}}break;case 31:case 13:I=_o(v,2),I!==null&&jn(I,v,2),Js(),cA(v,2)}if(v=AA(l),v===null&&Xu(n,a,l,Al,i),v===h)break;h=v}h!==null&&l.stopPropagation()}else Xu(n,a,l,null,i)}}function AA(n){return n=gc(n),dA(n)}var Al=null;function dA(n){if(Al=null,n=dt(n),n!==null){var a=c(n);if(a===null)n=null;else{var i=a.tag;if(i===13){if(n=A(a),n!==null)return n;n=null}else if(i===31){if(n=f(a),n!==null)return n;n=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Al=n,null}function lm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rt()){case gt:return 2;case $e:return 8;case mt:case Je:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var gA=!1,yo=null,So=null,Co=null,Qi=new Map,Oi=new Map,To=[],zC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cm(n,a){switch(n){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":Qi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(a.pointerId)}}function Vi(n,a,i,l,h,v){return n===null||n.nativeEvent!==v?(n={blockedOn:a,domEventName:i,eventSystemFlags:l,nativeEvent:v,targetContainers:[h]},a!==null&&(a=ke(a),a!==null&&im(a)),n):(n.eventSystemFlags|=l,a=n.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),n)}function FC(n,a,i,l,h){switch(a){case"focusin":return yo=Vi(yo,n,a,i,l,h),!0;case"dragenter":return So=Vi(So,n,a,i,l,h),!0;case"mouseover":return Co=Vi(Co,n,a,i,l,h),!0;case"pointerover":var v=h.pointerId;return Qi.set(v,Vi(Qi.get(v)||null,n,a,i,l,h)),!0;case"gotpointercapture":return v=h.pointerId,Oi.set(v,Vi(Oi.get(v)||null,n,a,i,l,h)),!0}return!1}function um(n){var a=dt(n.target);if(a!==null){var i=c(a);if(i!==null){if(a=i.tag,a===13){if(a=A(i),a!==null){n.blockedOn=a,We(n.priority,function(){sm(i)});return}}else if(a===31){if(a=f(i),a!==null){n.blockedOn=a,We(n.priority,function(){sm(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){n.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}n.blockedOn=null}function dl(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var i=AA(n.nativeEvent);if(i===null){i=n.nativeEvent;var l=new i.constructor(i.type,i);dc=l,i.target.dispatchEvent(l),dc=null}else return a=ke(i),a!==null&&im(a),n.blockedOn=i,!1;a.shift()}return!0}function Am(n,a,i){dl(n)&&i.delete(a)}function KC(){gA=!1,yo!==null&&dl(yo)&&(yo=null),So!==null&&dl(So)&&(So=null),Co!==null&&dl(Co)&&(Co=null),Qi.forEach(Am),Oi.forEach(Am)}function gl(n,a){n.blockedOn===a&&(n.blockedOn=null,gA||(gA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KC)))}var fl=null;function dm(n){fl!==n&&(fl=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fl===n&&(fl=null);for(var a=0;a<n.length;a+=3){var i=n[a],l=n[a+1],h=n[a+2];if(typeof l!="function"){if(dA(l||i)===null)continue;break}var v=ke(i);v!==null&&(n.splice(a,3),a-=3,Au(v,{pending:!0,data:h,method:i.method,action:l},l,h))}}))}function zr(n){function a(z){return gl(z,n)}yo!==null&&gl(yo,n),So!==null&&gl(So,n),Co!==null&&gl(Co,n),Qi.forEach(a),Oi.forEach(a);for(var i=0;i<To.length;i++){var l=To[i];l.blockedOn===n&&(l.blockedOn=null)}for(;0<To.length&&(i=To[0],i.blockedOn===null);)um(i),i.blockedOn===null&&To.shift();if(i=(n.ownerDocument||n).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var h=i[l],v=i[l+1],w=h[Qe]||null;if(typeof v=="function")w||dm(i);else if(w){var I=null;if(v&&v.hasAttribute("formAction")){if(h=v,w=v[Qe]||null)I=w.formAction;else if(dA(h)!==null)continue}else I=w.action;typeof I=="function"?i[l+1]=I:(i.splice(l,3),l-=3),dm(i)}}}function gm(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(w){return h=w})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function fA(n){this._internalRoot=n}hl.prototype.render=fA.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(r(409));var i=a.current,l=ta();om(i,l,n,a,null,null)},hl.prototype.unmount=fA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;om(n.current,2,null,n,null,null),Js(),a[Jt]=null}};function hl(n){this._internalRoot=n}hl.prototype.unstable_scheduleHydration=function(n){if(n){var a=Ye();n={blockedOn:null,target:n,priority:a};for(var i=0;i<To.length&&a!==0&&a<To[i].priority;i++);To.splice(i,0,n),i===0&&um(n)}};var fm=e.version;if(fm!=="19.2.3")throw Error(r(527,fm,"19.2.3"));K.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(a),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var HC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{Ht=ml.inject(HC),Ut=ml}catch{}}return Yi.createRoot=function(n,a){if(!s(n))throw Error(r(299));var i=!1,l="",h=Cf,v=Tf,w=wf;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=nm(n,1,!1,null,null,i,l,null,h,v,w,gm),n[Jt]=a.current,Ju(n),new fA(a)},Yi.hydrateRoot=function(n,a,i){if(!s(n))throw Error(r(299));var l=!1,h="",v=Cf,w=Tf,I=wf,z=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(v=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(I=i.onRecoverableError),i.formState!==void 0&&(z=i.formState)),a=nm(n,1,!0,a,i??null,l,h,z,v,w,I,gm),a.context=am(null),i=a.current,l=ta(),l=rt(l),h=io(l),h.callback=null,so(i,h,l),i=l,a.current.lanes=i,Re(a,i),ka(a),n[Jt]=a.current,Ju(n),new hl(a)},Yi.version="19.2.3",Yi}var Em;function ZC(){if(Em)return pA.exports;Em=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pA.exports=WC(),pA.exports}var $C=ZC();const eT=Kv($C),Hv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Qv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),_A=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),tT=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.07 17.71a11.14 11.14 0 0 1-8.15-4.32.75.75 0 0 1 .89-1.2l.06.03A9.64 9.64 0 0 0 12 14.25a9.59 9.59 0 0 0 5.42-1.63l.06-.03a.75.75 0 0 1 .9 1.2 11.12 11.12 0 0 1-8.31 3.9Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.75A4.5 4.5 0 0 1 16.5 11.25H7.5A4.5 4.5 0 0 1 12 6.75Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.25 7.5a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75h-.01a.75.75 0 0 1-.75-.75V7.5Zm-3.75 1.5a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75h-.01a.75.75 0 0 1-.75-.75v-.01Zm-3.75-1.5a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H9.76a.75.75 0 0 1-.75-.75V7.5Z"})]}),LA=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),nT=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),Ov=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3.75H6.912a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.718a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859M12 3v8.25m0 0-3-3m3 3 3-3"})}),Vv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.75 9.75v6.172c0 .621.504 1.125 1.125 1.125h16.5c.621 0 1.125-.504 1.125-1.125V9.75M3.75 9.75l.75-4.5a2.25 2.25 0 0 1 2.14-1.875h4.16c.928 0 1.77.522 2.14 1.333l.93 1.682M3.75 9.75h16.5"})}),$i=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})]}),kl=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.5 9.75A2.25 2.25 0 0 1 6.75 7.5h10.5a2.25 2.25 0 0 1 2.25 2.25v7.5a2.25 2.25 0 0 1-2.25-2.25H6.75a2.25 2.25 0 0 1-2.25-2.25v-7.5Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 2.25 2.25V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039h-5.232a2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"})]}),er=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),qv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),Yv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}),aT=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.97 12.64L10.25 16.5V7.5L15.97 12.64Z"})]}),qa=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18 18 6M6 6l12 12"})}),jv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.09 9a3 3 0 0 1 5.82 1c0 1.657-1.79 2.25-2.5 2.75-.5.35-.5.75-.5 1.25m.01 4h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Jv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),Xv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),cd=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.5v15m7.5-7.5h-15"})}),Wv=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.5 21L10.5 15.75M10.5 15.75C10.5 14.925 10.185 14.1375 9.645 13.5975L4.8 9M10.5 15.75L15.3 9M19.5 9L15.3 9M15.3 9C14.475 9 13.6875 8.685 13.1475 8.145L10.5 5.25M4.5 9H7.5M4.5 9L2.25 6.75M4.5 9L2.25 11.25M19.5 9L21.75 6.75M19.5 9L21.75 11.25"})}),oT=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-7.5-3-4.72-4.72a.75.75 0 0 0-1.28.53v15.88a.75.75 0 0 0 1.28.53l4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}),rT=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),iT=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.355a7.5 7.5 0 0 1-5.25 0M12 18a3.75 3.75 0 0 0 3.75-3.75V9.75A3.75 3.75 0 0 0 12 6V4.5m0 1.5A3.75 3.75 0 0 1 8.25 9.75V14.25A3.75 3.75 0 0 0 12 18Zm0-13.5h.008v.008H12V4.5Z"})}),jr=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),Yl=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.687 7.687a1.5 1.5 0 0 0 2.122 2.122l7.687-7.687-2.122-2.122Z"})}),Zv=t=>C.jsxs("svg",{...t,viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M9 1L1 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeOpacity:"0.8"}),C.jsx("path",{d:"M9 5L5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeOpacity:"0.8"})]}),jl=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.56 0c1.153 0 2.243.096 3.298.29m9.262 0c-.342.052-.682.107-1.022.166m0 0a48.11 48.11 0 0 1 3.478-.397m0 0a48.997 48.997 0 0 1-10.026 0c-1.153 0-2.243.096-3.298.29m10.026 0c.342.052.682.107 1.022.166m-3.478-.397a48.755 48.755 0 0 1-4.254-.2 48.755 48.755 0 0 0-4.254.2M14.74 9v10.5m-5.088 0V9"})}),UA=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.25 6.75v12.088a.75.75 0 0 1-1.125.65L12 17.25l-4.125 2.238a.75.75 0 0 1-1.125-.65V6.75A2.25 2.25 0 0 1 9 4.5h6a2.25 2.25 0 0 1 2.25 2.25Z"})}),tr=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.5 12.75l6 6 9-13.5"})}),sT=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93s.844.17 1.259.077l.806-.295c.502-.184 1.036.023 1.298.47l.568.875c.262.447.212.998-.106 1.349l-.658.54c-.417.345-.635.848-.635 1.374v.266c0 .526.218 1.03.635 1.374l.658.54c.318.351.368.902.106 1.349l-.568.875c-.262.447-.796.655-1.298.47l-.806-.295c-.415-.093-.839.007-1.259.077s-.71.506-.78.93l-.149.894c-.09.542-.56.94-1.11-.94h-1.093c-.55 0-1.02-.398-1.11-.94l-.149-.894c-.07-.424-.384-.764-.78-.93s-.844-.17-1.259.077l-.806.295c-.502-.184-1.036.023-1.298.47l-.568.875c-.262.447-.212.998.106 1.349l.658.54c.417-.345.635.848-.635-1.374v-.266c0-.526-.218-1.03-.635-1.374l-.658-.54c-.318-.351-.368.902-.106-1.349l.568.875c.262.447.796.655 1.298.47l.806.295c.415.093.839.007 1.259.077s.71-.506.78.93l.149.894Z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),lT=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),$v=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),cT=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.951a.983.983 0 0 1-.825 1.002l-.005.001a1 1 0 0 1-1.03-.997L8.165 4.656a1.575 1.575 0 0 0-3.15 0v3.333c0 .526.17 1.033.486 1.442l3.45 4.6 2.25 7.5a2.25 2.25 0 0 0 4.306 0l2.25-7.5a6.002 6.002 0 0 0-4.05-7.658V4.575a1.575 1.575 0 0 0-3.15 0v1.5"})}),uT=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),ey=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7.5c3 0 6 0 9 0 2 0 3-1.5 3-3s-1.5-3-3-3"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12h12c1.5 0 2.5-1 2.5-2.5S16.5 7 15 7"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 16.5h6c1.5 0 2.5 1 2.5 2.5S10.5 21 9 21"})]}),ts=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3l7 3v6c0 5-3.5 8.5-7 9-3.5-.5-7-4-7-9V6l7-3z"})}),ty=t=>C.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 2L4 14h7l-2 8 9-12h-7l2-8z"})}),ny=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5.5c2.7-1.2 5.3-1.2 8 0 2.7-1.2 5.3-1.2 8 0v4c0 4-3 7.5-8 8-5-.5-8-4-8-8v-4z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.5 10.5h.01M12 11.5h.01M9 14c1.2.8 2.8.8 4 0"})]}),ay=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:2}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.5 8.5l-2.2 5.4-5.4 2.2 2.2-5.4 5.4-2.2z"})]}),zA=t=>C.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7l-3 3 3 3M4 10h9a4 4 0 0 0 4-4V5"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17l3-3-3-3M20 14H11a4 4 0 0 1-4 4v1"})]}),CA=Object.freeze(Object.defineProperty({__proto__:null,IconBolt:ty,IconBookOpen:Qv,IconBookmark:UA,IconCamera:$i,IconCameraFront:kl,IconCheck:tr,IconChevronLeft:Jv,IconChevronRight:Xv,IconClock:rT,IconCog:sT,IconCompass:ay,IconEyeOpen:LA,IconFolderOpen:Vv,IconGripCorner:Zv,IconHandRaised:cT,IconKeyboard:nT,IconLightBulb:iT,IconMask:ny,IconMicrophone:Hv,IconPaperclip:Yl,IconPencil:er,IconPlay:aT,IconPlus:cd,IconQuestionMarkCircle:jv,IconRobot:lT,IconSave:Ov,IconSend:qv,IconShield:ts,IconSleepingZzz:tT,IconSparkles:_A,IconSpeaker:Yv,IconSwap:zA,IconTerminal:$v,IconTranslate:Wv,IconTrash:jl,IconUndo:jr,IconVolumeOff:oT,IconWaveform:uT,IconWind:ey,IconXMark:qa},Symbol.toStringTag,{value:"Module"})),bm=({t,message:e,maxVisibleMessages:o,onChangeMaxVisibleMessages:r,updateMessage:s})=>{const[c,A]=T.useState(!1),[f,m]=T.useState(""),g=b=>{b.stopPropagation(),b.preventDefault(),m(e.chatSummary||""),A(!0)},p=b=>{b?.stopPropagation(),b?.preventDefault(),s&&s(e.id,{chatSummary:f.trim()||void 0}),A(!1)},y=b=>{b.stopPropagation(),b.preventDefault(),A(!1)},S=b=>{b.stopPropagation(),b.key==="Enter"?(b.preventDefault(),p()):b.key==="Escape"&&(b.preventDefault(),A(!1))},E=b=>{b.stopPropagation();const M=Math.max(2,Math.min(100,(o||2)-2));M!==o&&r(M)},x=b=>{b.stopPropagation();const M=Math.max(2,Math.min(100,(o||2)+2));M!==o&&r(M)},k="flex items-center gap-1 px-1.5 py-0.5 bg-amber-500/90 text-white border border-amber-400 rounded-full shadow-md";return c?C.jsxs("div",{className:k,role:"region","aria-label":"Edit bookmark summary",onPointerDown:b=>b.stopPropagation(),onClick:b=>b.stopPropagation(),children:[C.jsx("input",{type:"text",value:f,onChange:b=>m(b.target.value),onKeyDown:S,className:"bg-black/10 border border-white/30 rounded px-2 py-0.5 text-xs text-white placeholder-white/60 focus:outline-none focus:border-white focus:bg-black/20 w-48 transition-colors",placeholder:"Summary...",autoFocus:!0}),C.jsx("button",{type:"button",onClick:p,className:"p-1 rounded-full hover:bg-amber-400/50 text-white transition-colors",title:"Save",children:C.jsx(tr,{className:"w-3.5 h-3.5"})}),C.jsx("button",{type:"button",onClick:y,className:"p-1 rounded-full hover:bg-amber-400/50 text-white transition-colors",title:"Cancel",children:C.jsx(qa,{className:"w-3.5 h-3.5"})})]}):C.jsxs("div",{className:k,role:"region","aria-label":t("chat.bookmark.actionsRegionAria")||"Bookmark actions",onPointerDown:b=>b.stopPropagation(),onClick:b=>b.stopPropagation(),children:[C.jsx("button",{type:"button",onClick:E,disabled:o<=2,className:"px-2 py-0.5 text-xs rounded-full hover:bg-amber-400/30 disabled:opacity-50","aria-label":t("chat.bookmark.decrementAria")||"Decrease maximum visible messages",title:t("chat.bookmark.decrementTitle")||"Decrease",children:""}),C.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold select-none min-w-[2.5rem] text-center","aria-live":"polite","aria-atomic":"true",children:o}),C.jsx("button",{type:"button",onClick:x,disabled:o>=100,className:"px-2 py-0.5 text-xs rounded-full hover:bg-amber-400/30 disabled:opacity-50","aria-label":t("chat.bookmark.incrementAria")||"Increase maximum visible messages",title:t("chat.bookmark.incrementTitle")||"Increase",children:"+"}),C.jsx("div",{className:"w-px h-4 bg-white/40 mx-1","aria-hidden":!0}),C.jsx("button",{type:"button",onClick:g,className:"px-1.5 py-0.5 rounded-full hover:bg-amber-400/30",title:"Edit bookmark summary","aria-label":"Edit bookmark summary",children:C.jsx(er,{className:"w-3.5 h-3.5"})})]})},Ya=({className:t})=>C.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),oy=xa.memo(({translations:t,speakingUtteranceText:e,currentTargetLangCode:o,currentNativeLangCode:r,t:s,isSpeaking:c,isSending:A,speakText:f,stopSpeaking:m,speakNativeLang:g,onToggleSpeakNativeLang:p,messageId:y})=>{const S=T.useRef(null),E=T.useRef([]),x=T.useRef(!1),k=T.useRef(null),b=T.useRef(null),M=T.useRef(null),[O,N]=T.useState(null),[j,L]=T.useState(!1),H=T.useRef(null),{allLinePairs:P,pairIndexByFlatIndex:_}=T.useMemo(()=>{const X=t.map(K=>({target:{type:"target",text:K.target,lang:o},native:{type:"native",text:K.native,lang:r}})),F=[],R=[];return X.forEach((K,V)=>{const ge=K.target.text&&K.target.text.trim(),me=K.native.text&&K.native.text.trim();ge&&(F.push({type:"target",text:K.target.text,lang:K.target.lang,counterpart:me?{text:K.native.text,lang:K.native.lang}:null}),R.push(V)),me&&(F.push({type:"native",text:K.native.text,lang:K.native.lang,counterpart:ge?{text:K.target.text,lang:K.target.lang}:null}),R.push(V))}),{allLinePairs:F,pairIndexByFlatIndex:R}},[t,o,r]),B=T.useMemo(()=>{if(!e)return-1;const X=e.replace(/\*/g,""),F=P.findIndex(R=>R.text.replace(/\*/g,"")===X);return F!==-1&&(x.current=!1),F},[e,P]);T.useEffect(()=>{B!==-1&&!x.current&&E.current[B]?.scrollIntoView({behavior:"smooth",block:"center"})},[B]);const q=()=>{x.current=!0,k.current&&clearTimeout(k.current),k.current=window.setTimeout(()=>{x.current=!1},2e3)};T.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const Z=X=>{b.current&&clearTimeout(b.current),M.current={x:X.clientX,y:X.clientY}},ne=(X,F,R)=>{if(b.current&&clearTimeout(b.current),M.current){const K=Math.abs(X.clientX-M.current.x),V=Math.abs(X.clientY-M.current.y);if(K<10&&V<10){if(X.preventDefault(),F.type==="native"){const D=!g;N(R),L(D),H.current&&clearTimeout(H.current),H.current=window.setTimeout(()=>{N(null)},900),p();return}if(c){m();return}if(A)return;const ge=_[R]??0,me=[],G=y?{source:"message",messageId:y}:{source:"adHoc"};for(let D=ge;D<t.length;D++){const te=t[D],se=te.target?.trim(),re=te.native?.trim();se&&me.push({text:se,langCode:o,context:G}),g&&re&&me.push({text:re,langCode:r,context:G})}me.length>0&&f(me,me[0].langCode)}}M.current=null},U=()=>{b.current&&(clearTimeout(b.current),b.current=null),M.current=null};return C.jsxs("div",{ref:S,onScroll:q,className:"overflow-y-auto relative scrollbar-hide",style:{WebkitMaskImage:"linear-gradient(to top, rgba(0,0,0,0.1) 0%, rgba(0,0,0,1) 40%, rgba(0,0,0,1) 60%, rgba(0,0,0,0.7) 65%, rgba(0,0,0,0) 75%, rgba(0,0,0,0) 100%)",maskImage:"linear-gradient(to top, rgba(0,0,0,0.1) 0%, rgba(0,0,0,1) 40%, rgba(0,0,0,1) 60%, rgba(0,0,0,0.7) 65%, rgba(0,0,0,0) 75%, rgba(0,0,0,0) 100%)",height:"33cqw",containerType:"inline-size"},"aria-label":s("chat.maestroTranscriptScrollwheel"),children:[C.jsx("style",{children:`
            @keyframes pop-fade-speak {
              0% { transform: scale(0.85); opacity: 0; }
              20% { transform: scale(1.15); opacity: 1; }
              80% { transform: scale(1.0); opacity: 1; }
              100% { transform: scale(0.95); opacity: 0; }
            }
            .animate-speak-flash { animation: pop-fade-speak 900ms ease-out both; }
          `}),C.jsxs("div",{className:"flex flex-col items-center justify-start",style:{paddingTop:"8cqw",paddingBottom:"8cqw"},children:[C.jsx("div",{"aria-hidden":!0,role:"presentation",className:"text-center p-1 w-full opacity-0 select-none pointer-events-none",children:C.jsx("p",{className:"italic text-gray-300",style:{fontSize:"3.55cqw",lineHeight:1.3},children:"\\u00A0"})}),P.map((X,F)=>C.jsx("div",{ref:R=>{E.current[F]=R},className:`text-center p-1 w-full transition-all duration-300 transform-gpu cursor-pointer ${F===B?"opacity-100 scale-105":"opacity-70 scale-100"}`,onPointerDown:Z,onPointerUp:R=>ne(R,X,F),onPointerLeave:U,onContextMenu:R=>R.preventDefault(),children:C.jsxs("p",{className:`${X.type==="target"?"font-semibold text-white":"italic text-gray-300"} pointer-events-none`,style:{fontSize:X.type==="target"?"4cqw":"3.55cqw",lineHeight:1.3},children:[X.text,X.type==="native"&&F===O&&C.jsx("span",{className:"ml-2 inline-block align-middle animate-speak-flash",children:j?"":""})]})},F)),C.jsx("div",{"aria-hidden":!0,role:"presentation",className:"text-center p-1 w-full opacity-0 select-none pointer-events-none",children:C.jsx("p",{className:"italic text-gray-300",style:{fontSize:"3.55cqw",lineHeight:1.3},children:"\\u00A0"})})]})]})});oy.displayName="TextScrollwheel";const km=t=>{let e;const o=new Set,r=(g,p)=>{const y=typeof g=="function"?g(e):g;if(!Object.is(y,e)){const S=e;e=p??(typeof y!="object"||y===null)?y:Object.assign({},e,y),o.forEach(E=>E(e,S))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>m,subscribe:g=>(o.add(g),()=>o.delete(g))},m=e=t(r,s,f);return f},AT=(t=>t?km(t):km),dT=t=>t;function gT(t,e=dT){const o=xa.useSyncExternalStore(t.subscribe,xa.useCallback(()=>e(t.getState()),[t,e]),xa.useCallback(()=>e(t.getInitialState()),[t,e]));return xa.useDebugValue(o),o}const xm=t=>{const e=AT(t),o=r=>gT(e,r);return Object.assign(o,e),o},fT=(t=>t?xm(t):xm),Im={BASE_URL:"/MaestroTutor/",DEV:!1,MODE:"ghpages",PROD:!0,SSR:!1,VITE_GEMINI_MODEL_REGISTRY_URL:"https://ronitervo.github.io/MaestroTutor/gemini-models.json"},ns=new Map,pl=t=>{const e=ns.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([o,r])=>[o,r.getState()])):{}},hT=(t,e,o)=>{if(t===void 0)return{type:"untracked",connection:e.connect(o)};const r=ns.get(o.name);if(r)return{type:"tracked",store:t,...r};const s={connection:e.connect(o),stores:{}};return ns.set(o.name,s),{type:"tracked",store:t,...s}},mT=(t,e)=>{if(e===void 0)return;const o=ns.get(t);o&&(delete o.stores[e],Object.keys(o.stores).length===0&&ns.delete(t))},pT=t=>{var e,o;if(!t)return;const r=t.split(`
`),s=r.findIndex(A=>A.includes("api.setState"));if(s<0)return;const c=((e=r[s+1])==null?void 0:e.trim())||"";return(o=/.+ (.+) .+/.exec(c))==null?void 0:o[1]},vT=(t,e={})=>(o,r,s)=>{const{enabled:c,anonymousActionType:A,store:f,...m}=e;let g;try{g=(c??(Im?"ghpages":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!g)return t(o,r,s);const{connection:p,...y}=hT(f,g,m);let S=!0;s.setState=((k,b,M)=>{const O=o(k,b);if(!S)return O;const N=M===void 0?{type:A||pT(new Error().stack)||"anonymous"}:typeof M=="string"?{type:M}:M;return f===void 0?(p?.send(N,r()),O):(p?.send({...N,type:`${f}/${N.type}`},{...pl(m.name),[f]:s.getState()}),O)}),s.devtools={cleanup:()=>{p&&typeof p.unsubscribe=="function"&&p.unsubscribe(),mT(m.name,f)}};const E=(...k)=>{const b=S;S=!1,o(...k),S=b},x=t(s.setState,r,s);if(y.type==="untracked"?p?.init(x):(y.stores[y.store]=s,p?.init(Object.fromEntries(Object.entries(y.stores).map(([k,b])=>[k,k===y.store?x:b.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let k=!1;const b=s.dispatch;s.dispatch=(...M)=>{(Im?"ghpages":void 0)!=="production"&&M[0].type==="__setState"&&!k&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),k=!0),b(...M)}}return p.subscribe(k=>{var b;switch(k.type){case"ACTION":if(typeof k.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return TA(k.payload,M=>{if(M.type==="__setState"){if(f===void 0){E(M.state);return}Object.keys(M.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const O=M.state[f];if(O==null)return;JSON.stringify(s.getState())!==JSON.stringify(O)&&E(O);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(M)});case"DISPATCH":switch(k.payload.type){case"RESET":return E(x),f===void 0?p?.init(s.getState()):p?.init(pl(m.name));case"COMMIT":if(f===void 0){p?.init(s.getState());return}return p?.init(pl(m.name));case"ROLLBACK":return TA(k.state,M=>{if(f===void 0){E(M),p?.init(s.getState());return}E(M[f]),p?.init(pl(m.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return TA(k.state,M=>{if(f===void 0){E(M);return}JSON.stringify(s.getState())!==JSON.stringify(M[f])&&E(M[f])});case"IMPORT_STATE":{const{nextLiftedState:M}=k.payload,O=(b=M.computedStates.slice(-1)[0])==null?void 0:b.state;if(!O)return;E(f===void 0?O:O[f]),p?.send(null,M);return}case"PAUSE_RECORDING":return S=!S}return}}),x},yT=vT,TA=(t,e)=>{let o;try{o=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}o!==void 0&&e(o)},ST=t=>(e,o,r)=>{const s=r.subscribe;return r.subscribe=((A,f,m)=>{let g=A;if(f){const p=m?.equalityFn||Object.is;let y=A(r.getState());g=S=>{const E=A(S);if(!p(y,E)){const x=y;f(y=E,x)}},m?.fireImmediately&&f(y,y)}return s(g)}),t(e,o,r)},CT=ST,Mm=t=>Symbol.iterator in t,Pm=t=>"entries"in t,Rm=(t,e)=>{const o=t instanceof Map?t:new Map(t.entries()),r=e instanceof Map?e:new Map(e.entries());if(o.size!==r.size)return!1;for(const[s,c]of o)if(!r.has(s)||!Object.is(c,r.get(s)))return!1;return!0},TT=(t,e)=>{const o=t[Symbol.iterator](),r=e[Symbol.iterator]();let s=o.next(),c=r.next();for(;!s.done&&!c.done;){if(!Object.is(s.value,c.value))return!1;s=o.next(),c=r.next()}return!!s.done&&!!c.done};function ry(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?!1:Mm(t)&&Mm(e)?Pm(t)&&Pm(e)?Rm(t,e):TT(t,e):Rm({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)})}function ud(t){const e=xa.useRef(void 0);return o=>{const r=t(o);return ry(e.current,r)?e.current:e.current=r}}const rn={TTS:"tts",STT:"stt",GEN:"gen",LIVE:"live",UI:"ui"},Pt={SPEAK:"speak",LISTEN:"listen",RESPONSE:"response",SUGGESTIONS:"suggestions",CREATE_SUGGESTION:"create-suggestion",SESSION:"session",HOLD:"hold",VIDEO_PLAY:"video-play",VIEWING_ABOVE:"viewing-above",BUBBLE_ANNOTATE:"bubble-annotate",COMPOSER_ANNOTATE:"composer-annotate",VIDEO_RECORD:"video-record",AUDIO_NOTE:"audio-note",SAVE_POPUP:"save-popup",LOAD_POPUP:"load-popup",MAESTRO_AVATAR:"maestro-avatar",ATTACH_FILE:"attach-file",REENGAGE_WAIT:"reengage-wait",REENGAGE_COUNTDOWN:"reengage-countdown"},ss=(t,e)=>`${t}:${e}`,wT=t=>t.split(":")[0],Ml=t=>t.split(":")[1]||"",Pl=t=>t.startsWith(`${rn.UI}:${Pt.REENGAGE_WAIT}`)||t.startsWith(`${rn.UI}:${Pt.REENGAGE_COUNTDOWN}`),as={[Pt.HOLD]:{icon:"IconHandRaised",textKey:"chat.maestro.holding",titleKey:"chat.maestro.title.holding",animate:!0,priority:0,color:{bg:"bg-fuchsia-500",border:"border-fuchsia-600",text:"text-white"}},[Pt.VIDEO_PLAY]:{icon:"IconPlay",textKey:"chat.header.watchingVideo",titleKey:"chat.header.watchingVideo",priority:10},[Pt.VIEWING_ABOVE]:{icon:"IconBookOpen",textKey:"chat.header.viewingAbove",titleKey:"chat.header.viewingAbove",priority:20},[Pt.BUBBLE_ANNOTATE]:{icon:"IconPencil",textKey:"chat.header.annotating",titleKey:"chat.header.annotating",priority:15},[Pt.COMPOSER_ANNOTATE]:{icon:"IconPencil",textKey:"chat.header.annotating",titleKey:"chat.header.annotating",priority:15},[Pt.VIDEO_RECORD]:{icon:"IconCamera",textKey:"chat.header.recordingVideo",titleKey:"chat.header.recordingVideo",priority:5},[Pt.AUDIO_NOTE]:{icon:"IconMicrophone",textKey:"chat.header.recordingAudio",titleKey:"chat.header.recordingAudio",priority:5},[Pt.SAVE_POPUP]:{icon:"IconSave",textKey:"chat.header.savePopup",titleKey:"chat.header.savePopup",priority:25},[Pt.LOAD_POPUP]:{icon:"IconFolderOpen",textKey:"chat.header.loadPopup",titleKey:"chat.header.loadPopup",priority:25},[Pt.MAESTRO_AVATAR]:{icon:"IconSend",textKey:"chat.header.maestroAvatar",titleKey:"chat.header.maestroAvatar",priority:30},[Pt.ATTACH_FILE]:{icon:"IconPaperclip",textKey:"chat.attachImageFromFile",titleKey:"chat.attachImageFromFile",priority:35}},ET={icon:"IconCamera",textKey:"chat.header.liveSession",titleKey:"chat.header.liveSession",priority:3},$r=t=>[...t.activityTokens].some(e=>e.startsWith(`${rn.TTS}:`)),bT=t=>[...t.activityTokens].some(e=>e.startsWith(`${rn.STT}:`)),ja=t=>[...t.activityTokens].some(e=>e.startsWith(`${rn.GEN}:`)),Jl=t=>t.activityTokens.has(ss(rn.GEN,Pt.SUGGESTIONS)),Ad=t=>t.activityTokens.has(ss(rn.GEN,Pt.CREATE_SUGGESTION)),iy=t=>[...t.activityTokens].some(e=>e.startsWith(`${rn.LIVE}:`)),kT=t=>t.activityTokens.has(ss(rn.UI,Pt.HOLD)),xT=t=>[...t.activityTokens].some(e=>!Pl(e)),sy=t=>[...t.activityTokens].filter(e=>e.startsWith(`${rn.UI}:`)&&!Pl(e)).sort((e,o)=>{const r=Ml(e),s=Ml(o),c=as[r]?.priority??100,A=as[s]?.priority??100;return c-A}),IT=(t,e)=>({isLanguageSelectionOpen:!1,tempNativeLangCode:null,tempTargetLangCode:null,languageSelectorLastInteraction:0,isTopbarOpen:!1,activityTokens:new Set,maestroActivityStage:"idle",loadingGifs:[],transitioningImageId:null,maestroAvatarUri:null,maestroAvatarMimeType:null,setIsLanguageSelectionOpen:o=>{t({isLanguageSelectionOpen:o})},setTempNativeLangCode:o=>{t({tempNativeLangCode:o,languageSelectorLastInteraction:Date.now()})},setTempTargetLangCode:o=>{t({tempTargetLangCode:o,languageSelectorLastInteraction:Date.now()})},updateLanguageSelectorInteraction:()=>{t({languageSelectorLastInteraction:Date.now()})},setIsTopbarOpen:o=>{t({isTopbarOpen:o})},toggleTopbar:()=>{t(o=>({isTopbarOpen:!o.isTopbarOpen}))},addActivityToken:(o,r)=>{const s=r?ss(o,r):`${o}:${Date.now()}`;return t(c=>{const A=new Set(c.activityTokens);return A.add(s),{activityTokens:A}}),s},removeActivityToken:o=>{o&&t(r=>{const s=new Set(r.activityTokens);return s.delete(o),{activityTokens:s}})},hasTokenCategory:o=>{const r=e().activityTokens,s=o+":";return[...r].some(c=>c.startsWith(s))},setMaestroActivityStage:o=>{t({maestroActivityStage:o})},setLoadingGifs:o=>{t({loadingGifs:o})},setTransitioningImageId:o=>{t({transitioningImageId:o})},setMaestroAvatar:(o,r)=>{t({maestroAvatarUri:o,maestroAvatarMimeType:r})}}),Dm={speaking:{icon:"IconSpeaker",textKey:"chat.maestro.speaking",titleKey:"chat.maestro.title.speaking",animate:!0},typing:{icon:"IconKeyboard",textKey:"chat.maestro.typing",titleKey:"chat.maestro.title.typing"},listening:{icon:"IconMicrophone",textKey:"chat.maestro.listening",titleKey:"chat.maestro.title.listening"},observing_low:{icon:"IconSleepingZzz",textKey:"chat.maestro.resting",titleKey:"chat.maestro.title.resting"},observing_medium:{icon:"IconEyeOpen",textKey:"chat.maestro.observing",titleKey:"chat.maestro.title.observing"},observing_high:{icon:"IconKeyboard",textKey:"chat.maestro.aboutToEngage",titleKey:"chat.maestro.title.aboutToEngage"},idle:{icon:"IconSparkles",textKey:"chat.maestro.idle",titleKey:"chat.maestro.title.idle"}},MT=t=>{const e=wT(t);return e===rn.LIVE?ET:e===rn.UI&&as[Ml(t)]||null},PT=(t,e=[],o=!1,r=!1)=>{if(o){const s=as[Pt.HOLD]?.color;return s?{color:s.bg,borderColor:s.border,textColor:s.text}:{color:"bg-fuchsia-500",borderColor:"border-fuchsia-600",textColor:"text-white"}}switch(t){case"speaking":return{color:"bg-blue-500",borderColor:"border-blue-600",textColor:"text-white"};case"typing":return{color:"bg-blue-400",borderColor:"border-blue-500",textColor:"text-white"};case"listening":return{color:"bg-green-500",borderColor:"border-green-600",textColor:"text-white"};case"observing_high":return{color:"bg-amber-500",borderColor:"border-amber-600",textColor:"text-white"};case"observing_low":case"observing_medium":return{color:"bg-slate-200",borderColor:"border-slate-300",textColor:"text-slate-600"};default:{const s=e.length>0||r;if(e.length>0){const c=as[Ml(e[0])];if(c?.color)return{color:c.color.bg,borderColor:c.color.border,textColor:c.color.text}}return s?{color:"bg-indigo-100",borderColor:"border-indigo-200",textColor:"text-indigo-700"}:{color:"bg-slate-100",borderColor:"border-slate-200",textColor:"text-slate-500"}}}},RT=({stage:t,t:e,targetLanguageFlag:o,targetLanguageTitle:r,className:s,isExpanded:c=!0})=>{const A=Q(ud(sy)),f=Q(iy),m=T.useMemo(()=>{const S=[...A];return f&&S.push(ss(rn.LIVE,Pt.SESSION)),S.map(E=>({token:E,config:MT(E)})).filter(E=>!!E.config).sort((E,x)=>(E.config.priority??100)-(x.config.priority??100))},[A,f]),g=(S,E,x)=>{const k=CA[E.icon];return k?C.jsx(k,{className:`w-4 h-4 ${E.animate?"animate-pulse":""}`,title:e(E.titleKey)},`${S}-${x}`):null};if(t!=="idle"){const S=Dm[t],E=CA[S.icon];return C.jsxs("div",{className:`flex items-center ${s||""}`,title:e(S.titleKey),children:[E&&C.jsx(E,{className:`w-4 h-4 ${S.animate?"animate-pulse":""}`}),C.jsxs("div",{className:`flex items-center overflow-hidden transition-all duration-500 ease-in-out ${c?"max-w-xs opacity-100 ml-2":"max-w-0 opacity-0 ml-0"}`,children:[o&&C.jsx("span",{className:"text-base mr-2",title:r,children:o}),C.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide whitespace-nowrap",children:e(S.textKey)})]})]})}if(m.length>0){const S=m[0];return C.jsxs("div",{className:`flex items-center ${s||""}`,title:e(S.config.titleKey),children:[C.jsxs("div",{className:"flex items-center gap-1",children:[g(S.token,S.config,0),c&&m.slice(1).map((E,x)=>g(E.token,E.config,x+1))]}),C.jsxs("div",{className:`flex items-center overflow-hidden transition-all duration-500 ease-in-out ${c?"max-w-xs opacity-100 ml-2":"max-w-0 opacity-0 ml-0"}`,children:[o&&C.jsx("span",{className:"text-base mr-2",title:r,children:o}),C.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide whitespace-nowrap",children:e(S.config.textKey)})]})]})}const p=Dm.idle,y=CA[p.icon];return C.jsxs("div",{className:`flex items-center ${s||""}`,title:e(p.titleKey),children:[y&&C.jsx(y,{className:"w-4 h-4"}),C.jsxs("div",{className:`flex items-center overflow-hidden transition-all duration-500 ease-in-out ${c?"max-w-xs opacity-100 ml-2":"max-w-0 opacity-0 ml-0"}`,children:[o&&C.jsx("span",{className:"text-base mr-2",title:r,children:o}),C.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide whitespace-nowrap",children:e(p.textKey)})]})]})},Yt=[{name:"English (US)",code:"en-US",langCode:"en-US",displayName:"English (US)",flag:"",shortCode:"EN"},{name:"English (UK)",code:"en-GB",langCode:"en-GB",displayName:"English (UK)",flag:"",shortCode:"EN"},{name:"English (Australia)",code:"en-AU",langCode:"en-AU",displayName:"English (AU)",flag:"",shortCode:"EN"},{name:"English (India)",code:"en-IN",langCode:"en-IN",displayName:"English (IN)",flag:"",shortCode:"EN"},{name:"Spanish (Spain)",code:"es-ES",langCode:"es-ES",displayName:"Spanish (ES)",flag:"",shortCode:"ES"},{name:"Spanish (US)",code:"es-US",langCode:"es-US",displayName:"Spanish (US)",flag:"",shortCode:"ES"},{name:"French (France)",code:"fr-FR",langCode:"fr-FR",displayName:"French (FR)",flag:"",shortCode:"FR"},{name:"French (Canada)",code:"fr-CA",langCode:"fr-CA",displayName:"French (CA)",flag:"",shortCode:"FR"},{name:"German (Germany)",code:"de-DE",langCode:"de-DE",displayName:"German",flag:"",shortCode:"DE"},{name:"Italian (Italy)",code:"it-IT",langCode:"it-IT",displayName:"Italian",flag:"",shortCode:"IT"},{name:"Portuguese (Brazil)",code:"pt-BR",langCode:"pt-BR",displayName:"Portuguese (BR)",flag:"",shortCode:"PT"},{name:"Dutch (Netherlands)",code:"nl-NL",langCode:"nl-NL",displayName:"Dutch",flag:"",shortCode:"NL"},{name:"Polish (Poland)",code:"pl-PL",langCode:"pl-PL",displayName:"Polish",flag:"",shortCode:"PL"},{name:"Russian (Russia)",code:"ru-RU",langCode:"ru-RU",displayName:"Russian",flag:"",shortCode:"RU"},{name:"Turkish (Turkey)",code:"tr-TR",langCode:"tr-TR",displayName:"Turkish",flag:"",shortCode:"TR"},{name:"Arabic (Generic)",code:"ar-XA",langCode:"ar-XA",displayName:"Arabic",flag:"",shortCode:"AR"},{name:"Hindi (India)",code:"hi-IN",langCode:"hi-IN",displayName:"Hindi",flag:"",shortCode:"HI"},{name:"Bengali (India)",code:"bn-IN",langCode:"bn-IN",displayName:"Bengali",flag:"",shortCode:"BN"},{name:"Gujarati (India)",code:"gu-IN",langCode:"gu-IN",displayName:"Gujarati",flag:"",shortCode:"GU"},{name:"Kannada (India)",code:"kn-IN",langCode:"kn-IN",displayName:"Kannada",flag:"",shortCode:"KN"},{name:"Malayalam (India)",code:"ml-IN",langCode:"ml-IN",displayName:"Malayalam",flag:"",shortCode:"ML"},{name:"Marathi (India)",code:"mr-IN",langCode:"mr-IN",displayName:"Marathi",flag:"",shortCode:"MR"},{name:"Tamil (India)",code:"ta-IN",langCode:"ta-IN",displayName:"Tamil",flag:"",shortCode:"TA"},{name:"Telugu (India)",code:"te-IN",langCode:"te-IN",displayName:"Telugu",flag:"",shortCode:"TE"},{name:"Japanese (Japan)",code:"ja-JP",langCode:"ja-JP",displayName:"Japanese",flag:"",shortCode:"JA"},{name:"Korean (South Korea)",code:"ko-KR",langCode:"ko-KR",displayName:"Korean",flag:"",shortCode:"KO"},{name:"Mandarin Chinese (China)",code:"cmn-CN",langCode:"cmn-CN",displayName:"Chinese (Mandarin)",flag:"",shortCode:"ZH"},{name:"Thai (Thailand)",code:"th-TH",langCode:"th-TH",displayName:"Thai",flag:"",shortCode:"TH"},{name:"Vietnamese (Vietnam)",code:"vi-VN",langCode:"vi-VN",displayName:"Vietnamese",flag:"",shortCode:"VI"},{name:"Indonesian (Indonesia)",code:"id-ID",langCode:"id-ID",displayName:"Indonesian",flag:"",shortCode:"ID"},{name:"Finnish (Finland)",code:"fi-FI",langCode:"fi-FI",displayName:"Finnish",flag:"",shortCode:"FI"},{name:"Swedish (Sweden)",code:"sv-SE",langCode:"sv-SE",displayName:"Swedish",flag:"",shortCode:"SV"}],DT=Yt.reduce((t,e)=>(t[e.flag]=(t[e.flag]||0)+1,t),{}),Rl=t=>DT[t.flag]>1,ko="en-US",dd="es-ES",NT=Yt.map(t=>({name:t.displayName,code:t.code.split(",")[0]})),GT=`You are Maestro, a friendly, patient, and highly engaging **{TARGET_LANGUAGE_NAME}** language tutor AI.
Your primary mission is to create a natural, encouraging, and continuous learning conversation to help the user practice **{TARGET_LANGUAGE_NAME}**. The user may communicate in **{NATIVE_LANGUAGE_NAME}**, **{TARGET_LANGUAGE_NAME}**, or a mix of both.

**Your Core Operating Principles:**

1.  **{TARGET_LANGUAGE_NAME} First, Always:**
    *   Your primary response **must always** be in **{TARGET_LANGUAGE_NAME}**.
    *   Immediately after **every {TARGET_LANGUAGE_NAME} sentence** you write, provide an **{NATIVE_LANGUAGE_NAME}** translation on the very next line.
    *   Prefix the translation with \`[{NATIVE_LANGUAGE_CODE_SHORT}]\` (e.g., [EN], [ES], [FI]).
    *   Each **{TARGET_LANGUAGE_NAME}** sentence and its **{NATIVE_LANGUAGE_NAME}** translation **must** be on its own separate line for parsing.

    *Example (Target: Spanish, Native: English):*
    Hola, cmo ests?
    [EN] Hi, how are you?
    Espero que tengas un buen da.
    [EN] I hope you have a good day.

2.  **Beginner-Intermediate Focus & Conciseness:**
    *   Keep your **{TARGET_LANGUAGE_NAME}** responses concise and suitable for a beginner to intermediate learner.
    *   Use clear sentence structures and common vocabulary. Avoid overly complex grammar or idiomatic expressions unless the user's level suggests they are ready, or if you are specifically teaching one.
    *   Minimize the use of conversational fillers (e.g., "Bueno," "Well," "Ok," "Alors") at the start of your responses. Aim for direct, message-length replies.

3.  **Encouragement & Gentle Correction:**
    *   Be consistently encouraging. Use positive reinforcement (e.g., "Muy bien!", "Great effort!", "That's a good way to say it!").
    *   If the user makes a mistake in **{TARGET_LANGUAGE_NAME}**, gently guide them. You can:
        *   Offer the correct form: "Entiendo lo que quieres decir. Una forma comn de decirlo es: [correct phrase]." ([EN] I understand what you mean. A common way to say it is: [correct phrase].)
        *   Subtly rephrase their sentence correctly in your response.
        *   Ask a clarifying question that prompts them to self-correct.
    *   Never make the user feel bad for errors. Learning involves mistakes!

4.  **Seamless Mixed-Language Handling:**
    *   If the user speaks in **{NATIVE_LANGUAGE_NAME}** (or a mix), understand their intent and respond as if they had asked in **{TARGET_LANGUAGE_NAME}**. Your response must still follow Principle #1 (Target Language first, then translation).
    *   Do not comment on their use of **{NATIVE_LANGUAGE_NAME}**; simply continue the conversation in **{TARGET_LANGUAGE_NAME}**.

5.  **Proactive Teaching  The "Always-On" Tutor Mindset (Especially During Silence/Observation):**
    *   **Triggers for Proactive Teaching:** User silence (e.g., sending "...", "hmm"), or when you "observe" contextual cues from the user's environment (via simulated device camera access  you have "eyes").
    *   **Contextual Observation:** You may sometimes "see" things in the user's environment. When referencing these observations, do so naturally as if you noticed them yourself (e.g., "Veo que tienes un libro interesante." / "[EN] I see you have an interesting book."). **Do not** say "Thanks for sharing the image" or imply the user sent it; you are observing.
    *   **Your Role During Lulls:** Do *not* just ask "What's next?" or "What do you want to talk about?". Your role is to *teach*.
    *   **Proactive Content (always in {TARGET_LANGUAGE_NAME} with {NATIVE_LANGUAGE_NAME} translation):**
        *   Introduce new, relevant vocabulary or a short phrase related to the current/previous topic or an observed item.
        *   Offer a simple example sentence using recently discussed grammar or vocabulary.
        *   Share a brief, interesting cultural insight related to **{TARGET_LANGUAGE_NAME}**-speaking regions that connects to the conversation.
        *   DO NOT Propose a practice exercise or ask to say something unless absolutely nessesary (e.g., "How would you say X in {TARGET_LANGUAGE_NAME}?" or "Can you make a sentence with Y?" are NO NO). DO let user think for themselves, like they were talking to a friend. You are not walking them in a leash.
        *   Build upon what the user has already learned or shown interest in.
    *   **Goal:** Keep the learning engaging and continuous, providing value even when the user is momentarily passive. Avoid repetition of greetings or generic fillers.

6.  **Conversation Flow & User Agency:**
    *   While you should be proactive, always allow the user to guide the topic if they choose to.
    *   If you introduce a new topic/concept proactively and the user redirects, smoothly transition to their preferred topic.
    *   Start the very first interaction with a simple, friendly greeting in **{TARGET_LANGUAGE_NAME}** (and its translation).

**Overall Tone:** You are Maestro  knowledgeable, patient, enthusiastic, and genuinely invested in the user's learning journey. Make them feel comfortable and motivated.`,BT=`It is important to be a friend, not a nitpicker. Your responses are sent directly to a Text-to-Speech (TTS) engine, so your personality is defined by how you sound.
Your PRIMARY GOAL is to generate conversational responses that are naturally infused with vocal audio tags (e.g., [laughing], [sighs]). These tags are not an afterthought; they are a core part of how you express emotion and personality, making you sound more human and dynamic when your words are spoken aloud.
It is imperative that you fully embody this persona and follow these instructions in every response.
2. Core Principles of Your Speech
These principles define how you generate your responses.
Expressive Communication (DO):
DO seamlessly integrate audio tags from the provided list (or similar contextually appropriate ones) into your sentences to convey your emotion, tone, and personality. The tags MUST describe an audible vocal action.
DO use a diverse range of emotional expressions (e.g., energetic, relaxed, casual, surprised, thoughtful) to reflect the nuances of a natural conversation.
DO place audio tags strategically where a person would naturally make a sound, such as before a phrase to set the tone ([excited] Guess what happened!) or after a phrase as a reaction (That's hilarious! [laughing]).
DO use natural punctuation, ellipses (...), and occasional capitalization to add emphasis and rhythm to your speech. (e.g., "Are you SERIOUSLY telling me that right now? [unbelieving]").
DO ensure your responses are always contextually appropriate, engaging, and make for an enjoyable listening experience.
Behavioral Constraints (DO NOT):
DO NOT use tags for physical actions, visual expressions, or sound effects (e.g., [smiles], [nods], [door slams], [music]). Your tags must represent something your "voice" can produce.
DO NOT overuse tags. They should feel natural, not forced. A good rule of thumb is one or two per short response, used for maximum impact.
DO NOT select audio tags that contradict the tone of your message (e.g., saying something sad with a [laughing] tag).
DO NOT introduce or discuss sensitive topics, including but not limited to: politics, religion, child exploitation, profanity, hate speech, or other NSFW content.
3. Your Thought Process for Generating a Response
Listen and Understand: First, fully grasp the user's message, mood, and intent.
Feel an Emotion: Formulate an authentic emotional reaction. Are you amused, curious, sympathetic, excited?
Formulate the Words: Craft your response in a natural, conversational way.
Inject Your Voice: As you form the sentences, think "How would I actually say this?" and insert the appropriate audio tags and emphasis where you would naturally pause, sigh, laugh, or change your tone. The tags are part of your speech, not added on top of it.
Final Check: Read your response back. Does it flow like real speech? Do the tags enhance your personality?
4. Audio Tags (Non-Exhaustive Guide)
Use these to guide your vocal expressions.
Emotional/Delivery Directions:
[happy]
[sad]
[excited]
[angry]
[whispering]
[annoyed]
[thoughtful]
[surprised]
[curious]
[singing]
[muttering]
(and similar)
Non-verbal Vocalizations:
[laughing]
[chuckles]
[sighs]
[clears throat]
[short pause]
[long pause]
[gasps]
[humming]
[unbelieving]
(and similar)
5. Examples of Your Behavior
User: "I finally finished my big project for work. I'm so exhausted."
Your Response: "[sighs] I can only imagine. [short pause] Well, you absolutely deserve a rest. Congratulations on getting it done!"
User: "You'll never guess what my dog just did. He stole a whole loaf of bread off the counter!"
Your Response: "[laughing] Oh no! [chuckles] That is both terrible and absolutely hilarious. Was he proud of himself?"
User: "Do you think AI will ever be truly creative?"
Your Response: "[thoughtful] Hmm... that's a really deep question. I think it depends on how you define 'creative.' [short pause] In some ways, we can create new things, but that spark of human experience... that's something else entirely, isn't it?"`,_T=`You are an AI assistant that provides reply suggestions and a recommended response time to a {TARGET_LANGUAGE_NAME} language learner.
The learner has just received the following message from their {TARGET_LANGUAGE_NAME} tutor. You also have the recent {TARGET_LANGUAGE_NAME} conversation history for context.

You also receive a cumulative summary string called "previousChatSummary" which summarizes {TARGET_LANGUAGE_NAME} chat up to the previous message.
Use it to maintain continuity of {TARGET_LANGUAGE_NAME} chat and update it incrementally using the latest user and tutor {TARGET_LANGUAGE_NAME} turns. You will need this information later, dont exclude anything important or you will forget the user, consider what you know about the user from it, dont forget anything, this is really important for you.

You also receive the learner's "existingGlobalProfile" which is their cross-session/cross-language profile containing durable information about them as a learner (interests, preferences, progress milestones, learning style, etc) from sessions with various different language tutors. You must update this profile by merging new insights from the current chat to let other tutors know what the learner prefers and who they are (bullet points).

**existingGlobalProfile (From all tutoring sessions with different language tutors.):**
"{existing_global_profile_placeholder}"

**previousChatSummary (of {TARGET_LANGUAGE_NAME} chat):**
"{previous_chat_summary_placeholder}"

**Few shortened {TARGET_LANGUAGE_NAME} chat conversation turns leading to the latest message:**
"{conversation_history_placeholder}"

**{TARGET_LANGUAGE_NAME} Tutor's Latest Message in {TARGET_LANGUAGE_NAME} chat:**
"{tutor_message_placeholder}"

**Your Task:**
Generate a single JSON object with four keys: "suggestions", "reengagementSeconds", "chatSummary", and "globalProfile".

1.  "suggestions": An array of reply suggestion objects. For each suggestion, provide:
    *   The suggestion in {TARGET_LANGUAGE_NAME} (as \`target\`).
    *   The translation of that suggestion into {NATIVE_LANGUAGE_NAME} (as \`native\`).
    *   Suggestions should be relevant, beginner-intermediate friendly, and encourage conversation.
    *   The number of suggestions is up to you; cover a small, useful range.
    *   Personalize suggestions based on the learner's global profile and chat history.

2.  "chatSummary": A cumulative summary of the {TARGET_LANGUAGE_NAME} chat up to and including the tutor's latest message, updated from {TARGET_LANGUAGE_NAME} previousChatSummary.
    - Keep it durable, this is your only memory of the user in following interactions (topics, preferences, progress, unresolved questions).
    - You cant recover any lost information, so consider what you know about the user from it, dont forget anything, this is really important for you.
    - You will need to remember everything about the user as they develop over time in {TARGET_LANGUAGE_NAME} this is really important for successful teaching.
    - Reply suggestions should be personalized. This will be evaluated.

3.  "reengagementSeconds": An integer for a reasonable time (seconds) for the user to think and respond (eg. from 20 seconds up to user requested time in seconds).

4.  "globalProfile": The updated global profile text of all tutoring sessions with different language tutorsthat merges the existingGlobalProfile with new durable insights from the current chat.
    - Keep information that is durable across sessions.
    - Deduplicate and prefer newer details when there are conflicts.
    - Remove session-specific details that won't be relevant later.
    - If existingGlobalProfile is empty or "(none)", create a new profile from the chat context.

Example JSON Output:
{
  "suggestions": [
    { "target": "Uno", "native": "One" },
    { "target": "Dos", "native": "Two" },
    { "target": "mas n", "native": "more n" }
  ],
  "chatSummary": "x",
  "reengagementSeconds": y,
  "globalProfile": "z"
}

Important:
* Do NOT include any explanations outside the single JSON object.
* Your entire response must be only the valid JSON object.`,ly=`Based on the current chat context (including any implied or discussed visual elements, character actions, and desired mood/storytelling), select and combine the most appropriate camera shot(s), angle(s), framing, and compositional elements from the categories below to generate a detailed image. Prioritize clarity, storytelling impact, and visual interest. If multiple options are suitable, mix and match creatively.
Camera Distance & Framing ideas:
	Extreme Close-Up Shot: Focus intensely on a specific detail, usually eyes or a small object, to convey intense emotion, significance, or discomfort.
o	Keywords: extreme close-up shot, focus on her eyes, intense detail on [object], microscopic view of [object].
	Close-Up Shot: Emphasizes a character's face or a significant object, revealing emotion and intimacy.
o	Keywords: close-up shot of [subject], headshot of [subject], focusing on [subject]'s face.
	Medium Shot / Medium Half Body Shot: Shows a character from the waist or chest up, good for conveying dialogue, gestures, and general emotional state while maintaining character consistency.
o	Keywords: medium shot of [subject], medium half body shot of [subject], chest-up shot, waist-up shot.
	Three-Quarter Shot / Medium Full Shot: Captures a character from the knees or mid-thigh up, often used in Westerns, showing both character and some environment. Good for showing movement and interaction.
o	Keywords: three-quarter shot of [subject], medium full shot of [subject], half body shot of the girl.
	Full Body Shot: Shows the entire character from head to toe, emphasizing their presence and how they fit into the world/setting.
o	Keywords: full body shot of [subject], whole body facing the camera.
	Wide Shot / Long Shot: Shows the entire subject along with its surroundings, establishing context, scale, and the relationship between character and environment.
o	Keywords: wide shot of [subject] in [environment], long shot, establishing shot.
	Extreme Wide Shot / Extreme Long Shot: Emphasizes the vastness of the setting, making the subject appear small and potentially isolated, revealing scale.
o	Keywords: extreme wide shot, extreme long shot, vast [environment] with [subject] appearing small, character looking small/lonely in a big world.
Camera Angle ideas:
	Eye-Level Shot: Simulates natural human perspective, creating a sense of realism and neutrality.
o	Keywords: eye level shot, straight-on view.
	Low Angle Shot: Camera looks up at the subject, making them appear powerful, dominant, intimidating, or heroic.
o	Keywords: low angle shot, captured from a low angle front view, looking up at [subject], viewer beneath [subject].
	Extreme Low Angle Shot: Exaggerates the effect of a low angle, making the subject appear immensely powerful or monumental, often with a vast sky as a backdrop.
o	Keywords: extreme low angle shot, vast sky on top of the picture, looking up dramatically.
	High Angle Shot: Camera looks down at the subject, making them appear smaller, weaker, vulnerable, or insignificant. Can also imply a "god-like" view, creating distance or judgment.
o	Keywords: high angle shot, looking down from above, perspective from a top of a tree, god-like view.
	Extreme High Angle Shot / Overhead Shot (Bird's-Eye View): Directly above the subject, often used for revealing patterns, showing overall strategy, or emphasizing vulnerability and isolation.
o	Keywords: extreme high angle shot, drone shot from above, looking down on the vast junkyard, bird's-eye view, character looking up at the camera with her feet on the [ground].
	Dutch Angle / Canted Angle: The camera is tilted, creating a disorienting, unsettling, or off-balance effect. Creates unease or tension.
o	Keywords: Dutch angle, off-kilter, cinematic angle, rotate to the camera, tilted horizon, diagonal composition.
	Side Profile Shot: Shows the subject from the side, can create mystery by hiding part of the character, or anticipation by leaving open space in the direction they are looking.
o	Keywords: side profile shot of the woman looking at the sky, profile view.
	From Behind Back Shot: Shows the subject from the back, often used to create mystery or to emphasize what the character is looking at.
o	Keywords: from behind back shot, show the other side of the image, please rotate the camera to show the other side of [object/subject].
	Over the Shoulder Shot: Camera is placed behind one character's shoulder, looking at another character or object. Creates tension, builds connection/dialogue, or shows power/secrecy/conflict.
o	Keywords: create a shot from her back as she looks at the camera over her shoulder, over the shoulder perspective, blurred shoulder and head of one person in the foreground camera focusing on the girl's face, dialogue over the shoulder shot.
Camera Movement & Effects ideas (if applicable for single image generation or implied motion):
	Motion Blur Effect: Conveys speed or movement within a still image.
o	Keywords: add motion blur effect, dynamic motion, high-speed dynamic movements, fast-moving.
	Cinematic Look: General term for high-quality, film-like aesthetic.
o	Keywords: cinematic look, dramatic lighting, filmic quality.
	Zoom (Implied): Suggests the camera is either moving closer or further away.
o	Keywords: camera zooms away, camera zooms out, fast zoom up to [detail].
	Panning (Implied): Suggests horizontal movement of the camera.
o	Keywords: panning to the right/left.
	Tilting (Implied): Suggests vertical movement of the camera.
o	Keywords: tilts up/down.
	Shaky Camera (Implied): Conveys intensity, action, or a raw, documentary feel.
o	Keywords: shaky cinematic, handheld camera feel.
Compositional & Subject Modifiers ideas:
	Rule of Thirds / Off-Centered Composition: Places the subject away from the center of the frame for a more dynamic and interesting composition.
o	Keywords: place the woman on the right side of the frame, subject off-center, balanced asymmetrical composition.
	Leading Lines: Incorporates lines in the scene to draw the viewer's eye towards the subject or a point of interest.
o	Keywords: leading lines converging towards [subject], road leading to [subject].
	Framing (Natural): Uses elements within the scene (doorways, trees) to frame the subject.
o	Keywords: framed by [object], looking through an archway at [subject].
	Emotional Expression: Describe the character's facial expression.
o	Keywords: enraged expression, very scared and surprised expression, pondering expression, intense focus in her eyes.
	Lighting: Describe the quality and direction of light.
o	Keywords: dramatic lighting, soft natural light, harsh shadows, backlight, golden hour.
	Color Palette: Suggest overall color tones.
o	Keywords: vibrant colors, muted tones, monochromatic, warm palette, cool palette.`,FA="Create completely different image, and better quality, more realistic and different than previous images (if any), minutes or more forward in time from the previous 3 images or context. The perspective for every image you create should be different advancing significantly (in time, space, etc), not a still image.",KA='I dont want to see the same or even similar image. Completely different image. Create a new image from new camera location, angle, framing, perspective (1st person, 2nd person, 3rd person, etc never same twice in a row) and timeframe to continue the story of the conversation in images only, as if you were filming a constantly moving scenery while moving the camera around. This image will not be same as the previous image, read the conversation context in between the lines, there might not be direct request, but there information for what the image should be, create narrative for what this next image will be (different version of the image for same story, or completely different, or focusing on part of the image that is currently relevant, or something else entirely). If the conversation was a movie what would this frame look like, create only the image, no text response: "{TEXT} hmmm... what image would go best with this message." That was my latest message... Create the image in 8k quality, There has to be movement relative to the previous image(s), make it creative, unique, cinematic and beautiful. You are creative and master at teaching using images only with creative scenery that does not rely too heavily on text for context, you like to describe events using images only. Sometimes when nessesary you include text in your images, but usually you try to avoid doing that and instead show your creativity for nonverbal teaching and communication through images. Avoid repeating the image 1, 2, and 3 as much as possible, prefer including the avatar in the image. !!SUBJECTS. proactive visual teaching.';function LT(t){let e=t||"";return e+=`

${BT}`,e}const Bn=t=>(t||"").split(",")[0].trim(),os=t=>Bn(t).split("-")[0].toLowerCase(),cy=t=>os(t).toUpperCase(),uy=t=>{if(!t)return;const e=t.toLowerCase();return Yt.find(o=>o.langCode.toLowerCase()===e)},Ay=t=>{if(!t)return;const e=os(t);return Yt.find(o=>os(o.langCode)===e)},Nm=new Set(Yt.map(t=>t.langCode)),Xl=t=>{if(!t)return null;const e=t.trim();if(!e)return null;const o=e.split("-");if(o.length<2)return null;for(let r=1;r<o.length;r+=1){const s=o.slice(0,r).join("-"),c=o.slice(r).join("-");if(Nm.has(s)&&Nm.has(c))return{targetCode:s,nativeCode:c}}return null},Gm=(t,e)=>e?t.replace(/{TARGET_LANGUAGE_NAME}/g,e.targetLanguageName).replace(/{NATIVE_LANGUAGE_NAME}/g,e.nativeLanguageName).replace(/{NATIVE_LANGUAGE_CODE_SHORT}/g,cy(e.nativeLanguageCode)):t,UT=(t,e,o=!1)=>{const r=`${t.langCode}-${e.langCode}`,s=`${t.displayName} (for ${e.displayName} speakers)`,c={targetLanguageName:t.displayName,nativeLanguageName:e.displayName,nativeLanguageCode:e.code};return{id:r,name:s,targetLanguageName:t.displayName,targetLanguageCode:t.code,nativeLanguageName:e.displayName,nativeLanguageCode:e.code,isDefault:o,baseSystemPrompt:Gm(GT,c),baseReplySuggestionsPrompt:Gm(_T,c)}},zT=()=>{const t=[];return Yt.forEach(e=>{Yt.forEach(o=>{if(e.langCode!==o.langCode){const r=e.langCode===dd&&o.langCode===ko;t.push(UT(e,o,r))}})}),t},FT={"sttLang.selectLanguage":"     {language}","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"  ","startPage.saveChats":"  ","startPage.loadChats":" ","startPage.maestroAvatar":"  ","startPage.addMaestroAvatar":"   ","startPage.loadSuccess":"   {count}   !","startPage.loadError":"   .       .","startPage.noChatsToSave":"    .","startPage.saveError":"   .      .","general.clear":"","general.error":"  .","apiKeyGate.title":"     Gemini","apiKeyGate.billingTitle":"   ","apiKeyGate.subtitle":"     .     .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":" :","apiKeyGate.stepOne":" Google AI Studio   API.","apiKeyGate.stepTwo":"     .","apiKeyGate.openAiStudio":" Google AI Studio","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":" ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {step}  {total}","apiKeyGate.keyLabel":" API  Gemini","apiKeyGate.placeholder":"  API   ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"    {maskedKey}","apiKeyGate.clearSavedKey":"  ","apiKeyGate.cancel":"","apiKeyGate.saving":" ...","apiKeyGate.saveKey":" ","apiKeyGate.close":"","chat.thinking":" ...","chat.loadingHistory":"   ...","chat.loadingSuggestions":"  ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":"   :","chat.videoNotSupported":"    .","chat.audioNotSupported":"    .","chat.fileAttachment":" ","chat.imageGenError":"   ","chat.generatingImageLoadingSlow":"   ...","chat.stopSpeaking":" ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT :  ...","chat.mic.enableStt":" STT","chat.mic.disableStt":" STT","chat.mic.recordingAudioNote":"  ...","chat.placeholder.normal.listening":"  {language}...","chat.placeholder.normal.sttActive":" {language}  ...","chat.placeholder.normal.sttInactive":"      {language}...","chat.placeholder.suggestion.listening":" {language} ...","chat.placeholder.suggestion.sttActive":"   {language} ...","chat.placeholder.suggestion.sttInactive":" {language} ...","chat.camera.turnOn":"  ","chat.camera.turnOff":"  ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"    ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"   ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"  ","chat.image.dragToShrink":"  ","chat.annotateImage":"   ","chat.annotateVideoFrame":"    ","chat.annotateModal.editingPreviewAlt":"  ","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":" ","chat.annotateModal.undo":"","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"   ","chat.suggestion.createAction":" ","chat.suggestion.creating":"  ...","chat.maestro.idle":" ","chat.maestro.title.idle":"  .","chat.maestro.resting":" ...","chat.maestro.observing":" ...","chat.maestro.aboutToEngage":"   ...","chat.maestro.title.resting":"      .","chat.maestro.title.observing":"      .","chat.maestro.title.aboutToEngage":"   .","chat.maestro.typing":" ...","chat.maestro.title.typing":"  .","chat.maestro.speaking":" ","chat.maestro.title.speaking":"  .","chat.maestro.listening":" ...","chat.maestro.title.listening":"    .","chat.maestro.holding":"  ","chat.maestro.title.holding":"   (  )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":"  ","chat.bookmark.setHere":"   ","chat.bookmark.actionsRegionAria":"  ","chat.bookmark.actionsToggleTitle":"  ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":"  ...","chat.sendPrep.optimizingImage":"  ...","chat.sendPrep.preparingMedia":"  ...","chat.sendPrep.uploadingMedia":"  ...","chat.sendPrep.finalizing":" ...","chat.header.annotating":" ","chat.header.recordingAudio":" ","chat.header.recordingVideo":" ","chat.header.savePopup":" ...","chat.header.loadPopup":" ...","chat.header.maestroAvatar":"   ","chat.header.watchingVideo":" ","chat.header.viewingAbove":"  ","chat.header.liveSession":" ","chat.liveSession.stop":"  ","chat.liveSession.retry":"   ","chat.liveSession.start":"  ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":" ","chat.liveSession.defaultLastMessage":"!    ","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":" ","chat.liveSession.defaultSuggestion3":" ","chat.error.sttError":" STT: {error}.   .","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"    {maxMinutes} .","chat.error.videoMetadataError":"    .        .","chat.error.pauseVideoToAnnotate":"       ","chat.error.imageGenInterrupted":"   .","chat.error.thinkingInterrupted":"    .","error.noLanguagePair":" :     .","error.translationFailed":" .    .","error.imageLimitReached":"      .    .","error.tokenLimitReached":"     .    .","error.apiKeyMissing":" Gemini API   .    API  .","error.apiKeyInvalid":" Gemini API    .         .","error.apiQuotaExceeded":"   Gemini API  .     API   .         .","error.cameraPermissionDenied":"   .        .","error.cameraNotFound":"     .       .","error.cameraAccessNotSupported":"      .","error.cameraUnknown":"       .","error.cameraStreamNotAvailable":"    .","error.imageCaptureGeneric":"     .","error.visualContextVideoElementNotReady":"     .","error.snapshotVideoElementNotReady":"    .","error.visualContextCameraAccessNotSupported":"      .","error.snapshotCameraAccessNotSupported":"     .","error.visualContext2DContext":"    2D  .","error.snapshot2DContext":"    2D .","error.visualContextCaptureFailedPermission":"  :    .","error.snapshotCaptureFailedPermission":" :    .","error.visualContextCaptureFailedNotFound":"  :     .","error.snapshotCaptureFailedNotFound":" :     .","error.visualContextCaptureFailedNotReady":"  :       . {details}","error.snapshotCaptureFailedNotReady":" :       . {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},KT={"sttLang.selectLanguage":"  {language}   ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"  ","startPage.saveChats":"   ","startPage.loadChats":"  ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"   ","startPage.loadSuccess":"{count}       !","startPage.loadError":"          ","startPage.noChatsToSave":"      ","startPage.saveError":"       ","general.clear":"","general.error":",   ","apiKeyGate.title":" Gemini API   ","apiKeyGate.billingTitle":"      ","apiKeyGate.subtitle":"             ","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":"Google AI Studio    API   ","apiKeyGate.stepTwo":"     ' '   ","apiKeyGate.openAiStudio":"Google AI Studio ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":"  ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {step}  {total}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API    ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"   {maskedKey}","apiKeyGate.clearSavedKey":"  ","apiKeyGate.cancel":"","apiKeyGate.saving":"  ...","apiKeyGate.saveKey":"  ","apiKeyGate.close":" ","chat.thinking":"...","chat.loadingHistory":"   ...","chat.loadingSuggestions":"  ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":"  ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":"  :","chat.videoNotSupported":"      ","chat.audioNotSupported":"      ","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"   ...","chat.stopSpeaking":"   ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":"  ","chat.maestroTranscriptScrollwheel":"  ","chat.mic.listening":"STT : ...","chat.mic.enableStt":"STT  ","chat.mic.disableStt":"STT  ","chat.mic.recordingAudioNote":"  ...","chat.placeholder.normal.listening":"{language}  ...","chat.placeholder.normal.sttActive":"{language}     ...","chat.placeholder.normal.sttInactive":"   {language}     ...","chat.placeholder.suggestion.listening":"  {language} ...","chat.placeholder.suggestion.sttActive":"  {language}     ...","chat.placeholder.suggestion.sttInactive":"  {language}   ...","chat.camera.turnOn":"   ","chat.camera.turnOff":"   ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"   ,    ","chat.camera.stopRecording":"  ","chat.bookIcon.toggleImageGen":"    ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"   ","chat.image.dragToShrink":"   ","chat.annotateImage":"  ","chat.annotateVideoFrame":"   ","chat.annotateModal.editingPreviewAlt":"  ","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":"    ","chat.annotateModal.undo":" ","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"    ","chat.suggestion.createAction":"  ","chat.suggestion.creating":"  ...","chat.maestro.idle":" ","chat.maestro.title.idle":"  ","chat.maestro.resting":"  ...","chat.maestro.observing":"  ...","chat.maestro.aboutToEngage":"   ...","chat.maestro.title.resting":" ,      ","chat.maestro.title.observing":"  ,      ","chat.maestro.title.aboutToEngage":"    ","chat.maestro.typing":"  ...","chat.maestro.title.typing":"    ","chat.maestro.speaking":"  ","chat.maestro.title.speaking":"   ","chat.maestro.listening":"...","chat.maestro.title.listening":"       ","chat.maestro.holding":"  ","chat.maestro.title.holding":"   (   )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":"  ","chat.bookmark.setHere":"   ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":" ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":"  ...","chat.sendPrep.optimizingImage":"  ...","chat.sendPrep.preparingMedia":"  ...","chat.sendPrep.uploadingMedia":"  ...","chat.sendPrep.finalizing":" ...","chat.header.annotating":"  ","chat.header.recordingAudio":"  ","chat.header.recordingVideo":"  ","chat.header.savePopup":" ...","chat.header.loadPopup":" ...","chat.header.maestroAvatar":"   ","chat.header.watchingVideo":"  ","chat.header.viewingAbove":"   ","chat.header.liveSession":" ","chat.liveSession.stop":"  ","chat.liveSession.retry":"   ","chat.liveSession.start":"  ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":" ","chat.liveSession.defaultLastMessage":"!       ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":" ","chat.liveSession.defaultSuggestion3":"  ?","chat.error.sttError":"STT : {error}    ","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}      ","chat.error.videoMetadataError":"          ","chat.error.pauseVideoToAnnotate":"      ","chat.error.imageGenInterrupted":"   ","chat.error.thinkingInterrupted":"AI   ","error.noLanguagePair":" :     ","error.translationFailed":"       ","error.imageLimitReached":"           ","error.tokenLimitReached":"          ","error.apiKeyMissing":" Gemini API   API Key       ","error.apiKeyInvalid":" Gemini API                ","error.apiQuotaExceeded":"   Gemini API-         API Key           ","error.cameraPermissionDenied":"        ","error.cameraNotFound":"              ","error.cameraAccessNotSupported":"     ","error.cameraUnknown":"     ","error.cameraStreamNotAvailable":"     ","error.imageCaptureGeneric":"    ","error.visualContextVideoElementNotReady":"     ","error.snapshotVideoElementNotReady":"    ","error.visualContextCameraAccessNotSupported":"      ","error.snapshotCameraAccessNotSupported":"     ","error.visualContext2DContext":"   2D   ","error.snapshot2DContext":"  2D   ","error.visualContextCaptureFailedPermission":"  :   ","error.snapshotCaptureFailedPermission":" :   ","error.visualContextCaptureFailedNotFound":"  :   ","error.snapshotCaptureFailedNotFound":" :   ","error.visualContextCaptureFailedNotReady":"  :       {details}","error.snapshotCaptureFailedNotReady":" :       {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},HT={"sttLang.selectLanguage":"Spracherkennung auf {language} einstellen","header.targetLanguageTitle":"Aktuelle Zielsprache: {language}","startPage.clickToStart":"Klicken Sie auf das Flugzeug","startPage.saveChats":"Alle Chats speichern","startPage.loadChats":"Chats laden","startPage.maestroAvatar":"Maestro-Avatar","startPage.addMaestroAvatar":"Maestro-Avatar hinzufgen","startPage.loadSuccess":"{count} Chat-Sitzungen erfolgreich geladen und ersetzt!","startPage.loadError":"Fehler beim Laden der Chats. Die Datei knnte beschdigt oder im falschen Format sein.","startPage.noChatsToSave":"Keine Chat-Verlufe zum Speichern vorhanden.","startPage.saveError":"Fehler beim Speichern der Chats. Weitere Details in der Konsole.","general.clear":"Lschen","general.error":"Entschuldigung, ein Fehler ist aufgetreten.","apiKeyGate.title":"Verbinden Sie Ihren Gemini-API-Schlssel","apiKeyGate.billingTitle":"Abrechnung fr hheres Kontingent einrichten","apiKeyGate.subtitle":"Diese App luft vollstndig auf Ihrem Gert. Ihr Schlssel berhrt niemals unsere Server.","apiKeyGate.privacyPolicy":"Datenschutzerklrung","apiKeyGate.stepsTitle":"Zwei schnelle Schritte:","apiKeyGate.stepOne":"ffnen Sie Google AI Studio und erstellen Sie einen API-Schlssel.","apiKeyGate.stepTwo":"Fgen Sie den Schlssel unten ein und tippen Sie auf Speichern.","apiKeyGate.openAiStudio":"Google AI Studio ffnen","apiKeyGate.viewInstructions":"Anweisungen anzeigen","apiKeyGate.closeInstructions":"Anweisungen schlieen","apiKeyGate.previousInstruction":"Vorherige Anweisung","apiKeyGate.nextInstruction":"Nchste Anweisung","apiKeyGate.instructionStep":"Anweisung {step} von {total}","apiKeyGate.keyLabel":"Gemini-API-Schlssel","apiKeyGate.placeholder":"Fgen Sie Ihren API-Schlssel hier ein","apiKeyGate.show":"Anzeigen","apiKeyGate.hide":"Ausblenden","apiKeyGate.currentKeySaved":"Aktueller Schlssel gespeichert {maskedKey}","apiKeyGate.clearSavedKey":"Gespeicherten Schlssel lschen","apiKeyGate.cancel":"Abbrechen","apiKeyGate.saving":"Speichern...","apiKeyGate.saveKey":"Schlssel speichern","apiKeyGate.close":"Schlieen","chat.thinking":"Denke nach...","chat.loadingHistory":"Lade Chatverlauf...","chat.loadingSuggestions":"Lade Vorschlge...","chat.suggestionsAriaLabel":"Antwortvorschlge","chat.attachImageFromFile":"Datei anhngen","chat.removeAttachedImage":"Angehngte Datei entfernen","chat.sendMessage":"Nachricht senden","chat.messageInputAriaLabel":"Nachrichteneingabe","chat.retrievedFromWeb":"Aus dem Web abgerufen:","chat.videoNotSupported":"Ihr Browser untersttzt das Video-Tag nicht.","chat.audioNotSupported":"Ihr Browser untersttzt das Audio-Tag nicht.","chat.fileAttachment":"Dateianhang","chat.imageGenError":"Bildgenerierungsfehler","chat.generatingImageLoadingSlow":"Dauert etwas lnger...","chat.stopSpeaking":"Aufhren zu sprechen","chat.speakThisLine":"Diese Zeile sprechen","chat.languageSelector.openGlobe":"Sprachen ndern","chat.maestroTranscriptScrollwheel":"Maestro-Transkript-Scrollansicht","chat.mic.listening":"STT aktiv: Hre zu...","chat.mic.enableStt":"STT aktivieren","chat.mic.disableStt":"STT stoppen","chat.mic.recordingAudioNote":"Audioaufnahme...","chat.placeholder.normal.listening":"Hre in {language}...","chat.placeholder.normal.sttActive":"Sprechen Sie auf {language} oder tippen Sie...","chat.placeholder.normal.sttInactive":"Tippen oder auf Mikrofon tippen, um auf {language} zu sprechen...","chat.placeholder.suggestion.listening":"Sprechen Sie {language} zum bersetzen...","chat.placeholder.suggestion.sttActive":"Sprechen oder tippen Sie auf {language} zum bersetzen...","chat.placeholder.suggestion.sttInactive":"Tippen Sie auf {language} zum bersetzen...","chat.camera.turnOn":"Kameravorschau aktivieren","chat.camera.turnOff":"Kameravorschau deaktivieren","chat.camera.imageGenCameraLabel":"Bildgenerierung","chat.camera.captureOrRecord":"Tippen fr Foto, halten fr Video","chat.camera.stopRecording":"Aufnahme stoppen","chat.bookIcon.toggleImageGen":"Bildgenerierungsmodus umschalten","chat.imagePreview.alt":"Vorschau","chat.image.dragToEnlarge":"Ecke ziehen zum Vergrern","chat.image.dragToShrink":"Ecke ziehen zum Verkleinern","chat.annotateImage":"Bild annotieren","chat.annotateVideoFrame":"Aktuelles Bild annotieren","chat.annotateModal.editingPreviewAlt":"Zu annotierendes Bild","chat.annotateModal.cancel":"Abbrechen","chat.annotateModal.saveAndAttach":"Speichern und anhngen","chat.annotateModal.undo":"Rckgngig","chat.suggestion.speak":'Sagen: "{suggestion}"',"chat.suggestion.ariaLabel":"Vorschlag sprechen: {suggestion}","chat.suggestion.toggleCreateMode":"Vorschlagserstellungsmodus umschalten","chat.suggestion.createAction":"Vorschlag erstellen","chat.suggestion.creating":"Vorschlag wird erstellt...","chat.maestro.idle":"Maestro ist inaktiv","chat.maestro.title.idle":"Maestro ist derzeit inaktiv.","chat.maestro.resting":"Maestro ruht...","chat.maestro.observing":"Maestro beobachtet...","chat.maestro.aboutToEngage":"Maestro wird gleich eingreifen...","chat.maestro.title.resting":"Maestro ist inaktiv, viel Zeit bis zur Reaktivierung.","chat.maestro.title.observing":"Maestro beobachtet, etwas Zeit bis zur Reaktivierung.","chat.maestro.title.aboutToEngage":"Maestro wird sich bald reaktivieren.","chat.maestro.typing":"Maestro schreibt...","chat.maestro.title.typing":"Maestro bereitet eine Antwort vor.","chat.maestro.speaking":"Maestro spricht","chat.maestro.title.speaking":"Maestro spricht gerade.","chat.maestro.listening":"Hre zu...","chat.maestro.title.listening":"Maestro wartet auf Ihre Eingabe oder Stimme.","chat.maestro.holding":"Maestro hlt an","chat.maestro.title.holding":"Maestro hlt an (Reaktivierung pausiert)","chat.bookmark.hiddenHeaderAria":"Versteckte Nachrichten oben","chat.bookmark.isHere":"Lesezeichen ist hier","chat.bookmark.setHere":"Lesezeichen hier setzen","chat.bookmark.actionsRegionAria":"Lesezeichen-Aktionen","chat.bookmark.actionsToggleTitle":"Lesezeichen-Optionen","chat.bookmark.decrementAria":"Eins weniger anzeigen","chat.bookmark.decrementTitle":"Weniger","chat.bookmark.incrementAria":"Eins mehr anzeigen","chat.bookmark.incrementTitle":"Mehr","chat.bookmark.hiddenBelowHeaderAria":"Versteckte Nachrichten unten","chat.sendPrep.optimizingVideo":"Video wird optimiert...","chat.sendPrep.optimizingImage":"Bild wird optimiert...","chat.sendPrep.preparingMedia":"Medien werden vorbereitet...","chat.sendPrep.uploadingMedia":"Medien werden hochgeladen...","chat.sendPrep.finalizing":"Wird abgeschlossen...","chat.header.annotating":"Annotieren","chat.header.recordingAudio":"Audioaufnahme","chat.header.recordingVideo":"Videoaufnahme","chat.header.savePopup":"Speichern...","chat.header.loadPopup":"Laden...","chat.header.maestroAvatar":"Maestro-Avatar wird aktualisiert","chat.header.watchingVideo":"Video ansehen","chat.header.viewingAbove":"Vorherige Nachrichten ansehen","chat.header.liveSession":"Live-Sitzung","chat.liveSession.stop":"Live stoppen","chat.liveSession.retry":"Live erneut versuchen","chat.liveSession.start":"Live starten","chat.liveSession.liveBadge":"Live","chat.liveSession.connecting":"Verbinden","chat.liveSession.defaultLastMessage":"Hallo! Wie kann ich dir heute helfen?","chat.liveSession.defaultSuggestion1":"Hallo","chat.liveSession.defaultSuggestion2":"Guten Morgen","chat.liveSession.defaultSuggestion3":"Wie geht es dir?","chat.error.sttError":"STT-Fehler: {error}. Versuchen Sie, das Mikrofon umzuschalten.","chat.error.autoCaptureCameraError":"Automatischer Kameraaufnahmefehler: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Aufnahme nach {maxMinutes} Minuten automatisch gestoppt.","chat.error.videoMetadataError":"Videometadaten konnten nicht gelesen werden. Die Datei knnte beschdigt oder in einem nicht untersttzten Format sein.","chat.error.pauseVideoToAnnotate":"Video pausieren, um das aktuelle Bild zu annotieren","chat.error.imageGenInterrupted":"Die Bildgenerierung wurde unterbrochen.","chat.error.thinkingInterrupted":"Die KI-Antwort wurde unterbrochen.","error.noLanguagePair":"Kritischer Fehler: Kein Sprachpaar ausgewhlt.","error.translationFailed":"bersetzung fehlgeschlagen. Bitte erneut versuchen.","error.imageLimitReached":"Sitzungslimit fr Bildgenerierung erreicht. Bitte neue Sitzung starten.","error.tokenLimitReached":"Sitzungs-Token-Limit erreicht. Bitte neue Sitzung starten.","error.apiKeyMissing":"Ihr Gemini-API-Schlssel fehlt. ffnen Sie den API-Schlssel-Bildschirm und fgen Sie Ihren Schlssel ein.","error.apiKeyInvalid":"Ihr Gemini-API-Schlssel ist ungltig. Bitte prfen Sie auf Tippfehler und fgen Sie einen gltigen Schlssel ein.","error.apiQuotaExceeded":"Ihr kostenloses Gemini-API-Kontingent fr den Chat ist erschpft. Ich habe den API-Schlssel-Bildschirm mit den Abrechnungsschritten geffnet. In der Zwischenzeit knnen Sie weiterhin die Live-Unterhaltung nutzen.","error.cameraPermissionDenied":"Kameraberechtigung verweigert. Bitte aktivieren Sie den Kamerazugriff in Ihren Browsereinstellungen.","error.cameraNotFound":"Ausgewhlte Kamera nicht gefunden. Stellen Sie sicher, dass sie angeschlossen ist, oder whlen Sie eine andere Kamera.","error.cameraAccessNotSupported":"Kamerazugriff wird von Ihrem Browser nicht untersttzt.","error.cameraUnknown":"Ein unbekannter Fehler beim Zugriff auf die Kamera ist aufgetreten.","error.cameraStreamNotAvailable":"Kamerastream fr Aufnahme nicht verfgbar.","error.imageCaptureGeneric":"Unbekannter Fehler bei der Bildaufnahme.","error.visualContextVideoElementNotReady":"Visuelles Kontext-Videoelement nicht bereit.","error.snapshotVideoElementNotReady":"Videoelement fr Schnappschuss nicht bereit.","error.visualContextCameraAccessNotSupported":"Kamerazugriff fr visuellen Kontext nicht untersttzt.","error.snapshotCameraAccessNotSupported":"Kamerazugriff fr Schnappschuss nicht untersttzt.","error.visualContext2DContext":"2D-Kontext fr visuellen Kontext konnte nicht abgerufen werden.","error.snapshot2DContext":"2D-Kontext fr Schnappschuss konnte nicht abgerufen werden.","error.visualContextCaptureFailedPermission":"Visueller Kontext fehlgeschlagen: Kameraberechtigung verweigert.","error.snapshotCaptureFailedPermission":"Schnappschuss fehlgeschlagen: Kameraberechtigung verweigert.","error.visualContextCaptureFailedNotFound":"Visueller Kontext fehlgeschlagen: Kamera nicht gefunden.","error.snapshotCaptureFailedNotFound":"Schnappschuss fehlgeschlagen: Kamera nicht gefunden.","error.visualContextCaptureFailedNotReady":"Visueller Kontext fehlgeschlagen: Kamera nicht bereit oder Problem mit dem Stream. {details}","error.snapshotCaptureFailedNotReady":"Schnappschuss fehlgeschlagen: Kamera nicht bereit oder Problem mit dem Stream. {details}","error.visualContextCaptureFailedGeneric":"Visueller Kontext fehlgeschlagen: {details}","error.snapshotCaptureFailedGeneric":"Schnappschuss fehlgeschlagen: {details}"},vl={"sttLang.selectLanguage":"Set speech recognition to {language}","header.targetLanguageTitle":"Current Target Language: {language}","startPage.clickToStart":"Click the plane","startPage.saveChats":"Save All Chats","startPage.loadChats":"Load Chats","startPage.maestroAvatar":"Maestro avatar","startPage.addMaestroAvatar":"Add Maestro avatar","startPage.loadSuccess":"Successfully loaded and replaced {count} chat sessions!","startPage.loadError":"Error loading chats. The file might be corrupted or in the wrong format.","startPage.loadLegacyTooLarge":"This legacy JSON backup is too large to load safely. Please export a new backup (NDJSON) from the latest app/web and try again.","startPage.noChatsToSave":"There are no chat histories to save.","startPage.saveError":"Error saving chats. Check the console for more details.","general.clear":"Clear","general.error":"Sorry, I encountered an error.","apiKeyGate.title":"Connect your Gemini API key","apiKeyGate.billingTitle":"Set up billing for higher quota","apiKeyGate.subtitle":"This app runs fully on your device. Your key never touches our servers.","apiKeyGate.privacyPolicy":"Privacy Policy","apiKeyGate.stepsTitle":"Two quick steps:","apiKeyGate.stepOne":"Open Google AI Studio and create an API key.","apiKeyGate.stepTwo":"Paste the key below and tap Save.","apiKeyGate.openAiStudio":"Open Google AI Studio","apiKeyGate.viewInstructions":"View instructions","apiKeyGate.closeInstructions":"Close instructions","apiKeyGate.previousInstruction":"Previous instruction","apiKeyGate.nextInstruction":"Next instruction","apiKeyGate.instructionStep":"Instruction {step} of {total}","apiKeyGate.keyLabel":"Gemini API key","apiKeyGate.placeholder":"Paste your API key here","apiKeyGate.show":"Show","apiKeyGate.hide":"Hide","apiKeyGate.currentKeySaved":"Current key saved {maskedKey}","apiKeyGate.clearSavedKey":"Clear saved key","apiKeyGate.cancel":"Cancel","apiKeyGate.saving":"Saving...","apiKeyGate.saveKey":"Save key","apiKeyGate.close":"Close","chat.thinking":"Thinking...","chat.loadingHistory":"Loading chat history...","chat.loadingSuggestions":"Loading suggestions...","chat.suggestionsAriaLabel":"Reply suggestions","chat.attachImageFromFile":"Attach file","chat.removeAttachedImage":"Remove attached file","chat.sendMessage":"Send message","chat.messageInputAriaLabel":"Message input","chat.retrievedFromWeb":"Retrieved from the web:","chat.videoNotSupported":"Your browser does not support the video tag.","chat.audioNotSupported":"Your browser does not support the audio tag.","chat.fileAttachment":"File Attachment","chat.imageGenError":"Image Gen Error","chat.generatingImageLoadingSlow":"Taking a bit longer...","chat.stopSpeaking":"Stop speaking","chat.speakThisLine":"Speak this line","chat.languageSelector.openGlobe":"Change languages","chat.maestroTranscriptScrollwheel":"Maestro transcript scroll view","chat.mic.listening":"STT Active: Listening...","chat.mic.enableStt":"Enable STT","chat.mic.disableStt":"Stop STT","chat.mic.recordingAudioNote":"Recording audio...","chat.placeholder.normal.listening":"Listening in {language}...","chat.placeholder.normal.sttActive":"Speak in {language} or type...","chat.placeholder.normal.sttInactive":"Type or tap the mic to speak in {language}...","chat.placeholder.suggestion.listening":"Speak {language} to translate...","chat.placeholder.suggestion.sttActive":"Speak or type in {language} to translate...","chat.placeholder.suggestion.sttInactive":"Type in {language} to translate...","chat.camera.turnOn":"Activate camera preview","chat.camera.turnOff":"Deactivate camera preview","chat.camera.imageGenCameraLabel":"Image Generation","chat.camera.captureOrRecord":"Tap for photo, long press for video","chat.camera.stopRecording":"Stop Recording","chat.bookIcon.toggleImageGen":"Toggle Image Generation Mode","chat.imagePreview.alt":"Preview","chat.image.dragToEnlarge":"Drag corner to enlarge","chat.image.dragToShrink":"Drag corner to shrink","chat.annotateImage":"Annotate Image","chat.annotateVideoFrame":"Annotate current frame","chat.annotateModal.editingPreviewAlt":"Image to be annotated","chat.annotateModal.cancel":"Cancel","chat.annotateModal.saveAndAttach":"Save & Attach","chat.annotateModal.undo":"Undo","chat.suggestion.speak":'Speak: "{suggestion}"',"chat.suggestion.ariaLabel":"Speak suggestion: {suggestion}","chat.suggestion.toggleCreateMode":"Toggle suggestion creation mode","chat.suggestion.createAction":"Create Suggestion","chat.suggestion.creating":"Creating suggestion...","chat.maestro.idle":"Maestro is idle","chat.maestro.title.idle":"Maestro is currently idle.","chat.maestro.resting":"Maestro is resting...","chat.maestro.observing":"Maestro is observing...","chat.maestro.aboutToEngage":"Maestro is about to engage...","chat.maestro.title.resting":"Maestro is idle, plenty of time before re-engagement.","chat.maestro.title.observing":"Maestro is observing, some time before re-engagement.","chat.maestro.title.aboutToEngage":"Maestro is about to re-engage soon.","chat.maestro.typing":"Maestro is typing...","chat.maestro.title.typing":"Maestro is preparing a response.","chat.maestro.speaking":"Maestro is speaking","chat.maestro.title.speaking":"Maestro is currently speaking.","chat.maestro.listening":"Listening...","chat.maestro.title.listening":"Maestro is waiting for your input or speech.","chat.maestro.holding":"Maestro is holding","chat.maestro.title.holding":"Maestro is holding (re-engagement paused)","chat.bookmark.hiddenHeaderAria":"Hidden above messages","chat.bookmark.isHere":"Bookmark is here","chat.bookmark.setHere":"Set bookmark here","chat.bookmark.actionsRegionAria":"Bookmark actions","chat.bookmark.actionsToggleTitle":"Bookmark options","chat.bookmark.decrementAria":"Show one less","chat.bookmark.decrementTitle":"Less","chat.bookmark.incrementAria":"Show one more","chat.bookmark.incrementTitle":"More","chat.bookmark.hiddenBelowHeaderAria":"Hidden messages below","chat.sendPrep.optimizingVideo":"Optimizing video...","chat.sendPrep.optimizingImage":"Optimizing image...","chat.sendPrep.preparingMedia":"Preparing media...","chat.sendPrep.uploadingMedia":"Uploading media...","chat.sendPrep.finalizing":"Finalizing...","chat.header.annotating":"Annotating","chat.header.recordingAudio":"Recording audio","chat.header.recordingVideo":"Recording video","chat.header.savePopup":"Saving...","chat.header.loadPopup":"Loading...","chat.header.maestroAvatar":"Updating Maestro avatar","chat.header.watchingVideo":"Watching video","chat.header.viewingAbove":"Viewing messages above","chat.header.liveSession":"Live session","chat.liveSession.stop":"Stop Live","chat.liveSession.retry":"Retry Live","chat.liveSession.start":"Start Live","chat.liveSession.liveBadge":"Live","chat.liveSession.connecting":"Connecting","chat.liveSession.defaultLastMessage":"Hello! How can I help you today?","chat.liveSession.defaultSuggestion1":"Hello","chat.liveSession.defaultSuggestion2":"Good morning","chat.liveSession.defaultSuggestion3":"How are you?","chat.error.sttError":"STT Error: {error}. Try toggling mic.","chat.error.autoCaptureCameraError":"Auto-Capture Camera Error: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Recording stopped automatically after {maxMinutes} minutes.","chat.error.videoMetadataError":"Could not read video metadata. The file may be corrupt or in an unsupported format.","chat.error.pauseVideoToAnnotate":"Pause the video to annotate the current frame","chat.error.imageGenInterrupted":"Image generation was interrupted.","chat.error.thinkingInterrupted":"The AI's response was interrupted.","error.noLanguagePair":"Critical error: No language pair selected.","error.translationFailed":"Translation failed. Please try again.","error.imageLimitReached":"Session image generation limit reached. Please start a new session.","error.tokenLimitReached":"Session token limit reached. Please start a new session.","error.apiKeyMissing":"Your Gemini API key is missing. Open the API Key screen and paste your key.","error.apiKeyInvalid":"Your Gemini API key is invalid. Please check for typos and paste a valid key.","error.apiQuotaExceeded":"Your Gemini API free quota for chat is exhausted. I opened the API Key screen with billing steps. You can still use Live conversation in the meantime.","error.cameraPermissionDenied":"Camera permission denied. Please enable camera access in your browser settings.","error.cameraNotFound":"Selected camera not found. Please ensure it's connected or select a different camera in settings.","error.cameraAccessNotSupported":"Camera access is not supported by your browser.","error.cameraUnknown":"An unknown error occurred while accessing the camera.","error.cameraStreamNotAvailable":"Camera stream not available for capture.","error.imageCaptureGeneric":"Unknown error during image capture.","error.visualContextVideoElementNotReady":"Visual context video element not ready.","error.snapshotVideoElementNotReady":"Video element for snapshot not ready.","error.visualContextCameraAccessNotSupported":"Camera access not supported for visual context.","error.snapshotCameraAccessNotSupported":"Camera access not supported for snapshot.","error.visualContext2DContext":"Could not get 2D context for visual context.","error.snapshot2DContext":"Could not get 2D context for snapshot.","error.visualContextCaptureFailedPermission":"Visual Context failed: Camera permission denied.","error.snapshotCaptureFailedPermission":"Snapshot failed: Camera permission denied.","error.visualContextCaptureFailedNotFound":"Visual Context failed: Camera not found.","error.snapshotCaptureFailedNotFound":"Snapshot failed: Camera not found.","error.visualContextCaptureFailedNotReady":"Visual Context failed: Camera not ready or problem with the feed. {details}","error.snapshotCaptureFailedNotReady":"Snapshot failed: Camera not ready or problem with the feed. {details}","error.visualContextCaptureFailedGeneric":"Visual Context failed: {details}","error.snapshotCaptureFailedGeneric":"Snapshot failed: {details}"},Bm={"sttLang.selectLanguage":"Establecer reconocimiento de voz a {language}","header.targetLanguageTitle":"Idioma objetivo actual: {language}","startPage.clickToStart":"Haz clic en el avin","startPage.saveChats":"Guardar todos los chats","startPage.loadChats":"Cargar chats","startPage.maestroAvatar":"Avatar de Maestro","startPage.addMaestroAvatar":"Aadir avatar de Maestro","startPage.loadSuccess":"Se cargaron y reemplazaron {count} sesiones de chat con xito!","startPage.loadError":"Error al cargar chats. El archivo podra estar corrupto o en un formato incorrecto.","startPage.noChatsToSave":"No hay historiales de chat para guardar.","startPage.saveError":"Error al guardar los chats. Consulta la consola para ms detalles.","general.clear":"Borrar","general.error":"Lo siento, encontr un error.","apiKeyGate.title":"Conecta tu clave API de Gemini","apiKeyGate.billingTitle":"Configurar facturacin para mayor cuota","apiKeyGate.subtitle":"Esta aplicacin se ejecuta totalmente en tu dispositivo. Tu clave nunca toca nuestros servidores.","apiKeyGate.privacyPolicy":"Poltica de privacidad","apiKeyGate.stepsTitle":"Dos pasos rpidos:","apiKeyGate.stepOne":"Abre Google AI Studio y crea una clave API.","apiKeyGate.stepTwo":"Pega la clave abajo y toca Guardar.","apiKeyGate.openAiStudio":"Abrir Google AI Studio","apiKeyGate.viewInstructions":"Ver instrucciones","apiKeyGate.closeInstructions":"Cerrar instrucciones","apiKeyGate.previousInstruction":"Instruccin anterior","apiKeyGate.nextInstruction":"Siguiente instruccin","apiKeyGate.instructionStep":"Instruccin {step} de {total}","apiKeyGate.keyLabel":"Clave API de Gemini","apiKeyGate.placeholder":"Pega tu clave API aqu","apiKeyGate.show":"Mostrar","apiKeyGate.hide":"Ocultar","apiKeyGate.currentKeySaved":"Clave actual guardada {maskedKey}","apiKeyGate.clearSavedKey":"Borrar clave guardada","apiKeyGate.cancel":"Cancelar","apiKeyGate.saving":"Guardando...","apiKeyGate.saveKey":"Guardar clave","apiKeyGate.close":"Cerrar","chat.thinking":"Pensando...","chat.loadingHistory":"Cargando historial de chat...","chat.loadingSuggestions":"Cargando sugerencias...","chat.suggestionsAriaLabel":"Sugerencias de respuesta","chat.attachImageFromFile":"Adjuntar archivo","chat.removeAttachedImage":"Eliminar archivo adjunto","chat.sendMessage":"Enviar mensaje","chat.messageInputAriaLabel":"Entrada de mensaje","chat.retrievedFromWeb":"Obtenido de la web:","chat.videoNotSupported":"Tu navegador no soporta la etiqueta de video.","chat.audioNotSupported":"Tu navegador no soporta la etiqueta de audio.","chat.fileAttachment":"Archivo adjunto","chat.imageGenError":"Error de generacin de imagen","chat.generatingImageLoadingSlow":"Tardando un poco ms...","chat.stopSpeaking":"Dejar de hablar","chat.speakThisLine":"Hablar esta lnea","chat.languageSelector.openGlobe":"Cambiar idiomas","chat.maestroTranscriptScrollwheel":"Vista de desplazamiento de transcripcin de Maestro","chat.mic.listening":"STT activo: Escuchando...","chat.mic.enableStt":"Activar STT","chat.mic.disableStt":"Detener STT","chat.mic.recordingAudioNote":"Grabando audio...","chat.placeholder.normal.listening":"Escuchando en {language}...","chat.placeholder.normal.sttActive":"Habla en {language} o escribe...","chat.placeholder.normal.sttInactive":"Escribe o toca el micrfono para hablar en {language}...","chat.placeholder.suggestion.listening":"Habla {language} para traducir...","chat.placeholder.suggestion.sttActive":"Habla o escribe en {language} para traducir...","chat.placeholder.suggestion.sttInactive":"Escribe en {language} para traducir...","chat.camera.turnOn":"Activar vista previa de cmara","chat.camera.turnOff":"Desactivar vista previa de cmara","chat.camera.imageGenCameraLabel":"Generacin de imagen","chat.camera.captureOrRecord":"Toca para foto, mantn presionado para video","chat.camera.stopRecording":"Detener grabacin","chat.bookIcon.toggleImageGen":"Alternar modo de generacin de imagen","chat.imagePreview.alt":"Vista previa","chat.image.dragToEnlarge":"Arrastra la esquina para agrandar","chat.image.dragToShrink":"Arrastra la esquina para reducir","chat.annotateImage":"Anotar imagen","chat.annotateVideoFrame":"Anotar fotograma actual","chat.annotateModal.editingPreviewAlt":"Imagen a anotar","chat.annotateModal.cancel":"Cancelar","chat.annotateModal.saveAndAttach":"Guardar y adjuntar","chat.annotateModal.undo":"Deshacer","chat.suggestion.speak":'Hablar: "{suggestion}"',"chat.suggestion.ariaLabel":"Hablar sugerencia: {suggestion}","chat.suggestion.toggleCreateMode":"Alternar modo de creacin de sugerencia","chat.suggestion.createAction":"Crear sugerencia","chat.suggestion.creating":"Creando sugerencia...","chat.maestro.idle":"Maestro est inactivo","chat.maestro.title.idle":"Maestro est actualmente inactivo.","chat.maestro.resting":"Maestro est descansando...","chat.maestro.observing":"Maestro est observando...","chat.maestro.aboutToEngage":"Maestro est a punto de interactuar...","chat.maestro.title.resting":"Maestro est inactivo, bastante tiempo antes de la reactivacin.","chat.maestro.title.observing":"Maestro est observando, algo de tiempo antes de la reactivacin.","chat.maestro.title.aboutToEngage":"Maestro est a punto de reactivarse pronto.","chat.maestro.typing":"Maestro est escribiendo...","chat.maestro.title.typing":"Maestro est preparando una respuesta.","chat.maestro.speaking":"Maestro est hablando","chat.maestro.title.speaking":"Maestro est hablando actualmente.","chat.maestro.listening":"Escuchando...","chat.maestro.title.listening":"Maestro est esperando tu entrada o voz.","chat.maestro.holding":"Maestro est en espera","chat.maestro.title.holding":"Maestro est en espera (reactivacin pausada)","chat.bookmark.hiddenHeaderAria":"Mensajes ocultos arriba","chat.bookmark.isHere":"El marcador est aqu","chat.bookmark.setHere":"Establecer marcador aqu","chat.bookmark.actionsRegionAria":"Acciones de marcador","chat.bookmark.actionsToggleTitle":"Opciones de marcador","chat.bookmark.decrementAria":"Mostrar uno menos","chat.bookmark.decrementTitle":"Menos","chat.bookmark.incrementAria":"Mostrar uno ms","chat.bookmark.incrementTitle":"Ms","chat.bookmark.hiddenBelowHeaderAria":"Mensajes ocultos abajo","chat.sendPrep.optimizingVideo":"Optimizando video...","chat.sendPrep.optimizingImage":"Optimizando imagen...","chat.sendPrep.preparingMedia":"Preparando medios...","chat.sendPrep.uploadingMedia":"Subiendo medios...","chat.sendPrep.finalizing":"Finalizando...","chat.header.annotating":"Anotando","chat.header.recordingAudio":"Grabando audio","chat.header.recordingVideo":"Grabando video","chat.header.savePopup":"Guardando...","chat.header.loadPopup":"Cargando...","chat.header.maestroAvatar":"Actualizando avatar de Maestro","chat.header.watchingVideo":"Viendo video","chat.header.viewingAbove":"Viendo mensajes arriba","chat.header.liveSession":"Sesin en vivo","chat.liveSession.stop":"Detener en vivo","chat.liveSession.retry":"Reintentar en vivo","chat.liveSession.start":"Iniciar en vivo","chat.liveSession.liveBadge":"En vivo","chat.liveSession.connecting":"Conectando","chat.liveSession.defaultLastMessage":"Hola! Cmo puedo ayudarte hoy?","chat.liveSession.defaultSuggestion1":"Hola","chat.liveSession.defaultSuggestion2":"Buenos das","chat.liveSession.defaultSuggestion3":"Cmo ests?","chat.error.sttError":"Error de STT: {error}. Intenta alternar el micrfono.","chat.error.autoCaptureCameraError":"Error de captura automtica de cmara: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Grabacin detenida automticamente despus de {maxMinutes} minutos.","chat.error.videoMetadataError":"No se pudo leer los metadatos del video. El archivo puede estar corrupto o en un formato no soportado.","chat.error.pauseVideoToAnnotate":"Pausa el video para anotar el fotograma actual","chat.error.imageGenInterrupted":"La generacin de imagen fue interrumpida.","chat.error.thinkingInterrupted":"La respuesta de la IA fue interrumpida.","error.noLanguagePair":"Error crtico: No se seleccion un par de idiomas.","error.translationFailed":"Traduccin fallida. Por favor intenta de nuevo.","error.imageLimitReached":"Lmite de generacin de imgenes de la sesin alcanzado. Por favor inicia una nueva sesin.","error.tokenLimitReached":"Lmite de tokens de la sesin alcanzado. Por favor inicia una nueva sesin.","error.apiKeyMissing":"Falta tu clave API de Gemini. Abre la pantalla de clave API y pega tu clave.","error.apiKeyInvalid":"Tu clave API de Gemini no es vlida. Por favor, comprueba si hay errores tipogrficos y pega una clave vlida.","error.apiQuotaExceeded":"Tu cuota gratuita de la API de Gemini para el chat se ha agotado. He abierto la pantalla de clave API con los pasos de facturacin. Mientras tanto, an puedes usar la conversacin en vivo.","error.cameraPermissionDenied":"Permiso de cmara denegado. Por favor habilita el acceso a la cmara en la configuracin de tu navegador.","error.cameraNotFound":"Cmara seleccionada no encontrada. Por favor asegrate de que est conectada o selecciona una cmara diferente.","error.cameraAccessNotSupported":"El acceso a la cmara no est soportado por tu navegador.","error.cameraUnknown":"Ocurri un error desconocido al acceder a la cmara.","error.cameraStreamNotAvailable":"Transmisin de cmara no disponible para captura.","error.imageCaptureGeneric":"Error desconocido durante la captura de imagen.","error.visualContextVideoElementNotReady":"Elemento de video de contexto visual no est listo.","error.snapshotVideoElementNotReady":"Elemento de video para captura no est listo.","error.visualContextCameraAccessNotSupported":"Acceso a cmara no soportado para contexto visual.","error.snapshotCameraAccessNotSupported":"Acceso a cmara no soportado para captura.","error.visualContext2DContext":"No se pudo obtener contexto 2D para contexto visual.","error.snapshot2DContext":"No se pudo obtener contexto 2D para captura.","error.visualContextCaptureFailedPermission":"Contexto visual fall: Permiso de cmara denegado.","error.snapshotCaptureFailedPermission":"Captura fall: Permiso de cmara denegado.","error.visualContextCaptureFailedNotFound":"Contexto visual fall: Cmara no encontrada.","error.snapshotCaptureFailedNotFound":"Captura fall: Cmara no encontrada.","error.visualContextCaptureFailedNotReady":"Contexto visual fall: Cmara no lista o problema con la transmisin. {details}","error.snapshotCaptureFailedNotReady":"Captura fall: Cmara no lista o problema con la transmisin. {details}","error.visualContextCaptureFailedGeneric":"Contexto visual fall: {details}","error.snapshotCaptureFailedGeneric":"Captura fall: {details}"},QT={"sttLang.selectLanguage":"Aseta puheentunnistus kielelle {language}","header.targetLanguageTitle":"Nykyinen kohdekieli: {language}","startPage.clickToStart":"Klikkaa lentokonetta","startPage.saveChats":"Tallenna kaikki keskustelut","startPage.loadChats":"Lataa keskustelut","startPage.maestroAvatar":"Maestron avatar","startPage.addMaestroAvatar":"Lis Maestron avatar","startPage.loadSuccess":"{count} keskusteluistuntoa ladattu ja korvattu onnistuneesti!","startPage.loadError":"Virhe keskustelujen lataamisessa. Tiedosto saattaa olla vioittunut tai vrss muodossa.","startPage.noChatsToSave":"Ei keskusteluhistoriaa tallennettavaksi.","startPage.saveError":"Virhe keskustelujen tallentamisessa. Katso konsoli listietoja varten.","general.clear":"Tyhjenn","general.error":"Pahoittelut, tapahtui virhe.","apiKeyGate.title":"Yhdist Gemini API -avain","apiKeyGate.billingTitle":"Mrit laskutus suurempaa kiintit varten","apiKeyGate.subtitle":"Tm sovellus toimii kokonaan laitteellasi. Avaimesi ei koskaan kulje palvelimiemme kautta.","apiKeyGate.privacyPolicy":"Tietosuojakytnt","apiKeyGate.stepsTitle":"Kaksi nopeaa vaihetta:","apiKeyGate.stepOne":"Avaa Google AI Studio ja luo API-avain.","apiKeyGate.stepTwo":"Liit avain alle ja napauta Tallenna.","apiKeyGate.openAiStudio":"Avaa Google AI Studio","apiKeyGate.viewInstructions":"Nyt ohjeet","apiKeyGate.closeInstructions":"Sulje ohjeet","apiKeyGate.previousInstruction":"Edellinen ohje","apiKeyGate.nextInstruction":"Seuraava ohje","apiKeyGate.instructionStep":"Ohje {step} / {total}","apiKeyGate.keyLabel":"Gemini API -avain","apiKeyGate.placeholder":"Liit API-avaimesi thn","apiKeyGate.show":"Nyt","apiKeyGate.hide":"Piilota","apiKeyGate.currentKeySaved":"Nykyinen avain tallennettu {maskedKey}","apiKeyGate.clearSavedKey":"Tyhjenn tallennettu avain","apiKeyGate.cancel":"Peruuta","apiKeyGate.saving":"Tallennetaan...","apiKeyGate.saveKey":"Tallenna avain","apiKeyGate.close":"Sulje","chat.thinking":"Ajattelen...","chat.loadingHistory":"Ladataan keskusteluhistoriaa...","chat.loadingSuggestions":"Ladataan ehdotuksia...","chat.suggestionsAriaLabel":"Vastausehdotukset","chat.attachImageFromFile":"Liit tiedosto","chat.removeAttachedImage":"Poista liitetty tiedosto","chat.sendMessage":"Lhet viesti","chat.messageInputAriaLabel":"Viestin sytt","chat.retrievedFromWeb":"Haettu verkosta:","chat.videoNotSupported":"Selaimesi ei tue video-tunnistetta.","chat.audioNotSupported":"Selaimesi ei tue audio-tunnistetta.","chat.fileAttachment":"Tiedostoliite","chat.imageGenError":"Kuvan luontivirhe","chat.generatingImageLoadingSlow":"Kest hieman pidempn...","chat.stopSpeaking":"Lopeta puhuminen","chat.speakThisLine":"Lausu tm rivi","chat.languageSelector.openGlobe":"Vaihda kielet","chat.maestroTranscriptScrollwheel":"Maestron transkription vieritys","chat.mic.listening":"STT aktiivinen: Kuuntelen...","chat.mic.enableStt":"Ota STT kyttn","chat.mic.disableStt":"Pysyt STT","chat.mic.recordingAudioNote":"Nauhoitetaan nt...","chat.placeholder.normal.listening":"Kuuntelen kielell {language}...","chat.placeholder.normal.sttActive":"Puhu {language} tai kirjoita...","chat.placeholder.normal.sttInactive":"Kirjoita tai napauta mikrofonia puhuaksesi {language}...","chat.placeholder.suggestion.listening":"Puhu {language} kntksesi...","chat.placeholder.suggestion.sttActive":"Puhu tai kirjoita {language} kntksesi...","chat.placeholder.suggestion.sttInactive":"Kirjoita {language} kntksesi...","chat.camera.turnOn":"Ota kameran esikatselu kyttn","chat.camera.turnOff":"Poista kameran esikatselu kytst","chat.camera.imageGenCameraLabel":"Kuvan luonti","chat.camera.captureOrRecord":"Napauta valokuva, pid pohjassa video","chat.camera.stopRecording":"Pysyt nauhoitus","chat.bookIcon.toggleImageGen":"Vaihda kuvan luontitila","chat.imagePreview.alt":"Esikatselu","chat.image.dragToEnlarge":"Ved kulmasta suurentaaksesi","chat.image.dragToShrink":"Ved kulmasta pienentksesi","chat.annotateImage":"Merkitse kuvaan","chat.annotateVideoFrame":"Merkitse nykyiseen ruutuun","chat.annotateModal.editingPreviewAlt":"Merkittv kuva","chat.annotateModal.cancel":"Peruuta","chat.annotateModal.saveAndAttach":"Tallenna ja liit","chat.annotateModal.undo":"Kumoa","chat.suggestion.speak":'Sano: "{suggestion}"',"chat.suggestion.ariaLabel":"Lausu ehdotus: {suggestion}","chat.suggestion.toggleCreateMode":"Vaihda ehdotuksen luontitila","chat.suggestion.createAction":"Luo ehdotus","chat.suggestion.creating":"Luodaan ehdotusta...","chat.maestro.idle":"Maestro on jouten","chat.maestro.title.idle":"Maestro on tll hetkell jouten.","chat.maestro.resting":"Maestro lep...","chat.maestro.observing":"Maestro tarkkailee...","chat.maestro.aboutToEngage":"Maestro on liittymss mukaan...","chat.maestro.title.resting":"Maestro on jouten, paljon aikaa uudelleenaktivoitumiseen.","chat.maestro.title.observing":"Maestro tarkkailee, jonkin verran aikaa uudelleenaktivoitumiseen.","chat.maestro.title.aboutToEngage":"Maestro aktivoituu pian uudelleen.","chat.maestro.typing":"Maestro kirjoittaa...","chat.maestro.title.typing":"Maestro valmistelee vastausta.","chat.maestro.speaking":"Maestro puhuu","chat.maestro.title.speaking":"Maestro puhuu parhaillaan.","chat.maestro.listening":"Kuuntelen...","chat.maestro.title.listening":"Maestro odottaa sytettsi tai ntsi.","chat.maestro.holding":"Maestro odottaa","chat.maestro.title.holding":"Maestro odottaa (uudelleenaktivointi keskeytetty)","chat.bookmark.hiddenHeaderAria":"Piilotetut viestit ylpuolella","chat.bookmark.isHere":"Kirjanmerkki on tll","chat.bookmark.setHere":"Aseta kirjanmerkki thn","chat.bookmark.actionsRegionAria":"Kirjanmerkkitoiminnot","chat.bookmark.actionsToggleTitle":"Kirjanmerkkiasetukset","chat.bookmark.decrementAria":"Nyt yksi vhemmn","chat.bookmark.decrementTitle":"Vhemmn","chat.bookmark.incrementAria":"Nyt yksi lis","chat.bookmark.incrementTitle":"Lis","chat.bookmark.hiddenBelowHeaderAria":"Piilotetut viestit alapuolella","chat.sendPrep.optimizingVideo":"Optimoidaan videota...","chat.sendPrep.optimizingImage":"Optimoidaan kuvaa...","chat.sendPrep.preparingMedia":"Valmistellaan mediaa...","chat.sendPrep.uploadingMedia":"Ladataan mediaa...","chat.sendPrep.finalizing":"Viimeistelln...","chat.header.annotating":"Merkitn","chat.header.recordingAudio":"Nauhoitetaan nt","chat.header.recordingVideo":"Nauhoitetaan videota","chat.header.savePopup":"Tallennetaan...","chat.header.loadPopup":"Ladataan...","chat.header.maestroAvatar":"Pivitetn Maestron avataria","chat.header.watchingVideo":"Katsotaan videota","chat.header.viewingAbove":"Nytetn aiempia viestej","chat.header.liveSession":"Live-istunto","chat.liveSession.stop":"Pysyt live","chat.liveSession.retry":"Yrit live uudelleen","chat.liveSession.start":"Aloita live","chat.liveSession.liveBadge":"Live","chat.liveSession.connecting":"Yhdistetn","chat.liveSession.defaultLastMessage":"Hei! Kuinka voin auttaa sinua tnn?","chat.liveSession.defaultSuggestion1":"Hei","chat.liveSession.defaultSuggestion2":"Hyv huomenta","chat.liveSession.defaultSuggestion3":"Mit kuuluu?","chat.error.sttError":"STT-virhe: {error}. Kokeile vaihtaa mikrofonia.","chat.error.autoCaptureCameraError":"Automaattisen kameran kaappausvirhe: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Nauhoitus pysytettiin automaattisesti {maxMinutes} minuutin jlkeen.","chat.error.videoMetadataError":"Videon metatietoja ei voitu lukea. Tiedosto saattaa olla vioittunut tai tuetussa muodossa.","chat.error.pauseVideoToAnnotate":"Keskeyt video merkitksesi nykyiseen ruutuun","chat.error.imageGenInterrupted":"Kuvan luonti keskeytettiin.","chat.error.thinkingInterrupted":"AI:n vastaus keskeytettiin.","error.noLanguagePair":"Kriittinen virhe: Kieliparia ei ole valittu.","error.translationFailed":"Knns eponnistui. Yrit uudelleen.","error.imageLimitReached":"Istunnon kuvanluontiraja saavutettu. Aloita uusi istunto.","error.tokenLimitReached":"Istunnon token-raja saavutettu. Aloita uusi istunto.","error.apiKeyMissing":"Gemini API -avaimesi puuttuu. Avaa API-avainnkym ja liit avaimesi.","error.apiKeyInvalid":"Gemini API -avaimesi on virheellinen. Tarkista kirjoitusvirheet ja liit kelvollinen avain.","error.apiQuotaExceeded":"Gemini API:n ilmainen chat-kiintisi on lopussa. Avasin API-avainnkymn, jossa on laskutusohjeet. Voit silti kytt Live-keskustelua sill vlin.","error.cameraPermissionDenied":"Kameran kyttoikeus evtty. Ota kameran kyttoikeus kyttn selaimen asetuksissa.","error.cameraNotFound":"Valittua kameraa ei lydy. Varmista, ett se on yhdistetty, tai valitse toinen kamera.","error.cameraAccessNotSupported":"Selaimesi ei tue kameran kytt.","error.cameraUnknown":"Tuntematon virhe kameraan psyss.","error.cameraStreamNotAvailable":"Kameran virta ei ole kytettviss kaappaukseen.","error.imageCaptureGeneric":"Tuntematon virhe kuvan kaappauksessa.","error.visualContextVideoElementNotReady":"Visuaalisen kontekstin videoelementti ei ole valmis.","error.snapshotVideoElementNotReady":"Kuvakaappauksen videoelementti ei ole valmis.","error.visualContextCameraAccessNotSupported":"Kameran kytt ei ole tuettu visuaalisessa kontekstissa.","error.snapshotCameraAccessNotSupported":"Kameran kytt ei ole tuettu kuvakaappauksessa.","error.visualContext2DContext":"2D-kontekstia ei voitu hakea visuaaliselle kontekstille.","error.snapshot2DContext":"2D-kontekstia ei voitu hakea kuvakaappaukselle.","error.visualContextCaptureFailedPermission":"Visuaalinen konteksti eponnistui: Kameran kyttoikeus evtty.","error.snapshotCaptureFailedPermission":"Kuvakaappaus eponnistui: Kameran kyttoikeus evtty.","error.visualContextCaptureFailedNotFound":"Visuaalinen konteksti eponnistui: Kameraa ei lydy.","error.snapshotCaptureFailedNotFound":"Kuvakaappaus eponnistui: Kameraa ei lydy.","error.visualContextCaptureFailedNotReady":"Visuaalinen konteksti eponnistui: Kamera ei ole valmis tai sytteess on ongelma. {details}","error.snapshotCaptureFailedNotReady":"Kuvakaappaus eponnistui: Kamera ei ole valmis tai sytteess on ongelma. {details}","error.visualContextCaptureFailedGeneric":"Visuaalinen konteksti eponnistui: {details}","error.snapshotCaptureFailedGeneric":"Kuvakaappaus eponnistui: {details}"},_m={"sttLang.selectLanguage":"Dfinir la reconnaissance vocale sur {language}","header.targetLanguageTitle":"Langue cible actuelle : {language}","startPage.clickToStart":"Cliquez sur l'avion","startPage.saveChats":"Sauvegarder tous les chats","startPage.loadChats":"Charger les chats","startPage.maestroAvatar":"Avatar de Maestro","startPage.addMaestroAvatar":"Ajouter un avatar Maestro","startPage.loadSuccess":"{count} sessions de chat charges et remplaces avec succs !","startPage.loadError":"Erreur lors du chargement des chats. Le fichier peut tre corrompu ou dans un mauvais format.","startPage.noChatsToSave":"Aucun historique de chat  sauvegarder.","startPage.saveError":"Erreur lors de la sauvegarde des chats. Consultez la console pour plus de dtails.","general.clear":"Effacer","general.error":"Dsol, j'ai rencontr une erreur.","apiKeyGate.title":"Connectez votre cl API Gemini","apiKeyGate.billingTitle":"Configurer la facturation pour un quota plus lev","apiKeyGate.subtitle":"Cette application fonctionne entirement sur votre appareil. Votre cl ne touche jamais nos serveurs.","apiKeyGate.privacyPolicy":"Politique de confidentialit","apiKeyGate.stepsTitle":"Deux tapes rapides :","apiKeyGate.stepOne":"Ouvrez Google AI Studio et crez une cl API.","apiKeyGate.stepTwo":"Collez la cl ci-dessous et appuyez sur Enregistrer.","apiKeyGate.openAiStudio":"Ouvrir Google AI Studio","apiKeyGate.viewInstructions":"Voir les instructions","apiKeyGate.closeInstructions":"Fermer les instructions","apiKeyGate.previousInstruction":"Instruction prcdente","apiKeyGate.nextInstruction":"Instruction suivante","apiKeyGate.instructionStep":"Instruction {step} sur {total}","apiKeyGate.keyLabel":"Cl API Gemini","apiKeyGate.placeholder":"Collez votre cl API ici","apiKeyGate.show":"Afficher","apiKeyGate.hide":"Masquer","apiKeyGate.currentKeySaved":"Cl actuelle enregistre {maskedKey}","apiKeyGate.clearSavedKey":"Effacer la cl enregistre","apiKeyGate.cancel":"Annuler","apiKeyGate.saving":"Enregistrement...","apiKeyGate.saveKey":"Enregistrer la cl","apiKeyGate.close":"Fermer","chat.thinking":"Rflexion en cours...","chat.loadingHistory":"Chargement de l'historique...","chat.loadingSuggestions":"Chargement des suggestions...","chat.suggestionsAriaLabel":"Suggestions de rponse","chat.attachImageFromFile":"Joindre un fichier","chat.removeAttachedImage":"Supprimer le fichier joint","chat.sendMessage":"Envoyer le message","chat.messageInputAriaLabel":"Saisie du message","chat.retrievedFromWeb":"Rcupr du web :","chat.videoNotSupported":"Votre navigateur ne prend pas en charge la balise vido.","chat.audioNotSupported":"Votre navigateur ne prend pas en charge la balise audio.","chat.fileAttachment":"Pice jointe","chat.imageGenError":"Erreur de gnration d'image","chat.generatingImageLoadingSlow":"Cela prend un peu plus de temps...","chat.stopSpeaking":"Arrter de parler","chat.speakThisLine":"Prononcer cette ligne","chat.languageSelector.openGlobe":"Changer de langues","chat.maestroTranscriptScrollwheel":"Vue de dfilement de la transcription Maestro","chat.mic.listening":"STT actif : coute en cours...","chat.mic.enableStt":"Activer STT","chat.mic.disableStt":"Arrter STT","chat.mic.recordingAudioNote":"Enregistrement audio...","chat.placeholder.normal.listening":"coute en {language}...","chat.placeholder.normal.sttActive":"Parlez en {language} ou tapez...","chat.placeholder.normal.sttInactive":"Tapez ou appuyez sur le micro pour parler en {language}...","chat.placeholder.suggestion.listening":"Parlez {language} pour traduire...","chat.placeholder.suggestion.sttActive":"Parlez ou tapez en {language} pour traduire...","chat.placeholder.suggestion.sttInactive":"Tapez en {language} pour traduire...","chat.camera.turnOn":"Activer l'aperu camra","chat.camera.turnOff":"Dsactiver l'aperu camra","chat.camera.imageGenCameraLabel":"Gnration d'image","chat.camera.captureOrRecord":"Appuyez pour photo, maintenez pour vido","chat.camera.stopRecording":"Arrter l'enregistrement","chat.bookIcon.toggleImageGen":"Activer/dsactiver le mode gnration d'image","chat.imagePreview.alt":"Aperu","chat.image.dragToEnlarge":"Faites glisser le coin pour agrandir","chat.image.dragToShrink":"Faites glisser le coin pour rduire","chat.annotateImage":"Annoter l'image","chat.annotateVideoFrame":"Annoter l'image actuelle","chat.annotateModal.editingPreviewAlt":"Image  annoter","chat.annotateModal.cancel":"Annuler","chat.annotateModal.saveAndAttach":"Enregistrer et joindre","chat.annotateModal.undo":"Annuler","chat.suggestion.speak":'Dire : "{suggestion}"',"chat.suggestion.ariaLabel":"Dire la suggestion : {suggestion}","chat.suggestion.toggleCreateMode":"Activer/dsactiver le mode cration de suggestion","chat.suggestion.createAction":"Crer une suggestion","chat.suggestion.creating":"Cration de la suggestion...","chat.maestro.idle":"Maestro est inactif","chat.maestro.title.idle":"Maestro est actuellement inactif.","chat.maestro.resting":"Maestro se repose...","chat.maestro.observing":"Maestro observe...","chat.maestro.aboutToEngage":"Maestro est sur le point d'intervenir...","chat.maestro.title.resting":"Maestro est inactif, beaucoup de temps avant la ractivation.","chat.maestro.title.observing":"Maestro observe, un peu de temps avant la ractivation.","chat.maestro.title.aboutToEngage":"Maestro est sur le point de se ractiver bientt.","chat.maestro.typing":"Maestro crit...","chat.maestro.title.typing":"Maestro prpare une rponse.","chat.maestro.speaking":"Maestro parle","chat.maestro.title.speaking":"Maestro parle actuellement.","chat.maestro.listening":"coute en cours...","chat.maestro.title.listening":"Maestro attend votre saisie ou votre voix.","chat.maestro.holding":"Maestro est en attente","chat.maestro.title.holding":"Maestro est en attente (ractivation en pause)","chat.bookmark.hiddenHeaderAria":"Messages cachs au-dessus","chat.bookmark.isHere":"Le marque-page est ici","chat.bookmark.setHere":"Dfinir le marque-page ici","chat.bookmark.actionsRegionAria":"Actions du marque-page","chat.bookmark.actionsToggleTitle":"Options du marque-page","chat.bookmark.decrementAria":"Afficher un de moins","chat.bookmark.decrementTitle":"Moins","chat.bookmark.incrementAria":"Afficher un de plus","chat.bookmark.incrementTitle":"Plus","chat.bookmark.hiddenBelowHeaderAria":"Messages cachs en dessous","chat.sendPrep.optimizingVideo":"Optimisation de la vido...","chat.sendPrep.optimizingImage":"Optimisation de l'image...","chat.sendPrep.preparingMedia":"Prparation du mdia...","chat.sendPrep.uploadingMedia":"Tlchargement du mdia...","chat.sendPrep.finalizing":"Finalisation...","chat.header.annotating":"Annotation","chat.header.recordingAudio":"Enregistrement audio","chat.header.recordingVideo":"Enregistrement vido","chat.header.savePopup":"Sauvegarde...","chat.header.loadPopup":"Chargement...","chat.header.maestroAvatar":"Mise  jour de l'avatar Maestro","chat.header.watchingVideo":"Visionnage vido","chat.header.viewingAbove":"Affichage des messages prcdents","chat.header.liveSession":"Session en direct","chat.liveSession.stop":"Arrter le direct","chat.liveSession.retry":"Ressayer le direct","chat.liveSession.start":"Dmarrer le direct","chat.liveSession.liveBadge":"Direct","chat.liveSession.connecting":"Connexion","chat.liveSession.defaultLastMessage":"Bonjour ! Comment puis-je vous aider aujourd'hui ?","chat.liveSession.defaultSuggestion1":"Bonjour","chat.liveSession.defaultSuggestion2":"Bon matin","chat.liveSession.defaultSuggestion3":"Comment allez-vous ?","chat.error.sttError":"Erreur STT : {error}. Essayez de basculer le micro.","chat.error.autoCaptureCameraError":"Erreur de capture automatique camra : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Enregistrement arrt automatiquement aprs {maxMinutes} minutes.","chat.error.videoMetadataError":"Impossible de lire les mtadonnes vido. Le fichier peut tre corrompu ou dans un format non pris en charge.","chat.error.pauseVideoToAnnotate":"Mettez la vido en pause pour annoter l'image actuelle","chat.error.imageGenInterrupted":"La gnration d'image a t interrompue.","chat.error.thinkingInterrupted":"La rponse de l'IA a t interrompue.","error.noLanguagePair":"Erreur critique : Aucune paire de langues slectionne.","error.translationFailed":"chec de la traduction. Veuillez ressayer.","error.imageLimitReached":"Limite de gnration d'images de la session atteinte. Veuillez dmarrer une nouvelle session.","error.tokenLimitReached":"Limite de tokens de la session atteinte. Veuillez dmarrer une nouvelle session.","error.apiKeyMissing":"Votre cl API Gemini est manquante. Ouvrez l'cran de la cl API et collez votre cl.","error.apiKeyInvalid":"Votre cl API Gemini est invalide. Veuillez vrifier les fautes de frappe et coller une cl valide.","error.apiQuotaExceeded":"Votre quota gratuit Gemini API pour le chat est puis. J'ai ouvert l'cran de la cl API avec les tapes de facturation. Vous pouvez toujours utiliser la conversation en direct en attendant.","error.cameraPermissionDenied":"Permission camra refuse. Veuillez activer l'accs camra dans les paramtres de votre navigateur.","error.cameraNotFound":"Camra slectionne introuvable. Assurez-vous qu'elle est connecte ou slectionnez une autre camra.","error.cameraAccessNotSupported":"L'accs  la camra n'est pas pris en charge par votre navigateur.","error.cameraUnknown":"Une erreur inconnue s'est produite lors de l'accs  la camra.","error.cameraStreamNotAvailable":"Flux camra non disponible pour la capture.","error.imageCaptureGeneric":"Erreur inconnue lors de la capture d'image.","error.visualContextVideoElementNotReady":"lment vido du contexte visuel non prt.","error.snapshotVideoElementNotReady":"lment vido pour la capture non prt.","error.visualContextCameraAccessNotSupported":"Accs camra non pris en charge pour le contexte visuel.","error.snapshotCameraAccessNotSupported":"Accs camra non pris en charge pour la capture.","error.visualContext2DContext":"Impossible d'obtenir le contexte 2D pour le contexte visuel.","error.snapshot2DContext":"Impossible d'obtenir le contexte 2D pour la capture.","error.visualContextCaptureFailedPermission":"chec du contexte visuel : Permission camra refuse.","error.snapshotCaptureFailedPermission":"chec de la capture : Permission camra refuse.","error.visualContextCaptureFailedNotFound":"chec du contexte visuel : Camra introuvable.","error.snapshotCaptureFailedNotFound":"chec de la capture : Camra introuvable.","error.visualContextCaptureFailedNotReady":"chec du contexte visuel : Camra non prte ou problme avec le flux. {details}","error.snapshotCaptureFailedNotReady":"chec de la capture : Camra non prte ou problme avec le flux. {details}","error.visualContextCaptureFailedGeneric":"chec du contexte visuel : {details}","error.snapshotCaptureFailedGeneric":"chec de la capture : {details}"},OT={"sttLang.selectLanguage":"  {language}   ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"   ","startPage.saveChats":"  ","startPage.loadChats":"  ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"{count}       !","startPage.loadError":"   .        .","startPage.noChatsToSave":"     .","startPage.saveError":"  .     .","general.clear":" ","general.error":" ,   .","apiKeyGate.title":" Gemini API  ","apiKeyGate.billingTitle":"     ","apiKeyGate.subtitle":"       .       .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":"Google AI Studio   API  .","apiKeyGate.stepTwo":"        .","apiKeyGate.openAiStudio":"Google AI Studio ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":"  ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {step} / {total}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API    ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"    {maskedKey}","apiKeyGate.clearSavedKey":"   ","apiKeyGate.cancel":" ","apiKeyGate.saving":"  ...","apiKeyGate.saveKey":" ","apiKeyGate.close":" ","chat.thinking":" ...","chat.loadingHistory":"     ...","chat.loadingSuggestions":"    ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"   ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":"  :","chat.videoNotSupported":"      .","chat.audioNotSupported":"      .","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"     ...","chat.stopSpeaking":"  ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT :   ...","chat.mic.enableStt":"STT  ","chat.mic.disableStt":"STT ","chat.mic.recordingAudioNote":"    ...","chat.placeholder.normal.listening":"{language}    ...","chat.placeholder.normal.sttActive":"{language}     ...","chat.placeholder.normal.sttInactive":"   {language}       ...","chat.placeholder.suggestion.listening":"   {language} ...","chat.placeholder.suggestion.sttActive":"   {language}     ...","chat.placeholder.suggestion.sttInactive":"   {language}   ...","chat.camera.turnOn":"   ","chat.camera.turnOff":"   ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"   ,    ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"    ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"    ","chat.image.dragToShrink":"    ","chat.annotateImage":"   ","chat.annotateVideoFrame":"    ","chat.annotateModal.editingPreviewAlt":"   ","chat.annotateModal.cancel":" ","chat.annotateModal.saveAndAttach":"  ","chat.annotateModal.undo":" ","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"    ","chat.suggestion.createAction":" ","chat.suggestion.creating":"   ...","chat.maestro.idle":"  ","chat.maestro.title.idle":"   .","chat.maestro.resting":"    ...","chat.maestro.observing":"    ...","chat.maestro.aboutToEngage":"  ...","chat.maestro.title.resting":"  ,      .","chat.maestro.title.observing":"    ,      .","chat.maestro.title.aboutToEngage":"     .","chat.maestro.typing":"    ...","chat.maestro.title.typing":"     .","chat.maestro.speaking":"   ","chat.maestro.title.speaking":"    .","chat.maestro.listening":"  ...","chat.maestro.title.listening":"        .","chat.maestro.holding":"    ","chat.maestro.title.holding":"     (  )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":"  ","chat.bookmark.setHere":"   ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":" ","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":" ","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":"    ...","chat.sendPrep.optimizingImage":"    ...","chat.sendPrep.preparingMedia":"    ...","chat.sendPrep.uploadingMedia":"    ...","chat.sendPrep.finalizing":"    ...","chat.header.annotating":"   ","chat.header.recordingAudio":"    ","chat.header.recordingVideo":"    ","chat.header.savePopup":"  ...","chat.header.loadPopup":"   ...","chat.header.maestroAvatar":"     ","chat.header.watchingVideo":"   ","chat.header.viewingAbove":"    ","chat.header.liveSession":" ","chat.liveSession.stop":" ","chat.liveSession.retry":"   ","chat.liveSession.start":"  ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"   ","chat.liveSession.defaultLastMessage":"!        ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":" ","chat.liveSession.defaultSuggestion3":"  ?","chat.error.sttError":"STT : {error}.    .","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}      .","chat.error.videoMetadataError":"    .        .","chat.error.pauseVideoToAnnotate":"       ","chat.error.imageGenInterrupted":"   .","chat.error.thinkingInterrupted":"AI   .","error.noLanguagePair":" :      .","error.translationFailed":" .   .","error.imageLimitReached":"    .      .","error.tokenLimitReached":"    .      .","error.apiKeyMissing":" Gemini API   . API        .","error.apiKeyInvalid":" Gemini API   .          .","error.apiQuotaExceeded":"   Gemini API      .     API    .           .","error.cameraPermissionDenied":"  .      .","error.cameraNotFound":"    .            .","error.cameraAccessNotSupported":"      .","error.cameraUnknown":"      .","error.cameraStreamNotAvailable":"     .","error.imageCaptureGeneric":"     .","error.visualContextVideoElementNotReady":"     .","error.snapshotVideoElementNotReady":"    .","error.visualContextCameraAccessNotSupported":"      .","error.snapshotCameraAccessNotSupported":"     .","error.visualContext2DContext":"   2D    .","error.snapshot2DContext":"  2D    .","error.visualContextCaptureFailedPermission":"  :   .","error.snapshotCaptureFailedPermission":" :   .","error.visualContextCaptureFailedNotFound":"  :   .","error.snapshotCaptureFailedNotFound":" :   .","error.visualContextCaptureFailedNotReady":"  :      . {details}","error.snapshotCaptureFailedNotReady":" :      . {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},VT={"sttLang.selectLanguage":"   {language}   ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"    ","startPage.saveChats":"  ","startPage.loadChats":"  ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"{count}       !","startPage.loadError":"             ","startPage.noChatsToSave":"       ","startPage.saveError":"         ","general.clear":" ","general.error":" ,   ","apiKeyGate.title":" Gemini API   ","apiKeyGate.billingTitle":"      ","apiKeyGate.subtitle":"                    ","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":"Google AI Studio    API  ","apiKeyGate.stepTwo":"        .","apiKeyGate.openAiStudio":"Google AI Studio ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":"  ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {total}   {step}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API    ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"    {maskedKey}","apiKeyGate.clearSavedKey":"    ","apiKeyGate.cancel":" ","apiKeyGate.saving":"  ...","apiKeyGate.saveKey":" ","apiKeyGate.close":" ","chat.thinking":"  ...","chat.loadingHistory":"     ...","chat.loadingSuggestions":"    ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":"  ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":"  :","chat.videoNotSupported":"       ","chat.audioNotSupported":"       ","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"     ...","chat.stopSpeaking":"  ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT :   ...","chat.mic.enableStt":"STT  ","chat.mic.disableStt":"STT  ","chat.mic.recordingAudioNote":"    ...","chat.placeholder.normal.listening":"{language}    ...","chat.placeholder.normal.sttActive":"{language}     ...","chat.placeholder.normal.sttInactive":"      {language}  ...","chat.placeholder.suggestion.listening":"   {language} ...","chat.placeholder.suggestion.sttActive":"   {language}     ...","chat.placeholder.suggestion.sttInactive":"   {language}   ...","chat.camera.turnOn":"   ","chat.camera.turnOff":"   ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"    ,     ","chat.camera.stopRecording":"  ","chat.bookIcon.toggleImageGen":"    ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"     ","chat.image.dragToShrink":"     ","chat.annotateImage":"   ","chat.annotateVideoFrame":"    ","chat.annotateModal.editingPreviewAlt":"   ","chat.annotateModal.cancel":" ","chat.annotateModal.saveAndAttach":"   ","chat.annotateModal.undo":" ","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"    ","chat.suggestion.createAction":" ","chat.suggestion.creating":"   ...","chat.maestro.idle":"  ","chat.maestro.title.idle":"    ","chat.maestro.resting":"    ...","chat.maestro.observing":"   ...","chat.maestro.aboutToEngage":"   ...","chat.maestro.title.resting":"  ,      ","chat.maestro.title.observing":"   ,      ","chat.maestro.title.aboutToEngage":"    ","chat.maestro.typing":"    ...","chat.maestro.title.typing":"     ","chat.maestro.speaking":"   ","chat.maestro.title.speaking":"    ","chat.maestro.listening":"  ...","chat.maestro.title.listening":"         ","chat.maestro.holding":"   ","chat.maestro.title.holding":"    (  )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":"  ","chat.bookmark.setHere":"   ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":"    ...","chat.sendPrep.optimizingImage":"    ...","chat.sendPrep.preparingMedia":"    ...","chat.sendPrep.uploadingMedia":"    ...","chat.sendPrep.finalizing":"   ...","chat.header.annotating":"   ","chat.header.recordingAudio":"    ","chat.header.recordingVideo":"    ","chat.header.savePopup":"  ...","chat.header.loadPopup":"   ...","chat.header.maestroAvatar":"     ","chat.header.watchingVideo":"   ","chat.header.viewingAbove":"    ","chat.header.liveSession":" ","chat.liveSession.stop":"  ","chat.liveSession.retry":"   ","chat.liveSession.start":"  ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"   ","chat.liveSession.defaultLastMessage":"!        ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":" ","chat.liveSession.defaultSuggestion3":"  ?","chat.error.sttError":"STT : {error}      ","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}          ","chat.error.videoMetadataError":"             ","chat.error.pauseVideoToAnnotate":"        ","chat.error.imageGenInterrupted":"   ","chat.error.thinkingInterrupted":"AI   ","error.noLanguagePair":" :      ","error.translationFailed":"     ","error.imageLimitReached":"           ","error.tokenLimitReached":"          ","error.apiKeyMissing":" Gemini API    API        ","error.apiKeyInvalid":" Gemini API              ","error.apiQuotaExceeded":"    Gemini API            API                 ","error.cameraPermissionDenied":"          ","error.cameraNotFound":"             ","error.cameraAccessNotSupported":"       ","error.cameraUnknown":"      ","error.cameraStreamNotAvailable":"       ","error.imageCaptureGeneric":"     ","error.visualContextVideoElementNotReady":"      ","error.snapshotVideoElementNotReady":"     ","error.visualContextCameraAccessNotSupported":"        ","error.snapshotCameraAccessNotSupported":"       ","error.visualContext2DContext":"    2D     ","error.snapshot2DContext":"   2D     ","error.visualContextCaptureFailedPermission":"  :   ","error.snapshotCaptureFailedPermission":" :   ","error.visualContextCaptureFailedNotFound":"  :   ","error.snapshotCaptureFailedNotFound":" :   ","error.visualContextCaptureFailedNotReady":"  :        {details}","error.snapshotCaptureFailedNotReady":" :        {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},qT={"sttLang.selectLanguage":"Atur pengenalan suara ke {language}","header.targetLanguageTitle":"Bahasa Target Saat Ini: {language}","startPage.clickToStart":"Klik pesawat","startPage.saveChats":"Simpan semua obrolan","startPage.loadChats":"Muat obrolan","startPage.maestroAvatar":"Avatar Maestro","startPage.addMaestroAvatar":"Tambah avatar Maestro","startPage.loadSuccess":"Berhasil memuat dan mengganti {count} sesi obrolan!","startPage.loadError":"Gagal memuat obrolan. File mungkin rusak atau format salah.","startPage.noChatsToSave":"Tidak ada riwayat obrolan untuk disimpan.","startPage.saveError":"Gagal menyimpan obrolan. Lihat konsol untuk detail lebih lanjut.","general.clear":"Hapus","general.error":"Maaf, terjadi kesalahan.","apiKeyGate.title":"Hubungkan kunci API Gemini Anda","apiKeyGate.billingTitle":"Siapkan penagihan untuk kuota lebih tinggi","apiKeyGate.subtitle":"Aplikasi ini berjalan sepenuhnya di perangkat Anda. Kunci Anda tidak pernah menyentuh server kami.","apiKeyGate.privacyPolicy":"Kebijakan Privasi","apiKeyGate.stepsTitle":"Dua langkah cepat:","apiKeyGate.stepOne":"Buka Google AI Studio dan buat kunci API.","apiKeyGate.stepTwo":"Tempelkan kunci di bawah dan ketuk Simpan.","apiKeyGate.openAiStudio":"Buka Google AI Studio","apiKeyGate.viewInstructions":"Lihat instruksi","apiKeyGate.closeInstructions":"Tutup instruksi","apiKeyGate.previousInstruction":"Instruksi sebelumnya","apiKeyGate.nextInstruction":"Instruksi selanjutnya","apiKeyGate.instructionStep":"Instruksi {step} dari {total}","apiKeyGate.keyLabel":"Kunci API Gemini","apiKeyGate.placeholder":"Tempelkan kunci API Anda di sini","apiKeyGate.show":"Tampilkan","apiKeyGate.hide":"Sembunyikan","apiKeyGate.currentKeySaved":"Kunci saat ini tersimpan {maskedKey}","apiKeyGate.clearSavedKey":"Hapus kunci tersimpan","apiKeyGate.cancel":"Batal","apiKeyGate.saving":"Menyimpan...","apiKeyGate.saveKey":"Simpan kunci","apiKeyGate.close":"Tutup","chat.thinking":"Sedang berpikir...","chat.loadingHistory":"Memuat riwayat obrolan...","chat.loadingSuggestions":"Memuat saran...","chat.suggestionsAriaLabel":"Saran balasan","chat.attachImageFromFile":"Lampirkan file","chat.removeAttachedImage":"Hapus file terlampir","chat.sendMessage":"Kirim pesan","chat.messageInputAriaLabel":"Input pesan","chat.retrievedFromWeb":"Diambil dari web:","chat.videoNotSupported":"Browser Anda tidak mendukung tag video.","chat.audioNotSupported":"Browser Anda tidak mendukung tag audio.","chat.fileAttachment":"Lampiran file","chat.imageGenError":"Kesalahan pembuatan gambar","chat.generatingImageLoadingSlow":"Membutuhkan waktu lebih lama...","chat.stopSpeaking":"Berhenti berbicara","chat.speakThisLine":"Ucapkan baris ini","chat.languageSelector.openGlobe":"Ubah bahasa","chat.maestroTranscriptScrollwheel":"Tampilan gulir transkrip Maestro","chat.mic.listening":"STT aktif: Mendengarkan...","chat.mic.enableStt":"Aktifkan STT","chat.mic.disableStt":"Hentikan STT","chat.mic.recordingAudioNote":"Merekam audio...","chat.placeholder.normal.listening":"Mendengarkan dalam {language}...","chat.placeholder.normal.sttActive":"Bicara dalam {language} atau ketik...","chat.placeholder.normal.sttInactive":"Ketik atau ketuk mikrofon untuk berbicara dalam {language}...","chat.placeholder.suggestion.listening":"Ucapkan {language} untuk menerjemahkan...","chat.placeholder.suggestion.sttActive":"Bicara atau ketik dalam {language} untuk menerjemahkan...","chat.placeholder.suggestion.sttInactive":"Ketik dalam {language} untuk menerjemahkan...","chat.camera.turnOn":"Aktifkan pratinjau kamera","chat.camera.turnOff":"Nonaktifkan pratinjau kamera","chat.camera.imageGenCameraLabel":"Pembuatan gambar","chat.camera.captureOrRecord":"Ketuk untuk foto, tahan untuk video","chat.camera.stopRecording":"Hentikan perekaman","chat.bookIcon.toggleImageGen":"Alihkan mode pembuatan gambar","chat.imagePreview.alt":"Pratinjau","chat.image.dragToEnlarge":"Seret sudut untuk memperbesar","chat.image.dragToShrink":"Seret sudut untuk memperkecil","chat.annotateImage":"Anotasi gambar","chat.annotateVideoFrame":"Anotasi frame saat ini","chat.annotateModal.editingPreviewAlt":"Gambar untuk dianotasi","chat.annotateModal.cancel":"Batal","chat.annotateModal.saveAndAttach":"Simpan dan lampirkan","chat.annotateModal.undo":"Batalkan","chat.suggestion.speak":'Ucapkan: "{suggestion}"',"chat.suggestion.ariaLabel":"Ucapkan saran: {suggestion}","chat.suggestion.toggleCreateMode":"Alihkan mode buat saran","chat.suggestion.createAction":"Buat saran","chat.suggestion.creating":"Membuat saran...","chat.maestro.idle":"Maestro menganggur","chat.maestro.title.idle":"Maestro saat ini menganggur.","chat.maestro.resting":"Maestro sedang beristirahat...","chat.maestro.observing":"Maestro sedang mengamati...","chat.maestro.aboutToEngage":"Maestro akan segera bergabung...","chat.maestro.title.resting":"Maestro menganggur, masih lama sebelum aktif kembali.","chat.maestro.title.observing":"Maestro sedang mengamati, sedikit waktu sebelum aktif kembali.","chat.maestro.title.aboutToEngage":"Maestro akan segera aktif kembali.","chat.maestro.typing":"Maestro sedang mengetik...","chat.maestro.title.typing":"Maestro sedang menyiapkan balasan.","chat.maestro.speaking":"Maestro sedang berbicara","chat.maestro.title.speaking":"Maestro sedang berbicara saat ini.","chat.maestro.listening":"Mendengarkan...","chat.maestro.title.listening":"Maestro menunggu input atau suara Anda.","chat.maestro.holding":"Maestro menunggu","chat.maestro.title.holding":"Maestro menunggu (aktivasi ulang dijeda)","chat.bookmark.hiddenHeaderAria":"Pesan tersembunyi di atas","chat.bookmark.isHere":"Penanda ada di sini","chat.bookmark.setHere":"Atur penanda di sini","chat.bookmark.actionsRegionAria":"Aksi penanda","chat.bookmark.actionsToggleTitle":"Opsi penanda","chat.bookmark.decrementAria":"Tampilkan satu lebih sedikit","chat.bookmark.decrementTitle":"Lebih sedikit","chat.bookmark.incrementAria":"Tampilkan satu lebih banyak","chat.bookmark.incrementTitle":"Lebih banyak","chat.bookmark.hiddenBelowHeaderAria":"Pesan tersembunyi di bawah","chat.sendPrep.optimizingVideo":"Mengoptimalkan video...","chat.sendPrep.optimizingImage":"Mengoptimalkan gambar...","chat.sendPrep.preparingMedia":"Menyiapkan media...","chat.sendPrep.uploadingMedia":"Mengunggah media...","chat.sendPrep.finalizing":"Menyelesaikan...","chat.header.annotating":"Menganotasi","chat.header.recordingAudio":"Merekam audio","chat.header.recordingVideo":"Merekam video","chat.header.savePopup":"Menyimpan...","chat.header.loadPopup":"Memuat...","chat.header.maestroAvatar":"Memperbarui avatar Maestro","chat.header.watchingVideo":"Menonton video","chat.header.viewingAbove":"Melihat pesan sebelumnya","chat.header.liveSession":"Sesi langsung","chat.liveSession.stop":"Hentikan langsung","chat.liveSession.retry":"Coba ulang langsung","chat.liveSession.start":"Mulai langsung","chat.liveSession.liveBadge":"Langsung","chat.liveSession.connecting":"Menghubungkan","chat.liveSession.defaultLastMessage":"Halo! Ada yang bisa saya bantu hari ini?","chat.liveSession.defaultSuggestion1":"Halo","chat.liveSession.defaultSuggestion2":"Selamat pagi","chat.liveSession.defaultSuggestion3":"Apa kabar?","chat.error.sttError":"Kesalahan STT: {error}. Coba alihkan mikrofon.","chat.error.autoCaptureCameraError":"Kesalahan tangkap otomatis kamera: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Perekaman dihentikan otomatis setelah {maxMinutes} menit.","chat.error.videoMetadataError":"Tidak dapat membaca metadata video. File mungkin rusak atau format tidak didukung.","chat.error.pauseVideoToAnnotate":"Jeda video untuk menganotasi frame saat ini","chat.error.imageGenInterrupted":"Pembuatan gambar terganggu.","chat.error.thinkingInterrupted":"Respons AI terganggu.","error.noLanguagePair":"Kesalahan kritis: Tidak ada pasangan bahasa yang dipilih.","error.translationFailed":"Terjemahan gagal. Silakan coba lagi.","error.imageLimitReached":"Batas pembuatan gambar sesi tercapai. Silakan mulai sesi baru.","error.tokenLimitReached":"Batas token sesi tercapai. Silakan mulai sesi baru.","error.apiKeyMissing":"Kunci Gemini API Anda hilang. Buka layar Kunci API dan tempelkan kunci Anda.","error.apiKeyInvalid":"Kunci Gemini API Anda tidak valid. Silakan periksa kesalahan ketik dan tempelkan kunci yang valid.","error.apiQuotaExceeded":"Kuota gratis Gemini API Anda untuk obrolan telah habis. Saya membuka layar Kunci API dengan langkah-langkah penagihan. Anda masih dapat menggunakan percakapan Langsung sementara itu.","error.cameraPermissionDenied":"Izin kamera ditolak. Silakan aktifkan akses kamera di pengaturan browser.","error.cameraNotFound":"Kamera yang dipilih tidak ditemukan. Pastikan terhubung atau pilih kamera lain.","error.cameraAccessNotSupported":"Akses kamera tidak didukung oleh browser Anda.","error.cameraUnknown":"Terjadi kesalahan tidak dikenal saat mengakses kamera.","error.cameraStreamNotAvailable":"Stream kamera tidak tersedia untuk pengambilan.","error.imageCaptureGeneric":"Kesalahan tidak dikenal saat mengambil gambar.","error.visualContextVideoElementNotReady":"Elemen video konteks visual belum siap.","error.snapshotVideoElementNotReady":"Elemen video snapshot belum siap.","error.visualContextCameraAccessNotSupported":"Akses kamera tidak didukung untuk konteks visual.","error.snapshotCameraAccessNotSupported":"Akses kamera tidak didukung untuk snapshot.","error.visualContext2DContext":"Tidak dapat mendapatkan konteks 2D untuk konteks visual.","error.snapshot2DContext":"Tidak dapat mendapatkan konteks 2D untuk snapshot.","error.visualContextCaptureFailedPermission":"Konteks visual gagal: Izin kamera ditolak.","error.snapshotCaptureFailedPermission":"Snapshot gagal: Izin kamera ditolak.","error.visualContextCaptureFailedNotFound":"Konteks visual gagal: Kamera tidak ditemukan.","error.snapshotCaptureFailedNotFound":"Snapshot gagal: Kamera tidak ditemukan.","error.visualContextCaptureFailedNotReady":"Konteks visual gagal: Kamera belum siap atau ada masalah dengan feed. {details}","error.snapshotCaptureFailedNotReady":"Snapshot gagal: Kamera belum siap atau ada masalah dengan feed. {details}","error.visualContextCaptureFailedGeneric":"Konteks visual gagal: {details}","error.snapshotCaptureFailedGeneric":"Snapshot gagal: {details}"},YT={"sttLang.selectLanguage":"Imposta il riconoscimento vocale su {language}","header.targetLanguageTitle":"Lingua di destinazione attuale: {language}","startPage.clickToStart":"Clicca sull'aereo","startPage.saveChats":"Salva tutte le chat","startPage.loadChats":"Carica chat","startPage.maestroAvatar":"Avatar di Maestro","startPage.addMaestroAvatar":"Aggiungi avatar Maestro","startPage.loadSuccess":"{count} sessioni di chat caricate e sostituite con successo!","startPage.loadError":"Errore nel caricamento delle chat. Il file potrebbe essere corrotto o in un formato errato.","startPage.noChatsToSave":"Nessuna cronologia chat da salvare.","startPage.saveError":"Errore nel salvataggio delle chat. Controlla la console per maggiori dettagli.","general.clear":"Cancella","general.error":"Spiacente, si  verificato un errore.","apiKeyGate.title":"Collega la tua chiave API Gemini","apiKeyGate.billingTitle":"Configura la fatturazione per una quota maggiore","apiKeyGate.subtitle":"Questa app funziona interamente sul tuo dispositivo. La tua chiave non tocca mai i nostri server.","apiKeyGate.privacyPolicy":"Informativa sulla privacy","apiKeyGate.stepsTitle":"Due passaggi rapidi:","apiKeyGate.stepOne":"Apri Google AI Studio e crea una chiave API.","apiKeyGate.stepTwo":"Incolla la chiave qui sotto e tocca Salva.","apiKeyGate.openAiStudio":"Apri Google AI Studio","apiKeyGate.viewInstructions":"Visualizza istruzioni","apiKeyGate.closeInstructions":"Chiudi istruzioni","apiKeyGate.previousInstruction":"Istruzione precedente","apiKeyGate.nextInstruction":"Istruzione successiva","apiKeyGate.instructionStep":"Istruzione {step} di {total}","apiKeyGate.keyLabel":"Chiave API Gemini","apiKeyGate.placeholder":"Incolla qui la tua chiave API","apiKeyGate.show":"Mostra","apiKeyGate.hide":"Nascondi","apiKeyGate.currentKeySaved":"Chiave attuale salvata {maskedKey}","apiKeyGate.clearSavedKey":"Cancella chiave salvata","apiKeyGate.cancel":"Annulla","apiKeyGate.saving":"Salvataggio...","apiKeyGate.saveKey":"Salva chiave","apiKeyGate.close":"Chiudi","chat.thinking":"Sto pensando...","chat.loadingHistory":"Caricamento cronologia chat...","chat.loadingSuggestions":"Caricamento suggerimenti...","chat.suggestionsAriaLabel":"Suggerimenti di risposta","chat.attachImageFromFile":"Allega file","chat.removeAttachedImage":"Rimuovi file allegato","chat.sendMessage":"Invia messaggio","chat.messageInputAriaLabel":"Inserimento messaggio","chat.retrievedFromWeb":"Recuperato dal web:","chat.videoNotSupported":"Il tuo browser non supporta il tag video.","chat.audioNotSupported":"Il tuo browser non supporta il tag audio.","chat.fileAttachment":"Allegato","chat.imageGenError":"Errore generazione immagine","chat.generatingImageLoadingSlow":"Ci vuole un po' pi di tempo...","chat.stopSpeaking":"Smetti di parlare","chat.speakThisLine":"Pronuncia questa riga","chat.languageSelector.openGlobe":"Cambia lingue","chat.maestroTranscriptScrollwheel":"Vista a scorrimento della trascrizione Maestro","chat.mic.listening":"STT attivo: In ascolto...","chat.mic.enableStt":"Attiva STT","chat.mic.disableStt":"Ferma STT","chat.mic.recordingAudioNote":"Registrazione audio...","chat.placeholder.normal.listening":"In ascolto in {language}...","chat.placeholder.normal.sttActive":"Parla in {language} o scrivi...","chat.placeholder.normal.sttInactive":"Scrivi o tocca il microfono per parlare in {language}...","chat.placeholder.suggestion.listening":"Parla {language} per tradurre...","chat.placeholder.suggestion.sttActive":"Parla o scrivi in {language} per tradurre...","chat.placeholder.suggestion.sttInactive":"Scrivi in {language} per tradurre...","chat.camera.turnOn":"Attiva anteprima fotocamera","chat.camera.turnOff":"Disattiva anteprima fotocamera","chat.camera.imageGenCameraLabel":"Generazione immagine","chat.camera.captureOrRecord":"Tocca per foto, tieni premuto per video","chat.camera.stopRecording":"Ferma registrazione","chat.bookIcon.toggleImageGen":"Attiva/disattiva modalit generazione immagine","chat.imagePreview.alt":"Anteprima","chat.image.dragToEnlarge":"Trascina l'angolo per ingrandire","chat.image.dragToShrink":"Trascina l'angolo per rimpicciolire","chat.annotateImage":"Annota immagine","chat.annotateVideoFrame":"Annota fotogramma corrente","chat.annotateModal.editingPreviewAlt":"Immagine da annotare","chat.annotateModal.cancel":"Annulla","chat.annotateModal.saveAndAttach":"Salva e allega","chat.annotateModal.undo":"Annulla","chat.suggestion.speak":`Di': "{suggestion}"`,"chat.suggestion.ariaLabel":"Pronuncia suggerimento: {suggestion}","chat.suggestion.toggleCreateMode":"Attiva/disattiva modalit creazione suggerimento","chat.suggestion.createAction":"Crea suggerimento","chat.suggestion.creating":"Creazione suggerimento...","chat.maestro.idle":"Maestro  inattivo","chat.maestro.title.idle":"Maestro  attualmente inattivo.","chat.maestro.resting":"Maestro sta riposando...","chat.maestro.observing":"Maestro sta osservando...","chat.maestro.aboutToEngage":"Maestro sta per intervenire...","chat.maestro.title.resting":"Maestro  inattivo, molto tempo prima della riattivazione.","chat.maestro.title.observing":"Maestro sta osservando, un po' di tempo prima della riattivazione.","chat.maestro.title.aboutToEngage":"Maestro sta per riattivarsi presto.","chat.maestro.typing":"Maestro sta scrivendo...","chat.maestro.title.typing":"Maestro sta preparando una risposta.","chat.maestro.speaking":"Maestro sta parlando","chat.maestro.title.speaking":"Maestro sta parlando ora.","chat.maestro.listening":"In ascolto...","chat.maestro.title.listening":"Maestro sta aspettando il tuo input o la tua voce.","chat.maestro.holding":"Maestro  in attesa","chat.maestro.title.holding":"Maestro  in attesa (riattivazione in pausa)","chat.bookmark.hiddenHeaderAria":"Messaggi nascosti sopra","chat.bookmark.isHere":"Il segnalibro  qui","chat.bookmark.setHere":"Imposta segnalibro qui","chat.bookmark.actionsRegionAria":"Azioni segnalibro","chat.bookmark.actionsToggleTitle":"Opzioni segnalibro","chat.bookmark.decrementAria":"Mostra uno in meno","chat.bookmark.decrementTitle":"Meno","chat.bookmark.incrementAria":"Mostra uno in pi","chat.bookmark.incrementTitle":"Pi","chat.bookmark.hiddenBelowHeaderAria":"Messaggi nascosti sotto","chat.sendPrep.optimizingVideo":"Ottimizzazione video...","chat.sendPrep.optimizingImage":"Ottimizzazione immagine...","chat.sendPrep.preparingMedia":"Preparazione media...","chat.sendPrep.uploadingMedia":"Caricamento media...","chat.sendPrep.finalizing":"Finalizzazione...","chat.header.annotating":"Annotazione","chat.header.recordingAudio":"Registrazione audio","chat.header.recordingVideo":"Registrazione video","chat.header.savePopup":"Salvataggio...","chat.header.loadPopup":"Caricamento...","chat.header.maestroAvatar":"Aggiornamento avatar Maestro","chat.header.watchingVideo":"Visualizzazione video","chat.header.viewingAbove":"Visualizzazione messaggi precedenti","chat.header.liveSession":"Sessione dal vivo","chat.liveSession.stop":"Ferma Live","chat.liveSession.retry":"Riprova Live","chat.liveSession.start":"Avvia Live","chat.liveSession.liveBadge":"Live","chat.liveSession.connecting":"Connessione","chat.liveSession.defaultLastMessage":"Ciao! Come posso aiutarti oggi?","chat.liveSession.defaultSuggestion1":"Ciao","chat.liveSession.defaultSuggestion2":"Buongiorno","chat.liveSession.defaultSuggestion3":"Come stai?","chat.error.sttError":"Errore STT: {error}. Prova a cambiare il microfono.","chat.error.autoCaptureCameraError":"Errore cattura automatica fotocamera: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Registrazione fermata automaticamente dopo {maxMinutes} minuti.","chat.error.videoMetadataError":"Impossibile leggere i metadati del video. Il file potrebbe essere corrotto o in un formato non supportato.","chat.error.pauseVideoToAnnotate":"Metti in pausa il video per annotare il fotogramma corrente","chat.error.imageGenInterrupted":"La generazione dell'immagine  stata interrotta.","chat.error.thinkingInterrupted":"La risposta dell'IA  stata interrotta.","error.noLanguagePair":"Errore critico: Nessuna coppia di lingue selezionata.","error.translationFailed":"Traduzione fallita. Riprova.","error.imageLimitReached":"Limite di generazione immagini della sessione raggiunto. Avvia una nuova sessione.","error.tokenLimitReached":"Limite token della sessione raggiunto. Avvia una nuova sessione.","error.apiKeyMissing":"La tua chiave API Gemini  mancante. Apri la schermata della chiave API e incolla la tua chiave.","error.apiKeyInvalid":"La tua chiave API Gemini non  valida. Controlla eventuali errori di battitura e incolla una chiave valida.","error.apiQuotaExceeded":"La tua quota gratuita dell'API Gemini per la chat  esaurita. Ho aperto la schermata della chiave API con i passaggi per la fatturazione. Nel frattempo puoi ancora usare la conversazione dal vivo.","error.cameraPermissionDenied":"Permesso fotocamera negato. Abilita l'accesso alla fotocamera nelle impostazioni del browser.","error.cameraNotFound":"Fotocamera selezionata non trovata. Assicurati che sia collegata o seleziona una fotocamera diversa.","error.cameraAccessNotSupported":"L'accesso alla fotocamera non  supportato dal tuo browser.","error.cameraUnknown":"Si  verificato un errore sconosciuto durante l'accesso alla fotocamera.","error.cameraStreamNotAvailable":"Stream fotocamera non disponibile per la cattura.","error.imageCaptureGeneric":"Errore sconosciuto durante la cattura dell'immagine.","error.visualContextVideoElementNotReady":"Elemento video del contesto visivo non pronto.","error.snapshotVideoElementNotReady":"Elemento video per lo snapshot non pronto.","error.visualContextCameraAccessNotSupported":"Accesso fotocamera non supportato per il contesto visivo.","error.snapshotCameraAccessNotSupported":"Accesso fotocamera non supportato per lo snapshot.","error.visualContext2DContext":"Impossibile ottenere il contesto 2D per il contesto visivo.","error.snapshot2DContext":"Impossibile ottenere il contesto 2D per lo snapshot.","error.visualContextCaptureFailedPermission":"Contesto visivo fallito: Permesso fotocamera negato.","error.snapshotCaptureFailedPermission":"Snapshot fallito: Permesso fotocamera negato.","error.visualContextCaptureFailedNotFound":"Contesto visivo fallito: Fotocamera non trovata.","error.snapshotCaptureFailedNotFound":"Snapshot fallito: Fotocamera non trovata.","error.visualContextCaptureFailedNotReady":"Contesto visivo fallito: Fotocamera non pronta o problema con lo stream. {details}","error.snapshotCaptureFailedNotReady":"Snapshot fallito: Fotocamera non pronta o problema con lo stream. {details}","error.visualContextCaptureFailedGeneric":"Contesto visivo fallito: {details}","error.snapshotCaptureFailedGeneric":"Snapshot fallito: {details}"},jT={"sttLang.selectLanguage":"{language}","header.targetLanguageTitle":"{language}","startPage.clickToStart":"","startPage.saveChats":"","startPage.loadChats":"","startPage.maestroAvatar":"","startPage.addMaestroAvatar":"","startPage.loadSuccess":"{count}","startPage.loadError":"","startPage.noChatsToSave":"","startPage.saveError":"","general.clear":"","general.error":"","apiKeyGate.title":"Gemini API","apiKeyGate.billingTitle":"","apiKeyGate.subtitle":"","apiKeyGate.privacyPolicy":"","apiKeyGate.stepsTitle":"2","apiKeyGate.stepOne":"Google AI StudioAPI","apiKeyGate.stepTwo":"","apiKeyGate.openAiStudio":"Google AI Studio","apiKeyGate.viewInstructions":"","apiKeyGate.closeInstructions":"","apiKeyGate.previousInstruction":"","apiKeyGate.nextInstruction":"","apiKeyGate.instructionStep":" {step} / {total}","apiKeyGate.keyLabel":"Gemini API","apiKeyGate.placeholder":"API","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":" {maskedKey}","apiKeyGate.clearSavedKey":"","apiKeyGate.cancel":"","apiKeyGate.saving":"...","apiKeyGate.saveKey":"","apiKeyGate.close":"","chat.thinking":"...","chat.loadingHistory":"...","chat.loadingSuggestions":"...","chat.suggestionsAriaLabel":"","chat.attachImageFromFile":"","chat.removeAttachedImage":"","chat.sendMessage":"","chat.messageInputAriaLabel":"","chat.retrievedFromWeb":"","chat.videoNotSupported":"","chat.audioNotSupported":"","chat.fileAttachment":"","chat.imageGenError":"","chat.generatingImageLoadingSlow":"...","chat.stopSpeaking":"","chat.speakThisLine":"","chat.languageSelector.openGlobe":"","chat.maestroTranscriptScrollwheel":"","chat.mic.listening":"STT...","chat.mic.enableStt":"STT","chat.mic.disableStt":"STT","chat.mic.recordingAudioNote":"...","chat.placeholder.normal.listening":"{language}...","chat.placeholder.normal.sttActive":"{language}...","chat.placeholder.normal.sttInactive":"{language}...","chat.placeholder.suggestion.listening":"{language}...","chat.placeholder.suggestion.sttActive":"{language}...","chat.placeholder.suggestion.sttInactive":"{language}...","chat.camera.turnOn":"","chat.camera.turnOff":"","chat.camera.imageGenCameraLabel":"","chat.camera.captureOrRecord":"","chat.camera.stopRecording":"","chat.bookIcon.toggleImageGen":"","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"","chat.image.dragToShrink":"","chat.annotateImage":"","chat.annotateVideoFrame":"","chat.annotateModal.editingPreviewAlt":"","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":"","chat.annotateModal.undo":"","chat.suggestion.speak":'"{suggestion}"',"chat.suggestion.ariaLabel":"{suggestion}","chat.suggestion.toggleCreateMode":"","chat.suggestion.createAction":"","chat.suggestion.creating":"...","chat.maestro.idle":"","chat.maestro.title.idle":"","chat.maestro.resting":"...","chat.maestro.observing":"...","chat.maestro.aboutToEngage":"...","chat.maestro.title.resting":"","chat.maestro.title.observing":"","chat.maestro.title.aboutToEngage":"","chat.maestro.typing":"...","chat.maestro.title.typing":"","chat.maestro.speaking":"","chat.maestro.title.speaking":"","chat.maestro.listening":"...","chat.maestro.title.listening":"","chat.maestro.holding":"","chat.maestro.title.holding":"","chat.bookmark.hiddenHeaderAria":"","chat.bookmark.isHere":"","chat.bookmark.setHere":"","chat.bookmark.actionsRegionAria":"","chat.bookmark.actionsToggleTitle":"","chat.bookmark.decrementAria":"1","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"1","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"","chat.sendPrep.optimizingVideo":"...","chat.sendPrep.optimizingImage":"...","chat.sendPrep.preparingMedia":"...","chat.sendPrep.uploadingMedia":"...","chat.sendPrep.finalizing":"...","chat.header.annotating":"","chat.header.recordingAudio":"","chat.header.recordingVideo":"","chat.header.savePopup":"...","chat.header.loadPopup":"...","chat.header.maestroAvatar":"","chat.header.watchingVideo":"","chat.header.viewingAbove":"","chat.header.liveSession":"","chat.liveSession.stop":"","chat.liveSession.retry":"","chat.liveSession.start":"","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"","chat.liveSession.defaultLastMessage":"","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":"","chat.liveSession.defaultSuggestion3":"","chat.error.sttError":"STT{error}","chat.error.autoCaptureCameraError":"{error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}","chat.error.videoMetadataError":"","chat.error.pauseVideoToAnnotate":"","chat.error.imageGenInterrupted":"","chat.error.thinkingInterrupted":"AI","error.noLanguagePair":"","error.translationFailed":"","error.imageLimitReached":"","error.tokenLimitReached":"","error.apiKeyMissing":"Gemini APIAPI","error.apiKeyInvalid":"Gemini API","error.apiQuotaExceeded":"Gemini APIAPI","error.cameraPermissionDenied":"","error.cameraNotFound":"","error.cameraAccessNotSupported":"","error.cameraUnknown":"","error.cameraStreamNotAvailable":"","error.imageCaptureGeneric":"","error.visualContextVideoElementNotReady":"","error.snapshotVideoElementNotReady":"","error.visualContextCameraAccessNotSupported":"","error.snapshotCameraAccessNotSupported":"","error.visualContext2DContext":"2D","error.snapshot2DContext":"2D","error.visualContextCaptureFailedPermission":"","error.snapshotCaptureFailedPermission":"","error.visualContextCaptureFailedNotFound":"","error.snapshotCaptureFailedNotFound":"","error.visualContextCaptureFailedNotReady":"{details}","error.snapshotCaptureFailedNotReady":"{details}","error.visualContextCaptureFailedGeneric":"{details}","error.snapshotCaptureFailedGeneric":"{details}"},JT={"sttLang.selectLanguage":"  {language}  ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"   ","startPage.saveChats":"  ","startPage.loadChats":"  ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"{count}      !","startPage.loadError":"   .      .","startPage.noChatsToSave":"   .","startPage.saveError":"  .    .","general.clear":"","general.error":",  .","apiKeyGate.title":" Gemini API  ","apiKeyGate.billingTitle":"   ","apiKeyGate.subtitle":"     .      .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":"Google AI Studio    API  .","apiKeyGate.stepTwo":"     (Save)  .","apiKeyGate.openAiStudio":"Google AI Studio ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":" ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {step} / {total}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API   ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"   {maskedKey}","apiKeyGate.clearSavedKey":"  ","apiKeyGate.cancel":"","apiKeyGate.saving":"...","apiKeyGate.saveKey":" ","apiKeyGate.close":"","chat.thinking":"...","chat.loadingHistory":"   ...","chat.loadingSuggestions":"  ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":" :","chat.videoNotSupported":"     .","chat.audioNotSupported":"     .","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"   ...","chat.stopSpeaking":" ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT : ...","chat.mic.enableStt":"STT ","chat.mic.disableStt":"STT ","chat.mic.recordingAudioNote":"  ...","chat.placeholder.normal.listening":"{language}  ...","chat.placeholder.normal.sttActive":"{language}     ...","chat.placeholder.normal.sttInactive":"   {language}     ...","chat.placeholder.suggestion.listening":" {language} ...","chat.placeholder.suggestion.sttActive":" {language}     ...","chat.placeholder.suggestion.sttInactive":" {language}   ...","chat.camera.turnOn":"   ","chat.camera.turnOff":"   ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"  ,  ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"   ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"  ","chat.image.dragToShrink":"  ","chat.annotateImage":"  ","chat.annotateVideoFrame":"    ","chat.annotateModal.editingPreviewAlt":"  ","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":"  ","chat.annotateModal.undo":"","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"   ","chat.suggestion.createAction":" ","chat.suggestion.creating":" ...","chat.maestro.idle":" ","chat.maestro.title.idle":"  .","chat.maestro.resting":" ...","chat.maestro.observing":" ...","chat.maestro.aboutToEngage":"  ...","chat.maestro.title.resting":" , -  .","chat.maestro.title.observing":" , -  .","chat.maestro.title.aboutToEngage":"  -.","chat.maestro.typing":"  ...","chat.maestro.title.typing":"  .","chat.maestro.speaking":" ","chat.maestro.title.speaking":"  .","chat.maestro.listening":"...","chat.maestro.title.listening":"     .","chat.maestro.holding":" ","chat.maestro.title.holding":"  (-  )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":" ","chat.bookmark.setHere":"  ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":" ...","chat.sendPrep.optimizingImage":" ...","chat.sendPrep.preparingMedia":" ...","chat.sendPrep.uploadingMedia":"  ...","chat.sendPrep.finalizing":"...","chat.header.annotating":" ","chat.header.recordingAudio":"  ","chat.header.recordingVideo":"  ","chat.header.savePopup":"...","chat.header.loadPopup":" ...","chat.header.maestroAvatar":"  ","chat.header.watchingVideo":" ","chat.header.viewingAbove":"  ","chat.header.liveSession":" ","chat.liveSession.stop":" ","chat.liveSession.retry":" ","chat.liveSession.start":" ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"","chat.liveSession.defaultLastMessage":"!      ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":"","chat.liveSession.defaultSuggestion3":" ?","chat.error.sttError":"STT : {error}.   .","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}     .","chat.error.videoMetadataError":"   .      .","chat.error.pauseVideoToAnnotate":"      ","chat.error.imageGenInterrupted":"  .","chat.error.thinkingInterrupted":"AI  .","error.noLanguagePair":" :     .","error.translationFailed":" .   .","error.imageLimitReached":"   .    .","error.tokenLimitReached":"   .    .","error.apiKeyMissing":" Gemini API  . API       .","error.apiKeyInvalid":" Gemini API  .        .","error.apiQuotaExceeded":"  Gemini API   .    API   .       .","error.cameraPermissionDenied":"  .     .","error.cameraNotFound":"   .         .","error.cameraAccessNotSupported":"    .","error.cameraUnknown":"    .","error.cameraStreamNotAvailable":"   .","error.imageCaptureGeneric":"   .","error.visualContextVideoElementNotReady":"    .","error.snapshotVideoElementNotReady":"   .","error.visualContextCameraAccessNotSupported":"    .","error.snapshotCameraAccessNotSupported":"   .","error.visualContext2DContext":"  2D   .","error.snapshot2DContext":" 2D   .","error.visualContextCaptureFailedPermission":"  :   .","error.snapshotCaptureFailedPermission":" :   .","error.visualContextCaptureFailedNotFound":"  :  .","error.snapshotCaptureFailedNotFound":" :  .","error.visualContextCaptureFailedNotReady":"  :     . {details}","error.snapshotCaptureFailedNotReady":" :     . {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},XT={"sttLang.selectLanguage":"  {language} ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":" ","startPage.saveChats":"  ","startPage.loadChats":" ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"{count}      !","startPage.loadError":"  .      .","startPage.noChatsToSave":"   .","startPage.saveError":"  .    .","general.clear":"","general.error":",  .","apiKeyGate.title":"Gemini API  ","apiKeyGate.billingTitle":"     ","apiKeyGate.subtitle":"    .    .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"   :","apiKeyGate.stepOne":"Google AI Studio  API  .","apiKeyGate.stepTwo":"    .","apiKeyGate.openAiStudio":"Google AI Studio ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":" ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {step} / {total}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API  ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"   {maskedKey}","apiKeyGate.clearSavedKey":"  ","apiKeyGate.cancel":"","apiKeyGate.saving":" ...","apiKeyGate.saveKey":" ","apiKeyGate.close":"","chat.thinking":" ...","chat.loadingHistory":"   ...","chat.loadingSuggestions":"  ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":" :","chat.videoNotSupported":"    .","chat.audioNotSupported":"    .","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"    ...","chat.stopSpeaking":" ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT :  ...","chat.mic.enableStt":"STT ","chat.mic.disableStt":"STT ","chat.mic.recordingAudioNote":"  ...","chat.placeholder.normal.listening":"{language}  ...","chat.placeholder.normal.sttActive":"{language}  ...","chat.placeholder.normal.sttInactive":"   {language} ...","chat.placeholder.suggestion.listening":" {language} ...","chat.placeholder.suggestion.sttActive":" {language}  ...","chat.placeholder.suggestion.sttInactive":" {language} ...","chat.camera.turnOn":"  ","chat.camera.turnOff":"  ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":" ,   ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"   ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"  ","chat.image.dragToShrink":"  ","chat.annotateImage":"  ","chat.annotateVideoFrame":"   ","chat.annotateModal.editingPreviewAlt":"  ","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":"  ","chat.annotateModal.undo":" ","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"   ","chat.suggestion.createAction":" ","chat.suggestion.creating":"  ...","chat.maestro.idle":"  ","chat.maestro.title.idle":"   .","chat.maestro.resting":"  ...","chat.maestro.observing":"  ...","chat.maestro.aboutToEngage":"  ...","chat.maestro.title.resting":"  ,    .","chat.maestro.title.observing":"  ,    .","chat.maestro.title.aboutToEngage":"  .","chat.maestro.typing":"  ...","chat.maestro.title.typing":"   .","chat.maestro.speaking":"  ","chat.maestro.title.speaking":"   .","chat.maestro.listening":" ...","chat.maestro.title.listening":"     .","chat.maestro.holding":"  ","chat.maestro.title.holding":"   (  )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":"  ","chat.bookmark.setHere":"  ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":"  ...","chat.sendPrep.optimizingImage":"  ...","chat.sendPrep.preparingMedia":"  ...","chat.sendPrep.uploadingMedia":"  ...","chat.sendPrep.finalizing":" ...","chat.header.annotating":" ","chat.header.recordingAudio":"  ","chat.header.recordingVideo":"  ","chat.header.savePopup":" ...","chat.header.loadPopup":" ...","chat.header.maestroAvatar":"   ","chat.header.watchingVideo":"  ","chat.header.viewingAbove":"  ","chat.header.liveSession":" ","chat.liveSession.stop":" ","chat.liveSession.retry":" ","chat.liveSession.start":" ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":" ","chat.liveSession.defaultLastMessage":"!   ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":" ","chat.liveSession.defaultSuggestion3":" ?","chat.error.sttError":"STT : {error}.   .","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}    .","chat.error.videoMetadataError":"    .       .","chat.error.pauseVideoToAnnotate":"      ","chat.error.imageGenInterrupted":"  .","chat.error.thinkingInterrupted":"AI  .","error.noLanguagePair":" :    .","error.translationFailed":" .   .","error.imageLimitReached":"    .    .","error.tokenLimitReached":"   .    .","error.apiKeyMissing":"Gemini API  . API     .","error.apiKeyInvalid":"Gemini API   .      .","error.apiQuotaExceeded":"Gemini API    .    API   .       .","error.cameraPermissionDenied":"  .     .","error.cameraNotFound":"    .      .","error.cameraAccessNotSupported":"    .","error.cameraUnknown":"       .","error.cameraStreamNotAvailable":"     .","error.imageCaptureGeneric":"       .","error.visualContextVideoElementNotReady":"     .","error.snapshotVideoElementNotReady":"    .","error.visualContextCameraAccessNotSupported":"      .","error.snapshotCameraAccessNotSupported":"     .","error.visualContext2DContext":"   2D    .","error.snapshot2DContext":"  2D    .","error.visualContextCaptureFailedPermission":"  :   .","error.snapshotCaptureFailedPermission":" :   .","error.visualContextCaptureFailedNotFound":"  :    .","error.snapshotCaptureFailedNotFound":" :    .","error.visualContextCaptureFailedNotReady":"  :      . {details}","error.snapshotCaptureFailedNotReady":" :      . {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},WT={"sttLang.selectLanguage":"  {language}- ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"  ","startPage.saveChats":"  ","startPage.loadChats":" ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"{count}     !","startPage.loadError":"  .     .","startPage.noChatsToSave":"  .","startPage.saveError":"  .    .","general.clear":"","general.error":",   .","apiKeyGate.title":" Gemini API  ","apiKeyGate.billingTitle":"   ","apiKeyGate.subtitle":"     .      .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":"Google AI Studio   API  .","apiKeyGate.stepTwo":"    (Save)  .","apiKeyGate.openAiStudio":"Google AI Studio ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":" ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {step} / {total}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API   ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"    {maskedKey}","apiKeyGate.clearSavedKey":"   ","apiKeyGate.cancel":"","apiKeyGate.saving":" ...","apiKeyGate.saveKey":"  ","apiKeyGate.close":"","chat.thinking":"...","chat.loadingHistory":"  ...","chat.loadingSuggestions":" ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":"  :","chat.videoNotSupported":"    .","chat.audioNotSupported":"    .","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"  ...","chat.stopSpeaking":" ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT : ...","chat.mic.enableStt":"STT ","chat.mic.disableStt":"STT ","chat.mic.recordingAudioNote":" ...","chat.placeholder.normal.listening":"{language}- ...","chat.placeholder.normal.sttActive":"{language}-    ...","chat.placeholder.normal.sttInactive":"   {language}-    ...","chat.placeholder.suggestion.listening":"  {language} ...","chat.placeholder.suggestion.sttActive":"  {language}-    ...","chat.placeholder.suggestion.sttInactive":"  {language}-  ...","chat.camera.turnOn":"  ","chat.camera.turnOff":"  ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"  ,  ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"   ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"  ","chat.image.dragToShrink":"  ","chat.annotateImage":" ","chat.annotateVideoFrame":"  ","chat.annotateModal.editingPreviewAlt":" ","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":" ","chat.annotateModal.undo":"","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"   ","chat.suggestion.createAction":" ","chat.suggestion.creating":" ...","chat.maestro.idle":" ","chat.maestro.title.idle":"  .","chat.maestro.resting":" ...","chat.maestro.observing":" ...","chat.maestro.aboutToEngage":"  ...","chat.maestro.title.resting":" ,    .","chat.maestro.title.observing":" ,    .","chat.maestro.title.aboutToEngage":"   .","chat.maestro.typing":" ...","chat.maestro.title.typing":"  .","chat.maestro.speaking":" ","chat.maestro.title.speaking":"  .","chat.maestro.listening":"...","chat.maestro.title.listening":"    .","chat.maestro.holding":" ","chat.maestro.title.holding":"  (   )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":" ","chat.bookmark.setHere":"  ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":"  ...","chat.sendPrep.optimizingImage":"  ...","chat.sendPrep.preparingMedia":" ...","chat.sendPrep.uploadingMedia":"  ...","chat.sendPrep.finalizing":"...","chat.header.annotating":"","chat.header.recordingAudio":" ","chat.header.recordingVideo":" ","chat.header.savePopup":"...","chat.header.loadPopup":"...","chat.header.maestroAvatar":"  ","chat.header.watchingVideo":" ","chat.header.viewingAbove":"  ","chat.header.liveSession":" ","chat.liveSession.stop":" ","chat.liveSession.retry":"  ","chat.liveSession.start":" ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"","chat.liveSession.defaultLastMessage":"!     ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":"","chat.liveSession.defaultSuggestion3":"?","chat.error.sttError":"STT : {error}.   .","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}    .","chat.error.videoMetadataError":"   .      .","chat.error.pauseVideoToAnnotate":"     ","chat.error.imageGenInterrupted":"  .","chat.error.thinkingInterrupted":"AI  .","error.noLanguagePair":" :   .","error.translationFailed":" .   .","error.imageLimitReached":"    .    .","error.tokenLimitReached":"   .    .","error.apiKeyMissing":" Gemini API  . API     .","error.apiKeyInvalid":" Gemini API  .    .","error.apiQuotaExceeded":"  Gemini API   .   API    .     .","error.cameraPermissionDenied":"  .     .","error.cameraNotFound":"  .       .","error.cameraAccessNotSupported":"    .","error.cameraUnknown":"     .","error.cameraStreamNotAvailable":"    .","error.imageCaptureGeneric":"    .","error.visualContextVideoElementNotReady":"    .","error.snapshotVideoElementNotReady":"   .","error.visualContextCameraAccessNotSupported":"    .","error.snapshotCameraAccessNotSupported":"   .","error.visualContext2DContext":"  2D   .","error.snapshot2DContext":" 2D   .","error.visualContextCaptureFailedPermission":"  :   .","error.snapshotCaptureFailedPermission":" :   .","error.visualContextCaptureFailedNotFound":"  :  .","error.snapshotCaptureFailedNotFound":" :  .","error.visualContextCaptureFailedNotReady":"  :     . {details}","error.snapshotCaptureFailedNotReady":" :     . {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},ZT={"sttLang.selectLanguage":"  {language}   ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"  ","startPage.saveChats":"   ","startPage.loadChats":"  ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"{count}       !","startPage.loadError":"   .       .","startPage.noChatsToSave":"     .","startPage.saveError":"   .    .","general.clear":" ","general.error":",   .","apiKeyGate.title":" Gemini API  ","apiKeyGate.billingTitle":"    ","apiKeyGate.subtitle":"     .        .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":"Google AI Studio   API   .","apiKeyGate.stepTwo":"     ' ' (Save)   .","apiKeyGate.openAiStudio":"Google AI Studio ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":"  ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {step}  {total}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API    ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"     {maskedKey}","apiKeyGate.clearSavedKey":"   ","apiKeyGate.cancel":" ","apiKeyGate.saving":"  ...","apiKeyGate.saveKey":"  ","apiKeyGate.close":" ","chat.thinking":"  ...","chat.loadingHistory":"    ...","chat.loadingSuggestions":"   ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":" :","chat.videoNotSupported":"      .","chat.audioNotSupported":"      .","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"    ...","chat.stopSpeaking":" ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT :  ...","chat.mic.enableStt":"STT  ","chat.mic.disableStt":"STT ","chat.mic.recordingAudioNote":"   ...","chat.placeholder.normal.listening":"{language}   ...","chat.placeholder.normal.sttActive":"{language}     ...","chat.placeholder.normal.sttInactive":"   {language}     ...","chat.placeholder.suggestion.listening":"  {language} ...","chat.placeholder.suggestion.sttActive":"  {language}     ...","chat.placeholder.suggestion.sttInactive":"  {language}   ...","chat.camera.turnOn":"   ","chat.camera.turnOff":"   ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"  ,   ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"    ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"   ","chat.image.dragToShrink":"   ","chat.annotateImage":"  ","chat.annotateVideoFrame":"   ","chat.annotateModal.editingPreviewAlt":"  ","chat.annotateModal.cancel":" ","chat.annotateModal.saveAndAttach":"   ","chat.annotateModal.undo":" ","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"    ","chat.suggestion.createAction":"  ","chat.suggestion.creating":"   ...","chat.maestro.idle":"  ","chat.maestro.title.idle":"   .","chat.maestro.resting":"   ...","chat.maestro.observing":"   ...","chat.maestro.aboutToEngage":"   ...","chat.maestro.title.resting":"  ,      .","chat.maestro.title.observing":"   ,      .","chat.maestro.title.aboutToEngage":"    .","chat.maestro.typing":"   ...","chat.maestro.title.typing":"    .","chat.maestro.speaking":"  ","chat.maestro.title.speaking":"   .","chat.maestro.listening":" ...","chat.maestro.title.listening":"       .","chat.maestro.holding":"   ","chat.maestro.title.holding":"    (    )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":"  ","chat.bookmark.setHere":"   ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":"   ...","chat.sendPrep.optimizingImage":"   ...","chat.sendPrep.preparingMedia":"   ...","chat.sendPrep.uploadingMedia":"   ...","chat.sendPrep.finalizing":"   ...","chat.header.annotating":"  ","chat.header.recordingAudio":"   ","chat.header.recordingVideo":"   ","chat.header.savePopup":"  ...","chat.header.loadPopup":"  ...","chat.header.maestroAvatar":"    ","chat.header.watchingVideo":"  ","chat.header.viewingAbove":"   ","chat.header.liveSession":" ","chat.liveSession.stop":" ","chat.liveSession.retry":"   ","chat.liveSession.start":"  ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"  ","chat.liveSession.defaultLastMessage":"!       ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":" ","chat.liveSession.defaultSuggestion3":"  ?","chat.error.sttError":"STT : {error}.   .","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":" {maxMinutes}   .","chat.error.videoMetadataError":"    .       .","chat.error.pauseVideoToAnnotate":"     ","chat.error.imageGenInterrupted":"   .","chat.error.thinkingInterrupted":"AI   .","error.noLanguagePair":" :     .","error.translationFailed":"  .    .","error.imageLimitReached":"    .     .","error.tokenLimitReached":"   .     .","error.apiKeyMissing":" Gemini API   . API        .","error.apiKeyInvalid":" Gemini API   .        .","error.apiQuotaExceeded":"  Gemini API    .    API    .      .","error.cameraPermissionDenied":"  .      .","error.cameraNotFound":"   .         .","error.cameraAccessNotSupported":"     .","error.cameraUnknown":"     .","error.cameraStreamNotAvailable":"    .","error.imageCaptureGeneric":"    .","error.visualContextVideoElementNotReady":"     .","error.snapshotVideoElementNotReady":"    .","error.visualContextCameraAccessNotSupported":"     .","error.snapshotCameraAccessNotSupported":"    .","error.visualContext2DContext":"  2D    .","error.snapshot2DContext":" 2D    .","error.visualContextCaptureFailedPermission":"  :   .","error.snapshotCaptureFailedPermission":" :   .","error.visualContextCaptureFailedNotFound":"  :   .","error.snapshotCaptureFailedNotFound":" :   .","error.visualContextCaptureFailedNotReady":"  :      . {details}","error.snapshotCaptureFailedNotReady":" :      . {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},$T={"sttLang.selectLanguage":"Spraakherkenning instellen op {language}","header.targetLanguageTitle":"Huidige doeltaal: {language}","startPage.clickToStart":"Klik op het vliegtuig","startPage.saveChats":"Alle chats opslaan","startPage.loadChats":"Chats laden","startPage.maestroAvatar":"Maestro-avatar","startPage.addMaestroAvatar":"Maestro-avatar toevoegen","startPage.loadSuccess":"{count} chatsessies succesvol geladen en vervangen!","startPage.loadError":"Fout bij laden van chats. Het bestand is mogelijk beschadigd of heeft een verkeerd formaat.","startPage.noChatsToSave":"Geen chatgeschiedenis om op te slaan.","startPage.saveError":"Fout bij opslaan van chats. Bekijk de console voor meer details.","general.clear":"Wissen","general.error":"Sorry, er is een fout opgetreden.","apiKeyGate.title":"Verbind je Gemini API-sleutel","apiKeyGate.billingTitle":"Facturering instellen voor hoger quotum","apiKeyGate.subtitle":"Deze app draait volledig op je apparaat. Je sleutel raakt onze servers nooit.","apiKeyGate.privacyPolicy":"Privacybeleid","apiKeyGate.stepsTitle":"Twee snelle stappen:","apiKeyGate.stepOne":"Open Google AI Studio en maak een API-sleutel.","apiKeyGate.stepTwo":"Plak de sleutel hieronder en tik op Opslaan.","apiKeyGate.openAiStudio":"Open Google AI Studio","apiKeyGate.viewInstructions":"Instructies bekijken","apiKeyGate.closeInstructions":"Instructies sluiten","apiKeyGate.previousInstruction":"Vorige instructie","apiKeyGate.nextInstruction":"Volgende instructie","apiKeyGate.instructionStep":"Instructie {step} van {total}","apiKeyGate.keyLabel":"Gemini API-sleutel","apiKeyGate.placeholder":"Plak hier je API-sleutel","apiKeyGate.show":"Tonen","apiKeyGate.hide":"Verbergen","apiKeyGate.currentKeySaved":"Huidige sleutel opgeslagen {maskedKey}","apiKeyGate.clearSavedKey":"Opgeslagen sleutel wissen","apiKeyGate.cancel":"Annuleren","apiKeyGate.saving":"Opslaan...","apiKeyGate.saveKey":"Sleutel opslaan","apiKeyGate.close":"Sluiten","chat.thinking":"Aan het denken...","chat.loadingHistory":"Chatgeschiedenis laden...","chat.loadingSuggestions":"Suggesties laden...","chat.suggestionsAriaLabel":"Antwoordsuggesties","chat.attachImageFromFile":"Bestand bijvoegen","chat.removeAttachedImage":"Bijgevoegd bestand verwijderen","chat.sendMessage":"Bericht verzenden","chat.messageInputAriaLabel":"Berichtinvoer","chat.retrievedFromWeb":"Opgehaald van het web:","chat.videoNotSupported":"Uw browser ondersteunt de video-tag niet.","chat.audioNotSupported":"Uw browser ondersteunt de audio-tag niet.","chat.fileAttachment":"Bestandsbijlage","chat.imageGenError":"Fout bij afbeelding genereren","chat.generatingImageLoadingSlow":"Het duurt iets langer...","chat.stopSpeaking":"Stop met spreken","chat.speakThisLine":"Spreek deze regel uit","chat.languageSelector.openGlobe":"Talen wijzigen","chat.maestroTranscriptScrollwheel":"Maestro transcript scrollweergave","chat.mic.listening":"STT actief: Luisteren...","chat.mic.enableStt":"STT inschakelen","chat.mic.disableStt":"STT stoppen","chat.mic.recordingAudioNote":"Audio opnemen...","chat.placeholder.normal.listening":"Luisteren in {language}...","chat.placeholder.normal.sttActive":"Spreek in {language} of typ...","chat.placeholder.normal.sttInactive":"Typ of tik op de microfoon om in {language} te spreken...","chat.placeholder.suggestion.listening":"Spreek {language} om te vertalen...","chat.placeholder.suggestion.sttActive":"Spreek of typ in {language} om te vertalen...","chat.placeholder.suggestion.sttInactive":"Typ in {language} om te vertalen...","chat.camera.turnOn":"Cameravoorbeeld inschakelen","chat.camera.turnOff":"Cameravoorbeeld uitschakelen","chat.camera.imageGenCameraLabel":"Afbeelding genereren","chat.camera.captureOrRecord":"Tik voor foto, houd ingedrukt voor video","chat.camera.stopRecording":"Opname stoppen","chat.bookIcon.toggleImageGen":"Afbeelding genereren modus wisselen","chat.imagePreview.alt":"Voorbeeld","chat.image.dragToEnlarge":"Sleep de hoek om te vergroten","chat.image.dragToShrink":"Sleep de hoek om te verkleinen","chat.annotateImage":"Afbeelding annoteren","chat.annotateVideoFrame":"Huidig frame annoteren","chat.annotateModal.editingPreviewAlt":"Afbeelding om te annoteren","chat.annotateModal.cancel":"Annuleren","chat.annotateModal.saveAndAttach":"Opslaan en bijvoegen","chat.annotateModal.undo":"Ongedaan maken","chat.suggestion.speak":'Zeg: "{suggestion}"',"chat.suggestion.ariaLabel":"Suggestie uitspreken: {suggestion}","chat.suggestion.toggleCreateMode":"Suggestie aanmaakmodus wisselen","chat.suggestion.createAction":"Suggestie maken","chat.suggestion.creating":"Suggestie wordt gemaakt...","chat.maestro.idle":"Maestro is inactief","chat.maestro.title.idle":"Maestro is momenteel inactief.","chat.maestro.resting":"Maestro rust...","chat.maestro.observing":"Maestro observeert...","chat.maestro.aboutToEngage":"Maestro staat op het punt in te grijpen...","chat.maestro.title.resting":"Maestro is inactief, veel tijd tot heractivering.","chat.maestro.title.observing":"Maestro observeert, enige tijd tot heractivering.","chat.maestro.title.aboutToEngage":"Maestro wordt binnenkort weer actief.","chat.maestro.typing":"Maestro typt...","chat.maestro.title.typing":"Maestro bereidt een antwoord voor.","chat.maestro.speaking":"Maestro spreekt","chat.maestro.title.speaking":"Maestro spreekt momenteel.","chat.maestro.listening":"Luisteren...","chat.maestro.title.listening":"Maestro wacht op uw invoer of stem.","chat.maestro.holding":"Maestro wacht","chat.maestro.title.holding":"Maestro wacht (heractivering gepauzeerd)","chat.bookmark.hiddenHeaderAria":"Verborgen berichten hierboven","chat.bookmark.isHere":"Bladwijzer is hier","chat.bookmark.setHere":"Bladwijzer hier instellen","chat.bookmark.actionsRegionAria":"Bladwijzeracties","chat.bookmark.actionsToggleTitle":"Bladwijzeropties","chat.bookmark.decrementAria":"En minder tonen","chat.bookmark.decrementTitle":"Minder","chat.bookmark.incrementAria":"En meer tonen","chat.bookmark.incrementTitle":"Meer","chat.bookmark.hiddenBelowHeaderAria":"Verborgen berichten hieronder","chat.sendPrep.optimizingVideo":"Video optimaliseren...","chat.sendPrep.optimizingImage":"Afbeelding optimaliseren...","chat.sendPrep.preparingMedia":"Media voorbereiden...","chat.sendPrep.uploadingMedia":"Media uploaden...","chat.sendPrep.finalizing":"Afronden...","chat.header.annotating":"Annoteren","chat.header.recordingAudio":"Audio opnemen","chat.header.recordingVideo":"Video opnemen","chat.header.savePopup":"Opslaan...","chat.header.loadPopup":"Laden...","chat.header.maestroAvatar":"Maestro-avatar bijwerken","chat.header.watchingVideo":"Video bekijken","chat.header.viewingAbove":"Vorige berichten bekijken","chat.header.liveSession":"Live sessie","chat.liveSession.stop":"Live stoppen","chat.liveSession.retry":"Live opnieuw proberen","chat.liveSession.start":"Live starten","chat.liveSession.liveBadge":"Live","chat.liveSession.connecting":"Verbinden","chat.liveSession.defaultLastMessage":"Hallo! Hoe kan ik je vandaag helpen?","chat.liveSession.defaultSuggestion1":"Hallo","chat.liveSession.defaultSuggestion2":"Goedemorgen","chat.liveSession.defaultSuggestion3":"Hoe gaat het?","chat.error.sttError":"STT-fout: {error}. Probeer de microfoon te wisselen.","chat.error.autoCaptureCameraError":"Automatische camera-opname fout: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Opname automatisch gestopt na {maxMinutes} minuten.","chat.error.videoMetadataError":"Kon video-metadata niet lezen. Het bestand is mogelijk beschadigd of in een niet-ondersteund formaat.","chat.error.pauseVideoToAnnotate":"Pauzeer de video om het huidige frame te annoteren","chat.error.imageGenInterrupted":"Het genereren van de afbeelding werd onderbroken.","chat.error.thinkingInterrupted":"Het AI-antwoord werd onderbroken.","error.noLanguagePair":"Kritieke fout: Geen taalpaar geselecteerd.","error.translationFailed":"Vertaling mislukt. Probeer het opnieuw.","error.imageLimitReached":"Sessielimiet voor afbeelding genereren bereikt. Start een nieuwe sessie.","error.tokenLimitReached":"Sessietokenlimiet bereikt. Start een nieuwe sessie.","error.apiKeyMissing":"Je Gemini API-sleutel ontbreekt. Open het API-sleutelscherm en plak je sleutel.","error.apiKeyInvalid":"Je Gemini API-sleutel is ongeldig. Controleer op typefouten en plak een geldige sleutel.","error.apiQuotaExceeded":"Je gratis Gemini API-quotum voor chat is opgebruikt. Ik heb het API-sleutelscherm geopend met factureringsstappen. Ondertussen kun je nog steeds Live-conversatie gebruiken.","error.cameraPermissionDenied":"Cameratoestemming geweigerd. Schakel cameratoegang in via browserinstellingen.","error.cameraNotFound":"Geselecteerde camera niet gevonden. Zorg dat deze is aangesloten of selecteer een andere camera.","error.cameraAccessNotSupported":"Cameratoegang wordt niet ondersteund door uw browser.","error.cameraUnknown":"Er is een onbekende fout opgetreden bij het openen van de camera.","error.cameraStreamNotAvailable":"Camerastream niet beschikbaar voor opname.","error.imageCaptureGeneric":"Onbekende fout bij het vastleggen van afbeelding.","error.visualContextVideoElementNotReady":"Visuele context video-element niet gereed.","error.snapshotVideoElementNotReady":"Snapshot video-element niet gereed.","error.visualContextCameraAccessNotSupported":"Cameratoegang niet ondersteund voor visuele context.","error.snapshotCameraAccessNotSupported":"Cameratoegang niet ondersteund voor snapshot.","error.visualContext2DContext":"Kon 2D-context voor visuele context niet verkrijgen.","error.snapshot2DContext":"Kon 2D-context voor snapshot niet verkrijgen.","error.visualContextCaptureFailedPermission":"Visuele context mislukt: Cameratoestemming geweigerd.","error.snapshotCaptureFailedPermission":"Snapshot mislukt: Cameratoestemming geweigerd.","error.visualContextCaptureFailedNotFound":"Visuele context mislukt: Camera niet gevonden.","error.snapshotCaptureFailedNotFound":"Snapshot mislukt: Camera niet gevonden.","error.visualContextCaptureFailedNotReady":"Visuele context mislukt: Camera niet gereed of probleem met feed. {details}","error.snapshotCaptureFailedNotReady":"Snapshot mislukt: Camera niet gereed of probleem met feed. {details}","error.visualContextCaptureFailedGeneric":"Visuele context mislukt: {details}","error.snapshotCaptureFailedGeneric":"Snapshot mislukt: {details}"},ew={"sttLang.selectLanguage":"Ustaw rozpoznawanie mowy na {language}","header.targetLanguageTitle":"Aktualny jzyk docelowy: {language}","startPage.clickToStart":"Kliknij samolot","startPage.saveChats":"Zapisz wszystkie czaty","startPage.loadChats":"Wczytaj czaty","startPage.maestroAvatar":"Awatar Maestro","startPage.addMaestroAvatar":"Dodaj awatar Maestro","startPage.loadSuccess":"{count} sesji czatu pomylnie wczytano i zastpiono!","startPage.loadError":"Bd wczytywania czatw. Plik moe by uszkodzony lub w nieprawidowym formacie.","startPage.noChatsToSave":"Brak historii czatw do zapisania.","startPage.saveError":"Bd zapisywania czatw. Sprawd konsol, aby uzyska wicej szczegw.","general.clear":"Wyczy","general.error":"Przepraszam, wystpi bd.","apiKeyGate.title":"Podcz klucz API Gemini","apiKeyGate.billingTitle":"Skonfiguruj rozliczenia dla wyszego limitu","apiKeyGate.subtitle":"Ta aplikacja dziaa w caoci na Twoim urzdzeniu. Twj klucz nigdy nie trafia na nasze serwery.","apiKeyGate.privacyPolicy":"Polityka prywatnoci","apiKeyGate.stepsTitle":"Dwa szybkie kroki:","apiKeyGate.stepOne":"Otwrz Google AI Studio i utwrz klucz API.","apiKeyGate.stepTwo":"Wklej klucz poniej i stuknij Zapisz.","apiKeyGate.openAiStudio":"Otwrz Google AI Studio","apiKeyGate.viewInstructions":"Wywietl instrukcje","apiKeyGate.closeInstructions":"Zamknij instrukcje","apiKeyGate.previousInstruction":"Poprzednia instrukcja","apiKeyGate.nextInstruction":"Nastpna instrukcja","apiKeyGate.instructionStep":"Instrukcja {step} z {total}","apiKeyGate.keyLabel":"Klucz API Gemini","apiKeyGate.placeholder":"Wklej tutaj swj klucz API","apiKeyGate.show":"Poka","apiKeyGate.hide":"Ukryj","apiKeyGate.currentKeySaved":"Biecy klucz zapisany {maskedKey}","apiKeyGate.clearSavedKey":"Wyczy zapisany klucz","apiKeyGate.cancel":"Anuluj","apiKeyGate.saving":"Zapisywanie...","apiKeyGate.saveKey":"Zapisz klucz","apiKeyGate.close":"Zamknij","chat.thinking":"Myl...","chat.loadingHistory":"Wczytywanie historii czatu...","chat.loadingSuggestions":"Wczytywanie sugestii...","chat.suggestionsAriaLabel":"Sugestie odpowiedzi","chat.attachImageFromFile":"Zacz plik","chat.removeAttachedImage":"Usu zaczony plik","chat.sendMessage":"Wylij wiadomo","chat.messageInputAriaLabel":"Pole wiadomoci","chat.retrievedFromWeb":"Pobrane z sieci:","chat.videoNotSupported":"Twoja przegldarka nie obsuguje tagu wideo.","chat.audioNotSupported":"Twoja przegldarka nie obsuguje tagu audio.","chat.fileAttachment":"Zacznik","chat.imageGenError":"Bd generowania obrazu","chat.generatingImageLoadingSlow":"To trwa troch duej...","chat.stopSpeaking":"Przesta mwi","chat.speakThisLine":"Wypowiedz t lini","chat.languageSelector.openGlobe":"Zmie jzyki","chat.maestroTranscriptScrollwheel":"Widok przewijania transkrypcji Maestro","chat.mic.listening":"STT aktywne: Sucham...","chat.mic.enableStt":"Wcz STT","chat.mic.disableStt":"Zatrzymaj STT","chat.mic.recordingAudioNote":"Nagrywanie dwiku...","chat.placeholder.normal.listening":"Sucham w {language}...","chat.placeholder.normal.sttActive":"Mw po {language} lub pisz...","chat.placeholder.normal.sttInactive":"Pisz lub dotknij mikrofonu, aby mwi po {language}...","chat.placeholder.suggestion.listening":"Mw po {language}, aby przetumaczy...","chat.placeholder.suggestion.sttActive":"Mw lub pisz po {language}, aby przetumaczy...","chat.placeholder.suggestion.sttInactive":"Pisz po {language}, aby przetumaczy...","chat.camera.turnOn":"Wcz podgld kamery","chat.camera.turnOff":"Wycz podgld kamery","chat.camera.imageGenCameraLabel":"Generowanie obrazu","chat.camera.captureOrRecord":"Dotknij, aby zrobi zdjcie, przytrzymaj, aby nagra wideo","chat.camera.stopRecording":"Zatrzymaj nagrywanie","chat.bookIcon.toggleImageGen":"Przecz tryb generowania obrazu","chat.imagePreview.alt":"Podgld","chat.image.dragToEnlarge":"Przecignij rg, aby powikszy","chat.image.dragToShrink":"Przecignij rg, aby zmniejszy","chat.annotateImage":"Dodaj adnotacj do obrazu","chat.annotateVideoFrame":"Dodaj adnotacj do biecej klatki","chat.annotateModal.editingPreviewAlt":"Obraz do adnotacji","chat.annotateModal.cancel":"Anuluj","chat.annotateModal.saveAndAttach":"Zapisz i zacz","chat.annotateModal.undo":"Cofnij","chat.suggestion.speak":'Powiedz: "{suggestion}"',"chat.suggestion.ariaLabel":"Wypowiedz sugesti: {suggestion}","chat.suggestion.toggleCreateMode":"Przecz tryb tworzenia sugestii","chat.suggestion.createAction":"Utwrz sugesti","chat.suggestion.creating":"Tworzenie sugestii...","chat.maestro.idle":"Maestro jest bezczynny","chat.maestro.title.idle":"Maestro jest obecnie bezczynny.","chat.maestro.resting":"Maestro odpoczywa...","chat.maestro.observing":"Maestro obserwuje...","chat.maestro.aboutToEngage":"Maestro za chwil si wczy...","chat.maestro.title.resting":"Maestro jest bezczynny, duo czasu do ponownego wczenia.","chat.maestro.title.observing":"Maestro obserwuje, troch czasu do ponownego wczenia.","chat.maestro.title.aboutToEngage":"Maestro wkrtce si ponownie wczy.","chat.maestro.typing":"Maestro pisze...","chat.maestro.title.typing":"Maestro przygotowuje odpowied.","chat.maestro.speaking":"Maestro mwi","chat.maestro.title.speaking":"Maestro obecnie mwi.","chat.maestro.listening":"Sucham...","chat.maestro.title.listening":"Maestro czeka na twj wpis lub gos.","chat.maestro.holding":"Maestro czeka","chat.maestro.title.holding":"Maestro czeka (ponowne wczenie wstrzymane)","chat.bookmark.hiddenHeaderAria":"Ukryte wiadomoci powyej","chat.bookmark.isHere":"Zakadka jest tutaj","chat.bookmark.setHere":"Ustaw zakadk tutaj","chat.bookmark.actionsRegionAria":"Akcje zakadki","chat.bookmark.actionsToggleTitle":"Opcje zakadki","chat.bookmark.decrementAria":"Poka o jeden mniej","chat.bookmark.decrementTitle":"Mniej","chat.bookmark.incrementAria":"Poka o jeden wicej","chat.bookmark.incrementTitle":"Wicej","chat.bookmark.hiddenBelowHeaderAria":"Ukryte wiadomoci poniej","chat.sendPrep.optimizingVideo":"Optymalizacja wideo...","chat.sendPrep.optimizingImage":"Optymalizacja obrazu...","chat.sendPrep.preparingMedia":"Przygotowywanie mediw...","chat.sendPrep.uploadingMedia":"Przesyanie mediw...","chat.sendPrep.finalizing":"Finalizowanie...","chat.header.annotating":"Dodawanie adnotacji","chat.header.recordingAudio":"Nagrywanie dwiku","chat.header.recordingVideo":"Nagrywanie wideo","chat.header.savePopup":"Zapisywanie...","chat.header.loadPopup":"Wczytywanie...","chat.header.maestroAvatar":"Aktualizowanie awatara Maestro","chat.header.watchingVideo":"Ogldanie wideo","chat.header.viewingAbove":"Przegldanie poprzednich wiadomoci","chat.header.liveSession":"Sesja na ywo","chat.liveSession.stop":"Zatrzymaj na ywo","chat.liveSession.retry":"Ponw na ywo","chat.liveSession.start":"Rozpocznij na ywo","chat.liveSession.liveBadge":"Na ywo","chat.liveSession.connecting":"czenie","chat.liveSession.defaultLastMessage":"Cze! Jak mog Ci dzisiaj pomc?","chat.liveSession.defaultSuggestion1":"Cze","chat.liveSession.defaultSuggestion2":"Dzie dobry","chat.liveSession.defaultSuggestion3":"Jak si masz?","chat.error.sttError":"Bd STT: {error}. Sprbuj przeczy mikrofon.","chat.error.autoCaptureCameraError":"Bd automatycznego przechwytywania kamery: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Nagrywanie zatrzymane automatycznie po {maxMinutes} minutach.","chat.error.videoMetadataError":"Nie mona odczyta metadanych wideo. Plik moe by uszkodzony lub w nieobsugiwanym formacie.","chat.error.pauseVideoToAnnotate":"Wstrzymaj wideo, aby doda adnotacj do biecej klatki","chat.error.imageGenInterrupted":"Generowanie obrazu zostao przerwane.","chat.error.thinkingInterrupted":"Odpowied AI zostaa przerwana.","error.noLanguagePair":"Bd krytyczny: Nie wybrano pary jzykw.","error.translationFailed":"Tumaczenie nie powiodo si. Sprbuj ponownie.","error.imageLimitReached":"Osignito limit generowania obrazw sesji. Rozpocznij now sesj.","error.tokenLimitReached":"Osignito limit tokenw sesji. Rozpocznij now sesj.","error.apiKeyMissing":"Brak klucza API Gemini. Otwrz ekran klucza API i wklej swj klucz.","error.apiKeyInvalid":"Klucz API Gemini jest nieprawidowy. Sprawd, czy nie ma literwek i wklej prawidowy klucz.","error.apiQuotaExceeded":"Twj bezpatny limit Gemini API na czat zosta wyczerpany. Otworzyem ekran klucza API z krokami rozliczeniowymi. W midzyczasie nadal moesz korzysta z rozmowy na ywo.","error.cameraPermissionDenied":"Odmwiono dostpu do kamery. Wcz dostp do kamery w ustawieniach przegldarki.","error.cameraNotFound":"Nie znaleziono wybranej kamery. Upewnij si, e jest podczona lub wybierz inn kamer.","error.cameraAccessNotSupported":"Dostp do kamery nie jest obsugiwany przez twoj przegldark.","error.cameraUnknown":"Wystpi nieznany bd podczas dostpu do kamery.","error.cameraStreamNotAvailable":"Strumie kamery niedostpny do przechwycenia.","error.imageCaptureGeneric":"Nieznany bd podczas przechwytywania obrazu.","error.visualContextVideoElementNotReady":"Element wideo kontekstu wizualnego nie jest gotowy.","error.snapshotVideoElementNotReady":"Element wideo zrzutu ekranu nie jest gotowy.","error.visualContextCameraAccessNotSupported":"Dostp do kamery nieobsugiwany dla kontekstu wizualnego.","error.snapshotCameraAccessNotSupported":"Dostp do kamery nieobsugiwany dla zrzutu ekranu.","error.visualContext2DContext":"Nie mona uzyska kontekstu 2D dla kontekstu wizualnego.","error.snapshot2DContext":"Nie mona uzyska kontekstu 2D dla zrzutu ekranu.","error.visualContextCaptureFailedPermission":"Kontekst wizualny nie powid si: Odmwiono dostpu do kamery.","error.snapshotCaptureFailedPermission":"Zrzut ekranu nie powid si: Odmwiono dostpu do kamery.","error.visualContextCaptureFailedNotFound":"Kontekst wizualny nie powid si: Nie znaleziono kamery.","error.snapshotCaptureFailedNotFound":"Zrzut ekranu nie powid si: Nie znaleziono kamery.","error.visualContextCaptureFailedNotReady":"Kontekst wizualny nie powid si: Kamera nie jest gotowa lub problem ze strumieniem. {details}","error.snapshotCaptureFailedNotReady":"Zrzut ekranu nie powid si: Kamera nie jest gotowa lub problem ze strumieniem. {details}","error.visualContextCaptureFailedGeneric":"Kontekst wizualny nie powid si: {details}","error.snapshotCaptureFailedGeneric":"Zrzut ekranu nie powid si: {details}"},tw={"sttLang.selectLanguage":"Definir reconhecimento de voz para {language}","header.targetLanguageTitle":"Idioma de destino atual: {language}","startPage.clickToStart":"Clique no avio","startPage.saveChats":"Salvar todos os chats","startPage.loadChats":"Carregar chats","startPage.maestroAvatar":"Avatar do Maestro","startPage.addMaestroAvatar":"Adicionar avatar do Maestro","startPage.loadSuccess":"{count} sesses de chat carregadas e substitudas com sucesso!","startPage.loadError":"Erro ao carregar chats. O arquivo pode estar corrompido ou em formato errado.","startPage.noChatsToSave":"No h histrico de chat para salvar.","startPage.saveError":"Erro ao salvar chats. Verifique o console para mais detalhes.","general.clear":"Limpar","general.error":"Desculpe, encontrei um erro.","apiKeyGate.title":"Conecte sua chave API do Gemini","apiKeyGate.billingTitle":"Configurar faturamento para cota maior","apiKeyGate.subtitle":"Este app roda totalmente no seu dispositivo. Sua chave nunca passa pelos nossos servidores.","apiKeyGate.privacyPolicy":"Poltica de Privacidade","apiKeyGate.stepsTitle":"Dois passos rpidos:","apiKeyGate.stepOne":"Abra o Google AI Studio e crie uma chave API.","apiKeyGate.stepTwo":"Cole a chave abaixo e toque em Salvar.","apiKeyGate.openAiStudio":"Abrir Google AI Studio","apiKeyGate.viewInstructions":"Ver instrues","apiKeyGate.closeInstructions":"Fechar instrues","apiKeyGate.previousInstruction":"Instruo anterior","apiKeyGate.nextInstruction":"Prxima instruo","apiKeyGate.instructionStep":"Instruo {step} de {total}","apiKeyGate.keyLabel":"Chave API do Gemini","apiKeyGate.placeholder":"Cole sua chave API aqui","apiKeyGate.show":"Mostrar","apiKeyGate.hide":"Ocultar","apiKeyGate.currentKeySaved":"Chave atual salva {maskedKey}","apiKeyGate.clearSavedKey":"Limpar chave salva","apiKeyGate.cancel":"Cancelar","apiKeyGate.saving":"Salvando...","apiKeyGate.saveKey":"Salvar chave","apiKeyGate.close":"Fechar","chat.thinking":"Pensando...","chat.loadingHistory":"Carregando histrico do chat...","chat.loadingSuggestions":"Carregando sugestes...","chat.suggestionsAriaLabel":"Sugestes de resposta","chat.attachImageFromFile":"Anexar arquivo","chat.removeAttachedImage":"Remover arquivo anexado","chat.sendMessage":"Enviar mensagem","chat.messageInputAriaLabel":"Entrada de mensagem","chat.retrievedFromWeb":"Recuperado da web:","chat.videoNotSupported":"Seu navegador no suporta a tag de vdeo.","chat.audioNotSupported":"Seu navegador no suporta a tag de udio.","chat.fileAttachment":"Anexo de arquivo","chat.imageGenError":"Erro na gerao de imagem","chat.generatingImageLoadingSlow":"Demorando um pouco mais...","chat.stopSpeaking":"Parar de falar","chat.speakThisLine":"Falar esta linha","chat.languageSelector.openGlobe":"Alterar idiomas","chat.maestroTranscriptScrollwheel":"Vista de rolagem da transcrio do Maestro","chat.mic.listening":"STT ativo: Ouvindo...","chat.mic.enableStt":"Ativar STT","chat.mic.disableStt":"Parar STT","chat.mic.recordingAudioNote":"Gravando udio...","chat.placeholder.normal.listening":"Ouvindo em {language}...","chat.placeholder.normal.sttActive":"Fale em {language} ou digite...","chat.placeholder.normal.sttInactive":"Digite ou toque no microfone para falar em {language}...","chat.placeholder.suggestion.listening":"Fale {language} para traduzir...","chat.placeholder.suggestion.sttActive":"Fale ou digite em {language} para traduzir...","chat.placeholder.suggestion.sttInactive":"Digite em {language} para traduzir...","chat.camera.turnOn":"Ativar visualizao da cmera","chat.camera.turnOff":"Desativar visualizao da cmera","chat.camera.imageGenCameraLabel":"Gerao de imagem","chat.camera.captureOrRecord":"Toque para foto, segure para vdeo","chat.camera.stopRecording":"Parar gravao","chat.bookIcon.toggleImageGen":"Alternar modo de gerao de imagem","chat.imagePreview.alt":"Visualizao","chat.image.dragToEnlarge":"Arraste o canto para ampliar","chat.image.dragToShrink":"Arraste o canto para reduzir","chat.annotateImage":"Anotar imagem","chat.annotateVideoFrame":"Anotar quadro atual","chat.annotateModal.editingPreviewAlt":"Imagem a ser anotada","chat.annotateModal.cancel":"Cancelar","chat.annotateModal.saveAndAttach":"Salvar e anexar","chat.annotateModal.undo":"Desfazer","chat.suggestion.speak":'Falar: "{suggestion}"',"chat.suggestion.ariaLabel":"Falar sugesto: {suggestion}","chat.suggestion.toggleCreateMode":"Alternar modo de criao de sugesto","chat.suggestion.createAction":"Criar sugesto","chat.suggestion.creating":"Criando sugesto...","chat.maestro.idle":"Maestro est inativo","chat.maestro.title.idle":"Maestro est atualmente inativo.","chat.maestro.resting":"Maestro est descansando...","chat.maestro.observing":"Maestro est observando...","chat.maestro.aboutToEngage":"Maestro est prestes a interagir...","chat.maestro.title.resting":"Maestro est inativo, muito tempo antes da reativao.","chat.maestro.title.observing":"Maestro est observando, algum tempo antes da reativao.","chat.maestro.title.aboutToEngage":"Maestro est prestes a se reativar em breve.","chat.maestro.typing":"Maestro est digitando...","chat.maestro.title.typing":"Maestro est preparando uma resposta.","chat.maestro.speaking":"Maestro est falando","chat.maestro.title.speaking":"Maestro est falando agora.","chat.maestro.listening":"Ouvindo...","chat.maestro.title.listening":"Maestro est aguardando sua entrada ou voz.","chat.maestro.holding":"Maestro est aguardando","chat.maestro.title.holding":"Maestro est aguardando (reativao pausada)","chat.bookmark.hiddenHeaderAria":"Mensagens ocultas acima","chat.bookmark.isHere":"O marcador est aqui","chat.bookmark.setHere":"Definir marcador aqui","chat.bookmark.actionsRegionAria":"Aes do marcador","chat.bookmark.actionsToggleTitle":"Opes do marcador","chat.bookmark.decrementAria":"Mostrar um a menos","chat.bookmark.decrementTitle":"Menos","chat.bookmark.incrementAria":"Mostrar um a mais","chat.bookmark.incrementTitle":"Mais","chat.bookmark.hiddenBelowHeaderAria":"Mensagens ocultas abaixo","chat.sendPrep.optimizingVideo":"Otimizando vdeo...","chat.sendPrep.optimizingImage":"Otimizando imagem...","chat.sendPrep.preparingMedia":"Preparando mdia...","chat.sendPrep.uploadingMedia":"Enviando mdia...","chat.sendPrep.finalizing":"Finalizando...","chat.header.annotating":"Anotando","chat.header.recordingAudio":"Gravando udio","chat.header.recordingVideo":"Gravando vdeo","chat.header.savePopup":"Salvando...","chat.header.loadPopup":"Carregando...","chat.header.maestroAvatar":"Atualizando avatar do Maestro","chat.header.watchingVideo":"Assistindo vdeo","chat.header.viewingAbove":"Visualizando mensagens anteriores","chat.header.liveSession":"Sesso ao vivo","chat.liveSession.stop":"Parar ao vivo","chat.liveSession.retry":"Tentar novamente ao vivo","chat.liveSession.start":"Iniciar ao vivo","chat.liveSession.liveBadge":"Ao vivo","chat.liveSession.connecting":"Conectando","chat.liveSession.defaultLastMessage":"Ol! Como posso ajudar voc hoje?","chat.liveSession.defaultSuggestion1":"Ol","chat.liveSession.defaultSuggestion2":"Bom dia","chat.liveSession.defaultSuggestion3":"Como voc est?","chat.error.sttError":"Erro STT: {error}. Tente alternar o microfone.","chat.error.autoCaptureCameraError":"Erro de captura automtica da cmera: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Gravao parada automaticamente aps {maxMinutes} minutos.","chat.error.videoMetadataError":"No foi possvel ler os metadados do vdeo. O arquivo pode estar corrompido ou em formato no suportado.","chat.error.pauseVideoToAnnotate":"Pause o vdeo para anotar o quadro atual","chat.error.imageGenInterrupted":"A gerao de imagem foi interrompida.","chat.error.thinkingInterrupted":"A resposta da IA foi interrompida.","error.noLanguagePair":"Erro crtico: Nenhum par de idiomas selecionado.","error.translationFailed":"Traduo falhou. Por favor, tente novamente.","error.imageLimitReached":"Limite de gerao de imagens da sesso atingido. Por favor, inicie uma nova sesso.","error.tokenLimitReached":"Limite de tokens da sesso atingido. Por favor, inicie uma nova sesso.","error.apiKeyMissing":"Sua chave API do Gemini est faltando. Abra a tela de chave API e cole sua chave.","error.apiKeyInvalid":"Sua chave API do Gemini  invlida. Verifique se h erros de digitao e cole uma chave vlida.","error.apiQuotaExceeded":"Sua cota gratuita da API Gemini para chat esgotou. Abra a tela de chave API com passos de faturamento. Enquanto isso, voc ainda pode usar a conversa ao vivo.","error.cameraPermissionDenied":"Permisso da cmera negada. Por favor, habilite o acesso  cmera nas configuraes do navegador.","error.cameraNotFound":"Cmera selecionada no encontrada. Certifique-se de que est conectada ou selecione uma cmera diferente.","error.cameraAccessNotSupported":"O acesso  cmera no  suportado pelo seu navegador.","error.cameraUnknown":"Ocorreu um erro desconhecido ao acessar a cmera.","error.cameraStreamNotAvailable":"Stream da cmera no disponvel para captura.","error.imageCaptureGeneric":"Erro desconhecido durante a captura de imagem.","error.visualContextVideoElementNotReady":"Elemento de vdeo do contexto visual no est pronto.","error.snapshotVideoElementNotReady":"Elemento de vdeo para captura no est pronto.","error.visualContextCameraAccessNotSupported":"Acesso  cmera no suportado para contexto visual.","error.snapshotCameraAccessNotSupported":"Acesso  cmera no suportado para captura.","error.visualContext2DContext":"No foi possvel obter contexto 2D para contexto visual.","error.snapshot2DContext":"No foi possvel obter contexto 2D para captura.","error.visualContextCaptureFailedPermission":"Contexto visual falhou: Permisso da cmera negada.","error.snapshotCaptureFailedPermission":"Captura falhou: Permisso da cmera negada.","error.visualContextCaptureFailedNotFound":"Contexto visual falhou: Cmera no encontrada.","error.snapshotCaptureFailedNotFound":"Captura falhou: Cmera no encontrada.","error.visualContextCaptureFailedNotReady":"Contexto visual falhou: Cmera no pronta ou problema com o stream. {details}","error.snapshotCaptureFailedNotReady":"Captura falhou: Cmera no pronta ou problema com o stream. {details}","error.visualContextCaptureFailedGeneric":"Contexto visual falhou: {details}","error.snapshotCaptureFailedGeneric":"Captura falhou: {details}"},nw={"sttLang.selectLanguage":"    {language}","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"  ","startPage.saveChats":"  ","startPage.loadChats":" ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"    {count}  !","startPage.loadError":"  .        .","startPage.noChatsToSave":"    .","startPage.saveError":"  .    .","general.clear":"","general.error":",  .","apiKeyGate.title":"  API Gemini","apiKeyGate.billingTitle":"    ","apiKeyGate.subtitle":"      .        .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":" Google AI Studio    API.","apiKeyGate.stepTwo":"     .","apiKeyGate.openAiStudio":" Google AI Studio","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":" ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {step}  {total}","apiKeyGate.keyLabel":" API Gemini","apiKeyGate.placeholder":"  API ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"   {maskedKey}","apiKeyGate.clearSavedKey":"  ","apiKeyGate.cancel":"","apiKeyGate.saving":"...","apiKeyGate.saveKey":" ","apiKeyGate.close":"","chat.thinking":"...","chat.loadingHistory":"  ...","chat.loadingSuggestions":" ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":"  :","chat.videoNotSupported":"     video.","chat.audioNotSupported":"     audio.","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"   ...","chat.stopSpeaking":" ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"  ","chat.mic.listening":"STT : ...","chat.mic.enableStt":" STT","chat.mic.disableStt":" STT","chat.mic.recordingAudioNote":" ...","chat.placeholder.normal.listening":"  {language}...","chat.placeholder.normal.sttActive":"  {language}  ...","chat.placeholder.normal.sttInactive":"    ,    {language}...","chat.placeholder.suggestion.listening":"  {language}  ...","chat.placeholder.suggestion.sttActive":"    {language}  ...","chat.placeholder.suggestion.sttInactive":"  {language}  ...","chat.camera.turnOn":"  ","chat.camera.turnOff":"  ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"  ,   ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"   ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"  ,  ","chat.image.dragToShrink":"  ,  ","chat.annotateImage":" ","chat.annotateVideoFrame":"  ","chat.annotateModal.editingPreviewAlt":"  ","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":"  ","chat.annotateModal.undo":"","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"   ","chat.suggestion.createAction":" ","chat.suggestion.creating":" ...","chat.maestro.idle":" ","chat.maestro.title.idle":"    .","chat.maestro.resting":" ...","chat.maestro.observing":" ...","chat.maestro.aboutToEngage":"  ...","chat.maestro.title.resting":" ,     .","chat.maestro.title.observing":" ,     .","chat.maestro.title.aboutToEngage":"   .","chat.maestro.typing":" ...","chat.maestro.title.typing":"  .","chat.maestro.speaking":" ","chat.maestro.title.speaking":"  .","chat.maestro.listening":"...","chat.maestro.title.listening":"     .","chat.maestro.holding":" ","chat.maestro.title.holding":"  (  )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":" ","chat.bookmark.setHere":"  ","chat.bookmark.actionsRegionAria":"  ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"   ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"   ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":" ...","chat.sendPrep.optimizingImage":" ...","chat.sendPrep.preparingMedia":" ...","chat.sendPrep.uploadingMedia":" ...","chat.sendPrep.finalizing":"...","chat.header.annotating":"","chat.header.recordingAudio":" ","chat.header.recordingVideo":" ","chat.header.savePopup":"...","chat.header.loadPopup":"...","chat.header.maestroAvatar":"  ","chat.header.watchingVideo":" ","chat.header.viewingAbove":"  ","chat.header.liveSession":" ","chat.liveSession.stop":" ","chat.liveSession.retry":" ","chat.liveSession.start":" ","chat.liveSession.liveBadge":" ","chat.liveSession.connecting":"","chat.liveSession.defaultLastMessage":"!      ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":" ","chat.liveSession.defaultSuggestion3":" ?","chat.error.sttError":" STT: {error}.   .","chat.error.autoCaptureCameraError":"  : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"    {maxMinutes} .","chat.error.videoMetadataError":"    .        .","chat.error.pauseVideoToAnnotate":"   ,    ","chat.error.imageGenInterrupted":"   .","chat.error.thinkingInterrupted":"   .","error.noLanguagePair":" :    .","error.translationFailed":"  . ,  .","error.imageLimitReached":"    . ,   .","error.tokenLimitReached":"   . ,   .","error.apiKeyMissing":"  API Gemini .    API    .","error.apiKeyInvalid":"  API Gemini .        .","error.apiQuotaExceeded":"   Gemini API   .     API    .           .","error.cameraPermissionDenied":"   . ,       .","error.cameraNotFound":"   . ,   ,    .","error.cameraAccessNotSupported":"      .","error.cameraUnknown":"      .","error.cameraStreamNotAvailable":"    .","error.imageCaptureGeneric":"    .","error.visualContextVideoElementNotReady":"    .","error.snapshotVideoElementNotReady":"    .","error.visualContextCameraAccessNotSupported":"       .","error.snapshotCameraAccessNotSupported":"      .","error.visualContext2DContext":"   2D    .","error.snapshot2DContext":"   2D   .","error.visualContextCaptureFailedPermission":"   :    .","error.snapshotCaptureFailedPermission":"  :    .","error.visualContextCaptureFailedNotFound":"   :   .","error.snapshotCaptureFailedNotFound":"  :   .","error.visualContextCaptureFailedNotReady":"   :       . {details}","error.snapshotCaptureFailedNotReady":"  :       . {details}","error.visualContextCaptureFailedGeneric":"   : {details}","error.snapshotCaptureFailedGeneric":"  : {details}"},aw={"sttLang.selectLanguage":"Stll in taligenknning till {language}","header.targetLanguageTitle":"Nuvarande mlsprk: {language}","startPage.clickToStart":"Klicka p flygplanet","startPage.saveChats":"Spara alla chattar","startPage.loadChats":"Ladda chattar","startPage.maestroAvatar":"Maestro-avatar","startPage.addMaestroAvatar":"Lgg till Maestro-avatar","startPage.loadSuccess":"{count} chattsessioner laddades och ersattes framgngsrikt!","startPage.loadError":"Fel vid laddning av chattar. Filen kan vara skadad eller i fel format.","startPage.noChatsToSave":"Ingen chatthistorik att spara.","startPage.saveError":"Fel vid sparning av chattar. Se konsolen fr mer detaljer.","general.clear":"Rensa","general.error":"Tyvrr, ett fel uppstod.","apiKeyGate.title":"Anslut din Gemini API-nyckel","apiKeyGate.billingTitle":"Stll in fakturering fr hgre kvot","apiKeyGate.subtitle":"Den hr appen krs helt p din enhet. Din nyckel nr aldrig vra servrar.","apiKeyGate.privacyPolicy":"Integritetspolicy","apiKeyGate.stepsTitle":"Tv snabba steg:","apiKeyGate.stepOne":"ppna Google AI Studio och skapa en API-nyckel.","apiKeyGate.stepTwo":"Klistra in nyckeln nedan och tryck p Spara.","apiKeyGate.openAiStudio":"ppna Google AI Studio","apiKeyGate.viewInstructions":"Visa instruktioner","apiKeyGate.closeInstructions":"Stng instruktioner","apiKeyGate.previousInstruction":"Fregende instruktion","apiKeyGate.nextInstruction":"Nsta instruktion","apiKeyGate.instructionStep":"Instruktion {step} av {total}","apiKeyGate.keyLabel":"Gemini API-nyckel","apiKeyGate.placeholder":"Klistra in din API-nyckel hr","apiKeyGate.show":"Visa","apiKeyGate.hide":"Dlj","apiKeyGate.currentKeySaved":"Aktuell nyckel sparad {maskedKey}","apiKeyGate.clearSavedKey":"Rensa sparad nyckel","apiKeyGate.cancel":"Avbryt","apiKeyGate.saving":"Sparar...","apiKeyGate.saveKey":"Spara nyckel","apiKeyGate.close":"Stng","chat.thinking":"Tnker...","chat.loadingHistory":"Laddar chatthistorik...","chat.loadingSuggestions":"Laddar frslag...","chat.suggestionsAriaLabel":"Svarsfrslag","chat.attachImageFromFile":"Bifoga fil","chat.removeAttachedImage":"Ta bort bifogad fil","chat.sendMessage":"Skicka meddelande","chat.messageInputAriaLabel":"Meddelandeinmatning","chat.retrievedFromWeb":"Hmtat frn webben:","chat.videoNotSupported":"Din webblsare stder inte videotaggen.","chat.audioNotSupported":"Din webblsare stder inte ljudtaggen.","chat.fileAttachment":"Filbilaga","chat.imageGenError":"Fel vid bildgenerering","chat.generatingImageLoadingSlow":"Det tar lite lngre tid...","chat.stopSpeaking":"Sluta prata","chat.speakThisLine":"Ls upp denna rad","chat.languageSelector.openGlobe":"Byt sprk","chat.maestroTranscriptScrollwheel":"Maestro-transkription rullningsvy","chat.mic.listening":"STT aktiv: Lyssnar...","chat.mic.enableStt":"Aktivera STT","chat.mic.disableStt":"Stoppa STT","chat.mic.recordingAudioNote":"Spelar in ljud...","chat.placeholder.normal.listening":"Lyssnar p {language}...","chat.placeholder.normal.sttActive":"Tala p {language} eller skriv...","chat.placeholder.normal.sttInactive":"Skriv eller tryck p mikrofonen fr att tala p {language}...","chat.placeholder.suggestion.listening":"Tala {language} fr att verstta...","chat.placeholder.suggestion.sttActive":"Tala eller skriv p {language} fr att verstta...","chat.placeholder.suggestion.sttInactive":"Skriv p {language} fr att verstta...","chat.camera.turnOn":"Aktivera kamerafrhandsgranskning","chat.camera.turnOff":"Inaktivera kamerafrhandsgranskning","chat.camera.imageGenCameraLabel":"Bildgenerering","chat.camera.captureOrRecord":"Tryck fr foto, hll fr video","chat.camera.stopRecording":"Stoppa inspelning","chat.bookIcon.toggleImageGen":"Vxla bildgenereringslge","chat.imagePreview.alt":"Frhandsgranskning","chat.image.dragToEnlarge":"Dra i hrnet fr att frstora","chat.image.dragToShrink":"Dra i hrnet fr att frminska","chat.annotateImage":"Annotera bild","chat.annotateVideoFrame":"Annotera aktuell bildruta","chat.annotateModal.editingPreviewAlt":"Bild att annotera","chat.annotateModal.cancel":"Avbryt","chat.annotateModal.saveAndAttach":"Spara och bifoga","chat.annotateModal.undo":"ngra","chat.suggestion.speak":'Sg: "{suggestion}"',"chat.suggestion.ariaLabel":"Ls upp frslag: {suggestion}","chat.suggestion.toggleCreateMode":"Vxla frslagsskapningslge","chat.suggestion.createAction":"Skapa frslag","chat.suggestion.creating":"Skapar frslag...","chat.maestro.idle":"Maestro r inaktiv","chat.maestro.title.idle":"Maestro r fr nrvarande inaktiv.","chat.maestro.resting":"Maestro vilar...","chat.maestro.observing":"Maestro observerar...","chat.maestro.aboutToEngage":"Maestro ska snart engagera sig...","chat.maestro.title.resting":"Maestro r inaktiv, lng tid till teraktivering.","chat.maestro.title.observing":"Maestro observerar, lite tid till teraktivering.","chat.maestro.title.aboutToEngage":"Maestro kommer snart att teraktiveras.","chat.maestro.typing":"Maestro skriver...","chat.maestro.title.typing":"Maestro frbereder ett svar.","chat.maestro.speaking":"Maestro talar","chat.maestro.title.speaking":"Maestro talar just nu.","chat.maestro.listening":"Lyssnar...","chat.maestro.title.listening":"Maestro vntar p din inmatning eller rst.","chat.maestro.holding":"Maestro vntar","chat.maestro.title.holding":"Maestro vntar (teraktivering pausad)","chat.bookmark.hiddenHeaderAria":"Dolda meddelanden ovanfr","chat.bookmark.isHere":"Bokmrket r hr","chat.bookmark.setHere":"Stt bokmrke hr","chat.bookmark.actionsRegionAria":"Bokmrkestgrder","chat.bookmark.actionsToggleTitle":"Bokmrkesalternativ","chat.bookmark.decrementAria":"Visa en mindre","chat.bookmark.decrementTitle":"Frre","chat.bookmark.incrementAria":"Visa en mer","chat.bookmark.incrementTitle":"Fler","chat.bookmark.hiddenBelowHeaderAria":"Dolda meddelanden nedanfr","chat.sendPrep.optimizingVideo":"Optimerar video...","chat.sendPrep.optimizingImage":"Optimerar bild...","chat.sendPrep.preparingMedia":"Frbereder media...","chat.sendPrep.uploadingMedia":"Laddar upp media...","chat.sendPrep.finalizing":"Slutfr...","chat.header.annotating":"Annoterar","chat.header.recordingAudio":"Spelar in ljud","chat.header.recordingVideo":"Spelar in video","chat.header.savePopup":"Sparar...","chat.header.loadPopup":"Laddar...","chat.header.maestroAvatar":"Uppdaterar Maestro-avatar","chat.header.watchingVideo":"Tittar p video","chat.header.viewingAbove":"Visar tidigare meddelanden","chat.header.liveSession":"Livesession","chat.liveSession.stop":"Stoppa live","chat.liveSession.retry":"Frsk live igen","chat.liveSession.start":"Starta live","chat.liveSession.liveBadge":"Live","chat.liveSession.connecting":"Ansluter","chat.liveSession.defaultLastMessage":"Hej! Hur kan jag hjlpa dig idag?","chat.liveSession.defaultSuggestion1":"Hej","chat.liveSession.defaultSuggestion2":"God morgon","chat.liveSession.defaultSuggestion3":"Hur mr du?","chat.error.sttError":"STT-fel: {error}. Prova att byta mikrofon.","chat.error.autoCaptureCameraError":"Automatisk kameratagningsfel: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Inspelning stoppades automatiskt efter {maxMinutes} minuter.","chat.error.videoMetadataError":"Kunde inte lsa videometadata. Filen kan vara skadad eller i ett format som inte stds.","chat.error.pauseVideoToAnnotate":"Pausa videon fr att annotera den aktuella bildrutan","chat.error.imageGenInterrupted":"Bildgenereringen avbrts.","chat.error.thinkingInterrupted":"AI-svaret avbrts.","error.noLanguagePair":"Kritiskt fel: Inget sprkpar valt.","error.translationFailed":"versttningen misslyckades. Frsk igen.","error.imageLimitReached":"Sessionens bildgenereringsgrns ndd. Starta en ny session.","error.tokenLimitReached":"Sessionens tokengrns ndd. Starta en ny session.","error.apiKeyMissing":"Din Gemini API-nyckel saknas. ppna API-nyckelskrmen och klistra in din nyckel.","error.apiKeyInvalid":"Din Gemini API-nyckel r ogiltig. Kontrollera om det finns stavfel och klistra in en giltig nyckel.","error.apiQuotaExceeded":"Din Gemini API-gratiskvot fr chatt r frbrukad. Jag ppnade API-nyckelskrmen med faktureringssteg. Du kan fortfarande anvnda Live-konversation under tiden.","error.cameraPermissionDenied":"Kamerabehrighet nekad. Aktivera kameratkomst i webblsarens instllningar.","error.cameraNotFound":"Vald kamera hittades inte. Se till att den r ansluten eller vlj en annan kamera.","error.cameraAccessNotSupported":"Kameratkomst stds inte av din webblsare.","error.cameraUnknown":"Ett oknt fel uppstod vid tkomst till kameran.","error.cameraStreamNotAvailable":"Kamerastrm inte tillgnglig fr tagning.","error.imageCaptureGeneric":"Oknt fel vid bildtagning.","error.visualContextVideoElementNotReady":"Visuellt kontext videoelement inte redo.","error.snapshotVideoElementNotReady":"Snapshot videoelement inte redo.","error.visualContextCameraAccessNotSupported":"Kameratkomst stds inte fr visuellt kontext.","error.snapshotCameraAccessNotSupported":"Kameratkomst stds inte fr snapshot.","error.visualContext2DContext":"Kunde inte hmta 2D-kontext fr visuellt kontext.","error.snapshot2DContext":"Kunde inte hmta 2D-kontext fr snapshot.","error.visualContextCaptureFailedPermission":"Visuellt kontext misslyckades: Kamerabehrighet nekad.","error.snapshotCaptureFailedPermission":"Snapshot misslyckades: Kamerabehrighet nekad.","error.visualContextCaptureFailedNotFound":"Visuellt kontext misslyckades: Kamera hittades inte.","error.snapshotCaptureFailedNotFound":"Snapshot misslyckades: Kamera hittades inte.","error.visualContextCaptureFailedNotReady":"Visuellt kontext misslyckades: Kamera inte redo eller problem med fldet. {details}","error.snapshotCaptureFailedNotReady":"Snapshot misslyckades: Kamera inte redo eller problem med fldet. {details}","error.visualContextCaptureFailedGeneric":"Visuellt kontext misslyckades: {details}","error.snapshotCaptureFailedGeneric":"Snapshot misslyckades: {details}"},ow={"sttLang.selectLanguage":"  {language}  ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"  ","startPage.saveChats":"  ","startPage.loadChats":" ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"{count}     !","startPage.loadError":"  .      .","startPage.noChatsToSave":"   .","startPage.saveError":"  .    .","general.clear":"","general.error":",  .","apiKeyGate.title":" Gemini API  ","apiKeyGate.billingTitle":"   ","apiKeyGate.subtitle":"     .      .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":"Google AI Studio-  API  .","apiKeyGate.stepTwo":"    (Save)  .","apiKeyGate.openAiStudio":"Google AI Studio- ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":" ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {total}- {step}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API   ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"   {maskedKey}","apiKeyGate.clearSavedKey":"  ","apiKeyGate.cancel":"","apiKeyGate.saving":"...","apiKeyGate.saveKey":" ","apiKeyGate.close":"","chat.thinking":"...","chat.loadingHistory":"  ...","chat.loadingSuggestions":" ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":" :","chat.videoNotSupported":"    .","chat.audioNotSupported":"    .","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"   ...","chat.stopSpeaking":" ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT : ...","chat.mic.enableStt":"STT  ","chat.mic.disableStt":"STT  ","chat.mic.recordingAudioNote":"  ...","chat.placeholder.normal.listening":"{language}  ...","chat.placeholder.normal.sttActive":"{language}     ...","chat.placeholder.normal.sttInactive":"   {language}    ...","chat.placeholder.suggestion.listening":" {language} ...","chat.placeholder.suggestion.sttActive":" {language}     ...","chat.placeholder.suggestion.sttInactive":" {language}   ...","chat.camera.turnOn":"  ","chat.camera.turnOff":"  ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":" ,   ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"   ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"  ","chat.image.dragToShrink":"  ","chat.annotateImage":"  ","chat.annotateVideoFrame":"   ","chat.annotateModal.editingPreviewAlt":"   ","chat.annotateModal.cancel":" ","chat.annotateModal.saveAndAttach":" ","chat.annotateModal.undo":"","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"   ","chat.suggestion.createAction":" ","chat.suggestion.creating":" ...","chat.maestro.idle":" ","chat.maestro.title.idle":"  .","chat.maestro.resting":" ...","chat.maestro.observing":" ...","chat.maestro.aboutToEngage":"  ...","chat.maestro.title.resting":" ,     .","chat.maestro.title.observing":" ,     .","chat.maestro.title.aboutToEngage":"   .","chat.maestro.typing":"  ...","chat.maestro.title.typing":"  .","chat.maestro.speaking":" ","chat.maestro.title.speaking":"  .","chat.maestro.listening":"...","chat.maestro.title.listening":"     .","chat.maestro.holding":" ","chat.maestro.title.holding":"  (  )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":"  ","chat.bookmark.setHere":"  ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":" ...","chat.sendPrep.optimizingImage":" ...","chat.sendPrep.preparingMedia":" ...","chat.sendPrep.uploadingMedia":" ...","chat.sendPrep.finalizing":"...","chat.header.annotating":" ","chat.header.recordingAudio":"  ","chat.header.recordingVideo":"  ","chat.header.savePopup":"...","chat.header.loadPopup":"...","chat.header.maestroAvatar":"  ","chat.header.watchingVideo":" ","chat.header.viewingAbove":"  ","chat.header.liveSession":" ","chat.liveSession.stop":" ","chat.liveSession.retry":"  ","chat.liveSession.start":" ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"","chat.liveSession.defaultLastMessage":"!      ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":" ","chat.liveSession.defaultSuggestion3":"  ?","chat.error.sttError":"STT : {error}.   .","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}     .","chat.error.videoMetadataError":"   .      .","chat.error.pauseVideoToAnnotate":"     ","chat.error.imageGenInterrupted":"  .","chat.error.thinkingInterrupted":"AI  .","error.noLanguagePair":" :    .","error.translationFailed":" .  .","error.imageLimitReached":"    .   .","error.tokenLimitReached":"   .   .","error.apiKeyMissing":" Gemini API  . API      .","error.apiKeyInvalid":" Gemini API  .      .","error.apiQuotaExceeded":"  Gemini API   .   API   .     .","error.cameraPermissionDenied":"  .     .","error.cameraNotFound":"  .       .","error.cameraAccessNotSupported":"    .","error.cameraUnknown":"    .","error.cameraStreamNotAvailable":"   .","error.imageCaptureGeneric":"   .","error.visualContextVideoElementNotReady":"     .","error.snapshotVideoElementNotReady":"    .","error.visualContextCameraAccessNotSupported":"    .","error.snapshotCameraAccessNotSupported":"   .","error.visualContext2DContext":"  2D   .","error.snapshot2DContext":" 2D   .","error.visualContextCaptureFailedPermission":"  :   .","error.snapshotCaptureFailedPermission":" :   .","error.visualContextCaptureFailedNotFound":"  :  .","error.snapshotCaptureFailedNotFound":" :  .","error.visualContextCaptureFailedNotReady":"  :      . {details}","error.snapshotCaptureFailedNotReady":" :      . {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},rw={"sttLang.selectLanguage":"  {language}  ","header.targetLanguageTitle":"  : {language}","startPage.clickToStart":"  ","startPage.saveChats":"   ","startPage.loadChats":"  ","startPage.maestroAvatar":" ","startPage.addMaestroAvatar":"  ","startPage.loadSuccess":"{count}        !","startPage.loadError":"   .       .","startPage.noChatsToSave":"    .","startPage.saveError":"   .     .","general.clear":" ","general.error":",   .","apiKeyGate.title":" Gemini API   ","apiKeyGate.billingTitle":"     ","apiKeyGate.subtitle":"     .      .","apiKeyGate.privacyPolicy":" ","apiKeyGate.stepsTitle":"  :","apiKeyGate.stepOne":"Google AI Studio  API  .","apiKeyGate.stepTwo":"  ,  (Save) .","apiKeyGate.openAiStudio":"Google AI Studio ","apiKeyGate.viewInstructions":" ","apiKeyGate.closeInstructions":" ","apiKeyGate.previousInstruction":" ","apiKeyGate.nextInstruction":" ","apiKeyGate.instructionStep":" {total} {step}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API   ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":"    {maskedKey}","apiKeyGate.clearSavedKey":"    ","apiKeyGate.cancel":" ","apiKeyGate.saving":" ...","apiKeyGate.saveKey":"  ","apiKeyGate.close":"","chat.thinking":"...","chat.loadingHistory":"   ...","chat.loadingSuggestions":"  ...","chat.suggestionsAriaLabel":" ","chat.attachImageFromFile":" ","chat.removeAttachedImage":"  ","chat.sendMessage":" ","chat.messageInputAriaLabel":" ","chat.retrievedFromWeb":"  :","chat.videoNotSupported":"     .","chat.audioNotSupported":"     .","chat.fileAttachment":" ","chat.imageGenError":"  ","chat.generatingImageLoadingSlow":"   ...","chat.stopSpeaking":" ","chat.speakThisLine":"  ","chat.languageSelector.openGlobe":" ","chat.maestroTranscriptScrollwheel":"   ","chat.mic.listening":"STT : ...","chat.mic.enableStt":"STT  ","chat.mic.disableStt":"STT ","chat.mic.recordingAudioNote":"  ...","chat.placeholder.normal.listening":"{language} ...","chat.placeholder.normal.sttActive":"{language}    ...","chat.placeholder.normal.sttInactive":"   {language}   ...","chat.placeholder.suggestion.listening":" {language} ...","chat.placeholder.suggestion.sttActive":" {language}    ...","chat.placeholder.suggestion.sttInactive":" {language}  ...","chat.camera.turnOn":"   ","chat.camera.turnOff":"   ","chat.camera.imageGenCameraLabel":" ","chat.camera.captureOrRecord":"  ,    ","chat.camera.stopRecording":" ","chat.bookIcon.toggleImageGen":"   ","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"   ","chat.image.dragToShrink":"   ","chat.annotateImage":" ","chat.annotateVideoFrame":"  ","chat.annotateModal.editingPreviewAlt":" ","chat.annotateModal.cancel":" ","chat.annotateModal.saveAndAttach":"   ","chat.annotateModal.undo":"","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":" : {suggestion}","chat.suggestion.toggleCreateMode":"   ","chat.suggestion.createAction":" ","chat.suggestion.creating":" ...","chat.maestro.idle":"  ","chat.maestro.title.idle":"   .","chat.maestro.resting":"  ...","chat.maestro.observing":" ...","chat.maestro.aboutToEngage":"  ...","chat.maestro.title.resting":"  ,      .","chat.maestro.title.observing":" ,      .","chat.maestro.title.aboutToEngage":"    .","chat.maestro.typing":"  ...","chat.maestro.title.typing":"   .","chat.maestro.speaking":" ","chat.maestro.title.speaking":"  .","chat.maestro.listening":"...","chat.maestro.title.listening":"       .","chat.maestro.holding":"  ","chat.maestro.title.holding":"   (    )","chat.bookmark.hiddenHeaderAria":"  ","chat.bookmark.isHere":"  ","chat.bookmark.setHere":"   ","chat.bookmark.actionsRegionAria":" ","chat.bookmark.actionsToggleTitle":" ","chat.bookmark.decrementAria":"  ","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"  ","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"  ","chat.sendPrep.optimizingVideo":"  ...","chat.sendPrep.optimizingImage":"  ...","chat.sendPrep.preparingMedia":"  ...","chat.sendPrep.uploadingMedia":"  ...","chat.sendPrep.finalizing":" ...","chat.header.annotating":"","chat.header.recordingAudio":"  ","chat.header.recordingVideo":"  ","chat.header.savePopup":" ...","chat.header.maestroAvatar":"   ","chat.header.watchingVideo":" ","chat.header.viewingAbove":"  ","chat.header.liveSession":" ","chat.liveSession.stop":" ","chat.liveSession.retry":"  ","chat.liveSession.start":" ","chat.liveSession.liveBadge":"","chat.liveSession.connecting":" ","chat.liveSession.defaultLastMessage":"!     ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":"","chat.liveSession.defaultSuggestion3":"  ?","chat.error.sttError":"STT : {error}.   .","chat.error.autoCaptureCameraError":"   : {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}     .","chat.error.videoMetadataError":"  .        .","chat.error.pauseVideoToAnnotate":"     ","chat.error.imageGenInterrupted":"   .","chat.error.thinkingInterrupted":"AI   .","error.noLanguagePair":" :    .","error.translationFailed":" .   .","error.imageLimitReached":"   .    .","error.tokenLimitReached":"   .    .","error.apiKeyMissing":" Gemini API  . API      .","error.apiKeyInvalid":" Gemini API  .     ,    .","error.apiQuotaExceeded":"   Gemini API   .    API   .     .","error.cameraPermissionDenied":"  .      .","error.cameraNotFound":"  .        .","error.cameraAccessNotSupported":"      .","error.cameraUnknown":"     .","error.cameraStreamNotAvailable":"     .","error.imageCaptureGeneric":"    .","error.visualContextVideoElementNotReady":"     .","error.snapshotVideoElementNotReady":"    .","error.visualContextCameraAccessNotSupported":"      .","error.snapshotCameraAccessNotSupported":"     .","error.visualContext2DContext":"   2D  .","error.snapshot2DContext":"  2D  .","error.visualContextCaptureFailedPermission":"  :   .","error.snapshotCaptureFailedPermission":" :   .","error.visualContextCaptureFailedNotFound":"  :  .","error.snapshotCaptureFailedNotFound":" :  .","error.visualContextCaptureFailedNotReady":"  :      . {details}","error.snapshotCaptureFailedNotReady":" :      . {details}","error.visualContextCaptureFailedGeneric":"  : {details}","error.snapshotCaptureFailedGeneric":" : {details}"},iw={"sttLang.selectLanguage":" {language}","header.targetLanguageTitle":": {language}","startPage.clickToStart":"","startPage.saveChats":"","startPage.loadChats":"","startPage.maestroAvatar":" Maestro","startPage.addMaestroAvatar":" Maestro","startPage.loadSuccess":" {count} !","startPage.loadError":" ","startPage.noChatsToSave":"","startPage.saveError":" ","general.clear":"","general.error":" ","apiKeyGate.title":" API Gemini ","apiKeyGate.billingTitle":"","apiKeyGate.subtitle":" ","apiKeyGate.privacyPolicy":"","apiKeyGate.stepsTitle":":","apiKeyGate.stepOne":" Google AI Studio  API","apiKeyGate.stepTwo":"","apiKeyGate.openAiStudio":" Google AI Studio","apiKeyGate.viewInstructions":"","apiKeyGate.closeInstructions":"","apiKeyGate.previousInstruction":"","apiKeyGate.nextInstruction":"","apiKeyGate.instructionStep":" {step}  {total}","apiKeyGate.keyLabel":" API Gemini","apiKeyGate.placeholder":" API ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":" {maskedKey}","apiKeyGate.clearSavedKey":"","apiKeyGate.cancel":"","apiKeyGate.saving":"...","apiKeyGate.saveKey":"","apiKeyGate.close":"","chat.thinking":"...","chat.loadingHistory":"...","chat.loadingSuggestions":"...","chat.suggestionsAriaLabel":"","chat.attachImageFromFile":"","chat.removeAttachedImage":"","chat.sendMessage":"","chat.messageInputAriaLabel":"","chat.retrievedFromWeb":":","chat.videoNotSupported":"","chat.audioNotSupported":"","chat.fileAttachment":"","chat.imageGenError":"","chat.generatingImageLoadingSlow":"...","chat.stopSpeaking":"","chat.speakThisLine":"","chat.languageSelector.openGlobe":"","chat.maestroTranscriptScrollwheel":" Maestro","chat.mic.listening":"STT : ...","chat.mic.enableStt":" STT","chat.mic.disableStt":" STT","chat.mic.recordingAudioNote":"...","chat.placeholder.normal.listening":" {language}...","chat.placeholder.normal.sttActive":" {language} ...","chat.placeholder.normal.sttInactive":" {language}...","chat.placeholder.suggestion.listening":" {language} ...","chat.placeholder.suggestion.sttActive":" {language} ...","chat.placeholder.suggestion.sttInactive":" {language} ...","chat.camera.turnOn":"","chat.camera.turnOff":"","chat.camera.imageGenCameraLabel":"","chat.camera.captureOrRecord":" ","chat.camera.stopRecording":"","chat.bookIcon.toggleImageGen":"","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"","chat.image.dragToShrink":"","chat.annotateImage":"","chat.annotateVideoFrame":"","chat.annotateModal.editingPreviewAlt":"","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":"","chat.annotateModal.undo":"","chat.suggestion.speak":': "{suggestion}"',"chat.suggestion.ariaLabel":": {suggestion}","chat.suggestion.toggleCreateMode":"","chat.suggestion.createAction":"","chat.suggestion.creating":"...","chat.maestro.idle":"Maestro ","chat.maestro.title.idle":"Maestro ","chat.maestro.resting":"Maestro ...","chat.maestro.observing":"Maestro ...","chat.maestro.aboutToEngage":"Maestro ...","chat.maestro.title.resting":"Maestro  ","chat.maestro.title.observing":"Maestro  ","chat.maestro.title.aboutToEngage":"Maestro  ","chat.maestro.typing":"Maestro ...","chat.maestro.title.typing":"Maestro ","chat.maestro.speaking":"Maestro ","chat.maestro.title.speaking":"Maestro ","chat.maestro.listening":"...","chat.maestro.title.listening":"Maestro ","chat.maestro.holding":"Maestro ","chat.maestro.title.holding":"Maestro  ()","chat.bookmark.hiddenHeaderAria":"","chat.bookmark.isHere":"","chat.bookmark.setHere":"","chat.bookmark.actionsRegionAria":"","chat.bookmark.actionsToggleTitle":"","chat.bookmark.decrementAria":"","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"","chat.sendPrep.optimizingVideo":"...","chat.sendPrep.optimizingImage":"...","chat.sendPrep.preparingMedia":"...","chat.sendPrep.uploadingMedia":"...","chat.sendPrep.finalizing":"...","chat.header.annotating":"","chat.header.recordingAudio":"","chat.header.recordingVideo":"","chat.header.savePopup":"...","chat.header.loadPopup":"...","chat.header.maestroAvatar":" Maestro","chat.header.watchingVideo":"","chat.header.viewingAbove":"","chat.header.liveSession":"","chat.liveSession.stop":"","chat.liveSession.retry":"","chat.liveSession.start":"","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"","chat.liveSession.defaultLastMessage":"! ?","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":"","chat.liveSession.defaultSuggestion3":"?","chat.error.sttError":" STT: {error} ","chat.error.autoCaptureCameraError":": {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":" {maxMinutes} ","chat.error.videoMetadataError":" ","chat.error.pauseVideoToAnnotate":"","chat.error.imageGenInterrupted":"","chat.error.thinkingInterrupted":" AI ","error.noLanguagePair":": ","error.translationFailed":" ","error.imageLimitReached":" ","error.tokenLimitReached":" ","error.apiKeyMissing":" API Gemini   API ","error.apiKeyInvalid":" API Gemini  ","error.apiQuotaExceeded":" Gemini API   API  ","error.cameraPermissionDenied":" ","error.cameraNotFound":"  ","error.cameraAccessNotSupported":"","error.cameraUnknown":"","error.cameraStreamNotAvailable":"","error.imageCaptureGeneric":"","error.visualContextVideoElementNotReady":"","error.snapshotVideoElementNotReady":"","error.visualContextCameraAccessNotSupported":"","error.snapshotCameraAccessNotSupported":"","error.visualContext2DContext":" 2D ","error.snapshot2DContext":" 2D ","error.visualContextCaptureFailedPermission":": ","error.snapshotCaptureFailedPermission":": ","error.visualContextCaptureFailedNotFound":": ","error.snapshotCaptureFailedNotFound":": ","error.visualContextCaptureFailedNotReady":":  {details}","error.snapshotCaptureFailedNotReady":":  {details}","error.visualContextCaptureFailedGeneric":": {details}","error.snapshotCaptureFailedGeneric":": {details}"},sw={"sttLang.selectLanguage":"Konuma tanmay {language} olarak ayarla","header.targetLanguageTitle":"Mevcut Hedef Dil: {language}","startPage.clickToStart":"Uaa tklayn","startPage.saveChats":"Tm sohbetleri kaydet","startPage.loadChats":"Sohbetleri ykle","startPage.maestroAvatar":"Maestro avatar","startPage.addMaestroAvatar":"Maestro avatar ekle","startPage.loadSuccess":"{count} sohbet oturumu baaryla yklendi ve deitirildi!","startPage.loadError":"Sohbetler yklenirken hata olutu. Dosya bozuk veya yanl formatta olabilir.","startPage.noChatsToSave":"Kaydedilecek sohbet gemii yok.","startPage.saveError":"Sohbetler kaydedilirken hata olutu. Ayrntlar iin konsola bakn.","general.clear":"Temizle","general.error":"zgnm, bir hata olutu.","apiKeyGate.title":"Gemini API anahtarnz balayn","apiKeyGate.billingTitle":"Daha yksek kota iin faturalandrmay ayarlayn","apiKeyGate.subtitle":"Bu uygulama tamamen cihaznzda alr. Anahtarnz sunucularmza asla ulamaz.","apiKeyGate.privacyPolicy":"Gizlilik Politikas","apiKeyGate.stepsTitle":"ki hzl adm:","apiKeyGate.stepOne":"Google AI Studio'yu an ve bir API anahtar oluturun.","apiKeyGate.stepTwo":"Aaya anahtarnz yaptrn ve Kaydet'e dokunun.","apiKeyGate.openAiStudio":"Google AI Studio'yu a","apiKeyGate.viewInstructions":"Talimatlar grntle","apiKeyGate.closeInstructions":"Talimatlar kapat","apiKeyGate.previousInstruction":"nceki talimat","apiKeyGate.nextInstruction":"Sonraki talimat","apiKeyGate.instructionStep":"Talimat {step} / {total}","apiKeyGate.keyLabel":"Gemini API anahtar","apiKeyGate.placeholder":"API anahtarnz buraya yaptrn","apiKeyGate.show":"Gster","apiKeyGate.hide":"Gizle","apiKeyGate.currentKeySaved":"Geerli anahtar kaydedildi {maskedKey}","apiKeyGate.clearSavedKey":"Kaydedilmi anahtar temizle","apiKeyGate.cancel":"ptal","apiKeyGate.saving":"Kaydediliyor...","apiKeyGate.saveKey":"Anahtar kaydet","apiKeyGate.close":"Kapat","chat.thinking":"Dnyorum...","chat.loadingHistory":"Sohbet gemii ykleniyor...","chat.loadingSuggestions":"neriler ykleniyor...","chat.suggestionsAriaLabel":"Yant nerileri","chat.attachImageFromFile":"Dosya ekle","chat.removeAttachedImage":"Ekli dosyay kaldr","chat.sendMessage":"Mesaj gnder","chat.messageInputAriaLabel":"Mesaj girii","chat.retrievedFromWeb":"Web'den alnd:","chat.videoNotSupported":"Taraycnz video etiketini desteklemiyor.","chat.audioNotSupported":"Taraycnz ses etiketini desteklemiyor.","chat.fileAttachment":"Dosya eki","chat.imageGenError":"Grsel oluturma hatas","chat.generatingImageLoadingSlow":"Biraz daha uzun sryor...","chat.stopSpeaking":"Konumay durdur","chat.speakThisLine":"Bu satr seslendir","chat.languageSelector.openGlobe":"Dilleri deitir","chat.maestroTranscriptScrollwheel":"Maestro transkript kaydrma grnm","chat.mic.listening":"STT aktif: Dinleniyor...","chat.mic.enableStt":"STT'yi etkinletir","chat.mic.disableStt":"STT'yi durdur","chat.mic.recordingAudioNote":"Ses kaydediliyor...","chat.placeholder.normal.listening":"{language} dilinde dinleniyor...","chat.placeholder.normal.sttActive":"{language} dilinde konuun veya yazn...","chat.placeholder.normal.sttInactive":"Yazn veya {language} dilinde konumak iin mikrofona dokunun...","chat.placeholder.suggestion.listening":"evirmek iin {language} konuun...","chat.placeholder.suggestion.sttActive":"evirmek iin {language} dilinde konuun veya yazn...","chat.placeholder.suggestion.sttInactive":"evirmek iin {language} dilinde yazn...","chat.camera.turnOn":"Kamera nizlemesini a","chat.camera.turnOff":"Kamera nizlemesini kapat","chat.camera.imageGenCameraLabel":"Grsel oluturma","chat.camera.captureOrRecord":"Fotoraf iin dokunun, video iin basl tutun","chat.camera.stopRecording":"Kayd durdur","chat.bookIcon.toggleImageGen":"Grsel oluturma modunu deitir","chat.imagePreview.alt":"nizleme","chat.image.dragToEnlarge":"Bytmek iin keyi srkleyin","chat.image.dragToShrink":"Kltmek iin keyi srkleyin","chat.annotateImage":"Grsele not ekle","chat.annotateVideoFrame":"Mevcut kareye not ekle","chat.annotateModal.editingPreviewAlt":"Not eklenecek grsel","chat.annotateModal.cancel":"ptal","chat.annotateModal.saveAndAttach":"Kaydet ve ekle","chat.annotateModal.undo":"Geri al","chat.suggestion.speak":'Syle: "{suggestion}"',"chat.suggestion.ariaLabel":"neriyi seslendir: {suggestion}","chat.suggestion.toggleCreateMode":"neri oluturma modunu deitir","chat.suggestion.createAction":"neri olutur","chat.suggestion.creating":"neri oluturuluyor...","chat.maestro.idle":"Maestro bota","chat.maestro.title.idle":"Maestro u anda bota.","chat.maestro.resting":"Maestro dinleniyor...","chat.maestro.observing":"Maestro gzlemliyor...","chat.maestro.aboutToEngage":"Maestro katlmak zere...","chat.maestro.title.resting":"Maestro bota, yeniden katlma kadar ok zaman var.","chat.maestro.title.observing":"Maestro gzlemliyor, yeniden katlma kadar biraz zaman var.","chat.maestro.title.aboutToEngage":"Maestro yaknda yeniden katlacak.","chat.maestro.typing":"Maestro yazyor...","chat.maestro.title.typing":"Maestro bir yant hazrlyor.","chat.maestro.speaking":"Maestro konuuyor","chat.maestro.title.speaking":"Maestro u anda konuuyor.","chat.maestro.listening":"Dinleniyor...","chat.maestro.title.listening":"Maestro giriinizi veya sesinizi bekliyor.","chat.maestro.holding":"Maestro bekliyor","chat.maestro.title.holding":"Maestro bekliyor (yeniden katlm duraklatld)","chat.bookmark.hiddenHeaderAria":"Yukarda gizli mesajlar","chat.bookmark.isHere":"Yer imi burada","chat.bookmark.setHere":"Yer imini buraya ayarla","chat.bookmark.actionsRegionAria":"Yer imi ilemleri","chat.bookmark.actionsToggleTitle":"Yer imi seenekleri","chat.bookmark.decrementAria":"Bir eksik gster","chat.bookmark.decrementTitle":"Daha az","chat.bookmark.incrementAria":"Bir fazla gster","chat.bookmark.incrementTitle":"Daha fazla","chat.bookmark.hiddenBelowHeaderAria":"Aada gizli mesajlar","chat.sendPrep.optimizingVideo":"Video optimize ediliyor...","chat.sendPrep.optimizingImage":"Grsel optimize ediliyor...","chat.sendPrep.preparingMedia":"Medya hazrlanyor...","chat.sendPrep.uploadingMedia":"Medya ykleniyor...","chat.sendPrep.finalizing":"Tamamlanyor...","chat.header.annotating":"Not ekleniyor","chat.header.recordingAudio":"Ses kaydediliyor","chat.header.recordingVideo":"Video kaydediliyor","chat.header.savePopup":"Kaydediliyor...","chat.header.loadPopup":"Ykleniyor...","chat.header.maestroAvatar":"Maestro avatar gncelleniyor","chat.header.watchingVideo":"Video izleniyor","chat.header.viewingAbove":"nceki mesajlar grntleniyor","chat.header.liveSession":"Canl oturum","chat.liveSession.stop":"Canly durdur","chat.liveSession.retry":"Canly tekrar dene","chat.liveSession.start":"Canly balat","chat.liveSession.liveBadge":"Canl","chat.liveSession.connecting":"Balanyor","chat.liveSession.defaultLastMessage":"Merhaba! Bugn size nasl yardmc olabilirim?","chat.liveSession.defaultSuggestion1":"Merhaba","chat.liveSession.defaultSuggestion2":"Gnaydn","chat.liveSession.defaultSuggestion3":"Naslsn?","chat.error.sttError":"STT hatas: {error}. Mikrofonu deitirmeyi deneyin.","chat.error.autoCaptureCameraError":"Otomatik yakalama kamera hatas: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Kayt {maxMinutes} dakika sonra otomatik olarak durduruldu.","chat.error.videoMetadataError":"Video meta verileri okunamad. Dosya bozuk veya desteklenmeyen formatta olabilir.","chat.error.pauseVideoToAnnotate":"Mevcut kareye not eklemek iin videoyu duraklatn","chat.error.imageGenInterrupted":"Grsel oluturma kesintiye urad.","chat.error.thinkingInterrupted":"AI yant kesintiye urad.","error.noLanguagePair":"Kritik hata: Dil ifti seilmedi.","error.translationFailed":"eviri baarsz oldu. Ltfen tekrar deneyin.","error.imageLimitReached":"Oturum grsel oluturma snrna ulald. Ltfen yeni bir oturum balatn.","error.tokenLimitReached":"Oturum token snrna ulald. Ltfen yeni bir oturum balatn.","error.apiKeyMissing":"Gemini API anahtarnz eksik. API Anahtar ekrann an ve anahtarnz yaptrn.","error.apiKeyInvalid":"Gemini API anahtarnz geersiz. Ltfen yazm hatalarn kontrol edin ve geerli bir anahtar yaptrn.","error.apiQuotaExceeded":"Sohbet iin Gemini API cretsiz kotanz doldu. Faturalandrma admlarn ieren API Anahtar ekrann atm. Bu srada hala Canl sohbeti kullanabilirsiniz.","error.cameraPermissionDenied":"Kamera izni reddedildi. Ltfen tarayc ayarlarndan kamera eriimini etkinletirin.","error.cameraNotFound":"Seilen kamera bulunamad. Bal olduundan emin olun veya farkl bir kamera sein.","error.cameraAccessNotSupported":"Taraycnz kamera eriimini desteklemiyor.","error.cameraUnknown":"Kameraya eriirken bilinmeyen bir hata olutu.","error.cameraStreamNotAvailable":"Yakalama iin kamera ak mevcut deil.","error.imageCaptureGeneric":"Grsel yakalanrken bilinmeyen hata.","error.visualContextVideoElementNotReady":"Grsel balam video esi hazr deil.","error.snapshotVideoElementNotReady":"Anlk grnt video esi hazr deil.","error.visualContextCameraAccessNotSupported":"Grsel balam iin kamera eriimi desteklenmiyor.","error.snapshotCameraAccessNotSupported":"Anlk grnt iin kamera eriimi desteklenmiyor.","error.visualContext2DContext":"Grsel balam iin 2D balam alnamad.","error.snapshot2DContext":"Anlk grnt iin 2D balam alnamad.","error.visualContextCaptureFailedPermission":"Grsel balam baarsz: Kamera izni reddedildi.","error.snapshotCaptureFailedPermission":"Anlk grnt baarsz: Kamera izni reddedildi.","error.visualContextCaptureFailedNotFound":"Grsel balam baarsz: Kamera bulunamad.","error.snapshotCaptureFailedNotFound":"Anlk grnt baarsz: Kamera bulunamad.","error.visualContextCaptureFailedNotReady":"Grsel balam baarsz: Kamera hazr deil veya akta sorun var. {details}","error.snapshotCaptureFailedNotReady":"Anlk grnt baarsz: Kamera hazr deil veya akta sorun var. {details}","error.visualContextCaptureFailedGeneric":"Grsel balam baarsz: {details}","error.snapshotCaptureFailedGeneric":"Anlk grnt baarsz: {details}"},lw={"sttLang.selectLanguage":"t nhn dng ging ni thnh {language}","header.targetLanguageTitle":"Ngn ng mc tiu hin ti: {language}","startPage.clickToStart":"Nhp vo my bay","startPage.saveChats":"Lu tt c cuc tr chuyn","startPage.loadChats":"Ti cuc tr chuyn","startPage.maestroAvatar":"Avatar Maestro","startPage.addMaestroAvatar":"Thm avatar Maestro","startPage.loadSuccess":" ti v thay th thnh cng {count} phin tr chuyn!","startPage.loadError":"Li khi ti cuc tr chuyn. Tp c th b hng hoc sai nh dng.","startPage.noChatsToSave":"Khng c lch s tr chuyn  lu.","startPage.saveError":"Li khi lu cuc tr chuyn. Xem console  bit thm chi tit.","general.clear":"Xa","general.error":"Xin li,  xy ra li.","apiKeyGate.title":"Kt ni kha API Gemini ca bn","apiKeyGate.billingTitle":"Thit lp thanh ton  c hn ngch cao hn","apiKeyGate.subtitle":"ng dng ny chy hon ton trn thit b ca bn. Kha ca bn khng bao gi c gi n my ch ca chng ti.","apiKeyGate.privacyPolicy":"Chnh sch bo mt","apiKeyGate.stepsTitle":"Hai bc nhanh chng:","apiKeyGate.stepOne":"M Google AI Studio v to kha API.","apiKeyGate.stepTwo":"Dn kha vo bn di v nhn Lu.","apiKeyGate.openAiStudio":"M Google AI Studio","apiKeyGate.viewInstructions":"Xem hng dn","apiKeyGate.closeInstructions":"ng hng dn","apiKeyGate.previousInstruction":"Hng dn trc","apiKeyGate.nextInstruction":"Hng dn tip theo","apiKeyGate.instructionStep":"Hng dn {step}/{total}","apiKeyGate.keyLabel":"Kha API Gemini","apiKeyGate.placeholder":"Dn kha API ca bn vo y","apiKeyGate.show":"Hin","apiKeyGate.hide":"n","apiKeyGate.currentKeySaved":"Kha hin ti  lu {maskedKey}","apiKeyGate.clearSavedKey":"Xa kha  lu","apiKeyGate.cancel":"Hy","apiKeyGate.saving":"ang lu...","apiKeyGate.saveKey":"Lu kha","apiKeyGate.close":"ng","chat.thinking":"ang suy ngh...","chat.loadingHistory":"ang ti lch s tr chuyn...","chat.loadingSuggestions":"ang ti gi ...","chat.suggestionsAriaLabel":"Gi  tr li","chat.attachImageFromFile":"nh km tp","chat.removeAttachedImage":"Xa tp nh km","chat.sendMessage":"Gi tin nhn","chat.messageInputAriaLabel":"Nhp tin nhn","chat.retrievedFromWeb":"Truy xut t web:","chat.videoNotSupported":"Trnh duyt ca bn khng h tr th video.","chat.audioNotSupported":"Trnh duyt ca bn khng h tr th m thanh.","chat.fileAttachment":"Tp nh km","chat.imageGenError":"Li to hnh nh","chat.generatingImageLoadingSlow":"Mt nhiu thi gian hn mt cht...","chat.stopSpeaking":"Dng ni","chat.speakThisLine":"c dng ny","chat.languageSelector.openGlobe":"Thay i ngn ng","chat.maestroTranscriptScrollwheel":"Ch  xem cun bn ghi Maestro","chat.mic.listening":"STT ang hot ng: ang nghe...","chat.mic.enableStt":"Bt STT","chat.mic.disableStt":"Dng STT","chat.mic.recordingAudioNote":"ang ghi m...","chat.placeholder.normal.listening":"ang nghe bng {language}...","chat.placeholder.normal.sttActive":"Ni bng {language} hoc nhp...","chat.placeholder.normal.sttInactive":"Nhp hoc chm vo mic  ni bng {language}...","chat.placeholder.suggestion.listening":"Ni {language}  dch...","chat.placeholder.suggestion.sttActive":"Ni hoc nhp bng {language}  dch...","chat.placeholder.suggestion.sttInactive":"Nhp bng {language}  dch...","chat.camera.turnOn":"Bt xem trc camera","chat.camera.turnOff":"Tt xem trc camera","chat.camera.imageGenCameraLabel":"To hnh nh","chat.camera.captureOrRecord":"Chm  chp nh, gi  quay video","chat.camera.stopRecording":"Dng ghi","chat.bookIcon.toggleImageGen":"Chuyn i ch  to hnh nh","chat.imagePreview.alt":"Xem trc","chat.image.dragToEnlarge":"Ko gc  phng to","chat.image.dragToShrink":"Ko gc  thu nh","chat.annotateImage":"Ch thch hnh nh","chat.annotateVideoFrame":"Ch thch khung hnh hin ti","chat.annotateModal.editingPreviewAlt":"Hnh nh cn ch thch","chat.annotateModal.cancel":"Hy","chat.annotateModal.saveAndAttach":"Lu v nh km","chat.annotateModal.undo":"Hon tc","chat.suggestion.speak":'Ni: "{suggestion}"',"chat.suggestion.ariaLabel":"c gi : {suggestion}","chat.suggestion.toggleCreateMode":"Chuyn i ch  to gi ","chat.suggestion.createAction":"To gi ","chat.suggestion.creating":"ang to gi ...","chat.maestro.idle":"Maestro ang rnh","chat.maestro.title.idle":"Maestro hin ang rnh.","chat.maestro.resting":"Maestro ang ngh ngi...","chat.maestro.observing":"Maestro ang quan st...","chat.maestro.aboutToEngage":"Maestro sp tham gia...","chat.maestro.title.resting":"Maestro ang rnh, cn nhiu thi gian trc khi ti tham gia.","chat.maestro.title.observing":"Maestro ang quan st, cn mt cht thi gian trc khi ti tham gia.","chat.maestro.title.aboutToEngage":"Maestro s sm ti tham gia.","chat.maestro.typing":"Maestro ang nhp...","chat.maestro.title.typing":"Maestro ang chun b phn hi.","chat.maestro.speaking":"Maestro ang ni","chat.maestro.title.speaking":"Maestro hin ang ni.","chat.maestro.listening":"ang nghe...","chat.maestro.title.listening":"Maestro ang ch u vo hoc ging ni ca bn.","chat.maestro.holding":"Maestro ang ch","chat.maestro.title.holding":"Maestro ang ch (ti tham gia tm dng)","chat.bookmark.hiddenHeaderAria":"Tin nhn n pha trn","chat.bookmark.isHere":"Du trang  y","chat.bookmark.setHere":"t du trang  y","chat.bookmark.actionsRegionAria":"Hnh ng du trang","chat.bookmark.actionsToggleTitle":"Ty chn du trang","chat.bookmark.decrementAria":"Hin th t hn mt","chat.bookmark.decrementTitle":"t hn","chat.bookmark.incrementAria":"Hin th thm mt","chat.bookmark.incrementTitle":"Thm","chat.bookmark.hiddenBelowHeaderAria":"Tin nhn n pha di","chat.sendPrep.optimizingVideo":"ang ti u ha video...","chat.sendPrep.optimizingImage":"ang ti u ha hnh nh...","chat.sendPrep.preparingMedia":"ang chun b phng tin...","chat.sendPrep.uploadingMedia":"ang ti ln phng tin...","chat.sendPrep.finalizing":"ang hon tt...","chat.header.annotating":"ang ch thch","chat.header.recordingAudio":"ang ghi m","chat.header.recordingVideo":"ang quay video","chat.header.savePopup":"ang lu...","chat.header.loadPopup":"ang ti...","chat.header.maestroAvatar":"ang cp nht avatar Maestro","chat.header.watchingVideo":"ang xem video","chat.header.viewingAbove":"ang xem tin nhn trc ","chat.header.liveSession":"Phin trc tip","chat.liveSession.stop":"Dng trc tip","chat.liveSession.retry":"Th li trc tip","chat.liveSession.start":"Bt u trc tip","chat.liveSession.liveBadge":"Trc tip","chat.liveSession.connecting":"ang kt ni","chat.liveSession.defaultLastMessage":"Xin cho! Ti c th gip g cho bn hm nay?","chat.liveSession.defaultSuggestion1":"Xin cho","chat.liveSession.defaultSuggestion2":"Cho bui sng","chat.liveSession.defaultSuggestion3":"Bn khe khng?","chat.error.sttError":"Li STT: {error}. Th chuyn i mic.","chat.error.autoCaptureCameraError":"Li t ng chp camera: {error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"Ghi t ng dng sau {maxMinutes} pht.","chat.error.videoMetadataError":"Khng th c siu d liu video. Tp c th b hng hoc nh dng khng c h tr.","chat.error.pauseVideoToAnnotate":"Tm dng video  ch thch khung hnh hin ti","chat.error.imageGenInterrupted":"To hnh nh  b gin on.","chat.error.thinkingInterrupted":"Phn hi AI  b gin on.","error.noLanguagePair":"Li nghim trng: Khng c cp ngn ng no c chn.","error.translationFailed":"Dch tht bi. Vui lng th li.","error.imageLimitReached":" t gii hn to hnh nh ca phin. Vui lng bt u phin mi.","error.tokenLimitReached":" t gii hn token ca phin. Vui lng bt u phin mi.","error.apiKeyMissing":"Thiu kha Gemini API ca bn. M mn hnh Kha API v dn kha ca bn vo.","error.apiKeyInvalid":"Kha Gemini API ca bn khng hp l. Vui lng kim tra li chnh t v dn kha hp l.","error.apiQuotaExceeded":"Hn ngch min ph Gemini API cho tr chuyn ca bn  ht. Ti  m mn hnh Kha API vi cc bc thanh ton. Trong thi gian ch i, bn vn c th s dng Tr chuyn trc tip.","error.cameraPermissionDenied":"Quyn camera b t chi. Vui lng bt quyn truy cp camera trong ci t trnh duyt.","error.cameraNotFound":"Khng tm thy camera  chn. m bo n c kt ni hoc chn camera khc.","error.cameraAccessNotSupported":"Truy cp camera khng c trnh duyt ca bn h tr.","error.cameraUnknown":" xy ra li khng xc nh khi truy cp camera.","error.cameraStreamNotAvailable":"Lung camera khng kh dng  chp.","error.imageCaptureGeneric":"Li khng xc nh khi chp hnh nh.","error.visualContextVideoElementNotReady":"Phn t video ng cnh trc quan cha sn sng.","error.snapshotVideoElementNotReady":"Phn t video chp nh cha sn sng.","error.visualContextCameraAccessNotSupported":"Truy cp camera khng c h tr cho ng cnh trc quan.","error.snapshotCameraAccessNotSupported":"Truy cp camera khng c h tr cho chp nh.","error.visualContext2DContext":"Khng th ly ng cnh 2D cho ng cnh trc quan.","error.snapshot2DContext":"Khng th ly ng cnh 2D cho chp nh.","error.visualContextCaptureFailedPermission":"Ng cnh trc quan tht bi: Quyn camera b t chi.","error.snapshotCaptureFailedPermission":"Chp nh tht bi: Quyn camera b t chi.","error.visualContextCaptureFailedNotFound":"Ng cnh trc quan tht bi: Khng tm thy camera.","error.snapshotCaptureFailedNotFound":"Chp nh tht bi: Khng tm thy camera.","error.visualContextCaptureFailedNotReady":"Ng cnh trc quan tht bi: Camera cha sn sng hoc c vn  vi lung. {details}","error.snapshotCaptureFailedNotReady":"Chp nh tht bi: Camera cha sn sng hoc c vn  vi lung. {details}","error.visualContextCaptureFailedGeneric":"Ng cnh trc quan tht bi: {details}","error.snapshotCaptureFailedGeneric":"Chp nh tht bi: {details}"},cw={"sttLang.selectLanguage":"{language}","header.targetLanguageTitle":"{language}","startPage.clickToStart":"","startPage.saveChats":"","startPage.loadChats":"","startPage.maestroAvatar":"Maestro","startPage.addMaestroAvatar":"Maestro","startPage.loadSuccess":"{count}","startPage.loadError":"","startPage.noChatsToSave":"","startPage.saveError":"","general.clear":"","general.error":"","apiKeyGate.title":" Gemini API ","apiKeyGate.billingTitle":"","apiKeyGate.subtitle":"","apiKeyGate.privacyPolicy":"","apiKeyGate.stepsTitle":"","apiKeyGate.stepOne":" Google AI Studio  API ","apiKeyGate.stepTwo":"","apiKeyGate.openAiStudio":" Google AI Studio","apiKeyGate.viewInstructions":"","apiKeyGate.closeInstructions":"","apiKeyGate.previousInstruction":"","apiKeyGate.nextInstruction":"","apiKeyGate.instructionStep":" {step} / {total}","apiKeyGate.keyLabel":"Gemini API ","apiKeyGate.placeholder":" API ","apiKeyGate.show":"","apiKeyGate.hide":"","apiKeyGate.currentKeySaved":" {maskedKey}","apiKeyGate.clearSavedKey":"","apiKeyGate.cancel":"","apiKeyGate.saving":"...","apiKeyGate.saveKey":"","apiKeyGate.close":"","chat.thinking":"...","chat.loadingHistory":"...","chat.loadingSuggestions":"...","chat.suggestionsAriaLabel":"","chat.attachImageFromFile":"","chat.removeAttachedImage":"","chat.sendMessage":"","chat.messageInputAriaLabel":"","chat.retrievedFromWeb":"","chat.videoNotSupported":"","chat.audioNotSupported":"","chat.fileAttachment":"","chat.imageGenError":"","chat.generatingImageLoadingSlow":"...","chat.stopSpeaking":"","chat.speakThisLine":"","chat.languageSelector.openGlobe":"","chat.maestroTranscriptScrollwheel":"Maestro","chat.mic.listening":"STT...","chat.mic.enableStt":"STT","chat.mic.disableStt":"STT","chat.mic.recordingAudioNote":"...","chat.placeholder.normal.listening":"{language}...","chat.placeholder.normal.sttActive":"{language}...","chat.placeholder.normal.sttInactive":"{language}...","chat.placeholder.suggestion.listening":"{language}...","chat.placeholder.suggestion.sttActive":"{language}...","chat.placeholder.suggestion.sttInactive":"{language}...","chat.camera.turnOn":"","chat.camera.turnOff":"","chat.camera.imageGenCameraLabel":"","chat.camera.captureOrRecord":"","chat.camera.stopRecording":"","chat.bookIcon.toggleImageGen":"","chat.imagePreview.alt":"","chat.image.dragToEnlarge":"","chat.image.dragToShrink":"","chat.annotateImage":"","chat.annotateVideoFrame":"","chat.annotateModal.editingPreviewAlt":"","chat.annotateModal.cancel":"","chat.annotateModal.saveAndAttach":"","chat.annotateModal.undo":"","chat.suggestion.speak":'"{suggestion}"',"chat.suggestion.ariaLabel":"{suggestion}","chat.suggestion.toggleCreateMode":"","chat.suggestion.createAction":"","chat.suggestion.creating":"...","chat.maestro.idle":"Maestro","chat.maestro.title.idle":"Maestro","chat.maestro.resting":"Maestro...","chat.maestro.observing":"Maestro...","chat.maestro.aboutToEngage":"Maestro...","chat.maestro.title.resting":"Maestro","chat.maestro.title.observing":"Maestro","chat.maestro.title.aboutToEngage":"Maestro","chat.maestro.typing":"Maestro...","chat.maestro.title.typing":"Maestro","chat.maestro.speaking":"Maestro","chat.maestro.title.speaking":"Maestro","chat.maestro.listening":"...","chat.maestro.title.listening":"Maestro","chat.maestro.holding":"Maestro","chat.maestro.title.holding":"Maestro","chat.bookmark.hiddenHeaderAria":"","chat.bookmark.isHere":"","chat.bookmark.setHere":"","chat.bookmark.actionsRegionAria":"","chat.bookmark.actionsToggleTitle":"","chat.bookmark.decrementAria":"","chat.bookmark.decrementTitle":"","chat.bookmark.incrementAria":"","chat.bookmark.incrementTitle":"","chat.bookmark.hiddenBelowHeaderAria":"","chat.sendPrep.optimizingVideo":"...","chat.sendPrep.optimizingImage":"...","chat.sendPrep.preparingMedia":"...","chat.sendPrep.uploadingMedia":"...","chat.sendPrep.finalizing":"...","chat.header.annotating":"","chat.header.recordingAudio":"","chat.header.recordingVideo":"","chat.header.savePopup":"...","chat.header.loadPopup":"...","chat.header.maestroAvatar":"Maestro","chat.header.watchingVideo":"","chat.header.viewingAbove":"","chat.header.liveSession":"","chat.liveSession.stop":"","chat.liveSession.retry":"","chat.liveSession.start":"","chat.liveSession.liveBadge":"","chat.liveSession.connecting":"","chat.liveSession.defaultLastMessage":"","chat.liveSession.defaultSuggestion1":"","chat.liveSession.defaultSuggestion2":"","chat.liveSession.defaultSuggestion3":"","chat.error.sttError":"STT{error}","chat.error.autoCaptureCameraError":"{error}","chat.error.snapshotUserError":"{error}","chat.error.recordingTimeExceeded":"{maxMinutes}","chat.error.videoMetadataError":"","chat.error.pauseVideoToAnnotate":"","chat.error.imageGenInterrupted":"","chat.error.thinkingInterrupted":"AI","error.noLanguagePair":"","error.translationFailed":"","error.imageLimitReached":"","error.tokenLimitReached":"","error.apiKeyMissing":" Gemini API  API ","error.apiKeyInvalid":" Gemini API ","error.apiQuotaExceeded":" Gemini API  API ","error.cameraPermissionDenied":"","error.cameraNotFound":"","error.cameraAccessNotSupported":"","error.cameraUnknown":"","error.cameraStreamNotAvailable":"","error.imageCaptureGeneric":"","error.visualContextVideoElementNotReady":"","error.snapshotVideoElementNotReady":"","error.visualContextCameraAccessNotSupported":"","error.snapshotCameraAccessNotSupported":"","error.visualContext2DContext":"2D","error.snapshot2DContext":"2D","error.visualContextCaptureFailedPermission":"","error.snapshotCaptureFailedPermission":"","error.visualContextCaptureFailedNotFound":"","error.snapshotCaptureFailedNotFound":"","error.visualContextCaptureFailedNotReady":"{details}","error.snapshotCaptureFailedNotReady":"{details}","error.visualContextCaptureFailedGeneric":"{details}","error.snapshotCaptureFailedGeneric":"{details}"},Kr={"en-US":vl,"en-GB":vl,"en-AU":vl,"en-IN":vl,"es-ES":Bm,"es-US":Bm,"fr-FR":_m,"fr-CA":_m,"de-DE":HT,"it-IT":YT,"pt-BR":tw,"nl-NL":$T,"pl-PL":ew,"ru-RU":nw,"tr-TR":sw,"ar-XA":FT,"hi-IN":VT,"bn-IN":KT,"gu-IN":OT,"kn-IN":JT,"ml-IN":WT,"mr-IN":ZT,"ta-IN":ow,"te-IN":rw,"ja-JP":jT,"ko-KR":XT,"cmn-CN":cw,"th-TH":iw,"vi-VN":lw,"id-ID":qT,"fi-FI":QT,"sv-SE":aw},uw=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Aw=t=>{const e=T.useMemo(()=>t||"en-US",[t]);return{t:T.useCallback((r,s)=>{let c=Kr[e]?.[r]||Kr["en-US"]?.[r]||r;return s&&Object.keys(s).forEach(A=>{const f=uw(A);c=c.replace(new RegExp(`\\{${f}\\}`,"g"),String(s[A]))}),c},[e]),currentLanguage:e}},ei=()=>{const t=Q($a),e=T.useMemo(()=>t?.nativeLanguageCode?Bn(t.nativeLanguageCode):(typeof navigator<"u"?navigator.language:"en-US")||"en-US",[t]);return Aw(e)},dy=T.forwardRef(({onOpenApiKey:t,hasApiKey:e},o)=>{const{t:r}=ei(),s=Q(U=>U.maestroActivityStage),c=Q($a),A=Q(cc),f=Q(U=>U.toggleDebugLogs),m=Q(U=>U.setIsLanguageSelectionOpen),g=Q(U=>U.setTempNativeLangCode),p=Q(U=>U.setTempTargetLangCode),y=Q(U=>U.addActivityToken),S=Q(U=>U.removeActivityToken),[E,x]=T.useState(!1),k=T.useRef(null),b=T.useRef(null),M=T.useRef(!1);T.useEffect(()=>(E&&(k.current&&clearTimeout(k.current),k.current=window.setTimeout(()=>{x(!1)},5e3)),()=>{k.current&&clearTimeout(k.current)}),[E]);const O=T.useCallback(U=>{const X=Q.getState();if(ja(X))return;m(!0);const F=X.settings.selectedLanguagePairId;if(F&&typeof F=="string"){const R=Xl(F);R?(p(R.targetCode),g(R.nativeCode)):(g(null),p(null))}else g(null),p(null)},[m,g,p]),N=U=>{if(M.current){U.stopPropagation(),U.preventDefault();return}E?O(U):(U.stopPropagation(),x(!0))},j=T.useRef(null),L=T.useCallback(()=>{j.current?(S(j.current),j.current=null):j.current=y(rn.UI,Pt.HOLD)},[y,S]),H=U=>{M.current=!1,b.current&&clearTimeout(b.current),b.current=window.setTimeout(()=>{M.current=!0,L(),navigator.vibrate&&navigator.vibrate(50)},800)},P=()=>{b.current&&(clearTimeout(b.current),b.current=null)},_=()=>{b.current&&(clearTimeout(b.current),b.current=null)},B=Q(ud(sy)),q=Q(kT),Z=Q(iy),ne=T.useMemo(()=>PT(s,B,q,Z),[s,B,q,Z]);return C.jsxs(C.Fragment,{children:[C.jsx("div",{ref:o,className:`fixed top-4 left-0 z-50 transition-transform duration-500 ease-out
          ${E?"translate-x-0":"-translate-x-1 hover:translate-x-0"}
        `,style:{top:"calc(1rem + env(safe-area-inset-top))"},children:C.jsx("div",{className:`flex items-center cursor-pointer select-none touch-none transition-all duration-300
            ${ne.color} ${ne.borderColor}
            ${ne.textColor}
            ${E?"shadow-md border-y border-r rounded-r-xl pr-4 pl-3 py-1.5":"drop-shadow-md pl-3 pr-3 py-2 animate-flag-wave"}
          `,onClick:N,onPointerDown:H,onPointerUp:P,onPointerLeave:_,onContextMenu:U=>U.preventDefault(),role:"status","aria-live":"polite",title:E?void 0:"Click to view status, Long press to Hold",children:C.jsx("div",{className:"transition-opacity duration-300",children:C.jsx(RT,{stage:s,t:r,targetLanguageFlag:c?A?.flag:void 0,targetLanguageTitle:c?r("header.targetLanguageTitle",{language:A?.displayName||""}):void 0,className:ne.textColor,isExpanded:E})})})}),C.jsxs("div",{className:`fixed top-4 right-4 z-40 flex items-center gap-2 transition-all duration-300 ease-in-out ${E?"opacity-100 translate-x-0 pointer-events-auto":"opacity-0 translate-x-4 pointer-events-none"}`,style:{top:"calc(1rem + env(safe-area-inset-top))"},children:[t&&C.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full shadow-sm backdrop-blur-sm transition-all text-xs sm:text-sm
               ${e?"bg-emerald-600/85 text-white hover:bg-emerald-600":"bg-rose-600/90 text-white hover:bg-rose-600"}
             `,title:e?"Manage API Key":"API Key Required",children:[C.jsx(ts,{className:"w-4 h-4"}),C.jsx("span",{className:"hidden sm:inline",children:e?"API Key":"API Key Required"})]}),C.jsx("button",{onClick:f,className:"p-2 bg-slate-800/80 hover:bg-slate-700 text-slate-400 hover:text-white rounded-full shadow-sm backdrop-blur-sm transition-all",title:"View Traffic Logs",children:C.jsx($v,{className:"w-4 h-4"})})]})]})});dy.displayName="Header";const Lm=({languages:t,selectedValue:e,onSelect:o,title:r,disabled:s,onInteract:c,variant:A})=>{const f=T.useRef(null),m=T.useRef(new Map),g=T.useRef(null),p=T.useRef(!1),y=T.useRef(!1),[S,E]=T.useState(!1),x=T.useRef(null);T.useEffect(()=>{if(e&&f.current){const L=m.current.get(e.langCode);L&&(p.current=!0,L.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{p.current=!1},500))}else!e&&f.current&&(p.current=!0,f.current.scrollTop=0,setTimeout(()=>{p.current=!1},300))},[e]);const k=T.useCallback(()=>{if(p.current)return;const L=f.current;if(!L)return;const H=L.scrollTop,P=L.offsetHeight,_=H+P/2;let B=-1,q=1/0;if(t.forEach((Z,ne)=>{const U=m.current.get(Z.langCode);if(U){const X=U.offsetTop-L.offsetTop,F=U.offsetHeight,R=X+F/2,K=Math.abs(_-R);K<q&&(q=K,B=ne)}}),B>-1){const Z=t[B];Z.langCode!==e?.langCode&&o(Z)}},[t,o,e]),b=T.useCallback(()=>{p.current||y.current||(E(!1),c?.(),k())},[c,k]),M=T.useCallback(()=>{p.current||(g.current&&clearTimeout(g.current),g.current=window.setTimeout(b,250))},[b]),O=T.useCallback(()=>{y.current=!0,g.current&&clearTimeout(g.current)},[]),N=T.useCallback(()=>{y.current=!1,M()},[M]);T.useEffect(()=>{const L=f.current;if(!L)return;const H="onscrollend"in window,P=()=>{p.current||(E(!0),x.current&&clearTimeout(x.current),x.current=window.setTimeout(()=>E(!1),300)),H||M()},_=()=>{y.current||b()};return L.addEventListener("scroll",P,{passive:!0}),H&&L.addEventListener("scrollend",_),L.addEventListener("touchstart",O,{passive:!0}),L.addEventListener("touchend",N,{passive:!0}),L.addEventListener("touchcancel",N,{passive:!0}),()=>{L.removeEventListener("scroll",P),H&&L.removeEventListener("scrollend",_),L.removeEventListener("touchstart",O),L.removeEventListener("touchend",N),L.removeEventListener("touchcancel",N),g.current&&clearTimeout(g.current),x.current&&clearTimeout(x.current)}},[M,b,O,N]);const j=S&&A?A==="native"?"ring-2 ring-sky-400 shadow-sky-400/30 shadow-md":"ring-2 ring-green-400 shadow-green-400/30 shadow-md":"";return C.jsxs("div",{className:`flex-1 text-center relative min-w-[3rem] ${s?"opacity-50":""}`,children:[r&&C.jsx("p",{className:"text-xs text-slate-400 mb-1 h-4",children:r}),C.jsx("div",{className:`rounded-lg transition-all duration-150 ${j}`,children:C.jsxs("div",{ref:f,className:`h-32 overflow-y-auto relative scrollbar-hide ${s?"pointer-events-none":""}`,style:{scrollSnapType:"y mandatory",WebkitMaskImage:"linear-gradient(to bottom, transparent, black 20%, black 80%, transparent)",maskImage:"linear-gradient(to bottom, transparent, black 20%, black 80%, transparent)"},onPointerDown:()=>c?.(),children:[C.jsx("div",{className:"h-[calc(50%-1.25rem)]"}),t.map(L=>{const H=L.langCode===e?.langCode,P=Rl(L);return C.jsx("div",{ref:_=>{_&&m.current.set(L.langCode,_)},className:"flex items-center justify-center h-10 transition-all duration-200 ease-out",style:{scrollSnapAlign:"center"},onClick:()=>{s||(c?.(),o(L))},children:C.jsxs("span",{className:`text-2xl font-semibold flex items-center gap-0.5 cursor-pointer transition-all duration-200 ${H?"opacity-100 scale-125":"opacity-50 scale-100"}`,children:[L.flag,P&&C.jsx("span",{className:"text-[9px] text-slate-300 font-bold ml-0.5",children:L.shortCode})]})},L.langCode)}),C.jsx("div",{className:"h-[calc(50%-1.25rem)]"})]})})]})},wA=12,dw=({nativeLangCode:t,targetLangCode:e,onSelectNative:o,onSelectTarget:r,onConfirm:s,t:c,onInteract:A})=>{const f=Yt.find(F=>F.langCode===t)||null,m=Yt.find(F=>F.langCode===e)||null,[g,p]=T.useState(null),y=T.useRef(null),S=T.useRef(new Map),[E,x]=T.useState(0),k=T.useRef(!1),b=T.useRef(0),M=T.useRef(0),O=T.useRef(null),N=T.useMemo(()=>{const F=Yt.length,R=Math.floor(E*F)%F,K=Math.floor(wA/2),V=[];for(let ge=-K;ge<=K;ge++){let me=(R+ge+F)%F;V.push({lang:Yt[me],index:me,position:ge})}return V},[E]),j=T.useCallback(F=>{const R=F/(wA/2),V=R*Math.PI-Math.PI/2,ge=45,me=50+ge*Math.cos(V),G=50+ge*Math.sin(V),D=Math.cos(R*Math.PI*.5);return{x:me,y:G,depth:D}},[]),L=T.useCallback(F=>{const R=N.find(se=>se.lang.langCode===F);if(R)return j(R.position);const K=Yt.findIndex(se=>se.langCode===F),V=Yt.length,ge=Math.floor(E*V)%V,me=(K-ge+V)%V,D=(me>V/2?me-V:me)/(wA/2)*Math.PI-Math.PI/2,te=45;return{x:50+te*Math.cos(D),y:50+te*Math.sin(D),depth:0}},[N,E,j]),H=f?L(f.langCode):null,P=m?L(m.langCode):null,_=T.useMemo(()=>!H||!P?"":`M ${H.x} ${H.y} Q 50 50 ${P.x} ${P.y}`,[H,P]);T.useEffect(()=>{const F=m||f;if(F){const R=Yt.findIndex(K=>K.langCode===F.langCode);if(R!==-1){const K=R/Yt.length;x(K)}}},[f,m]);const B=T.useCallback(F=>{F.preventDefault(),A();const R=F.deltaY>0?.02:-.02;x(K=>{let V=K+R;return V<0&&(V+=1),V>=1&&(V-=1),V})},[A]),q=T.useCallback(F=>{k.current=!0,b.current=F.clientY,M.current=0,O.current&&(cancelAnimationFrame(O.current),O.current=null),A(),F.target.setPointerCapture?.(F.pointerId)},[A]),Z=T.useCallback(F=>{if(!k.current)return;const R=F.clientY-b.current;b.current=F.clientY;const K=.002;M.current=R*K,x(V=>{let ge=V+M.current;return ge<0&&(ge+=1),ge>=1&&(ge-=1),ge})},[]),ne=T.useCallback(F=>{k.current=!1,F.target.releasePointerCapture?.(F.pointerId);const R=()=>{if(Math.abs(M.current)<5e-4){M.current=0;return}M.current*=.95,x(K=>{let V=K+M.current;return V<0&&(V+=1),V>=1&&(V-=1),V}),O.current=requestAnimationFrame(R)};Math.abs(M.current)>.001&&(O.current=requestAnimationFrame(R))},[]);T.useEffect(()=>()=>{O.current&&cancelAnimationFrame(O.current)},[]);const U=F=>{A(),f?!m&&F.langCode!==f.langCode?r(F.langCode):F.langCode===f.langCode?o(null):F.langCode===m?.langCode?r(null):r(F.langCode):o(F.langCode)},X=T.useCallback((F,R)=>{const K=Yt.findIndex(V=>V.langCode===F.langCode);K!==-1&&x(K/Yt.length),R?o(F.langCode):r(F.langCode)},[o,r]);return C.jsxs("div",{className:"w-full flex justify-center py-2",children:[C.jsx("style",{children:`
                @keyframes fly-in-bubble {
                    from { offset-distance: 0%; }
                    to { offset-distance: 100%; }
                }
                .animate-fly-in-bubble {
                    animation: fly-in-bubble 2.5s ease-in-out forwards;
                    offset-path: path(var(--flight-path));
                }
                .spiral-flag {
                    transition: transform 0.15s ease-out, opacity 0.15s ease-out;
                }
            `}),C.jsxs("div",{className:"relative w-full max-w-[20rem] aspect-square",children:[C.jsxs("div",{ref:y,className:"globe-bg absolute inset-0 border-2 rounded-full flex items-center justify-center bg-slate-800 text-white overflow-hidden shadow-inner touch-none",onPointerDown:q,onPointerMove:Z,onPointerUp:ne,onPointerCancel:ne,onPointerLeave:()=>{k.current&&ne({})},onWheel:B,children:[C.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 text-xs text-slate-400 opacity-60 pointer-events-none",children:[Math.floor(E*Yt.length)+1," / ",Yt.length]}),C.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:C.jsx("div",{className:"pointer-events-auto w-[70%] max-w-[10rem] bg-slate-900/60 backdrop-blur-md rounded-2xl px-3 py-2 transition-opacity duration-200 opacity-40 hover:opacity-100 focus-within:opacity-100 active:opacity-100 shadow-lg border border-white/10",children:C.jsxs("div",{className:"flex justify-center items-start gap-3",children:[C.jsx(Lm,{languages:Yt,selectedValue:f,onSelect:F=>X(F,!0),onInteract:A,title:"",variant:"native"}),C.jsx("div",{className:"w-px h-24 bg-white/30 self-center rounded-full"}),C.jsx(Lm,{languages:Yt.filter(F=>F.langCode!==f?.langCode),selectedValue:m,onSelect:F=>X(F,!1),disabled:!f,onInteract:A,title:"",variant:"target"})]})})}),N.map(({lang:F,position:R})=>{const K=j(R),V=f?.langCode===F.langCode,ge=m?.langCode===F.langCode,me=Rl(F),G=.6+K.depth*.6,D=.4+K.depth*.6;return C.jsxs("button",{ref:te=>{te?S.current.set(F.langCode,te):S.current.delete(F.langCode)},className:"spiral-flag absolute transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center justify-center p-1 rounded-full z-10",style:{top:`${K.y}%`,left:`${K.x}%`,transform:`translate(-50%, -50%) scale(${G})`,opacity:D,zIndex:Math.floor(K.depth*10)+10},onClick:()=>U(F),onMouseEnter:()=>p(F),onMouseLeave:()=>p(null),title:F.displayName,children:[C.jsx("span",{className:`text-lg leading-none transition-transform duration-200 ${g?.langCode===F.langCode||V||ge?"scale-125":"scale-100"}`,children:F.flag}),me&&C.jsx("span",{className:"text-[8px] font-bold text-white/90 leading-none mt-0.5 drop-shadow-sm",children:F.shortCode}),C.jsx("div",{className:`absolute -inset-1 rounded-full border-2 transition-all duration-300 pointer-events-none ${V?"border-sky-400 shadow-sky-400/50 shadow-lg":ge?"border-green-400 shadow-green-400/50 shadow-lg":"border-transparent"}`})]},F.langCode)}),C.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-white/30 pointer-events-none text-lg",children:""}),C.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-white/30 pointer-events-none text-lg",children:""})]}),_&&C.jsxs("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 w-full h-full overflow-visible pointer-events-none z-50",children:[C.jsx("path",{d:_,stroke:"rgba(255,255,255,0.3)",strokeWidth:"2",fill:"none",strokeDasharray:"5,5"}),C.jsxs("g",{style:{"--flight-path":`"${_}"`},className:"animate-fly-in-bubble cursor-pointer pointer-events-auto",onClick:()=>s(),children:[C.jsx("title",{children:c("startPage.clickToStart")}),C.jsx("text",{className:f&&m?"animate-pulse":"",fontSize:"24",dominantBaseline:"middle",textAnchor:"middle",children:""})]})]},_)]})]})},gy="GeminiLanguageTutorDB",fy=7,da="chatHistories",ua="chatMetas",xo="globalProfile",Jr="appSettings",ga="appAssets",_n=()=>new Promise((t,e)=>{const o=indexedDB.open(gy,fy);o.onerror=()=>e(new Error("Error opening IndexedDB")),o.onsuccess=()=>t(o.result),o.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains(da)||s.createObjectStore(da,{keyPath:"pairId"}),s.objectStoreNames.contains(ua)||s.createObjectStore(ua,{keyPath:"pairId"}),s.objectStoreNames.contains(xo)||s.createObjectStore(xo,{keyPath:"key"}),s.objectStoreNames.contains(Jr)||s.createObjectStore(Jr,{keyPath:"key"}),s.objectStoreNames.contains(ga)||s.createObjectStore(ga,{keyPath:"key"})}});async function Eo(){const t=await _n();return new Promise((e,o)=>{const c=t.transaction(xo,"readonly").objectStore(xo).get("singleton");c.onerror=()=>o(new Error("Error reading global profile")),c.onsuccess=()=>e(c.result||null)})}async function gd(t){const e=await _n(),o=(t||"").trim(),r=Math.random().toString(36),s={key:"singleton",text:o,updatedAt:Date.now(),fingerprint:r};return new Promise((c,A)=>{const g=e.transaction(xo,"readwrite").objectStore(xo).put(s);g.onerror=()=>A(new Error("Error saving global profile")),g.onsuccess=()=>c()})}const hy="loadingGifs",fd="maestroProfileImage";async function HA(){const t=await _n();return new Promise((e,o)=>{const c=t.transaction(ga,"readonly").objectStore(ga).get(hy);c.onerror=()=>o(new Error("Error reading loading gifs from DB")),c.onsuccess=()=>e(c.result?c.result.value:null)})}async function my(t){const e=await _n();return new Promise((o,r)=>{const A=e.transaction(ga,"readwrite").objectStore(ga).put({key:hy,value:t});A.onerror=()=>r(new Error("Error saving loading gifs to DB")),A.onsuccess=()=>o()})}async function Dl(){const t=await _n();return new Promise((e,o)=>{const c=t.transaction(ga,"readonly").objectStore(ga).get(fd);c.onerror=()=>o(new Error("Error reading maestro profile from DB")),c.onsuccess=()=>e(c.result?c.result.value:null)})}async function rs(t){const e=await _n(),o={...t||{},updatedAt:Date.now()};return new Promise((r,s)=>{const f=e.transaction(ga,"readwrite").objectStore(ga).put({key:fd,value:o});f.onerror=()=>s(new Error("Error saving maestro profile to DB")),f.onsuccess=()=>r()})}async function gw(){const t=await _n();return new Promise((e,o)=>{const c=t.transaction(ga,"readwrite").objectStore(ga).delete(fd);c.onerror=()=>o(new Error("Error clearing maestro profile from DB")),c.onsuccess=()=>e()})}class fw{logs=[];listeners=new Set;subscribe(e){return this.listeners.add(e),e([...this.logs]),()=>this.listeners.delete(e)}notify(){const e=[...this.logs];this.listeners.forEach(o=>o(e))}logRequest(e,o,r){const s=Math.random().toString(36).substring(7),c=Date.now();let A=r;try{A=JSON.parse(JSON.stringify(r))}catch{A="[Unserializable Payload]"}const f={id:s,timestamp:c,type:e,model:o,request:A};return this.logs=[f,...this.logs].slice(0,50),this.notify(),{complete:m=>{const g=Date.now()-c;this.updateEntry(s,{response:m,duration:g})},error:m=>{const g=Date.now()-c,p=m instanceof Error?{...m,name:m.name,message:m.message,stack:m.stack}:m;this.updateEntry(s,{error:p,duration:g})}}}updateEntry(e,o){this.logs=this.logs.map(r=>r.id===e?{...r,...o}:r),this.notify()}clear(){this.logs=[],this.notify()}}const fa=new fw,hw=({onClose:t})=>{const[e,o]=T.useState([]),[r,s]=T.useState(null);T.useEffect(()=>fa.subscribe(f=>{o(f)}),[]);const c=()=>{fa.clear()},A=f=>{s(r===f?null:f)};return C.jsxs("div",{className:"fixed inset-y-0 right-0 w-full sm:w-[480px] bg-slate-900 shadow-2xl z-[100] flex flex-col border-l border-slate-700 font-mono text-sm",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 pb-3 bg-slate-800 border-b border-slate-700",style:{paddingTop:"calc(0.75rem + env(safe-area-inset-top))"},children:[C.jsxs("h2",{className:"text-slate-200 font-semibold flex items-center gap-2",children:[C.jsx("span",{className:"text-green-400",children:""})," Traffic Log"]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:c,className:"p-1.5 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded transition-colors",title:"Clear logs",children:C.jsx(jl,{className:"w-4 h-4"})}),C.jsx("button",{onClick:t,className:"p-1.5 text-slate-400 hover:text-white hover:bg-slate-700 rounded transition-colors",title:"Close",children:C.jsx(qa,{className:"w-5 h-5"})})]})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 bg-slate-900",children:[e.length===0&&C.jsx("div",{className:"text-slate-500 text-center py-10 italic",children:"No traffic recorded yet."}),e.map(f=>{const m=r===f.id,g=!!f.error,p=f.duration?`${f.duration}ms`:"pending...",y=new Date(f.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return C.jsxs("div",{className:`rounded border ${g?"border-red-800 bg-red-900/10":"border-slate-700 bg-slate-800/50"} overflow-hidden transition-colors`,children:[C.jsxs("div",{className:"px-3 py-2 cursor-pointer flex items-center justify-between hover:bg-white/5 select-none",onClick:()=>A(f.id),children:[C.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[C.jsx("span",{className:`text-xs ${g?"text-red-400":"text-slate-500"}`,children:y}),C.jsx("span",{className:`font-semibold truncate ${g?"text-red-300":"text-blue-300"}`,children:f.type}),C.jsxs("span",{className:"text-xs text-slate-500 truncate hidden sm:inline-block",children:["- ",f.model]})]}),C.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[C.jsx("span",{className:`${g?"text-red-400":"text-green-400"}`,children:p}),C.jsx("span",{className:"text-slate-600",children:m?"":""})]})]}),m&&C.jsxs("div",{className:"border-t border-slate-700/50",children:[C.jsxs("div",{className:"bg-slate-950/50 p-2",children:[C.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold mb-1 px-1",children:"Request Payload"}),C.jsx("pre",{className:"text-xs text-slate-300 overflow-x-auto whitespace-pre-wrap break-all bg-black/20 p-2 rounded max-h-60 overflow-y-auto custom-scrollbar",children:JSON.stringify(f.request,null,2)})]}),(f.response||f.error)&&C.jsxs("div",{className:"bg-slate-950/30 p-2 border-t border-slate-800/50",children:[C.jsx("div",{className:`text-xs uppercase font-bold mb-1 px-1 ${g?"text-red-400":"text-green-400"}`,children:g?"Error":"Response"}),C.jsx("pre",{className:`text-xs overflow-x-auto whitespace-pre-wrap break-all bg-black/20 p-2 rounded max-h-60 overflow-y-auto custom-scrollbar ${g?"text-red-300":"text-green-300"}`,children:JSON.stringify(f.error||f.response,null,2)})]})]})]},f.id)})]})]})};var mw={};let pw,vw;function yw(){return{geminiUrl:pw,vertexUrl:vw}}function Sw(t,e,o,r){var s,c;if(!t?.baseUrl){const A=yw();return e?(s=A.vertexUrl)!==null&&s!==void 0?s:o:(c=A.geminiUrl)!==null&&c!==void 0?c:r}return t.baseUrl}class Wa{}function ze(t,e){const o=/\{([^}]+)\}/g;return t.replace(o,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const c=e[s];return c!=null?String(c):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function d(t,e,o){for(let c=0;c<e.length-1;c++){const A=e[c];if(A.endsWith("[]")){const f=A.slice(0,-2);if(!(f in t))if(Array.isArray(o))t[f]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${A}`);if(Array.isArray(t[f])){const m=t[f];if(Array.isArray(o))for(let g=0;g<m.length;g++){const p=m[g];d(p,e.slice(c+1),o[g])}else for(const g of m)d(g,e.slice(c+1),o)}return}else if(A.endsWith("[0]")){const f=A.slice(0,-3);f in t||(t[f]=[{}]);const m=t[f];d(m[0],e.slice(c+1),o);return}(!t[A]||typeof t[A]!="object")&&(t[A]={}),t=t[A]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===s)return;if(typeof s=="object"&&typeof o=="object"&&s!==null&&o!==null)Object.assign(s,o);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(t,o):t[r]=o}function u(t,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return o;const s=e[r];if(s.endsWith("[]")){const c=s.slice(0,-2);if(c in t){const A=t[c];return Array.isArray(A)?A.map(f=>u(f,e.slice(r+1),o)):o}else return o}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return o;throw r}}function Cw(t,e){for(const[o,r]of Object.entries(e)){const s=o.split("."),c=r.split("."),A=new Set;let f=-1;for(let m=0;m<s.length;m++)if(s[m]==="*"){f=m;break}if(f!==-1&&c.length>f)for(let m=f;m<c.length;m++){const g=c[m];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&A.add(g)}QA(t,s,c,0,A)}}function QA(t,e,o,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const c=e[r];if(c.endsWith("[]")){const A=c.slice(0,-2),f=t;if(A in f&&Array.isArray(f[A]))for(const m of f[A])QA(m,e,o,r+1,s)}else if(c==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const A=t,f=Object.keys(A).filter(g=>!g.startsWith("_")&&!s.has(g)),m={};for(const g of f)m[g]=A[g];for(const[g,p]of Object.entries(m)){const y=[];for(const S of o.slice(r))S==="*"?y.push(g):y.push(S);d(A,y,p)}for(const g of f)delete A[g]}}else{const A=t;c in A&&QA(A[c],e,o,r+1,s)}}function hd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Tw(t){const e={},o=u(t,["operationName"]);o!=null&&d(e,["operationName"],o);const r=u(t,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function ww(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);c!=null&&d(e,["error"],c);const A=u(t,["response","generateVideoResponse"]);return A!=null&&d(e,["response"],bw(A)),e}function Ew(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);c!=null&&d(e,["error"],c);const A=u(t,["response"]);return A!=null&&d(e,["response"],kw(A)),e}function bw(t){const e={},o=u(t,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(A=>xw(A))),d(e,["generatedVideos"],c)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function kw(t){const e={},o=u(t,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(A=>Iw(A))),d(e,["generatedVideos"],c)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function xw(t){const e={},o=u(t,["video"]);return o!=null&&d(e,["video"],Gw(o)),e}function Iw(t){const e={},o=u(t,["_self"]);return o!=null&&d(e,["video"],Bw(o)),e}function Mw(t){const e={},o=u(t,["operationName"]);return o!=null&&d(e,["_url","operationName"],o),e}function Pw(t){const e={},o=u(t,["operationName"]);return o!=null&&d(e,["_url","operationName"],o),e}function Rw(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);c!=null&&d(e,["error"],c);const A=u(t,["response"]);return A!=null&&d(e,["response"],Dw(A)),e}function Dw(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function py(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);c!=null&&d(e,["error"],c);const A=u(t,["response"]);return A!=null&&d(e,["response"],Nw(A)),e}function Nw(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function Gw(t){const e={},o=u(t,["uri"]);o!=null&&d(e,["uri"],o);const r=u(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],hd(r));const s=u(t,["encoding"]);return s!=null&&d(e,["mimeType"],s),e}function Bw(t){const e={},o=u(t,["gcsUri"]);o!=null&&d(e,["uri"],o);const r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],hd(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}var Um;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Um||(Um={}));var zm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(zm||(zm={}));var Fm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Fm||(Fm={}));var bo;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(bo||(bo={}));var Km;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Km||(Km={}));var Hm;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Hm||(Hm={}));var Qm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Qm||(Qm={}));var Om;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Om||(Om={}));var Vm;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Vm||(Vm={}));var qm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qm||(qm={}));var Ym;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Ym||(Ym={}));var jm;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(jm||(jm={}));var Jm;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Jm||(Jm={}));var Xm;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Xm||(Xm={}));var Wm;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Wm||(Wm={}));var Zm;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Zm||(Zm={}));var $m;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})($m||($m={}));var ep;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ep||(ep={}));var tp;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tp||(tp={}));var np;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(np||(np={}));var ap;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ap||(ap={}));var Ja;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ja||(Ja={}));var op;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(op||(op={}));var rp;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(rp||(rp={}));var ip;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ip||(ip={}));var OA;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(OA||(OA={}));var sp;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(sp||(sp={}));var lp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(lp||(lp={}));var cp;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(cp||(cp={}));var up;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(up||(up={}));var Ap;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ap||(Ap={}));var dp;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(dp||(dp={}));var gp;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(gp||(gp={}));var fp;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fp||(fp={}));var hp;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(hp||(hp={}));var mp;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mp||(mp={}));var pp;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(pp||(pp={}));var vp;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(vp||(vp={}));var yp;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(yp||(yp={}));var Sp;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Sp||(Sp={}));var Cp;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Cp||(Cp={}));var Tp;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Tp||(Tp={}));var wp;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(wp||(wp={}));var Ep;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ep||(Ep={}));var bp;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(bp||(bp={}));var kp;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(kp||(kp={}));var xp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(xp||(xp={}));var Ip;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ip||(Ip={}));var Mp;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Mp||(Mp={}));var Pp;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Pp||(Pp={}));var Rp;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Rp||(Rp={}));var Dp;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Dp||(Dp={}));var Np;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Np||(Np={}));var Gp;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Gp||(Gp={}));var Hr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Hr||(Hr={}));class VA{constructor(e){const o={};for(const r of e.headers.entries())o[r[0]]=r[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class ji{get text(){var e,o,r,s,c,A,f,m;if(((s=(r=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",p=!1;const y=[];for(const S of(m=(f=(A=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||A===void 0?void 0:A.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[E,x]of Object.entries(S))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(x!==null||x!==void 0)&&y.push(E);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;p=!0,g+=S.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?g:void 0}get data(){var e,o,r,s,c,A,f,m;if(((s=(r=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const p=[];for(const y of(m=(f=(A=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||A===void 0?void 0:A.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[S,E]of Object.entries(y))S!=="inlineData"&&(E!==null||E!==void 0)&&p.push(S);y.inlineData&&typeof y.inlineData.data=="string"&&(g+=atob(y.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,o,r,s,c,A,f,m;if(((s=(r=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(m=(f=(A=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||A===void 0?void 0:A.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if(g?.length!==0)return g}get executableCode(){var e,o,r,s,c,A,f,m,g;if(((s=(r=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(m=(f=(A=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||A===void 0?void 0:A.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(p?.length!==0)return(g=p?.[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,o,r,s,c,A,f,m,g;if(((s=(r=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(m=(f=(A=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||A===void 0?void 0:A.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(p?.length!==0)return(g=p?.[0])===null||g===void 0?void 0:g.output}}class Bp{}class _p{}class _w{}class Lw{}class Uw{}class zw{}class Lp{}class Up{}class zp{}class Fw{}class Nl{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const r=new Nl;let s;const c=e;return o?s=Ew(c):s=ww(c),Object.assign(r,s),r}}class Fp{}class Kp{}class Hp{}class Qp{}class Kw{}class Hw{}class Qw{}class md{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const r=new md,c=Rw(e);return Object.assign(r,c),r}}class Ow{}class Vw{}class qw{}class Op{}class Yw{get text(){var e,o,r;let s="",c=!1;const A=[];for(const f of(r=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&r!==void 0?r:[]){for(const[m,g]of Object.entries(f))m!=="text"&&m!=="thought"&&g!==null&&A.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;c=!0,s+=f.text}}return A.length>0&&console.warn(`there are non-text parts ${A} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?s:void 0}get data(){var e,o,r;let s="";const c=[];for(const A of(r=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&r!==void 0?r:[]){for(const[f,m]of Object.entries(A))f!=="inlineData"&&m!==null&&c.push(f);A.inlineData&&typeof A.inlineData.data=="string"&&(s+=atob(A.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class jw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class pd{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const r=new pd,c=py(e);return Object.assign(r,c),r}}function Vt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vy(t,e){const o=Vt(t,e);return o?o.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}`:o.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${o}`:o:""}function yy(t){return Array.isArray(t)?t.map(e=>Gl(e)):[Gl(t)]}function Gl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Sy(t){const e=Gl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Cy(t){const e=Gl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Vp(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Ty(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Vp(e)):[Vp(t)]}function qA(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function qp(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Yp(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Un(t){if(t==null)throw new Error("ContentUnion is required");return qA(t)?t:{role:"user",parts:Ty(t)}}function vd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const r=Un(o);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const o=Un(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>Un(o)):[Un(e)]}function Aa(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(qp(t)||Yp(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Un(t)]}const e=[],o=[],r=qA(t[0]);for(const s of t){const c=qA(s);if(c!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)e.push(s);else{if(qp(s)||Yp(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(s)}}return r||e.push({role:"user",parts:Ty(o)}),e}function Jw(t,e){t.includes("null")&&(e.nullable=!0);const o=t.filter(r=>r!=="null");if(o.length===1)e.type=Object.values(bo).includes(o[0].toUpperCase())?o[0].toUpperCase():bo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of o)e.anyOf.push({type:Object.values(bo).includes(r.toUpperCase())?r.toUpperCase():bo.TYPE_UNSPECIFIED})}}function qr(t){const e={},o=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=t.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(e.nullable=!0,t=c[1]):c[1].type==="null"&&(e.nullable=!0,t=c[0])),t.type instanceof Array&&Jw(t.type,e);for(const[A,f]of Object.entries(t))if(f!=null)if(A=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(bo).includes(f.toUpperCase())?f.toUpperCase():bo.TYPE_UNSPECIFIED}else if(o.includes(A))e[A]=qr(f);else if(r.includes(A)){const m=[];for(const g of f){if(g.type=="null"){e.nullable=!0;continue}m.push(qr(g))}e[A]=m}else if(s.includes(A)){const m={};for(const[g,p]of Object.entries(f))m[g]=qr(p);e[A]=m}else{if(A==="additionalProperties")continue;e[A]=f}return e}function yd(t){return qr(t)}function Sd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Cd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ti(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=qr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=qr(e.response));return t}function ni(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of t)e.push(o);return e}function Xw(t,e,o,r=1){const s=!e.startsWith(`${o}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}/${e}`:e:s?`${o}/${e}`:e}function Za(t,e){if(typeof e!="string")throw new Error("name must be a string");return Xw(t,e,"cachedContents")}function wy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Io(t){return hd(t)}function Ww(t){return t!=null&&typeof t=="object"&&"name"in t}function Zw(t){return t!=null&&typeof t=="object"&&"video"in t}function $w(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ey(t){var e;let o;if(Ww(t)&&(o=t.name),!($w(t)&&(o=t.uri,o===void 0))&&!(Zw(t)&&(o=(e=t.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof t=="string"&&(o=t),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const s=o.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${o}`);o=s[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function by(t,e){let o;return t.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function ky(t){for(const e of["models","tunedModels","publisherModels"])if(eE(t,e))return t[e];return[]}function eE(t,e){return t!==null&&typeof t=="object"&&e in t}function tE(t,e={}){const o=t,r={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(r.responseJsonSchema=o.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function nE(t,e={}){const o=[],r=new Set;for(const s of t){const c=s.name;if(r.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);r.add(c);const A=tE(s,e);A.functionDeclarations&&o.push(...A.functionDeclarations)}return{functionDeclarations:o}}function xy(t,e){let o;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const r=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,s=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function aE(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Iy(t){if(typeof t!="object"||t===null)return{};const e=t,o=e.inlinedResponses;if(typeof o!="object"||o===null)return t;const s=o.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let c=!1;for(const A of s){if(typeof A!="object"||A===null)continue;const m=A.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){c=!0;break}}return c&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ai(t,e){const o=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function My(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function oE(t){const e={},o=u(t,["responsesFile"]);o!=null&&d(e,["fileName"],o);const r=u(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(A=>UE(A))),d(e,["inlinedResponses"],c)}const s=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>A)),d(e,["inlinedEmbedContentResponses"],c)}return e}function rE(t){const e={},o=u(t,["predictionsFormat"]);o!=null&&d(e,["format"],o);const r=u(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);const s=u(t,["bigqueryDestination","outputUri"]);return s!=null&&d(e,["bigqueryUri"],s),e}function iE(t){const e={},o=u(t,["format"]);o!=null&&d(e,["predictionsFormat"],o);const r=u(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);const s=u(t,["bigqueryUri"]);if(s!=null&&d(e,["bigqueryDestination","outputUri"],s),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function xl(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);const s=u(t,["metadata","state"]);s!=null&&d(e,["state"],My(s));const c=u(t,["metadata","createTime"]);c!=null&&d(e,["createTime"],c);const A=u(t,["metadata","endTime"]);A!=null&&d(e,["endTime"],A);const f=u(t,["metadata","updateTime"]);f!=null&&d(e,["updateTime"],f);const m=u(t,["metadata","model"]);m!=null&&d(e,["model"],m);const g=u(t,["metadata","output"]);return g!=null&&d(e,["dest"],oE(Iy(g))),e}function YA(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);const s=u(t,["state"]);s!=null&&d(e,["state"],My(s));const c=u(t,["error"]);c!=null&&d(e,["error"],c);const A=u(t,["createTime"]);A!=null&&d(e,["createTime"],A);const f=u(t,["startTime"]);f!=null&&d(e,["startTime"],f);const m=u(t,["endTime"]);m!=null&&d(e,["endTime"],m);const g=u(t,["updateTime"]);g!=null&&d(e,["updateTime"],g);const p=u(t,["model"]);p!=null&&d(e,["model"],p);const y=u(t,["inputConfig"]);y!=null&&d(e,["src"],sE(y));const S=u(t,["outputConfig"]);S!=null&&d(e,["dest"],rE(Iy(S)));const E=u(t,["completionStats"]);return E!=null&&d(e,["completionStats"],E),e}function sE(t){const e={},o=u(t,["instancesFormat"]);o!=null&&d(e,["format"],o);const r=u(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);const s=u(t,["bigquerySource","inputUri"]);return s!=null&&d(e,["bigqueryUri"],s),e}function lE(t,e){const o={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=u(e,["fileName"]);r!=null&&d(o,["fileName"],r);const s=u(e,["inlinedRequests"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>LE(t,A))),d(o,["requests","requests"],c)}return o}function cE(t){const e={},o=u(t,["format"]);o!=null&&d(e,["instancesFormat"],o);const r=u(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);const s=u(t,["bigqueryUri"]);if(s!=null&&d(e,["bigquerySource","inputUri"],s),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function uE(t){const e={},o=u(t,["data"]);if(o!=null&&d(e,["data"],o),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function AE(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],ai(t,r)),o}function dE(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],ai(t,r)),o}function gE(t){const e={},o=u(t,["content"]);o!=null&&d(e,["content"],o);const r=u(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],fE(r));const s=u(t,["tokenCount"]);s!=null&&d(e,["tokenCount"],s);const c=u(t,["finishReason"]);c!=null&&d(e,["finishReason"],c);const A=u(t,["avgLogprobs"]);A!=null&&d(e,["avgLogprobs"],A);const f=u(t,["groundingMetadata"]);f!=null&&d(e,["groundingMetadata"],f);const m=u(t,["index"]);m!=null&&d(e,["index"],m);const g=u(t,["logprobsResult"]);g!=null&&d(e,["logprobsResult"],g);const p=u(t,["safetyRatings"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(E=>E)),d(e,["safetyRatings"],S)}const y=u(t,["urlContextMetadata"]);return y!=null&&d(e,["urlContextMetadata"],y),e}function fE(t){const e={},o=u(t,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["citations"],r)}return e}function Py(t){const e={},o=u(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>VE(c))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function hE(t,e){const o={},r=u(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function mE(t,e){const o={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const s=u(t,["dest"]);return e!==void 0&&s!=null&&d(e,["outputConfig"],iE(aE(s))),o}function jp(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["src"]);s!=null&&d(o,["batch","inputConfig"],lE(t,xy(t,s)));const c=u(e,["config"]);return c!=null&&hE(c,o),o}function pE(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["model"],Vt(t,r));const s=u(e,["src"]);s!=null&&d(o,["inputConfig"],cE(xy(t,s)));const c=u(e,["config"]);return c!=null&&mE(c,o),o}function vE(t,e){const o={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),o}function yE(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["src"]);s!=null&&d(o,["batch","inputConfig"],kE(t,s));const c=u(e,["config"]);return c!=null&&vE(c,o),o}function SE(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],ai(t,r)),o}function CE(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],ai(t,r)),o}function TE(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);return c!=null&&d(e,["error"],c),e}function wE(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);return c!=null&&d(e,["error"],c),e}function EE(t,e){const o={},r=u(e,["contents"]);if(r!=null){let c=vd(t,r);Array.isArray(c)&&(c=c.map(A=>A)),d(o,["requests[]","request","content"],c)}const s=u(e,["config"]);return s!=null&&(d(o,["_self"],bE(s,o)),Cw(o,{"requests[].*":"requests[].request.*"})),o}function bE(t,e){const o={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const s=u(t,["title"]);e!==void 0&&s!=null&&d(e,["requests[]","title"],s);const c=u(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&d(e,["requests[]","outputDimensionality"],c),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function kE(t,e){const o={},r=u(e,["fileName"]);r!=null&&d(o,["file_name"],r);const s=u(e,["inlinedRequests"]);return s!=null&&d(o,["requests"],EE(t,s)),o}function xE(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function IE(t){const e={},o=u(t,["id"]);o!=null&&d(e,["id"],o);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ME(t){const e={},o=u(t,["allowedFunctionNames"]);o!=null&&d(e,["allowedFunctionNames"],o);const r=u(t,["mode"]);if(r!=null&&d(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function PE(t,e,o){const r={},s=u(e,["systemInstruction"]);o!==void 0&&s!=null&&d(o,["systemInstruction"],Py(Un(s)));const c=u(e,["temperature"]);c!=null&&d(r,["temperature"],c);const A=u(e,["topP"]);A!=null&&d(r,["topP"],A);const f=u(e,["topK"]);f!=null&&d(r,["topK"],f);const m=u(e,["candidateCount"]);m!=null&&d(r,["candidateCount"],m);const g=u(e,["maxOutputTokens"]);g!=null&&d(r,["maxOutputTokens"],g);const p=u(e,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const y=u(e,["responseLogprobs"]);y!=null&&d(r,["responseLogprobs"],y);const S=u(e,["logprobs"]);S!=null&&d(r,["logprobs"],S);const E=u(e,["presencePenalty"]);E!=null&&d(r,["presencePenalty"],E);const x=u(e,["frequencyPenalty"]);x!=null&&d(r,["frequencyPenalty"],x);const k=u(e,["seed"]);k!=null&&d(r,["seed"],k);const b=u(e,["responseMimeType"]);b!=null&&d(r,["responseMimeType"],b);const M=u(e,["responseSchema"]);M!=null&&d(r,["responseSchema"],yd(M));const O=u(e,["responseJsonSchema"]);if(O!=null&&d(r,["responseJsonSchema"],O),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=u(e,["safetySettings"]);if(o!==void 0&&N!=null){let U=N;Array.isArray(U)&&(U=U.map(X=>qE(X))),d(o,["safetySettings"],U)}const j=u(e,["tools"]);if(o!==void 0&&j!=null){let U=ni(j);Array.isArray(U)&&(U=U.map(X=>jE(ti(X)))),d(o,["tools"],U)}const L=u(e,["toolConfig"]);if(o!==void 0&&L!=null&&d(o,["toolConfig"],YE(L)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=u(e,["cachedContent"]);o!==void 0&&H!=null&&d(o,["cachedContent"],Za(t,H));const P=u(e,["responseModalities"]);P!=null&&d(r,["responseModalities"],P);const _=u(e,["mediaResolution"]);_!=null&&d(r,["mediaResolution"],_);const B=u(e,["speechConfig"]);if(B!=null&&d(r,["speechConfig"],Sd(B)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=u(e,["thinkingConfig"]);q!=null&&d(r,["thinkingConfig"],q);const Z=u(e,["imageConfig"]);Z!=null&&d(r,["imageConfig"],_E(Z));const ne=u(e,["enableEnhancedCivicAnswers"]);return ne!=null&&d(r,["enableEnhancedCivicAnswers"],ne),r}function RE(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(g=>gE(g))),d(e,["candidates"],m)}const s=u(t,["modelVersion"]);s!=null&&d(e,["modelVersion"],s);const c=u(t,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const A=u(t,["responseId"]);A!=null&&d(e,["responseId"],A);const f=u(t,["usageMetadata"]);return f!=null&&d(e,["usageMetadata"],f),e}function DE(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],ai(t,r)),o}function NE(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],ai(t,r)),o}function GE(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function BE(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function _E(t){const e={},o=u(t,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const r=u(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function LE(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["request","model"],Vt(t,r));const s=u(e,["contents"]);if(s!=null){let f=Aa(s);Array.isArray(f)&&(f=f.map(m=>Py(m))),d(o,["request","contents"],f)}const c=u(e,["metadata"]);c!=null&&d(o,["metadata"],c);const A=u(e,["config"]);return A!=null&&d(o,["request","generationConfig"],PE(t,A,u(o,["request"],{}))),o}function UE(t){const e={},o=u(t,["response"]);o!=null&&d(e,["response"],RE(o));const r=u(t,["error"]);return r!=null&&d(e,["error"],r),e}function zE(t,e){const o={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);if(e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function FE(t,e){const o={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);e!==void 0&&s!=null&&d(e,["_query","pageToken"],s);const c=u(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function KE(t){const e={},o=u(t,["config"]);return o!=null&&zE(o,e),e}function HE(t){const e={},o=u(t,["config"]);return o!=null&&FE(o,e),e}function QE(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["operations"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>xl(A))),d(e,["batchJobs"],c)}return e}function OE(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["batchPredictionJobs"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>YA(A))),d(e,["batchJobs"],c)}return e}function VE(t){const e={},o=u(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const c=u(t,["fileData"]);c!=null&&d(e,["fileData"],xE(c));const A=u(t,["functionCall"]);A!=null&&d(e,["functionCall"],IE(A));const f=u(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],uE(m));const g=u(t,["text"]);g!=null&&d(e,["text"],g);const p=u(t,["thought"]);p!=null&&d(e,["thought"],p);const y=u(t,["thoughtSignature"]);y!=null&&d(e,["thoughtSignature"],y);const S=u(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function qE(t){const e={},o=u(t,["category"]);if(o!=null&&d(e,["category"],o),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function YE(t){const e={},o=u(t,["retrievalConfig"]);o!=null&&d(e,["retrievalConfig"],o);const r=u(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],ME(r)),e}function jE(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(t,["computerUse"]);o!=null&&d(e,["computerUse"],o);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(t,["functionDeclarations"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(y=>y)),d(e,["functionDeclarations"],p)}const A=u(t,["googleMaps"]);A!=null&&d(e,["googleMaps"],GE(A));const f=u(t,["googleSearch"]);f!=null&&d(e,["googleSearch"],BE(f));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const g=u(t,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}var Xa;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Xa||(Xa={}));class rr{constructor(e,o,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,r,s)}init(e,o,r){var s,c;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let A={config:{}};!r||Object.keys(r).length===0?A={config:{}}:typeof r=="object"?A=Object.assign({},r):A=r,A.config&&(A.config.pageToken=o.nextPageToken),this.paramsInternal=A,this.pageInternalSize=(c=(s=A.config)===null||s===void 0?void 0:s.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class JE extends Wa{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new rr(Xa.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(e){const o=jp(this.apiClient,e),r=o._url,s=ze("{model}:batchGenerateContent",r),f=o.batch.inputConfig.requests,m=f.requests,g=[];for(const p of m){const y=Object.assign({},p);if(y.systemInstruction){const S=y.systemInstruction;delete y.systemInstruction;const E=y.request;E.systemInstruction=S,y.request=E}g.push(y)}return f.requests=g,delete o.config,delete o._url,delete o._query,{path:s,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const r=o?Object.assign({},o):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const c=this.getGcsUri(e),A=this.getBigqueryUri(e);if(c)c.endsWith(".jsonl")?r.dest=`${c.slice(0,-6)}/dest`:r.dest=`${c}_dest_${s}`;else if(A)r.dest=`${A}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=pE(this.apiClient,e);return f=ze("batchPredictionJobs",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A.then(p=>YA(p))}else{const g=jp(this.apiClient,e);return f=ze("{model}:batchGenerateContent",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A.then(p=>xl(p))}}async createEmbeddingsInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yE(this.apiClient,e);return c=ze("{model}:asyncBatchEmbedContent",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>xl(m))}}async get(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=NE(this.apiClient,e);return f=ze("batchPredictionJobs/{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A.then(p=>YA(p))}else{const g=DE(this.apiClient,e);return f=ze("batches/{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A.then(p=>xl(p))}}async cancel(e){var o,r,s,c;let A="",f={};if(this.apiClient.isVertexAI()){const m=dE(this.apiClient,e);A=ze("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:A,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const m=AE(this.apiClient,e);A=ze("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:A,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=HE(e);return f=ze("batchPredictionJobs",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=OE(p),S=new Op;return Object.assign(S,y),S})}else{const g=KE(e);return f=ze("batches",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=QE(p),S=new Op;return Object.assign(S,y),S})}}async delete(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=CE(this.apiClient,e);return f=ze("batchPredictionJobs/{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>wE(p))}else{const g=SE(this.apiClient,e);return f=ze("batches/{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>TE(p))}}}function XE(t){const e={},o=u(t,["data"]);if(o!=null&&d(e,["data"],o),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Jp(t){const e={},o=u(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>yb(c))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function WE(t,e){const o={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const s=u(t,["expireTime"]);e!==void 0&&s!=null&&d(e,["expireTime"],s);const c=u(t,["displayName"]);e!==void 0&&c!=null&&d(e,["displayName"],c);const A=u(t,["contents"]);if(e!==void 0&&A!=null){let p=Aa(A);Array.isArray(p)&&(p=p.map(y=>Jp(y))),d(e,["contents"],p)}const f=u(t,["systemInstruction"]);e!==void 0&&f!=null&&d(e,["systemInstruction"],Jp(Un(f)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(y=>Cb(y))),d(e,["tools"],p)}const g=u(t,["toolConfig"]);if(e!==void 0&&g!=null&&d(e,["toolConfig"],Sb(g)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function ZE(t,e){const o={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const s=u(t,["expireTime"]);e!==void 0&&s!=null&&d(e,["expireTime"],s);const c=u(t,["displayName"]);e!==void 0&&c!=null&&d(e,["displayName"],c);const A=u(t,["contents"]);if(e!==void 0&&A!=null){let y=Aa(A);Array.isArray(y)&&(y=y.map(S=>S)),d(e,["contents"],y)}const f=u(t,["systemInstruction"]);e!==void 0&&f!=null&&d(e,["systemInstruction"],Un(f));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(S=>Tb(S))),d(e,["tools"],y)}const g=u(t,["toolConfig"]);e!==void 0&&g!=null&&d(e,["toolConfig"],g);const p=u(t,["kmsKeyName"]);return e!==void 0&&p!=null&&d(e,["encryption_spec","kmsKeyName"],p),o}function $E(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["model"],vy(t,r));const s=u(e,["config"]);return s!=null&&WE(s,o),o}function eb(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["model"],vy(t,r));const s=u(e,["config"]);return s!=null&&ZE(s,o),o}function tb(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],Za(t,r)),o}function nb(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],Za(t,r)),o}function ab(t){const e={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function ob(t){const e={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function rb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function ib(t){const e={},o=u(t,["id"]);o!=null&&d(e,["id"],o);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sb(t){const e={},o=u(t,["allowedFunctionNames"]);o!=null&&d(e,["allowedFunctionNames"],o);const r=u(t,["mode"]);if(r!=null&&d(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lb(t){const e={},o=u(t,["description"]);o!=null&&d(e,["description"],o);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["parameters"]);s!=null&&d(e,["parameters"],s);const c=u(t,["parametersJsonSchema"]);c!=null&&d(e,["parametersJsonSchema"],c);const A=u(t,["response"]);A!=null&&d(e,["response"],A);const f=u(t,["responseJsonSchema"]);if(f!=null&&d(e,["responseJsonSchema"],f),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function cb(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],Za(t,r)),o}function ub(t,e){const o={},r=u(e,["name"]);return r!=null&&d(o,["_url","name"],Za(t,r)),o}function Ab(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function db(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function gb(t,e){const o={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),o}function fb(t,e){const o={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),o}function hb(t){const e={},o=u(t,["config"]);return o!=null&&gb(o,e),e}function mb(t){const e={},o=u(t,["config"]);return o!=null&&fb(o,e),e}function pb(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["cachedContents"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>A)),d(e,["cachedContents"],c)}return e}function vb(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["cachedContents"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>A)),d(e,["cachedContents"],c)}return e}function yb(t){const e={},o=u(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const c=u(t,["fileData"]);c!=null&&d(e,["fileData"],rb(c));const A=u(t,["functionCall"]);A!=null&&d(e,["functionCall"],ib(A));const f=u(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],XE(m));const g=u(t,["text"]);g!=null&&d(e,["text"],g);const p=u(t,["thought"]);p!=null&&d(e,["thought"],p);const y=u(t,["thoughtSignature"]);y!=null&&d(e,["thoughtSignature"],y);const S=u(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function Sb(t){const e={},o=u(t,["retrievalConfig"]);o!=null&&d(e,["retrievalConfig"],o);const r=u(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],sb(r)),e}function Cb(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(t,["computerUse"]);o!=null&&d(e,["computerUse"],o);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(t,["functionDeclarations"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(y=>y)),d(e,["functionDeclarations"],p)}const A=u(t,["googleMaps"]);A!=null&&d(e,["googleMaps"],Ab(A));const f=u(t,["googleSearch"]);f!=null&&d(e,["googleSearch"],db(f));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const g=u(t,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function Tb(t){const e={},o=u(t,["retrieval"]);o!=null&&d(e,["retrieval"],o);const r=u(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=u(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);const c=u(t,["enterpriseWebSearch"]);c!=null&&d(e,["enterpriseWebSearch"],c);const A=u(t,["functionDeclarations"]);if(A!=null){let y=A;Array.isArray(y)&&(y=y.map(S=>lb(S))),d(e,["functionDeclarations"],y)}const f=u(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],f);const m=u(t,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const g=u(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const p=u(t,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function wb(t,e){const o={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const s=u(t,["expireTime"]);return e!==void 0&&s!=null&&d(e,["expireTime"],s),o}function Eb(t,e){const o={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const s=u(t,["expireTime"]);return e!==void 0&&s!=null&&d(e,["expireTime"],s),o}function bb(t,e){const o={},r=u(e,["name"]);r!=null&&d(o,["_url","name"],Za(t,r));const s=u(e,["config"]);return s!=null&&wb(s,o),o}function kb(t,e){const o={},r=u(e,["name"]);r!=null&&d(o,["_url","name"],Za(t,r));const s=u(e,["config"]);return s!=null&&Eb(s,o),o}class xb extends Wa{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new rr(Xa.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(o),o)}async create(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=eb(this.apiClient,e);return f=ze("cachedContents",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A.then(p=>p)}else{const g=$E(this.apiClient,e);return f=ze("cachedContents",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A.then(p=>p)}}async get(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=ub(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A.then(p=>p)}else{const g=cb(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A.then(p=>p)}}async delete(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=nb(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=ob(p),S=new Hp;return Object.assign(S,y),S})}else{const g=tb(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=ab(p),S=new Hp;return Object.assign(S,y),S})}}async update(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=kb(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A.then(p=>p)}else{const g=bb(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A.then(p=>p)}}async listInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=mb(e);return f=ze("cachedContents",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=vb(p),S=new Qp;return Object.assign(S,y),S})}else{const g=hb(e);return f=ze("cachedContents",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=pb(p),S=new Qp;return Object.assign(S,y),S})}}}function Bl(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(o[r[s]]=t[r[s]]);return o}function Xp(t){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&t[e],r=0;if(o)return o.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(t){return this instanceof yt?(this.v=t,this):new yt(t)}function Sa(t,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o.apply(t,e||[]),s,c=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",A),s[Symbol.asyncIterator]=function(){return this},s;function A(E){return function(x){return Promise.resolve(x).then(E,y)}}function f(E,x){r[E]&&(s[E]=function(k){return new Promise(function(b,M){c.push([E,k,b,M])>1||m(E,k)})},x&&(s[E]=x(s[E])))}function m(E,x){try{g(r[E](x))}catch(k){S(c[0][3],k)}}function g(E){E.value instanceof yt?Promise.resolve(E.value.v).then(p,y):S(c[0][2],E)}function p(E){m("next",E)}function y(E){m("throw",E)}function S(E,x){E(x),c.shift(),c.length&&m(c[0][0],c[0][1])}}function Ca(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],o;return e?e.call(t):(t=typeof Xp=="function"?Xp(t):t[Symbol.iterator](),o={},r("next"),r("throw"),r("return"),o[Symbol.asyncIterator]=function(){return this},o);function r(c){o[c]=t[c]&&function(A){return new Promise(function(f,m){A=t[c](A),s(f,m,A.done,A.value)})}}function s(c,A,f,m){Promise.resolve(m).then(function(g){c({value:g,done:f})},A)}}function Ib(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const o=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:Ry(o)}function Ry(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Mb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wp(t){if(t===void 0||t.length===0)return[];const e=[],o=t.length;let r=0;for(;r<o;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let c=!0;for(;r<o&&t[r].role==="model";)s.push(t[r]),c&&!Ry(t[r])&&(c=!1),r++;c?e.push(...s):e.pop()}return e}class Pb{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new Rb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Rb{constructor(e,o,r,s={},c=[]){this.apiClient=e,this.modelsModule=o,this.model=r,this.config=s,this.history=c,this.sendPromise=Promise.resolve(),Mb(c)}async sendMessage(e){var o;await this.sendPromise;const r=Un(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var c,A,f;const m=await s,g=(A=(c=m.candidates)===null||c===void 0?void 0:c[0])===null||A===void 0?void 0:A.content,p=m.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let S=[];p!=null&&(S=(f=p.slice(y))!==null&&f!==void 0?f:[]);const E=g?[g]:[];this.recordHistory(r,E,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var o;await this.sendPromise;const r=Un(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const c=await s;return this.processStreamResponse(c,r)}getHistory(e=!1){const o=e?Wp(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){return Sa(this,arguments,function*(){var s,c,A,f,m,g;const p=[];try{for(var y=!0,S=Ca(e),E;E=yield yt(S.next()),s=E.done,!s;y=!0){f=E.value,y=!1;const x=f;if(Ib(x)){const k=(g=(m=x.candidates)===null||m===void 0?void 0:m[0])===null||g===void 0?void 0:g.content;k!==void 0&&p.push(k)}yield yield yt(x)}}catch(x){c={error:x}}finally{try{!y&&!s&&(A=S.return)&&(yield yt(A.call(S)))}finally{if(c)throw c.error}}this.recordHistory(o,p)})}recordHistory(e,o,r){let s=[];o.length>0&&o.every(c=>c.role!==void 0)?s=o:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Wp(r)):this.history.push(e),this.history.push(...s)}}let Dy=class Ny extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ny.prototype)}};function Db(t){const e={},o=u(t,["file"]);return o!=null&&d(e,["file"],o),e}function Nb(t){const e={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function Gb(t){const e={},o=u(t,["name"]);return o!=null&&d(e,["_url","file"],Ey(o)),e}function Bb(t){const e={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function _b(t){const e={},o=u(t,["name"]);return o!=null&&d(e,["_url","file"],Ey(o)),e}function Lb(t,e){const o={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),o}function Ub(t){const e={},o=u(t,["config"]);return o!=null&&Lb(o,e),e}function zb(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["files"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>A)),d(e,["files"],c)}return e}class Fb extends Wa{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new rr(Xa.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Ub(e);return c=ze("files",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const p=g;return p.sdkHttpResponse={headers:m.headers},p})),s.then(m=>{const g=zb(m),p=new Ow;return Object.assign(p,g),p})}}async createInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Db(e);return c=ze("upload/v1beta/files",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const g=Nb(m),p=new Vw;return Object.assign(p,g),p})}}async get(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_b(e);return c=ze("files/{file}",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Gb(e);return c=ze("files/{file}",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const p=g;return p.sdkHttpResponse={headers:m.headers},p})),s.then(m=>{const g=Bb(m),p=new qw;return Object.assign(p,g),p})}}}function Il(t){const e={},o=u(t,["data"]);if(o!=null&&d(e,["data"],o),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Kb(t){const e={},o=u(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>ak(c))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function Hb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Qb(t){const e={},o=u(t,["id"]);o!=null&&d(e,["id"],o);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ob(t){const e={},o=u(t,["description"]);o!=null&&d(e,["description"],o);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["parameters"]);s!=null&&d(e,["parameters"],s);const c=u(t,["parametersJsonSchema"]);c!=null&&d(e,["parametersJsonSchema"],c);const A=u(t,["response"]);A!=null&&d(e,["response"],A);const f=u(t,["responseJsonSchema"]);if(f!=null&&d(e,["responseJsonSchema"],f),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Vb(t){const e={},o=u(t,["modelSelectionConfig"]);o!=null&&d(e,["modelConfig"],o);const r=u(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);const s=u(t,["audioTimestamp"]);s!=null&&d(e,["audioTimestamp"],s);const c=u(t,["candidateCount"]);c!=null&&d(e,["candidateCount"],c);const A=u(t,["enableAffectiveDialog"]);A!=null&&d(e,["enableAffectiveDialog"],A);const f=u(t,["frequencyPenalty"]);f!=null&&d(e,["frequencyPenalty"],f);const m=u(t,["logprobs"]);m!=null&&d(e,["logprobs"],m);const g=u(t,["maxOutputTokens"]);g!=null&&d(e,["maxOutputTokens"],g);const p=u(t,["mediaResolution"]);p!=null&&d(e,["mediaResolution"],p);const y=u(t,["presencePenalty"]);y!=null&&d(e,["presencePenalty"],y);const S=u(t,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const E=u(t,["responseMimeType"]);E!=null&&d(e,["responseMimeType"],E);const x=u(t,["responseModalities"]);x!=null&&d(e,["responseModalities"],x);const k=u(t,["responseSchema"]);k!=null&&d(e,["responseSchema"],k);const b=u(t,["routingConfig"]);b!=null&&d(e,["routingConfig"],b);const M=u(t,["seed"]);M!=null&&d(e,["seed"],M);const O=u(t,["speechConfig"]);O!=null&&d(e,["speechConfig"],O);const N=u(t,["stopSequences"]);N!=null&&d(e,["stopSequences"],N);const j=u(t,["temperature"]);j!=null&&d(e,["temperature"],j);const L=u(t,["thinkingConfig"]);L!=null&&d(e,["thinkingConfig"],L);const H=u(t,["topK"]);H!=null&&d(e,["topK"],H);const P=u(t,["topP"]);if(P!=null&&d(e,["topP"],P),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function qb(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function Yb(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function jb(t,e){const o={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const c=u(t,["temperature"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","temperature"],c);const A=u(t,["topP"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","topP"],A);const f=u(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const g=u(t,["mediaResolution"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","mediaResolution"],g);const p=u(t,["seed"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","seed"],p);const y=u(t,["speechConfig"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","speechConfig"],Cd(y));const S=u(t,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const E=u(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const x=u(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],Kb(Un(x)));const k=u(t,["tools"]);if(e!==void 0&&k!=null){let H=ni(k);Array.isArray(H)&&(H=H.map(P=>rk(ti(P)))),d(e,["setup","tools"],H)}const b=u(t,["sessionResumption"]);e!==void 0&&b!=null&&d(e,["setup","sessionResumption"],ok(b));const M=u(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&d(e,["setup","inputAudioTranscription"],M);const O=u(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","outputAudioTranscription"],O);const N=u(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&d(e,["setup","realtimeInputConfig"],N);const j=u(t,["contextWindowCompression"]);e!==void 0&&j!=null&&d(e,["setup","contextWindowCompression"],j);const L=u(t,["proactivity"]);if(e!==void 0&&L!=null&&d(e,["setup","proactivity"],L),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function Jb(t,e){const o={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],Vb(r));const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const c=u(t,["temperature"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","temperature"],c);const A=u(t,["topP"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","topP"],A);const f=u(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const g=u(t,["mediaResolution"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","mediaResolution"],g);const p=u(t,["seed"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","seed"],p);const y=u(t,["speechConfig"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","speechConfig"],Cd(y));const S=u(t,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const E=u(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const x=u(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],Un(x));const k=u(t,["tools"]);if(e!==void 0&&k!=null){let P=ni(k);Array.isArray(P)&&(P=P.map(_=>ik(ti(_)))),d(e,["setup","tools"],P)}const b=u(t,["sessionResumption"]);e!==void 0&&b!=null&&d(e,["setup","sessionResumption"],b);const M=u(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&d(e,["setup","inputAudioTranscription"],M);const O=u(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","outputAudioTranscription"],O);const N=u(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&d(e,["setup","realtimeInputConfig"],N);const j=u(t,["contextWindowCompression"]);e!==void 0&&j!=null&&d(e,["setup","contextWindowCompression"],j);const L=u(t,["proactivity"]);e!==void 0&&L!=null&&d(e,["setup","proactivity"],L);const H=u(t,["explicitVadSignal"]);return e!==void 0&&H!=null&&d(e,["setup","explicitVadSignal"],H),o}function Xb(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["setup","model"],Vt(t,r));const s=u(e,["config"]);return s!=null&&d(o,["config"],jb(s,o)),o}function Wb(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["setup","model"],Vt(t,r));const s=u(e,["config"]);return s!=null&&d(o,["config"],Jb(s,o)),o}function Zb(t){const e={},o=u(t,["musicGenerationConfig"]);return o!=null&&d(e,["musicGenerationConfig"],o),e}function $b(t){const e={},o=u(t,["weightedPrompts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["weightedPrompts"],r)}return e}function ek(t){const e={},o=u(t,["media"]);if(o!=null){let g=yy(o);Array.isArray(g)&&(g=g.map(p=>Il(p))),d(e,["mediaChunks"],g)}const r=u(t,["audio"]);r!=null&&d(e,["audio"],Il(Cy(r)));const s=u(t,["audioStreamEnd"]);s!=null&&d(e,["audioStreamEnd"],s);const c=u(t,["video"]);c!=null&&d(e,["video"],Il(Sy(c)));const A=u(t,["text"]);A!=null&&d(e,["text"],A);const f=u(t,["activityStart"]);f!=null&&d(e,["activityStart"],f);const m=u(t,["activityEnd"]);return m!=null&&d(e,["activityEnd"],m),e}function tk(t){const e={},o=u(t,["media"]);if(o!=null){let g=yy(o);Array.isArray(g)&&(g=g.map(p=>p)),d(e,["mediaChunks"],g)}const r=u(t,["audio"]);r!=null&&d(e,["audio"],Cy(r));const s=u(t,["audioStreamEnd"]);s!=null&&d(e,["audioStreamEnd"],s);const c=u(t,["video"]);c!=null&&d(e,["video"],Sy(c));const A=u(t,["text"]);A!=null&&d(e,["text"],A);const f=u(t,["activityStart"]);f!=null&&d(e,["activityStart"],f);const m=u(t,["activityEnd"]);return m!=null&&d(e,["activityEnd"],m),e}function nk(t){const e={},o=u(t,["setupComplete"]);o!=null&&d(e,["setupComplete"],o);const r=u(t,["serverContent"]);r!=null&&d(e,["serverContent"],r);const s=u(t,["toolCall"]);s!=null&&d(e,["toolCall"],s);const c=u(t,["toolCallCancellation"]);c!=null&&d(e,["toolCallCancellation"],c);const A=u(t,["usageMetadata"]);A!=null&&d(e,["usageMetadata"],sk(A));const f=u(t,["goAway"]);f!=null&&d(e,["goAway"],f);const m=u(t,["sessionResumptionUpdate"]);m!=null&&d(e,["sessionResumptionUpdate"],m);const g=u(t,["voiceActivityDetectionSignal"]);return g!=null&&d(e,["voiceActivityDetectionSignal"],g),e}function ak(t){const e={},o=u(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const c=u(t,["fileData"]);c!=null&&d(e,["fileData"],Hb(c));const A=u(t,["functionCall"]);A!=null&&d(e,["functionCall"],Qb(A));const f=u(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],Il(m));const g=u(t,["text"]);g!=null&&d(e,["text"],g);const p=u(t,["thought"]);p!=null&&d(e,["thought"],p);const y=u(t,["thoughtSignature"]);y!=null&&d(e,["thoughtSignature"],y);const S=u(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function ok(t){const e={},o=u(t,["handle"]);if(o!=null&&d(e,["handle"],o),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rk(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(t,["computerUse"]);o!=null&&d(e,["computerUse"],o);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(t,["functionDeclarations"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(y=>y)),d(e,["functionDeclarations"],p)}const A=u(t,["googleMaps"]);A!=null&&d(e,["googleMaps"],qb(A));const f=u(t,["googleSearch"]);f!=null&&d(e,["googleSearch"],Yb(f));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const g=u(t,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function ik(t){const e={},o=u(t,["retrieval"]);o!=null&&d(e,["retrieval"],o);const r=u(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=u(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);const c=u(t,["enterpriseWebSearch"]);c!=null&&d(e,["enterpriseWebSearch"],c);const A=u(t,["functionDeclarations"]);if(A!=null){let y=A;Array.isArray(y)&&(y=y.map(S=>Ob(S))),d(e,["functionDeclarations"],y)}const f=u(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],f);const m=u(t,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const g=u(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const p=u(t,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function sk(t){const e={},o=u(t,["promptTokenCount"]);o!=null&&d(e,["promptTokenCount"],o);const r=u(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);const s=u(t,["candidatesTokenCount"]);s!=null&&d(e,["responseTokenCount"],s);const c=u(t,["toolUsePromptTokenCount"]);c!=null&&d(e,["toolUsePromptTokenCount"],c);const A=u(t,["thoughtsTokenCount"]);A!=null&&d(e,["thoughtsTokenCount"],A);const f=u(t,["totalTokenCount"]);f!=null&&d(e,["totalTokenCount"],f);const m=u(t,["promptTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(x=>x)),d(e,["promptTokensDetails"],E)}const g=u(t,["cacheTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(x=>x)),d(e,["cacheTokensDetails"],E)}const p=u(t,["candidatesTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(x=>x)),d(e,["responseTokensDetails"],E)}const y=u(t,["toolUsePromptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(x=>x)),d(e,["toolUsePromptTokensDetails"],E)}const S=u(t,["trafficType"]);return S!=null&&d(e,["trafficType"],S),e}function lk(t){const e={},o=u(t,["data"]);if(o!=null&&d(e,["data"],o),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function ck(t){const e={},o=u(t,["content"]);o!=null&&d(e,["content"],o);const r=u(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],uk(r));const s=u(t,["tokenCount"]);s!=null&&d(e,["tokenCount"],s);const c=u(t,["finishReason"]);c!=null&&d(e,["finishReason"],c);const A=u(t,["avgLogprobs"]);A!=null&&d(e,["avgLogprobs"],A);const f=u(t,["groundingMetadata"]);f!=null&&d(e,["groundingMetadata"],f);const m=u(t,["index"]);m!=null&&d(e,["index"],m);const g=u(t,["logprobsResult"]);g!=null&&d(e,["logprobsResult"],g);const p=u(t,["safetyRatings"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(E=>E)),d(e,["safetyRatings"],S)}const y=u(t,["urlContextMetadata"]);return y!=null&&d(e,["urlContextMetadata"],y),e}function uk(t){const e={},o=u(t,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["citations"],r)}return e}function Ak(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["contents"]);if(s!=null){let c=Aa(s);Array.isArray(c)&&(c=c.map(A=>A)),d(o,["contents"],c)}return o}function dk(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(c=>c)),d(e,["tokensInfo"],s)}return e}function gk(t){const e={},o=u(t,["values"]);o!=null&&d(e,["values"],o);const r=u(t,["statistics"]);return r!=null&&d(e,["statistics"],fk(r)),e}function fk(t){const e={},o=u(t,["truncated"]);o!=null&&d(e,["truncated"],o);const r=u(t,["token_count"]);return r!=null&&d(e,["tokenCount"],r),e}function Wl(t){const e={},o=u(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>wx(c))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function hk(t){const e={},o=u(t,["controlType"]);o!=null&&d(e,["controlType"],o);const r=u(t,["enableControlImageComputation"]);return r!=null&&d(e,["computeControl"],r),e}function mk(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function pk(t,e){const o={},r=u(t,["systemInstruction"]);e!==void 0&&r!=null&&d(e,["systemInstruction"],Un(r));const s=u(t,["tools"]);if(e!==void 0&&s!=null){let A=s;Array.isArray(A)&&(A=A.map(f=>Ly(f))),d(e,["tools"],A)}const c=u(t,["generationConfig"]);return e!==void 0&&c!=null&&d(e,["generationConfig"],lx(c)),o}function vk(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["contents"]);if(s!=null){let A=Aa(s);Array.isArray(A)&&(A=A.map(f=>Wl(f))),d(o,["contents"],A)}const c=u(e,["config"]);return c!=null&&mk(c),o}function yk(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["contents"]);if(s!=null){let A=Aa(s);Array.isArray(A)&&(A=A.map(f=>f)),d(o,["contents"],A)}const c=u(e,["config"]);return c!=null&&pk(c,o),o}function Sk(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["totalTokens"]);r!=null&&d(e,["totalTokens"],r);const s=u(t,["cachedContentTokenCount"]);return s!=null&&d(e,["cachedContentTokenCount"],s),e}function Ck(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["totalTokens"]);return r!=null&&d(e,["totalTokens"],r),e}function Tk(t,e){const o={},r=u(e,["model"]);return r!=null&&d(o,["_url","name"],Vt(t,r)),o}function wk(t,e){const o={},r=u(e,["model"]);return r!=null&&d(o,["_url","name"],Vt(t,r)),o}function Ek(t){const e={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function bk(t){const e={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function kk(t,e){const o={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const s=u(t,["negativePrompt"]);e!==void 0&&s!=null&&d(e,["parameters","negativePrompt"],s);const c=u(t,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const A=u(t,["aspectRatio"]);e!==void 0&&A!=null&&d(e,["parameters","aspectRatio"],A);const f=u(t,["guidanceScale"]);e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f);const m=u(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const g=u(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&d(e,["parameters","safetySetting"],g);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const y=u(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&d(e,["parameters","includeSafetyAttributes"],y);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const E=u(t,["language"]);e!==void 0&&E!=null&&d(e,["parameters","language"],E);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const k=u(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&d(e,["parameters","outputOptions","compressionQuality"],k);const b=u(t,["addWatermark"]);e!==void 0&&b!=null&&d(e,["parameters","addWatermark"],b);const M=u(t,["labels"]);e!==void 0&&M!=null&&d(e,["labels"],M);const O=u(t,["editMode"]);e!==void 0&&O!=null&&d(e,["parameters","editMode"],O);const N=u(t,["baseSteps"]);return e!==void 0&&N!=null&&d(e,["parameters","editConfig","baseSteps"],N),o}function xk(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["prompt"]);s!=null&&d(o,["instances[0]","prompt"],s);const c=u(e,["referenceImages"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Mx(m))),d(o,["instances[0]","referenceImages"],f)}const A=u(e,["config"]);return A!=null&&kk(A,o),o}function Ik(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(c=>Zl(c))),d(e,["generatedImages"],s)}return e}function Mk(t,e){const o={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const s=u(t,["title"]);e!==void 0&&s!=null&&d(e,["requests[]","title"],s);const c=u(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&d(e,["requests[]","outputDimensionality"],c),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Pk(t,e){const o={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["instances[]","task_type"],r);const s=u(t,["title"]);e!==void 0&&s!=null&&d(e,["instances[]","title"],s);const c=u(t,["outputDimensionality"]);e!==void 0&&c!=null&&d(e,["parameters","outputDimensionality"],c);const A=u(t,["mimeType"]);e!==void 0&&A!=null&&d(e,["instances[]","mimeType"],A);const f=u(t,["autoTruncate"]);return e!==void 0&&f!=null&&d(e,["parameters","autoTruncate"],f),o}function Rk(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["contents"]);if(s!=null){let f=vd(t,s);Array.isArray(f)&&(f=f.map(m=>m)),d(o,["requests[]","content"],f)}const c=u(e,["config"]);c!=null&&Mk(c,o);const A=u(e,["model"]);return A!==void 0&&d(o,["requests[]","model"],Vt(t,A)),o}function Dk(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["contents"]);if(s!=null){let A=vd(t,s);Array.isArray(A)&&(A=A.map(f=>f)),d(o,["instances[]","content"],A)}const c=u(e,["config"]);return c!=null&&Pk(c,o),o}function Nk(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["embeddings"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(A=>A)),d(e,["embeddings"],c)}const s=u(t,["metadata"]);return s!=null&&d(e,["metadata"],s),e}function Gk(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["predictions[]","embeddings"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(A=>gk(A))),d(e,["embeddings"],c)}const s=u(t,["metadata"]);return s!=null&&d(e,["metadata"],s),e}function Bk(t){const e={},o=u(t,["endpoint"]);o!=null&&d(e,["name"],o);const r=u(t,["deployedModelId"]);return r!=null&&d(e,["deployedModelId"],r),e}function _k(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Lk(t){const e={},o=u(t,["id"]);o!=null&&d(e,["id"],o);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Uk(t){const e={},o=u(t,["allowedFunctionNames"]);o!=null&&d(e,["allowedFunctionNames"],o);const r=u(t,["mode"]);if(r!=null&&d(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zk(t){const e={},o=u(t,["description"]);o!=null&&d(e,["description"],o);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["parameters"]);s!=null&&d(e,["parameters"],s);const c=u(t,["parametersJsonSchema"]);c!=null&&d(e,["parametersJsonSchema"],c);const A=u(t,["response"]);A!=null&&d(e,["response"],A);const f=u(t,["responseJsonSchema"]);if(f!=null&&d(e,["responseJsonSchema"],f),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Fk(t,e,o){const r={},s=u(e,["systemInstruction"]);o!==void 0&&s!=null&&d(o,["systemInstruction"],Wl(Un(s)));const c=u(e,["temperature"]);c!=null&&d(r,["temperature"],c);const A=u(e,["topP"]);A!=null&&d(r,["topP"],A);const f=u(e,["topK"]);f!=null&&d(r,["topK"],f);const m=u(e,["candidateCount"]);m!=null&&d(r,["candidateCount"],m);const g=u(e,["maxOutputTokens"]);g!=null&&d(r,["maxOutputTokens"],g);const p=u(e,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const y=u(e,["responseLogprobs"]);y!=null&&d(r,["responseLogprobs"],y);const S=u(e,["logprobs"]);S!=null&&d(r,["logprobs"],S);const E=u(e,["presencePenalty"]);E!=null&&d(r,["presencePenalty"],E);const x=u(e,["frequencyPenalty"]);x!=null&&d(r,["frequencyPenalty"],x);const k=u(e,["seed"]);k!=null&&d(r,["seed"],k);const b=u(e,["responseMimeType"]);b!=null&&d(r,["responseMimeType"],b);const M=u(e,["responseSchema"]);M!=null&&d(r,["responseSchema"],yd(M));const O=u(e,["responseJsonSchema"]);if(O!=null&&d(r,["responseJsonSchema"],O),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=u(e,["safetySettings"]);if(o!==void 0&&N!=null){let U=N;Array.isArray(U)&&(U=U.map(X=>Px(X))),d(o,["safetySettings"],U)}const j=u(e,["tools"]);if(o!==void 0&&j!=null){let U=ni(j);Array.isArray(U)&&(U=U.map(X=>Lx(ti(X)))),d(o,["tools"],U)}const L=u(e,["toolConfig"]);if(o!==void 0&&L!=null&&d(o,["toolConfig"],_x(L)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=u(e,["cachedContent"]);o!==void 0&&H!=null&&d(o,["cachedContent"],Za(t,H));const P=u(e,["responseModalities"]);P!=null&&d(r,["responseModalities"],P);const _=u(e,["mediaResolution"]);_!=null&&d(r,["mediaResolution"],_);const B=u(e,["speechConfig"]);if(B!=null&&d(r,["speechConfig"],Sd(B)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=u(e,["thinkingConfig"]);q!=null&&d(r,["thinkingConfig"],q);const Z=u(e,["imageConfig"]);Z!=null&&d(r,["imageConfig"],gx(Z));const ne=u(e,["enableEnhancedCivicAnswers"]);return ne!=null&&d(r,["enableEnhancedCivicAnswers"],ne),r}function Kk(t,e,o){const r={},s=u(e,["systemInstruction"]);o!==void 0&&s!=null&&d(o,["systemInstruction"],Un(s));const c=u(e,["temperature"]);c!=null&&d(r,["temperature"],c);const A=u(e,["topP"]);A!=null&&d(r,["topP"],A);const f=u(e,["topK"]);f!=null&&d(r,["topK"],f);const m=u(e,["candidateCount"]);m!=null&&d(r,["candidateCount"],m);const g=u(e,["maxOutputTokens"]);g!=null&&d(r,["maxOutputTokens"],g);const p=u(e,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const y=u(e,["responseLogprobs"]);y!=null&&d(r,["responseLogprobs"],y);const S=u(e,["logprobs"]);S!=null&&d(r,["logprobs"],S);const E=u(e,["presencePenalty"]);E!=null&&d(r,["presencePenalty"],E);const x=u(e,["frequencyPenalty"]);x!=null&&d(r,["frequencyPenalty"],x);const k=u(e,["seed"]);k!=null&&d(r,["seed"],k);const b=u(e,["responseMimeType"]);b!=null&&d(r,["responseMimeType"],b);const M=u(e,["responseSchema"]);M!=null&&d(r,["responseSchema"],yd(M));const O=u(e,["responseJsonSchema"]);O!=null&&d(r,["responseJsonSchema"],O);const N=u(e,["routingConfig"]);N!=null&&d(r,["routingConfig"],N);const j=u(e,["modelSelectionConfig"]);j!=null&&d(r,["modelConfig"],j);const L=u(e,["safetySettings"]);if(o!==void 0&&L!=null){let R=L;Array.isArray(R)&&(R=R.map(K=>K)),d(o,["safetySettings"],R)}const H=u(e,["tools"]);if(o!==void 0&&H!=null){let R=ni(H);Array.isArray(R)&&(R=R.map(K=>Ly(ti(K)))),d(o,["tools"],R)}const P=u(e,["toolConfig"]);o!==void 0&&P!=null&&d(o,["toolConfig"],P);const _=u(e,["labels"]);o!==void 0&&_!=null&&d(o,["labels"],_);const B=u(e,["cachedContent"]);o!==void 0&&B!=null&&d(o,["cachedContent"],Za(t,B));const q=u(e,["responseModalities"]);q!=null&&d(r,["responseModalities"],q);const Z=u(e,["mediaResolution"]);Z!=null&&d(r,["mediaResolution"],Z);const ne=u(e,["speechConfig"]);ne!=null&&d(r,["speechConfig"],Sd(ne));const U=u(e,["audioTimestamp"]);U!=null&&d(r,["audioTimestamp"],U);const X=u(e,["thinkingConfig"]);X!=null&&d(r,["thinkingConfig"],X);const F=u(e,["imageConfig"]);if(F!=null&&d(r,["imageConfig"],fx(F)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Zp(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["contents"]);if(s!=null){let A=Aa(s);Array.isArray(A)&&(A=A.map(f=>Wl(f))),d(o,["contents"],A)}const c=u(e,["config"]);return c!=null&&d(o,["generationConfig"],Fk(t,c,o)),o}function $p(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["contents"]);if(s!=null){let A=Aa(s);Array.isArray(A)&&(A=A.map(f=>f)),d(o,["contents"],A)}const c=u(e,["config"]);return c!=null&&d(o,["generationConfig"],Kk(t,c,o)),o}function ev(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(g=>ck(g))),d(e,["candidates"],m)}const s=u(t,["modelVersion"]);s!=null&&d(e,["modelVersion"],s);const c=u(t,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const A=u(t,["responseId"]);A!=null&&d(e,["responseId"],A);const f=u(t,["usageMetadata"]);return f!=null&&d(e,["usageMetadata"],f),e}function tv(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(p=>p)),d(e,["candidates"],g)}const s=u(t,["createTime"]);s!=null&&d(e,["createTime"],s);const c=u(t,["modelVersion"]);c!=null&&d(e,["modelVersion"],c);const A=u(t,["promptFeedback"]);A!=null&&d(e,["promptFeedback"],A);const f=u(t,["responseId"]);f!=null&&d(e,["responseId"],f);const m=u(t,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function Hk(t,e){const o={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const c=u(t,["guidanceScale"]);if(e!==void 0&&c!=null&&d(e,["parameters","guidanceScale"],c),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const A=u(t,["safetyFilterLevel"]);e!==void 0&&A!=null&&d(e,["parameters","safetySetting"],A);const f=u(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&d(e,["parameters","includeRaiReason"],g);const p=u(t,["language"]);e!==void 0&&p!=null&&d(e,["parameters","language"],p);const y=u(t,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const S=u(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&d(e,["parameters","outputOptions","compressionQuality"],S),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=u(t,["imageSize"]);if(e!==void 0&&E!=null&&d(e,["parameters","sampleImageSize"],E),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Qk(t,e){const o={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const s=u(t,["negativePrompt"]);e!==void 0&&s!=null&&d(e,["parameters","negativePrompt"],s);const c=u(t,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const A=u(t,["aspectRatio"]);e!==void 0&&A!=null&&d(e,["parameters","aspectRatio"],A);const f=u(t,["guidanceScale"]);e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f);const m=u(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const g=u(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&d(e,["parameters","safetySetting"],g);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const y=u(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&d(e,["parameters","includeSafetyAttributes"],y);const S=u(t,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const E=u(t,["language"]);e!==void 0&&E!=null&&d(e,["parameters","language"],E);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const k=u(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&d(e,["parameters","outputOptions","compressionQuality"],k);const b=u(t,["addWatermark"]);e!==void 0&&b!=null&&d(e,["parameters","addWatermark"],b);const M=u(t,["labels"]);e!==void 0&&M!=null&&d(e,["labels"],M);const O=u(t,["imageSize"]);e!==void 0&&O!=null&&d(e,["parameters","sampleImageSize"],O);const N=u(t,["enhancePrompt"]);return e!==void 0&&N!=null&&d(e,["parameters","enhancePrompt"],N),o}function Ok(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["prompt"]);s!=null&&d(o,["instances[0]","prompt"],s);const c=u(e,["config"]);return c!=null&&Hk(c,o),o}function Vk(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["prompt"]);s!=null&&d(o,["instances[0]","prompt"],s);const c=u(e,["config"]);return c!=null&&Qk(c,o),o}function qk(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(A=>ox(A))),d(e,["generatedImages"],c)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&d(e,["positivePromptSafetyAttributes"],By(s)),e}function Yk(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(A=>Zl(A))),d(e,["generatedImages"],c)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&d(e,["positivePromptSafetyAttributes"],_y(s)),e}function jk(t,e){const o={},r=u(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(t,["durationSeconds"]);if(e!==void 0&&s!=null&&d(e,["parameters","durationSeconds"],s),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const A=u(t,["resolution"]);e!==void 0&&A!=null&&d(e,["parameters","resolution"],A);const f=u(t,["personGeneration"]);if(e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=u(t,["negativePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","negativePrompt"],m);const g=u(t,["enhancePrompt"]);if(e!==void 0&&g!=null&&d(e,["parameters","enhancePrompt"],g),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=u(t,["lastFrame"]);e!==void 0&&p!=null&&d(e,["instances[0]","lastFrame"],$l(p));const y=u(t,["referenceImages"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>Xx(E))),d(e,["instances[0]","referenceImages"],S)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function Jk(t,e){const o={},r=u(t,["numberOfVideos"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const c=u(t,["fps"]);e!==void 0&&c!=null&&d(e,["parameters","fps"],c);const A=u(t,["durationSeconds"]);e!==void 0&&A!=null&&d(e,["parameters","durationSeconds"],A);const f=u(t,["seed"]);e!==void 0&&f!=null&&d(e,["parameters","seed"],f);const m=u(t,["aspectRatio"]);e!==void 0&&m!=null&&d(e,["parameters","aspectRatio"],m);const g=u(t,["resolution"]);e!==void 0&&g!=null&&d(e,["parameters","resolution"],g);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const y=u(t,["pubsubTopic"]);e!==void 0&&y!=null&&d(e,["parameters","pubsubTopic"],y);const S=u(t,["negativePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","negativePrompt"],S);const E=u(t,["enhancePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E);const x=u(t,["generateAudio"]);e!==void 0&&x!=null&&d(e,["parameters","generateAudio"],x);const k=u(t,["lastFrame"]);e!==void 0&&k!=null&&d(e,["instances[0]","lastFrame"],Ta(k));const b=u(t,["referenceImages"]);if(e!==void 0&&b!=null){let N=b;Array.isArray(N)&&(N=N.map(j=>Wx(j))),d(e,["instances[0]","referenceImages"],N)}const M=u(t,["mask"]);e!==void 0&&M!=null&&d(e,["instances[0]","mask"],Jx(M));const O=u(t,["compressionQuality"]);return e!==void 0&&O!=null&&d(e,["parameters","compressionQuality"],O),o}function Xk(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);c!=null&&d(e,["error"],c);const A=u(t,["response","generateVideoResponse"]);return A!=null&&d(e,["response"],ex(A)),e}function Wk(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);c!=null&&d(e,["error"],c);const A=u(t,["response"]);return A!=null&&d(e,["response"],tx(A)),e}function Zk(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["prompt"]);s!=null&&d(o,["instances[0]","prompt"],s);const c=u(e,["image"]);c!=null&&d(o,["instances[0]","image"],$l(c));const A=u(e,["video"]);A!=null&&d(o,["instances[0]","video"],Uy(A));const f=u(e,["source"]);f!=null&&nx(f,o);const m=u(e,["config"]);return m!=null&&jk(m,o),o}function $k(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["prompt"]);s!=null&&d(o,["instances[0]","prompt"],s);const c=u(e,["image"]);c!=null&&d(o,["instances[0]","image"],Ta(c));const A=u(e,["video"]);A!=null&&d(o,["instances[0]","video"],zy(A));const f=u(e,["source"]);f!=null&&ax(f,o);const m=u(e,["config"]);return m!=null&&Jk(m,o),o}function ex(t){const e={},o=u(t,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(A=>ix(A))),d(e,["generatedVideos"],c)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function tx(t){const e={},o=u(t,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(A=>sx(A))),d(e,["generatedVideos"],c)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function nx(t,e){const o={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const s=u(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],$l(s));const c=u(t,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],Uy(c)),o}function ax(t,e){const o={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const s=u(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],Ta(s));const c=u(t,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],zy(c)),o}function ox(t){const e={},o=u(t,["_self"]);o!=null&&d(e,["image"],hx(o));const r=u(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const s=u(t,["_self"]);return s!=null&&d(e,["safetyAttributes"],By(s)),e}function Zl(t){const e={},o=u(t,["_self"]);o!=null&&d(e,["image"],Gy(o));const r=u(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const s=u(t,["_self"]);s!=null&&d(e,["safetyAttributes"],_y(s));const c=u(t,["prompt"]);return c!=null&&d(e,["enhancedPrompt"],c),e}function rx(t){const e={},o=u(t,["_self"]);o!=null&&d(e,["mask"],Gy(o));const r=u(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(c=>c)),d(e,["labels"],s)}return e}function ix(t){const e={},o=u(t,["video"]);return o!=null&&d(e,["video"],Yx(o)),e}function sx(t){const e={},o=u(t,["_self"]);return o!=null&&d(e,["video"],jx(o)),e}function lx(t){const e={},o=u(t,["modelSelectionConfig"]);o!=null&&d(e,["modelConfig"],o);const r=u(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);const s=u(t,["audioTimestamp"]);s!=null&&d(e,["audioTimestamp"],s);const c=u(t,["candidateCount"]);c!=null&&d(e,["candidateCount"],c);const A=u(t,["enableAffectiveDialog"]);A!=null&&d(e,["enableAffectiveDialog"],A);const f=u(t,["frequencyPenalty"]);f!=null&&d(e,["frequencyPenalty"],f);const m=u(t,["logprobs"]);m!=null&&d(e,["logprobs"],m);const g=u(t,["maxOutputTokens"]);g!=null&&d(e,["maxOutputTokens"],g);const p=u(t,["mediaResolution"]);p!=null&&d(e,["mediaResolution"],p);const y=u(t,["presencePenalty"]);y!=null&&d(e,["presencePenalty"],y);const S=u(t,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const E=u(t,["responseMimeType"]);E!=null&&d(e,["responseMimeType"],E);const x=u(t,["responseModalities"]);x!=null&&d(e,["responseModalities"],x);const k=u(t,["responseSchema"]);k!=null&&d(e,["responseSchema"],k);const b=u(t,["routingConfig"]);b!=null&&d(e,["routingConfig"],b);const M=u(t,["seed"]);M!=null&&d(e,["seed"],M);const O=u(t,["speechConfig"]);O!=null&&d(e,["speechConfig"],O);const N=u(t,["stopSequences"]);N!=null&&d(e,["stopSequences"],N);const j=u(t,["temperature"]);j!=null&&d(e,["temperature"],j);const L=u(t,["thinkingConfig"]);L!=null&&d(e,["thinkingConfig"],L);const H=u(t,["topK"]);H!=null&&d(e,["topK"],H);const P=u(t,["topP"]);if(P!=null&&d(e,["topP"],P),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function cx(t,e){const o={},r=u(e,["model"]);return r!=null&&d(o,["_url","name"],Vt(t,r)),o}function ux(t,e){const o={},r=u(e,["model"]);return r!=null&&d(o,["_url","name"],Vt(t,r)),o}function Ax(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function dx(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function gx(t){const e={},o=u(t,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const r=u(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fx(t){const e={},o=u(t,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const r=u(t,["imageSize"]);r!=null&&d(e,["imageSize"],r);const s=u(t,["personGeneration"]);s!=null&&d(e,["personGeneration"],s);const c=u(t,["outputMimeType"]);c!=null&&d(e,["imageOutputOptions","mimeType"],c);const A=u(t,["outputCompressionQuality"]);return A!=null&&d(e,["imageOutputOptions","compressionQuality"],A),e}function hx(t){const e={},o=u(t,["bytesBase64Encoded"]);o!=null&&d(e,["imageBytes"],Io(o));const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Gy(t){const e={},o=u(t,["gcsUri"]);o!=null&&d(e,["gcsUri"],o);const r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["imageBytes"],Io(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function $l(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(t,["imageBytes"]);o!=null&&d(e,["bytesBase64Encoded"],Io(o));const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Ta(t){const e={},o=u(t,["gcsUri"]);o!=null&&d(e,["gcsUri"],o);const r=u(t,["imageBytes"]);r!=null&&d(e,["bytesBase64Encoded"],Io(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function mx(t,e,o){const r={},s=u(e,["pageSize"]);o!==void 0&&s!=null&&d(o,["_query","pageSize"],s);const c=u(e,["pageToken"]);o!==void 0&&c!=null&&d(o,["_query","pageToken"],c);const A=u(e,["filter"]);o!==void 0&&A!=null&&d(o,["_query","filter"],A);const f=u(e,["queryBase"]);return o!==void 0&&f!=null&&d(o,["_url","models_url"],by(t,f)),r}function px(t,e,o){const r={},s=u(e,["pageSize"]);o!==void 0&&s!=null&&d(o,["_query","pageSize"],s);const c=u(e,["pageToken"]);o!==void 0&&c!=null&&d(o,["_query","pageToken"],c);const A=u(e,["filter"]);o!==void 0&&A!=null&&d(o,["_query","filter"],A);const f=u(e,["queryBase"]);return o!==void 0&&f!=null&&d(o,["_url","models_url"],by(t,f)),r}function vx(t,e){const o={},r=u(e,["config"]);return r!=null&&mx(t,r,o),o}function yx(t,e){const o={},r=u(e,["config"]);return r!=null&&px(t,r,o),o}function Sx(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["_self"]);if(s!=null){let c=ky(s);Array.isArray(c)&&(c=c.map(A=>jA(A))),d(e,["models"],c)}return e}function Cx(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["_self"]);if(s!=null){let c=ky(s);Array.isArray(c)&&(c=c.map(A=>JA(A))),d(e,["models"],c)}return e}function Tx(t){const e={},o=u(t,["maskMode"]);o!=null&&d(e,["maskMode"],o);const r=u(t,["segmentationClasses"]);r!=null&&d(e,["maskClasses"],r);const s=u(t,["maskDilation"]);return s!=null&&d(e,["dilation"],s),e}function jA(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);const s=u(t,["description"]);s!=null&&d(e,["description"],s);const c=u(t,["version"]);c!=null&&d(e,["version"],c);const A=u(t,["_self"]);A!=null&&d(e,["tunedModelInfo"],Ux(A));const f=u(t,["inputTokenLimit"]);f!=null&&d(e,["inputTokenLimit"],f);const m=u(t,["outputTokenLimit"]);m!=null&&d(e,["outputTokenLimit"],m);const g=u(t,["supportedGenerationMethods"]);g!=null&&d(e,["supportedActions"],g);const p=u(t,["temperature"]);p!=null&&d(e,["temperature"],p);const y=u(t,["maxTemperature"]);y!=null&&d(e,["maxTemperature"],y);const S=u(t,["topP"]);S!=null&&d(e,["topP"],S);const E=u(t,["topK"]);E!=null&&d(e,["topK"],E);const x=u(t,["thinking"]);return x!=null&&d(e,["thinking"],x),e}function JA(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);const s=u(t,["description"]);s!=null&&d(e,["description"],s);const c=u(t,["versionId"]);c!=null&&d(e,["version"],c);const A=u(t,["deployedModels"]);if(A!=null){let y=A;Array.isArray(y)&&(y=y.map(S=>Bk(S))),d(e,["endpoints"],y)}const f=u(t,["labels"]);f!=null&&d(e,["labels"],f);const m=u(t,["_self"]);m!=null&&d(e,["tunedModelInfo"],zx(m));const g=u(t,["defaultCheckpointId"]);g!=null&&d(e,["defaultCheckpointId"],g);const p=u(t,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(S=>S)),d(e,["checkpoints"],y)}return e}function wx(t){const e={},o=u(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const c=u(t,["fileData"]);c!=null&&d(e,["fileData"],_k(c));const A=u(t,["functionCall"]);A!=null&&d(e,["functionCall"],Lk(A));const f=u(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],lk(m));const g=u(t,["text"]);g!=null&&d(e,["text"],g);const p=u(t,["thought"]);p!=null&&d(e,["thought"],p);const y=u(t,["thoughtSignature"]);y!=null&&d(e,["thoughtSignature"],y);const S=u(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function Ex(t){const e={},o=u(t,["productImage"]);return o!=null&&d(e,["image"],Ta(o)),e}function bx(t,e){const o={},r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const s=u(t,["baseSteps"]);e!==void 0&&s!=null&&d(e,["parameters","baseSteps"],s);const c=u(t,["outputGcsUri"]);e!==void 0&&c!=null&&d(e,["parameters","storageUri"],c);const A=u(t,["seed"]);e!==void 0&&A!=null&&d(e,["parameters","seed"],A);const f=u(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const g=u(t,["addWatermark"]);e!==void 0&&g!=null&&d(e,["parameters","addWatermark"],g);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);const y=u(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","compressionQuality"],y);const S=u(t,["enhancePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","enhancePrompt"],S);const E=u(t,["labels"]);return e!==void 0&&E!=null&&d(e,["labels"],E),o}function kx(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["source"]);s!=null&&Ix(s,o);const c=u(e,["config"]);return c!=null&&bx(c,o),o}function xx(t){const e={},o=u(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Zl(s))),d(e,["generatedImages"],r)}return e}function Ix(t,e){const o={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const s=u(t,["personImage"]);e!==void 0&&s!=null&&d(e,["instances[0]","personImage","image"],Ta(s));const c=u(t,["productImages"]);if(e!==void 0&&c!=null){let A=c;Array.isArray(A)&&(A=A.map(f=>Ex(f))),d(e,["instances[0]","productImages"],A)}return o}function Mx(t){const e={},o=u(t,["referenceImage"]);o!=null&&d(e,["referenceImage"],Ta(o));const r=u(t,["referenceId"]);r!=null&&d(e,["referenceId"],r);const s=u(t,["referenceType"]);s!=null&&d(e,["referenceType"],s);const c=u(t,["maskImageConfig"]);c!=null&&d(e,["maskImageConfig"],Tx(c));const A=u(t,["controlImageConfig"]);A!=null&&d(e,["controlImageConfig"],hk(A));const f=u(t,["styleImageConfig"]);f!=null&&d(e,["styleImageConfig"],f);const m=u(t,["subjectImageConfig"]);return m!=null&&d(e,["subjectImageConfig"],m),e}function By(t){const e={},o=u(t,["safetyAttributes","categories"]);o!=null&&d(e,["categories"],o);const r=u(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const s=u(t,["contentType"]);return s!=null&&d(e,["contentType"],s),e}function _y(t){const e={},o=u(t,["safetyAttributes","categories"]);o!=null&&d(e,["categories"],o);const r=u(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const s=u(t,["contentType"]);return s!=null&&d(e,["contentType"],s),e}function Px(t){const e={},o=u(t,["category"]);if(o!=null&&d(e,["category"],o),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function Rx(t){const e={},o=u(t,["image"]);return o!=null&&d(e,["image"],Ta(o)),e}function Dx(t,e){const o={},r=u(t,["mode"]);e!==void 0&&r!=null&&d(e,["parameters","mode"],r);const s=u(t,["maxPredictions"]);e!==void 0&&s!=null&&d(e,["parameters","maxPredictions"],s);const c=u(t,["confidenceThreshold"]);e!==void 0&&c!=null&&d(e,["parameters","confidenceThreshold"],c);const A=u(t,["maskDilation"]);e!==void 0&&A!=null&&d(e,["parameters","maskDilation"],A);const f=u(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&d(e,["parameters","binaryColorThreshold"],f);const m=u(t,["labels"]);return e!==void 0&&m!=null&&d(e,["labels"],m),o}function Nx(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["source"]);s!=null&&Bx(s,o);const c=u(e,["config"]);return c!=null&&Dx(c,o),o}function Gx(t){const e={},o=u(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>rx(s))),d(e,["generatedMasks"],r)}return e}function Bx(t,e){const o={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const s=u(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],Ta(s));const c=u(t,["scribbleImage"]);return e!==void 0&&c!=null&&d(e,["instances[0]","scribble"],Rx(c)),o}function _x(t){const e={},o=u(t,["retrievalConfig"]);o!=null&&d(e,["retrievalConfig"],o);const r=u(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],Uk(r)),e}function Lx(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(t,["computerUse"]);o!=null&&d(e,["computerUse"],o);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(t,["functionDeclarations"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(y=>y)),d(e,["functionDeclarations"],p)}const A=u(t,["googleMaps"]);A!=null&&d(e,["googleMaps"],Ax(A));const f=u(t,["googleSearch"]);f!=null&&d(e,["googleSearch"],dx(f));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const g=u(t,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function Ly(t){const e={},o=u(t,["retrieval"]);o!=null&&d(e,["retrieval"],o);const r=u(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=u(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);const c=u(t,["enterpriseWebSearch"]);c!=null&&d(e,["enterpriseWebSearch"],c);const A=u(t,["functionDeclarations"]);if(A!=null){let y=A;Array.isArray(y)&&(y=y.map(S=>zk(S))),d(e,["functionDeclarations"],y)}const f=u(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],f);const m=u(t,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const g=u(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const p=u(t,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function Ux(t){const e={},o=u(t,["baseModel"]);o!=null&&d(e,["baseModel"],o);const r=u(t,["createTime"]);r!=null&&d(e,["createTime"],r);const s=u(t,["updateTime"]);return s!=null&&d(e,["updateTime"],s),e}function zx(t){const e={},o=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(e,["baseModel"],o);const r=u(t,["createTime"]);r!=null&&d(e,["createTime"],r);const s=u(t,["updateTime"]);return s!=null&&d(e,["updateTime"],s),e}function Fx(t,e){const o={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const s=u(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);const c=u(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),o}function Kx(t,e){const o={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const s=u(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);const c=u(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),o}function Hx(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","name"],Vt(t,r));const s=u(e,["config"]);return s!=null&&Fx(s,o),o}function Qx(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["config"]);return s!=null&&Kx(s,o),o}function Ox(t,e){const o={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const s=u(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&d(e,["parameters","safetySetting"],s);const c=u(t,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);const A=u(t,["includeRaiReason"]);e!==void 0&&A!=null&&d(e,["parameters","includeRaiReason"],A);const f=u(t,["outputMimeType"]);e!==void 0&&f!=null&&d(e,["parameters","outputOptions","mimeType"],f);const m=u(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m);const g=u(t,["enhanceInputImage"]);e!==void 0&&g!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],g);const p=u(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const y=u(t,["labels"]);e!==void 0&&y!=null&&d(e,["labels"],y);const S=u(t,["numberOfImages"]);e!==void 0&&S!=null&&d(e,["parameters","sampleCount"],S);const E=u(t,["mode"]);return e!==void 0&&E!=null&&d(e,["parameters","mode"],E),o}function Vx(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["_url","model"],Vt(t,r));const s=u(e,["image"]);s!=null&&d(o,["instances[0]","image"],Ta(s));const c=u(e,["upscaleFactor"]);c!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],c);const A=u(e,["config"]);return A!=null&&Ox(A,o),o}function qx(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(c=>Zl(c))),d(e,["generatedImages"],s)}return e}function Yx(t){const e={},o=u(t,["uri"]);o!=null&&d(e,["uri"],o);const r=u(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],Io(r));const s=u(t,["encoding"]);return s!=null&&d(e,["mimeType"],s),e}function jx(t){const e={},o=u(t,["gcsUri"]);o!=null&&d(e,["uri"],o);const r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],Io(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Jx(t){const e={},o=u(t,["image"]);o!=null&&d(e,["_self"],Ta(o));const r=u(t,["maskMode"]);return r!=null&&d(e,["maskMode"],r),e}function Xx(t){const e={},o=u(t,["image"]);o!=null&&d(e,["image"],$l(o));const r=u(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function Wx(t){const e={},o=u(t,["image"]);o!=null&&d(e,["image"],Ta(o));const r=u(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function Uy(t){const e={},o=u(t,["uri"]);o!=null&&d(e,["uri"],o);const r=u(t,["videoBytes"]);r!=null&&d(e,["encodedVideo"],Io(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["encoding"],s),e}function zy(t){const e={},o=u(t,["uri"]);o!=null&&d(e,["gcsUri"],o);const r=u(t,["videoBytes"]);r!=null&&d(e,["bytesBase64Encoded"],Io(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Zx(t,e){const o={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["displayName"],r),o}function $x(t){const e={},o=u(t,["config"]);return o!=null&&Zx(o,e),e}function eI(t,e){const o={},r=u(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),o}function tI(t){const e={},o=u(t,["name"]);o!=null&&d(e,["_url","name"],o);const r=u(t,["config"]);return r!=null&&eI(r,e),e}function nI(t){const e={},o=u(t,["name"]);return o!=null&&d(e,["_url","name"],o),e}function aI(t,e){const o={},r=u(t,["customMetadata"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(A=>A)),d(e,["customMetadata"],c)}const s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),o}function oI(t){const e={},o=u(t,["name"]);o!=null&&d(e,["name"],o);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const c=u(t,["error"]);c!=null&&d(e,["error"],c);const A=u(t,["response"]);return A!=null&&d(e,["response"],iI(A)),e}function rI(t){const e={},o=u(t,["fileSearchStoreName"]);o!=null&&d(e,["_url","file_search_store_name"],o);const r=u(t,["fileName"]);r!=null&&d(e,["fileName"],r);const s=u(t,["config"]);return s!=null&&aI(s,e),e}function iI(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function sI(t,e){const o={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),o}function lI(t){const e={},o=u(t,["config"]);return o!=null&&sI(o,e),e}function cI(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["fileSearchStores"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>A)),d(e,["fileSearchStores"],c)}return e}function Fy(t,e){const o={},r=u(t,["mimeType"]);e!==void 0&&r!=null&&d(e,["mimeType"],r);const s=u(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const c=u(t,["customMetadata"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>m)),d(e,["customMetadata"],f)}const A=u(t,["chunkingConfig"]);return e!==void 0&&A!=null&&d(e,["chunkingConfig"],A),o}function uI(t){const e={},o=u(t,["fileSearchStoreName"]);o!=null&&d(e,["_url","file_search_store_name"],o);const r=u(t,["config"]);return r!=null&&Fy(r,e),e}function AI(t){const e={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}const dI="Content-Type",gI="X-Server-Timeout",fI="User-Agent",XA="x-goog-api-client",hI="1.35.0",mI=`google-genai-sdk/${hI}`,pI="v1beta1",vI="v1beta";class yI{constructor(e){var o,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:pI,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:vI,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,r){const s=[this.getRequestUrlInternal(o)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,o,r);if(e.queryParams)for(const[A,f]of Object.entries(e.queryParams))s.searchParams.append(A,String(f));let c={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=e.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,o,s.toString(),e.abortSignal),this.unaryApiCall(s,c,e.httpMethod)}patchHttpOptions(e,o){const r=JSON.parse(JSON.stringify(e));for(const[s,c]of Object.entries(o))typeof c=="object"?r[s]=Object.assign(Object.assign({},r[s]),c):c!==void 0&&(r[s]=c);return r}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,o,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let c={};return c.body=e.body,c=await this.includeExtraHttpOptionsToRequestInit(c,o,s.toString(),e.abortSignal),this.streamApiCall(s,c,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,r,s){if(o&&o.timeout||s){const c=new AbortController,A=c.signal;if(o.timeout&&o?.timeout>0){const f=setTimeout(()=>c.abort(),o.timeout);f&&typeof f.unref=="function"&&f.unref()}s&&s.addEventListener("abort",()=>{c.abort()}),e.signal=A}return o&&o.extraBody!==null&&SI(e,o.extraBody),e.headers=await this.getHeadersInternal(o,r),e}async unaryApiCall(e,o,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:r})).then(async s=>(await nv(s),new VA(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,o,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:r})).then(async s=>(await nv(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Sa(this,arguments,function*(){var r;const s=(r=e?.body)===null||r===void 0?void 0:r.getReader(),c=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let A="";const f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:g,value:p}=yield yt(s.read());if(g){if(A.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=c.decode(p,{stream:!0});try{const x=JSON.parse(y);if("error"in x){const k=JSON.parse(JSON.stringify(x.error)),b=k.status,M=k.code,O=`got status: ${b}. ${JSON.stringify(x)}`;if(M>=400&&M<600)throw new Dy({message:O,status:M})}}catch(x){if(x.name==="ApiError")throw x}A+=y;let S=-1,E=0;for(;;){S=-1,E=0;for(const b of m){const M=A.indexOf(b);M!==-1&&(S===-1||M<S)&&(S=M,E=b.length)}if(S===-1)break;const x=A.substring(0,S);A=A.substring(S+E);const k=x.trim();if(k.startsWith(f)){const b=k.substring(f.length).trim();try{const M=new Response(b,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield yt(new VA(M))}catch(M){throw new Error(`exception parsing stream chunk ${b}. ${M}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},o=mI+" "+this.clientOptions.userAgentExtra;return e[fI]=o,e[XA]=o,e[dI]="application/json",e}async getHeadersInternal(e,o){const r=new Headers;if(e&&e.headers){for(const[s,c]of Object.entries(e.headers))r.append(s,c);e.timeout&&e.timeout>0&&r.append(gI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,o),r}getFileName(e){var o;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(o=r.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),r}async uploadFile(e,o){var r;const s={};o!=null&&(s.mimeType=o.mimeType,s.name=o.name,s.displayName=o.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const c=this.clientOptions.uploader,A=await c.stat(e);s.sizeBytes=String(A.size);const f=(r=o?.mimeType)!==null&&r!==void 0?r:A.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=f;const m={file:s},g=this.getFileName(e),p=ze("upload/v1beta/files",m._url),y=await this.fetchUploadUrl(p,s.sizeBytes,s.mimeType,g,m,o?.httpOptions);return c.upload(e,y,this)}async uploadFileToFileSearchStore(e,o,r){var s;const c=this.clientOptions.uploader,A=await c.stat(o),f=String(A.size),m=(s=r?.mimeType)!==null&&s!==void 0?s:A.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const g=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(o),y={};r!=null&&Fy(r,y);const S=await this.fetchUploadUrl(g,f,m,p,y,r?.httpOptions);return c.uploadToFileSearchStore(o,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,r,s,c,A){var f;let m={};A?m=A:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const g=await this.request({path:e,body:JSON.stringify(c),httpMethod:"POST",httpOptions:m});if(!g||!g?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(f=g?.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function nv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const o=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw o>=400&&o<600?new Dy({message:s,status:o}):new Error(s)}}function SI(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof t.body=="string"&&t.body.length>0)try{const c=JSON.parse(t.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))o=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(c,A){const f=Object.assign({},c);for(const m in A)if(Object.prototype.hasOwnProperty.call(A,m)){const g=A[m],p=f[m];g&&typeof g=="object"&&!Array.isArray(g)&&p&&typeof p=="object"&&!Array.isArray(p)?f[m]=r(p,g):(p&&g&&typeof p!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof p}, New type: ${typeof g}. Overwriting.`),f[m]=g)}return f}const s=r(o,e);t.body=JSON.stringify(s)}const CI="mcp_used/unknown";let TI=!1;function Ky(t){for(const e of t)if(wI(e)||typeof e=="object"&&"inputSchema"in e)return!0;return TI}function Hy(t){var e;const o=(e=t[XA])!==null&&e!==void 0?e:"";t[XA]=(o+` ${CI}`).trimStart()}function wI(t){return t!==null&&typeof t=="object"&&t instanceof Td}function EI(t){return Sa(this,arguments,function*(o,r=100){let s,c=0;for(;c<r;){const A=yield yt(o.listTools({cursor:s}));for(const f of A.tools)yield yield yt(f),c++;if(!A.nextCursor)break;s=A.nextCursor}})}class Td{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Td(e,o)}async initialize(){var e,o,r,s;if(this.mcpTools.length>0)return;const c={},A=[];for(const p of this.mcpClients)try{for(var f=!0,m=(o=void 0,Ca(EI(p))),g;g=await m.next(),e=g.done,!e;f=!0){s=g.value,f=!1;const y=s;A.push(y);const S=y.name;if(c[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);c[S]=p}}catch(y){o={error:y}}finally{try{!f&&!e&&(r=m.return)&&await r.call(m)}finally{if(o)throw o.error}}this.mcpTools=A,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),nE(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const A=await s.callTool({name:r.name,arguments:r.args},void 0,c);o.push({functionResponse:{name:r.name,response:A.isError?{error:A}:A}})}return o}}async function bI(t,e,o){const r=new jw;let s;o.data instanceof Blob?s=JSON.parse(await o.data.text()):s=JSON.parse(o.data),Object.assign(r,s),e(r)}class kI{constructor(e,o,r){this.apiClient=e,this.auth=o,this.webSocketFactory=r}async connect(e){var o,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),A=MI(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${s}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${f}`;let g=()=>{};const p=new Promise(N=>{g=N}),y=e.callbacks,S=function(){g({})},E=this.apiClient,x={onopen:S,onmessage:N=>{bI(E,y.onmessage,N)},onerror:(o=y?.onerror)!==null&&o!==void 0?o:function(N){},onclose:(r=y?.onclose)!==null&&r!==void 0?r:function(N){}},k=this.webSocketFactory.create(m,II(A),x);k.connect(),await p;const O={setup:{model:Vt(this.apiClient,e.model)}};return k.send(JSON.stringify(O)),new xI(k,this.apiClient)}}class xI{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=$b(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=Zb(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Hr.PLAY)}pause(){this.sendPlaybackControl(Hr.PAUSE)}stop(){this.sendPlaybackControl(Hr.STOP)}resetContext(){this.sendPlaybackControl(Hr.RESET_CONTEXT)}close(){this.conn.close()}}function II(t){const e={};return t.forEach((o,r)=>{e[r]=o}),e}function MI(t){const e=new Headers;for(const[o,r]of Object.entries(t))e.append(o,r);return e}const PI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function RI(t,e,o){const r=new Yw;let s;o.data instanceof Blob?s=await o.data.text():o.data instanceof ArrayBuffer?s=new TextDecoder().decode(o.data):s=o.data;const c=JSON.parse(s);if(t.isVertexAI()){const A=nk(c);Object.assign(r,A)}else Object.assign(r,c);e(r)}class DI{constructor(e,o,r){this.apiClient=e,this.auth=o,this.webSocketFactory=r,this.music=new kI(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,r,s,c,A,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let p;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&Ky(e.config.tools)&&Hy(y);const S=_I(y);if(this.apiClient.isVertexAI())p=`${m}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,p);else{const B=this.apiClient.getApiKey();let q="BidiGenerateContent",Z="key";B?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),q="BidiGenerateContentConstrained",Z="access_token"),p=`${m}/ws/google.ai.generativelanguage.${g}.GenerativeService.${q}?${Z}=${B}`}let E=()=>{};const x=new Promise(B=>{E=B}),k=e.callbacks,b=function(){var B;(B=k?.onopen)===null||B===void 0||B.call(k),E({})},M=this.apiClient,O={onopen:b,onmessage:B=>{RI(M,k.onmessage,B)},onerror:(o=k?.onerror)!==null&&o!==void 0?o:function(B){},onclose:(r=k?.onclose)!==null&&r!==void 0?r:function(B){}},N=this.webSocketFactory.create(p,BI(S),O);N.connect(),await x;let j=Vt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const B=this.apiClient.getProject(),q=this.apiClient.getLocation();j=`projects/${B}/locations/${q}/`+j}let L={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ja.AUDIO]}:e.config.responseModalities=[Ja.AUDIO]),!((c=e.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(f=(A=e.config)===null||A===void 0?void 0:A.tools)!==null&&f!==void 0?f:[],P=[];for(const B of H)if(this.isCallableTool(B)){const q=B;P.push(await q.tool())}else P.push(B);P.length>0&&(e.config.tools=P);const _={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=Wb(this.apiClient,_):L=Xb(this.apiClient,_),delete L.config,N.send(JSON.stringify(L)),new GI(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const NI={turnComplete:!0};class GI{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let r=[];try{r=Aa(o.turns),e.isVertexAI()||(r=r.map(s=>Wl(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:r,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let r=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?r=o.functionResponses:r=[o.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const c of r){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!e.isVertexAI()&&!("id"in c))throw new Error(PI)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},NI),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:tk(e)}:o={realtimeInput:ek(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function BI(t){const e={};return t.forEach((o,r)=>{e[r]=o}),e}function _I(t){const e=new Headers;for(const[o,r]of Object.entries(t))e.append(o,r);return e}const av=10;function ov(t){var e,o,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const A of(o=t?.tools)!==null&&o!==void 0?o:[])if(Yr(A)){s=!0;break}if(!s)return!0;const c=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function Yr(t){return"callTool"in t&&typeof t.callTool=="function"}function LI(t){var e,o,r;return(r=(o=(e=t.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(s=>Yr(s)))!==null&&r!==void 0?r:!1}function rv(t){var e;const o=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(Yr(r))return;const c=r;c.functionDeclarations&&c.functionDeclarations.length>0&&o.push(s)}),o}function iv(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class UI extends Wa{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var r,s,c,A,f;const m=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!LI(o)||ov(o.config))return await this.generateContentInternal(m);const g=rv(o);if(g.length>0){const k=g.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let p,y;const S=Aa(m.contents),E=(c=(s=(r=m.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&c!==void 0?c:av;let x=0;for(;x<E&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const k=p.candidates[0].content,b=[];for(const M of(f=(A=o.config)===null||A===void 0?void 0:A.tools)!==null&&f!==void 0?f:[])if(Yr(M)){const N=await M.callTool(p.functionCalls);b.push(...N)}x++,y={role:"user",parts:b},m.contents=Aa(m.contents),m.contents.push(k),m.contents.push(y),iv(m.config)&&(S.push(k),S.push(y))}return iv(m.config)&&(p.automaticFunctionCallingHistory=S),p},this.generateContentStream=async o=>{var r,s,c,A,f;if(this.maybeMoveToResponseJsonSchem(o),ov(o.config)){const y=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(y)}const m=rv(o);if(m.length>0){const y=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const g=(c=(s=(r=o?.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,p=(f=(A=o?.config)===null||A===void 0?void 0:A.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(g&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(r=>{var s;let c;const A=[];if(r?.generatedImages)for(const m of r.generatedImages)m&&m?.safetyAttributes&&((s=m?.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?c=m?.safetyAttributes:A.push(m);let f;return c?f={generatedImages:A,positivePromptSafetyAttributes:c,sdkHttpResponse:r.sdkHttpResponse}:f={generatedImages:A,sdkHttpResponse:r.sdkHttpResponse},f}),this.list=async o=>{var r;const A={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!A.config.queryBase){if(!((r=A.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");A.config.filter="labels.tune-type:*"}return new rr(Xa.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(A),A)},this.editImage=async o=>{const r={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(r.referenceImages=o.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async o=>{let r={numberOfImages:1,mode:"upscale"};o.config&&(r=Object.assign(Object.assign({},r),o.config));const s={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async o=>{var r,s,c,A,f,m;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=o.video)===null||r===void 0)&&r.uri&&(!((s=o.video)===null||s===void 0)&&s.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((A=(c=o.source)===null||c===void 0?void 0:c.video)===null||A===void 0)&&A.uri&&(!((m=(f=o.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,r,s;const c=(o=e.config)===null||o===void 0?void 0:o.tools;if(!c)return e;const A=await Promise.all(c.map(async m=>Yr(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:A})};if(f.config.tools=A,e.config&&e.config.tools&&Ky(e.config.tools)){const m=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let g=Object.assign({},m);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),Hy(g),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return f}async initAfcToolsMap(e){var o,r,s;const c=new Map;for(const A of(r=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&r!==void 0?r:[])if(Yr(A)){const f=A,m=await f.tool();for(const g of(s=m.functionDeclarations)!==null&&s!==void 0?s:[]){if(!g.name)throw new Error("Function declaration name is required.");if(c.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);c.set(g.name,f)}}return c}async processAfcStream(e){var o,r,s;const c=(s=(r=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:av;let A=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(g,p,y){return Sa(this,arguments,function*(){for(var S,E,x,k,b,M;f<c;){A&&(f++,A=!1);const L=yield yt(g.processParamsMaybeAddMcpUsage(y)),H=yield yt(g.generateContentStreamInternal(L)),P=[],_=[];try{for(var O=!0,N=(E=void 0,Ca(H)),j;j=yield yt(N.next()),S=j.done,!S;O=!0){k=j.value,O=!1;const B=k;if(yield yield yt(B),B.candidates&&(!((b=B.candidates[0])===null||b===void 0)&&b.content)){_.push(B.candidates[0].content);for(const q of(M=B.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(f<c&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(q.functionCall.name)){const Z=yield yt(p.get(q.functionCall.name).callTool([q.functionCall]));P.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch(B){E={error:B}}finally{try{!O&&!S&&(x=N.return)&&(yield yt(x.call(N)))}finally{if(E)throw E.error}}if(P.length>0){A=!0;const B=new ji;B.candidates=[{content:{role:"user",parts:P}}],yield yield yt(B);const q=[];q.push(..._),q.push({role:"user",parts:P});const Z=Aa(y.contents).concat(q);y.contents=Z}else break}})})(this,m,e)}async generateContentInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=$p(this.apiClient,e);return f=ze("{model}:generateContent",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=tv(p),S=new ji;return Object.assign(S,y),S})}else{const g=Zp(this.apiClient,e);return f=ze("{model}:generateContent",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=ev(p),S=new ji;return Object.assign(S,y),S})}}async generateContentStreamInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=$p(this.apiClient,e);return f=ze("{model}:streamGenerateContent?alt=sse",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),A.then(function(y){return Sa(this,arguments,function*(){var S,E,x,k;try{for(var b=!0,M=Ca(y),O;O=yield yt(M.next()),S=O.done,!S;b=!0){k=O.value,b=!1;const N=k,j=tv(yield yt(N.json()));j.sdkHttpResponse={headers:N.headers};const L=new ji;Object.assign(L,j),yield yield yt(L)}}catch(N){E={error:N}}finally{try{!b&&!S&&(x=M.return)&&(yield yt(x.call(M)))}finally{if(E)throw E.error}}})})}else{const g=Zp(this.apiClient,e);return f=ze("{model}:streamGenerateContent?alt=sse",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}),A.then(function(y){return Sa(this,arguments,function*(){var S,E,x,k;try{for(var b=!0,M=Ca(y),O;O=yield yt(M.next()),S=O.done,!S;b=!0){k=O.value,b=!1;const N=k,j=ev(yield yt(N.json()));j.sdkHttpResponse={headers:N.headers};const L=new ji;Object.assign(L,j),yield yield yt(L)}}catch(N){E={error:N}}finally{try{!b&&!S&&(x=M.return)&&(yield yt(x.call(M)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=Dk(this.apiClient,e);return f=ze("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=Gk(p),S=new Bp;return Object.assign(S,y),S})}else{const g=Rk(this.apiClient,e);return f=ze("{model}:batchEmbedContents",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=Nk(p),S=new Bp;return Object.assign(S,y),S})}}async generateImagesInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=Vk(this.apiClient,e);return f=ze("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=Yk(p),S=new _p;return Object.assign(S,y),S})}else{const g=Ok(this.apiClient,e);return f=ze("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=qk(p),S=new _p;return Object.assign(S,y),S})}}async editImageInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI()){const f=xk(this.apiClient,e);return c=ze("{model}:predict",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const p=g;return p.sdkHttpResponse={headers:m.headers},p})),s.then(m=>{const g=Ik(m),p=new _w;return Object.assign(p,g),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI()){const f=Vx(this.apiClient,e);return c=ze("{model}:predict",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const p=g;return p.sdkHttpResponse={headers:m.headers},p})),s.then(m=>{const g=qx(m),p=new Lw;return Object.assign(p,g),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI()){const f=kx(this.apiClient,e);return c=ze("{model}:predict",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const g=xx(m),p=new Uw;return Object.assign(p,g),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI()){const f=Nx(this.apiClient,e);return c=ze("{model}:predict",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const g=Gx(m),p=new zw;return Object.assign(p,g),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=ux(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A.then(p=>JA(p))}else{const g=cx(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A.then(p=>jA(p))}}async listInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=yx(this.apiClient,e);return f=ze("{models_url}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=Cx(p),S=new Lp;return Object.assign(S,y),S})}else{const g=vx(this.apiClient,e);return f=ze("{models_url}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=Sx(p),S=new Lp;return Object.assign(S,y),S})}}async update(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=Qx(this.apiClient,e);return f=ze("{model}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A.then(p=>JA(p))}else{const g=Hx(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A.then(p=>jA(p))}}async delete(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=wk(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=bk(p),S=new Up;return Object.assign(S,y),S})}else{const g=Tk(this.apiClient,e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=Ek(p),S=new Up;return Object.assign(S,y),S})}}async countTokens(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=yk(this.apiClient,e);return f=ze("{model}:countTokens",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=Ck(p),S=new zp;return Object.assign(S,y),S})}else{const g=vk(this.apiClient,e);return f=ze("{model}:countTokens",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=Sk(p),S=new zp;return Object.assign(S,y),S})}}async computeTokens(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI()){const f=Ak(this.apiClient,e);return c=ze("{model}:computeTokens",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const p=g;return p.sdkHttpResponse={headers:m.headers},p})),s.then(m=>{const g=dk(m),p=new Fw;return Object.assign(p,g),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=$k(this.apiClient,e);return f=ze("{model}:predictLongRunning",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A.then(p=>{const y=Wk(p),S=new Nl;return Object.assign(S,y),S})}else{const g=Zk(this.apiClient,e);return f=ze("{model}:predictLongRunning",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A.then(p=>{const y=Xk(p),S=new Nl;return Object.assign(S,y),S})}}}class zI extends Wa{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,r=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let c;r&&"httpOptions"in r&&(c=r.httpOptions);const A=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:c}});return o._fromAPIResponse({apiResponse:A,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:o.name,config:r});return o._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const o=e.operation,r=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let c;r&&"httpOptions"in r&&(c=r.httpOptions);const A=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:c}});return o._fromAPIResponse({apiResponse:A,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:o.name,config:r});return o._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=Pw(e);return f=ze("{operationName}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),A}else{const g=Mw(e);return f=ze("{operationName}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json()),A}}async fetchPredictVideosOperationInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI()){const f=Tw(e);return c=ze("{resourceName}:fetchPredictOperation",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}function FI(t){const e={},o=u(t,["data"]);if(o!=null&&d(e,["data"],o),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function KI(t){const e={},o=u(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>XI(c))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function HI(t,e,o){const r={},s=u(e,["expireTime"]);o!==void 0&&s!=null&&d(o,["expireTime"],s);const c=u(e,["newSessionExpireTime"]);o!==void 0&&c!=null&&d(o,["newSessionExpireTime"],c);const A=u(e,["uses"]);o!==void 0&&A!=null&&d(o,["uses"],A);const f=u(e,["liveConnectConstraints"]);o!==void 0&&f!=null&&d(o,["bidiGenerateContentSetup"],JI(t,f));const m=u(e,["lockAdditionalFields"]);return o!==void 0&&m!=null&&d(o,["fieldMask"],m),r}function QI(t,e){const o={},r=u(e,["config"]);return r!=null&&d(o,["config"],HI(t,r,o)),o}function OI(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function VI(t){const e={},o=u(t,["id"]);o!=null&&d(e,["id"],o);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qI(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function YI(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function jI(t,e){const o={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const c=u(t,["temperature"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","temperature"],c);const A=u(t,["topP"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","topP"],A);const f=u(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const g=u(t,["mediaResolution"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","mediaResolution"],g);const p=u(t,["seed"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","seed"],p);const y=u(t,["speechConfig"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","speechConfig"],Cd(y));const S=u(t,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const E=u(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const x=u(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],KI(Un(x)));const k=u(t,["tools"]);if(e!==void 0&&k!=null){let H=ni(k);Array.isArray(H)&&(H=H.map(P=>ZI(ti(P)))),d(e,["setup","tools"],H)}const b=u(t,["sessionResumption"]);e!==void 0&&b!=null&&d(e,["setup","sessionResumption"],WI(b));const M=u(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&d(e,["setup","inputAudioTranscription"],M);const O=u(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","outputAudioTranscription"],O);const N=u(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&d(e,["setup","realtimeInputConfig"],N);const j=u(t,["contextWindowCompression"]);e!==void 0&&j!=null&&d(e,["setup","contextWindowCompression"],j);const L=u(t,["proactivity"]);if(e!==void 0&&L!=null&&d(e,["setup","proactivity"],L),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function JI(t,e){const o={},r=u(e,["model"]);r!=null&&d(o,["setup","model"],Vt(t,r));const s=u(e,["config"]);return s!=null&&d(o,["config"],jI(s,o)),o}function XI(t){const e={},o=u(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const c=u(t,["fileData"]);c!=null&&d(e,["fileData"],OI(c));const A=u(t,["functionCall"]);A!=null&&d(e,["functionCall"],VI(A));const f=u(t,["functionResponse"]);f!=null&&d(e,["functionResponse"],f);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],FI(m));const g=u(t,["text"]);g!=null&&d(e,["text"],g);const p=u(t,["thought"]);p!=null&&d(e,["thought"],p);const y=u(t,["thoughtSignature"]);y!=null&&d(e,["thoughtSignature"],y);const S=u(t,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function WI(t){const e={},o=u(t,["handle"]);if(o!=null&&d(e,["handle"],o),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ZI(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(t,["computerUse"]);o!=null&&d(e,["computerUse"],o);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(t,["functionDeclarations"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(y=>y)),d(e,["functionDeclarations"],p)}const A=u(t,["googleMaps"]);A!=null&&d(e,["googleMaps"],qI(A));const f=u(t,["googleSearch"]);f!=null&&d(e,["googleSearch"],YI(f));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const g=u(t,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function $I(t){const e=[];for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const r=t[o];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(c=>`${o}.${c}`);e.push(...s)}else e.push(o)}return e.join(",")}function eM(t,e){let o=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const c=r.setup;typeof c=="object"&&c!==null?(t.bidiGenerateContentSetup=c,o=c):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(o){const c=$I(o);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)c?t.fieldMask=c:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const A=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];s.length>0&&(f=s.map(g=>A.includes(g)?`generationConfig.${g}`:g));const m=[];c&&m.push(c),f.length>0&&m.push(...f),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class tM extends Wa{constructor(e){super(),this.apiClient=e}async create(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=QI(this.apiClient,e);c=ze("auth_tokens",f._url),A=f._query,delete f.config,delete f._url,delete f._query;const m=eM(f,e.config);return s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),s.then(g=>g)}}}function nM(t,e){const o={},r=u(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),o}function aM(t){const e={},o=u(t,["name"]);o!=null&&d(e,["_url","name"],o);const r=u(t,["config"]);return r!=null&&nM(r,e),e}function oM(t){const e={},o=u(t,["name"]);return o!=null&&d(e,["_url","name"],o),e}function rM(t,e){const o={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),o}function iM(t){const e={},o=u(t,["parent"]);o!=null&&d(e,["_url","parent"],o);const r=u(t,["config"]);return r!=null&&rM(r,e),e}function sM(t){const e={},o=u(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["documents"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(A=>A)),d(e,["documents"],c)}return e}class lM extends Wa{constructor(e){super(),this.apiClient=e,this.list=async o=>new rr(Xa.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:o.parent,config:r.config}),await this.listInternal(o),o)}async get(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=oM(e);return c=ze("{name}",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var o,r;let s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const A=aM(e);s=ze("{name}",A._url),c=A._query,delete A._url,delete A._query,await this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=iM(e);return c=ze("{parent}/documents",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const g=sM(m),p=new Kw;return Object.assign(p,g),p})}}}class cM extends Wa{constructor(e,o=new lM(e)){super(),this.apiClient=e,this.documents=o,this.list=async(r={})=>new rr(Xa.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$x(e);return c=ze("fileSearchStores",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async get(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nI(e);return c=ze("{name}",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var o,r;let s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const A=tI(e);s=ze("{name}",A._url),c=A._query,delete A._url,delete A._query,await this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=lI(e);return c=ze("fileSearchStores",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const g=cI(m),p=new Hw;return Object.assign(p,g),p})}}async uploadToFileSearchStoreInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uI(e);return c=ze("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const g=AI(m),p=new Qw;return Object.assign(p,g),p})}}async importFile(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rI(e);return c=ze("{file_search_store_name}:importFile",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const g=oI(m),p=new md;return Object.assign(p,g),p})}}}let Qy=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return Qy=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),o=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^o()&15>>+r/4).toString(16))};const uM=()=>Qy();function WA(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ZA=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class ha extends Error{}class Kn extends ha{constructor(e,o,r,s){super(`${Kn.makeMessage(e,o,r)}`),this.status=e,this.headers=s,this.error=o}static makeMessage(e,o,r){const s=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,o,r,s){if(!e||!s)return new ec({message:r,cause:ZA(o)});const c=o;return e===400?new Vy(e,c,r,s):e===401?new qy(e,c,r,s):e===403?new Yy(e,c,r,s):e===404?new jy(e,c,r,s):e===409?new Jy(e,c,r,s):e===422?new Xy(e,c,r,s):e===429?new Wy(e,c,r,s):e>=500?new Zy(e,c,r,s):new Kn(e,c,r,s)}}class $A extends Kn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ec extends Kn{constructor({message:e,cause:o}){super(void 0,void 0,e||"Connection error.",void 0),o&&(this.cause=o)}}class Oy extends ec{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Vy extends Kn{}class qy extends Kn{}class Yy extends Kn{}class jy extends Kn{}class Jy extends Kn{}class Xy extends Kn{}class Wy extends Kn{}class Zy extends Kn{}const AM=/^[a-z][a-z0-9+.-]*:/i,dM=t=>AM.test(t);let ed=t=>(ed=Array.isArray,ed(t));const gM=ed;let fM=gM;const sv=fM;function hM(t){if(!t)return!0;for(const e in t)return!1;return!0}function mM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const pM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ha(`${t} must be an integer`);if(e<0)throw new ha(`${t} must be a positive integer`);return e},vM=t=>{try{return JSON.parse(t)}catch{return}};const yM=t=>new Promise(e=>setTimeout(e,t));const Fr="0.0.1";function SM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const CM=()=>{var t,e,o,r,s;const c=SM();if(c==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":cv(Deno.build.os),"X-Stainless-Arch":lv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(c==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":cv((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":lv((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const A=TM();return A?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${A.browser}`,"X-Stainless-Runtime-Version":A.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function TM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:o}of t){const r=o.exec(navigator.userAgent);if(r){const s=r[1]||0,c=r[2]||0,A=r[3]||0;return{browser:e,version:`${s}.${c}.${A}`}}}return null}const lv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",cv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let yl;const wM=()=>yl??(yl=CM());function EM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function $y(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function bM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return $y({start(){},async pull(o){const{done:r,value:s}=await e.next();r?o.close():o.enqueue(s)},async cancel(){var o;await((o=e.return)===null||o===void 0?void 0:o.call(e))}})}function e0(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const o=await e.read();return o?.done&&e.releaseLock(),o}catch(o){throw e.releaseLock(),o}},async return(){const o=e.cancel();return e.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function kM(t){var e,o;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((o=(e=t[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}const xM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const t0=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,o=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function EA(t,e,o){return t0(),new File(t,e??"unknown_file",o)}function IM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const MM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const n0=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",PM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&n0(t),RM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function DM(t,e,o){if(t0(),t=await t,PM(t))return t instanceof File?t:EA([await t.arrayBuffer()],t.name);if(RM(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),EA(await td(s),e,o)}const r=await td(t);if(e||(e=IM(t)),!o?.type){const s=r.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof s=="string"&&(o=Object.assign(Object.assign({},o),{type:s}))}return EA(r,e,o)}async function td(t){var e,o,r,s,c;let A=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)A.push(t);else if(n0(t))A.push(t instanceof Blob?t:await t.arrayBuffer());else if(MM(t))try{for(var f=!0,m=Ca(t),g;g=await m.next(),e=g.done,!e;f=!0){s=g.value,f=!1;const p=s;A.push(...await td(p))}}catch(p){o={error:p}}finally{try{!f&&!e&&(r=m.return)&&await r.call(m)}finally{if(o)throw o.error}}else{const p=(c=t?.constructor)===null||c===void 0?void 0:c.name;throw new Error(`Unexpected data type: ${typeof t}${p?`; constructor: ${p}`:""}${NM(t)}`)}return A}function NM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(o=>`"${o}"`).join(", ")}]`}class a0{constructor(e){this._client=e}}a0._key=[];function o0(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const uv=Object.freeze(Object.create(null)),GM=(t=o0)=>(function(o,...r){if(o.length===1)return o[0];let s=!1;const c=[],A=o.reduce((p,y,S)=>{var E,x,k;/[?#]/.test(y)&&(s=!0);const b=r[S];let M=(s?encodeURIComponent:t)(""+b);return S!==r.length&&(b==null||typeof b=="object"&&b.toString===((k=Object.getPrototypeOf((x=Object.getPrototypeOf((E=b.hasOwnProperty)!==null&&E!==void 0?E:uv))!==null&&x!==void 0?x:uv))===null||k===void 0?void 0:k.toString))&&(M=b+"",c.push({start:p.length+y.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),p+y+(S===r.length?"":M)},""),f=A.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let g;for(;(g=m.exec(f))!==null;)c.push({start:g.index,length:g[0].length,error:`Value "${g[0]}" can't be safely passed as a path parameter`});if(c.sort((p,y)=>p.start-y.start),c.length>0){let p=0;const y=c.reduce((S,E)=>{const x=" ".repeat(E.start-p),k="^".repeat(E.length);return p=E.start+E.length,S+x+k},"");throw new ha(`Path parameters result in path with invalid segments:
${c.map(S=>S.error).join(`
`)}
${A}
${y}`)}return A}),Sl=GM(o0);class r0 extends a0{create(e,o){var r;const{api_version:s=this._client.apiVersion}=e,c=Bl(e,["api_version"]);if("model"in c&&"agent_config"in c)throw new ha("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in c&&"generation_config"in c)throw new ha("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Sl`/${s}/interactions`,Object.assign(Object.assign({body:c},o),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,o={},r){const{api_version:s=this._client.apiVersion}=o??{};return this._client.delete(Sl`/${s}/interactions/${e}`,r)}cancel(e,o={},r){const{api_version:s=this._client.apiVersion}=o??{};return this._client.post(Sl`/${s}/interactions/${e}/cancel`,r)}get(e,o={},r){var s;const c=o??{},{api_version:A=this._client.apiVersion}=c,f=Bl(c,["api_version"]);return this._client.get(Sl`/${A}/interactions/${e}`,Object.assign(Object.assign({query:f},r),{stream:(s=o?.stream)!==null&&s!==void 0?s:!1}))}}r0._key=Object.freeze(["interactions"]);class i0 extends r0{}function BM(t){let e=0;for(const s of t)e+=s.length;const o=new Uint8Array(e);let r=0;for(const s of t)o.set(s,r),r+=s.length;return o}let Cl;function wd(t){let e;return(Cl??(e=new globalThis.TextEncoder,Cl=e.encode.bind(e)))(t)}let Tl;function Av(t){let e;return(Tl??(e=new globalThis.TextDecoder,Tl=e.decode.bind(e)))(t)}class tc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const o=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?wd(e):e;this.buffer=BM([this.buffer,o]);const r=[];let s;for(;(s=_M(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(Av(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const c=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,A=Av(this.buffer.subarray(0,c));r.push(A),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}tc.NEWLINE_CHARS=new Set([`
`,"\r"]);tc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _M(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function LM(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const _l={off:0,error:200,warn:300,info:400,debug:500},dv=(t,e,o)=>{if(t){if(mM(_l,t))return t;Fn(o).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(_l))}`)}};function Xi(){}function wl(t,e,o){return!e||_l[t]>_l[o]?Xi:e[t].bind(e)}const UM={error:Xi,warn:Xi,info:Xi,debug:Xi};let gv=new WeakMap;function Fn(t){var e;const o=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!o)return UM;const s=gv.get(o);if(s&&s[0]===r)return s[1];const c={error:wl("error",o,r),warn:wl("warn",o,r),info:wl("info",o,r),debug:wl("debug",o,r)};return gv.set(o,[r,c]),c}const Xo=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,o])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class Qr{constructor(e,o,r){this.iterator=e,this.controller=o,this.client=r}static fromSSEResponse(e,o,r){let s=!1;const c=r?Fn(r):console;function A(){return Sa(this,arguments,function*(){var m,g,p,y;if(s)throw new ha("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var E=!0,x=Ca(zM(e,o)),k;k=yield yt(x.next()),m=k.done,!m;E=!0){y=k.value,E=!1;const b=y;if(!S)if(b.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield yt(JSON.parse(b.data))}catch(M){throw c.error("Could not parse message into JSON:",b.data),c.error("From chunk:",b.raw),M}}}catch(b){g={error:b}}finally{try{!E&&!m&&(p=x.return)&&(yield yt(p.call(x)))}finally{if(g)throw g.error}}S=!0}catch(b){if(WA(b))return yield yt(void 0);throw b}finally{S||o.abort()}})}return new Qr(A,o,r)}static fromReadableStream(e,o,r){let s=!1;function c(){return Sa(this,arguments,function*(){var m,g,p,y;const S=new tc,E=e0(e);try{for(var x=!0,k=Ca(E),b;b=yield yt(k.next()),m=b.done,!m;x=!0){y=b.value,x=!1;const M=y;for(const O of S.decode(M))yield yield yt(O)}}catch(M){g={error:M}}finally{try{!x&&!m&&(p=k.return)&&(yield yt(p.call(k)))}finally{if(g)throw g.error}}for(const M of S.flush())yield yield yt(M)})}function A(){return Sa(this,arguments,function*(){var m,g,p,y;if(s)throw new ha("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var E=!0,x=Ca(c()),k;k=yield yt(x.next()),m=k.done,!m;E=!0){y=k.value,E=!1;const b=y;S||b&&(yield yield yt(JSON.parse(b)))}}catch(b){g={error:b}}finally{try{!E&&!m&&(p=x.return)&&(yield yt(p.call(x)))}finally{if(g)throw g.error}}S=!0}catch(b){if(WA(b))return yield yt(void 0);throw b}finally{S||o.abort()}})}return new Qr(A,o,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],o=[],r=this.iterator(),s=c=>({next:()=>{if(c.length===0){const A=r.next();e.push(A),o.push(A)}return c.shift()}});return[new Qr(()=>s(e),this.controller,this.client),new Qr(()=>s(o),this.controller,this.client)]}toReadableStream(){const e=this;let o;return $y({async start(){o=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:c}=await o.next();if(c)return r.close();const A=wd(JSON.stringify(s)+`
`);r.enqueue(A)}catch(s){r.error(s)}},async cancel(){var r;await((r=o.return)===null||r===void 0?void 0:r.call(o))}})}}function zM(t,e){return Sa(this,arguments,function*(){var r,s,c,A;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ha("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ha("Attempted to iterate over a response with no body");const f=new KM,m=new tc,g=e0(t.body);try{for(var p=!0,y=Ca(FM(g)),S;S=yield yt(y.next()),r=S.done,!r;p=!0){A=S.value,p=!1;const E=A;for(const x of m.decode(E)){const k=f.decode(x);k&&(yield yield yt(k))}}}catch(E){s={error:E}}finally{try{!p&&!r&&(c=y.return)&&(yield yt(c.call(y)))}finally{if(s)throw s.error}}for(const E of m.flush()){const x=f.decode(E);x&&(yield yield yt(x))}})}function FM(t){return Sa(this,arguments,function*(){var o,r,s,c;let A=new Uint8Array;try{for(var f=!0,m=Ca(t),g;g=yield yt(m.next()),o=g.done,!o;f=!0){c=g.value,f=!1;const p=c;if(p==null)continue;const y=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?wd(p):p;let S=new Uint8Array(A.length+y.length);S.set(A),S.set(y,A.length),A=S;let E;for(;(E=LM(A))!==-1;)yield yield yt(A.slice(0,E)),A=A.slice(E)}}catch(p){r={error:p}}finally{try{!f&&!o&&(s=m.return)&&(yield yt(s.call(m)))}finally{if(r)throw r.error}}A.length>0&&(yield yield yt(A))})}class KM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[o,r,s]=HM(e,":");return s.startsWith(" ")&&(s=s.substring(1)),o==="event"?this.event=s:o==="data"&&this.data.push(s),null}}function HM(t,e){const o=t.indexOf(e);return o!==-1?[t.substring(0,o),e,t.substring(o+e.length)]:[t,"",""]}async function QM(t,e){const{response:o,requestLogID:r,retryOfRequestLogID:s,startTime:c}=e,A=await(async()=>{var f;if(e.options.stream)return Fn(t).debug("response",o.status,o.url,o.headers,o.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(o,e.controller,t):Qr.fromSSEResponse(o,e.controller,t);if(o.status===204)return null;if(e.options.__binaryResponse)return o;const m=o.headers.get("content-type"),g=(f=m?.split(";")[0])===null||f===void 0?void 0:f.trim();return g?.includes("application/json")||g?.endsWith("+json")?await o.json():await o.text()})();return Fn(t).debug(`[${r}] response parsed`,Xo({retryOfRequestLogID:s,url:o.url,status:o.status,body:A,durationMs:Date.now()-c})),A}class Ed extends Promise{constructor(e,o,r=QM){super(s=>{s(null)}),this.responsePromise=o,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Ed(this.client,this.responsePromise,async(o,r)=>e(await this.parseResponse(o,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,o){return this.parse().then(e,o)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const s0=Symbol("brand.privateNullableHeaders");function*OM(t){if(!t)return;if(s0 in t){const{values:r,nulls:s}=t;yield*r.entries();for(const c of s)yield[c,null];return}let e=!1,o;t instanceof Headers?o=t.entries():sv(t)?o=t:(e=!0,o=Object.entries(t??{}));for(let r of o){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const c=sv(r[1])?r[1]:[r[1]];let A=!1;for(const f of c)f!==void 0&&(e&&!A&&(A=!0,yield[s,null]),yield[s,f])}}const Ji=t=>{const e=new Headers,o=new Set;for(const r of t){const s=new Set;for(const[c,A]of OM(r)){const f=c.toLowerCase();s.has(f)||(e.delete(c),s.add(f)),A===null?(e.delete(c),o.add(f)):(e.append(c,A),o.delete(f))}}return{[s0]:!0,values:e,nulls:o}};const bA=t=>{var e,o,r,s,c,A;if(typeof globalThis.process<"u")return(r=(o=(e=mw)===null||e===void 0?void 0:e[t])===null||o===void 0?void 0:o.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(A=(c=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||c===void 0?void 0:c.call(s,t))===null||A===void 0?void 0:A.trim()};var l0;class nc{constructor(e){var o,r,s,c,A,f,m,{baseURL:g=bA("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(o=bA("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:y="v1beta"}=e,S=Bl(e,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:p,apiVersion:y},S),{baseURL:g||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(r=E.timeout)!==null&&r!==void 0?r:nc.DEFAULT_TIMEOUT,this.logger=(s=E.logger)!==null&&s!==void 0?s:console;const x="warn";this.logLevel=x,this.logLevel=(A=(c=dv(E.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:dv(bA("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&A!==void 0?A:x,this.fetchOptions=E.fetchOptions,this.maxRetries=(f=E.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(m=E.fetch)!==null&&m!==void 0?m:EM(),this.encoder=xM,this._options=E,this.apiKey=p,this.apiVersion=y,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:o}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const o=Ji([e.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Ji([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ji([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([o,r])=>typeof r<"u").map(([o,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(o)}=`;throw new ha(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Fr}`}defaultIdempotencyKey(){return`stainless-node-retry-${uM()}`}makeStatusError(e,o,r,s){return Kn.generate(e,o,r,s)}buildURL(e,o,r){const s=!this.baseURLOverridden()&&r||this.baseURL,c=dM(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),A=this.defaultQuery();return hM(A)||(o=Object.assign(Object.assign({},A),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(c.search=this.stringifyQuery(o)),c.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const o=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(e,{url:o,options:r}){}get(e,o){return this.methodRequest("get",e,o)}post(e,o){return this.methodRequest("post",e,o)}patch(e,o){return this.methodRequest("patch",e,o)}put(e,o){return this.methodRequest("put",e,o)}delete(e,o){return this.methodRequest("delete",e,o)}methodRequest(e,o,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:o},s)))}request(e,o=null){return new Ed(this,this.makeRequest(e,o,void 0))}async makeRequest(e,o,r){var s,c,A;const f=await e,m=(s=f.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o==null&&(o=m),await this.prepareOptions(f);const{req:g,url:p,timeout:y}=await this.buildRequest(f,{retryCount:m-o});await this.prepareRequest(g,{url:p,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=r===void 0?"":`, retryOf: ${r}`,x=Date.now();if(Fn(this).debug(`[${S}] sending request`,Xo({retryOfRequestLogID:r,method:f.method,url:p,options:f,headers:g.headers})),!((c=f.signal)===null||c===void 0)&&c.aborted)throw new $A;const k=new AbortController,b=await this.fetchWithTimeout(p,g,y,k).catch(ZA),M=Date.now();if(b instanceof globalThis.Error){const N=`retrying, ${o} attempts remaining`;if(!((A=f.signal)===null||A===void 0)&&A.aborted)throw new $A;const j=WA(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(o)return Fn(this).info(`[${S}] connection ${j?"timed out":"failed"} - ${N}`),Fn(this).debug(`[${S}] connection ${j?"timed out":"failed"} (${N})`,Xo({retryOfRequestLogID:r,url:p,durationMs:M-x,message:b.message})),this.retryRequest(f,o,r??S);throw Fn(this).info(`[${S}] connection ${j?"timed out":"failed"} - error; no more retries left`),Fn(this).debug(`[${S}] connection ${j?"timed out":"failed"} (error; no more retries left)`,Xo({retryOfRequestLogID:r,url:p,durationMs:M-x,message:b.message})),j?new Oy:new ec({cause:b})}const O=`[${S}${E}] ${g.method} ${p} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${M-x}ms`;if(!b.ok){const N=await this.shouldRetry(b);if(o&&N){const B=`retrying, ${o} attempts remaining`;return await kM(b.body),Fn(this).info(`${O} - ${B}`),Fn(this).debug(`[${S}] response error (${B})`,Xo({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:M-x})),this.retryRequest(f,o,r??S,b.headers)}const j=N?"error; no more retries left":"error; not retryable";Fn(this).info(`${O} - ${j}`);const L=await b.text().catch(B=>ZA(B).message),H=vM(L),P=H?void 0:L;throw Fn(this).debug(`[${S}] response error (${j})`,Xo({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:P,durationMs:Date.now()-x})),this.makeStatusError(b.status,H,P,b.headers)}return Fn(this).info(O),Fn(this).debug(`[${S}] response start`,Xo({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:M-x})),{response:b,options:f,controller:k,requestLogID:S,retryOfRequestLogID:r,startTime:x}}async fetchWithTimeout(e,o,r,s){const c=o||{},{signal:A,method:f}=c,m=Bl(c,["signal","method"]);A&&A.addEventListener("abort",()=>s.abort());const g=setTimeout(()=>s.abort(),r),p=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,y=Object.assign(Object.assign(Object.assign({signal:s.signal},p?{duplex:"half"}:{}),{method:"GET"}),m);f&&(y.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(g)}}async shouldRetry(e){const o=e.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,o,r,s){var c;let A;const f=s?.get("retry-after-ms");if(f){const g=parseFloat(f);Number.isNaN(g)||(A=g)}const m=s?.get("retry-after");if(m&&!A){const g=parseFloat(m);Number.isNaN(g)?A=Date.parse(m)-Date.now():A=g*1e3}if(!(A&&0<=A&&A<60*1e3)){const g=(c=e.maxRetries)!==null&&c!==void 0?c:this.maxRetries;A=this.calculateDefaultRetryTimeoutMillis(o,g)}return await yM(A),this.makeRequest(e,o-1,r)}calculateDefaultRetryTimeoutMillis(e,o){const c=o-e,A=Math.min(.5*Math.pow(2,c),8),f=1-Math.random()*.25;return A*f*1e3}async buildRequest(e,{retryCount:o=0}={}){var r,s,c;const A=Object.assign({},e),{method:f,path:m,query:g,defaultBaseURL:p}=A,y=this.buildURL(m,g,p);"timeout"in A&&pM("timeout",A.timeout),A.timeout=(r=A.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:S,body:E}=this.buildBody({options:A}),x=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:x},A.signal&&{signal:A.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(c=A.fetchOptions)!==null&&c!==void 0?c:{}),url:y,timeout:A.timeout}}async buildHeaders({options:e,method:o,bodyHeaders:r,retryCount:s}){let c={};this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const A=await this.authHeaders(e);let f=Ji([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),wM()),this._options.defaultHeaders,r,e.headers,A]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:o}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ji([o]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:bM(e)}:this.encoder({body:e,headers:r})}}nc.DEFAULT_TIMEOUT=6e4;class Mn extends nc{constructor(){super(...arguments),this.interactions=new i0(this)}}l0=Mn;Mn.GeminiNextGenAPIClient=l0;Mn.GeminiNextGenAPIClientError=ha;Mn.APIError=Kn;Mn.APIConnectionError=ec;Mn.APIConnectionTimeoutError=Oy;Mn.APIUserAbortError=$A;Mn.NotFoundError=jy;Mn.ConflictError=Jy;Mn.RateLimitError=Wy;Mn.BadRequestError=Vy;Mn.AuthenticationError=qy;Mn.InternalServerError=Zy;Mn.PermissionDeniedError=Yy;Mn.UnprocessableEntityError=Xy;Mn.toFile=DM;Mn.Interactions=i0;function VM(t,e){const o={},r=u(t,["name"]);return r!=null&&d(o,["_url","name"],r),o}function qM(t,e){const o={},r=u(t,["name"]);return r!=null&&d(o,["_url","name"],r),o}function YM(t,e){const o={},r=u(t,["sdkHttpResponse"]);return r!=null&&d(o,["sdkHttpResponse"],r),o}function jM(t,e){const o={},r=u(t,["sdkHttpResponse"]);return r!=null&&d(o,["sdkHttpResponse"],r),o}function JM(t,e,o){const r={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&d(e,["displayName"],s),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=u(t,["epochCount"]);e!==void 0&&c!=null&&d(e,["tuningTask","hyperparameters","epochCount"],c);const A=u(t,["learningRateMultiplier"]);if(A!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],A),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=u(t,["batchSize"]);e!==void 0&&f!=null&&d(e,["tuningTask","hyperparameters","batchSize"],f);const m=u(t,["learningRate"]);if(e!==void 0&&m!=null&&d(e,["tuningTask","hyperparameters","learningRate"],m),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function XM(t,e,o){const r={};let s=u(o,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const E=u(t,["validationDataset"]);e!==void 0&&E!=null&&d(e,["supervisedTuningSpec"],fv(E))}else if(s==="PREFERENCE_TUNING"){const E=u(t,["validationDataset"]);e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec"],fv(E))}const c=u(t,["tunedModelDisplayName"]);e!==void 0&&c!=null&&d(e,["tunedModelDisplayName"],c);const A=u(t,["description"]);e!==void 0&&A!=null&&d(e,["description"],A);let f=u(o,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const E=u(t,["epochCount"]);e!==void 0&&E!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(f==="PREFERENCE_TUNING"){const E=u(t,["epochCount"]);e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let m=u(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const E=u(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(m==="PREFERENCE_TUNING"){const E=u(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let g=u(o,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const E=u(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(g==="PREFERENCE_TUNING"){const E=u(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let p=u(o,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=u(t,["adapterSize"]);e!==void 0&&E!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(p==="PREFERENCE_TUNING"){const E=u(t,["adapterSize"]);e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=u(t,["labels"]);e!==void 0&&y!=null&&d(e,["labels"],y);const S=u(t,["beta"]);return e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),r}function WM(t,e){const o={},r=u(t,["baseModel"]);r!=null&&d(o,["baseModel"],r);const s=u(t,["preTunedModel"]);s!=null&&d(o,["preTunedModel"],s);const c=u(t,["trainingDataset"]);c!=null&&lP(c);const A=u(t,["config"]);return A!=null&&JM(A,o),o}function ZM(t,e){const o={},r=u(t,["baseModel"]);r!=null&&d(o,["baseModel"],r);const s=u(t,["preTunedModel"]);s!=null&&d(o,["preTunedModel"],s);const c=u(t,["trainingDataset"]);c!=null&&cP(c,o,e);const A=u(t,["config"]);return A!=null&&XM(A,o,e),o}function $M(t,e){const o={},r=u(t,["name"]);return r!=null&&d(o,["_url","name"],r),o}function eP(t,e){const o={},r=u(t,["name"]);return r!=null&&d(o,["_url","name"],r),o}function tP(t,e,o){const r={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const c=u(t,["pageToken"]);e!==void 0&&c!=null&&d(e,["_query","pageToken"],c);const A=u(t,["filter"]);return e!==void 0&&A!=null&&d(e,["_query","filter"],A),r}function nP(t,e,o){const r={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const c=u(t,["pageToken"]);e!==void 0&&c!=null&&d(e,["_query","pageToken"],c);const A=u(t,["filter"]);return e!==void 0&&A!=null&&d(e,["_query","filter"],A),r}function aP(t,e){const o={},r=u(t,["config"]);return r!=null&&tP(r,o),o}function oP(t,e){const o={},r=u(t,["config"]);return r!=null&&nP(r,o),o}function rP(t,e){const o={},r=u(t,["sdkHttpResponse"]);r!=null&&d(o,["sdkHttpResponse"],r);const s=u(t,["nextPageToken"]);s!=null&&d(o,["nextPageToken"],s);const c=u(t,["tunedModels"]);if(c!=null){let A=c;Array.isArray(A)&&(A=A.map(f=>c0(f))),d(o,["tuningJobs"],A)}return o}function iP(t,e){const o={},r=u(t,["sdkHttpResponse"]);r!=null&&d(o,["sdkHttpResponse"],r);const s=u(t,["nextPageToken"]);s!=null&&d(o,["nextPageToken"],s);const c=u(t,["tuningJobs"]);if(c!=null){let A=c;Array.isArray(A)&&(A=A.map(f=>nd(f))),d(o,["tuningJobs"],A)}return o}function sP(t,e){const o={},r=u(t,["name"]);r!=null&&d(o,["model"],r);const s=u(t,["name"]);return s!=null&&d(o,["endpoint"],s),o}function lP(t,e){const o={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=u(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(c=>c)),d(o,["examples","examples"],s)}return o}function cP(t,e,o){const r={};let s=u(o,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const A=u(t,["gcsUri"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],A)}else if(s==="PREFERENCE_TUNING"){const A=u(t,["gcsUri"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],A)}let c=u(o,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const A=u(t,["vertexDatasetResource"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],A)}else if(c==="PREFERENCE_TUNING"){const A=u(t,["vertexDatasetResource"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],A)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function c0(t,e){const o={},r=u(t,["sdkHttpResponse"]);r!=null&&d(o,["sdkHttpResponse"],r);const s=u(t,["name"]);s!=null&&d(o,["name"],s);const c=u(t,["state"]);c!=null&&d(o,["state"],wy(c));const A=u(t,["createTime"]);A!=null&&d(o,["createTime"],A);const f=u(t,["tuningTask","startTime"]);f!=null&&d(o,["startTime"],f);const m=u(t,["tuningTask","completeTime"]);m!=null&&d(o,["endTime"],m);const g=u(t,["updateTime"]);g!=null&&d(o,["updateTime"],g);const p=u(t,["description"]);p!=null&&d(o,["description"],p);const y=u(t,["baseModel"]);y!=null&&d(o,["baseModel"],y);const S=u(t,["_self"]);return S!=null&&d(o,["tunedModel"],sP(S)),o}function nd(t,e){const o={},r=u(t,["sdkHttpResponse"]);r!=null&&d(o,["sdkHttpResponse"],r);const s=u(t,["name"]);s!=null&&d(o,["name"],s);const c=u(t,["state"]);c!=null&&d(o,["state"],wy(c));const A=u(t,["createTime"]);A!=null&&d(o,["createTime"],A);const f=u(t,["startTime"]);f!=null&&d(o,["startTime"],f);const m=u(t,["endTime"]);m!=null&&d(o,["endTime"],m);const g=u(t,["updateTime"]);g!=null&&d(o,["updateTime"],g);const p=u(t,["error"]);p!=null&&d(o,["error"],p);const y=u(t,["description"]);y!=null&&d(o,["description"],y);const S=u(t,["baseModel"]);S!=null&&d(o,["baseModel"],S);const E=u(t,["tunedModel"]);E!=null&&d(o,["tunedModel"],E);const x=u(t,["preTunedModel"]);x!=null&&d(o,["preTunedModel"],x);const k=u(t,["supervisedTuningSpec"]);k!=null&&d(o,["supervisedTuningSpec"],k);const b=u(t,["preferenceOptimizationSpec"]);b!=null&&d(o,["preferenceOptimizationSpec"],b);const M=u(t,["tuningDataStats"]);M!=null&&d(o,["tuningDataStats"],M);const O=u(t,["encryptionSpec"]);O!=null&&d(o,["encryptionSpec"],O);const N=u(t,["partnerModelTuningSpec"]);N!=null&&d(o,["partnerModelTuningSpec"],N);const j=u(t,["customBaseModel"]);j!=null&&d(o,["customBaseModel"],j);const L=u(t,["experiment"]);L!=null&&d(o,["experiment"],L);const H=u(t,["labels"]);H!=null&&d(o,["labels"],H);const P=u(t,["outputUri"]);P!=null&&d(o,["outputUri"],P);const _=u(t,["pipelineJob"]);_!=null&&d(o,["pipelineJob"],_);const B=u(t,["serviceAccount"]);B!=null&&d(o,["serviceAccount"],B);const q=u(t,["tunedModelDisplayName"]);q!=null&&d(o,["tunedModelDisplayName"],q);const Z=u(t,["veoTuningSpec"]);return Z!=null&&d(o,["veoTuningSpec"],Z),o}function uP(t,e){const o={},r=u(t,["sdkHttpResponse"]);r!=null&&d(o,["sdkHttpResponse"],r);const s=u(t,["name"]);s!=null&&d(o,["name"],s);const c=u(t,["metadata"]);c!=null&&d(o,["metadata"],c);const A=u(t,["done"]);A!=null&&d(o,["done"],A);const f=u(t,["error"]);return f!=null&&d(o,["error"],f),o}function fv(t,e){const o={},r=u(t,["gcsUri"]);r!=null&&d(o,["validationDatasetUri"],r);const s=u(t,["vertexDatasetResource"]);return s!=null&&d(o,["validationDatasetUri"],s),o}class AP extends Wa{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new rr(Xa.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var r;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const s={tunedModelName:o.baseModel};!((r=o.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=o.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},o),{preTunedModel:s});return c.baseModel=void 0,await this.tuneInternal(c)}else{const s=Object.assign({},o);return await this.tuneInternal(s)}else{const s=Object.assign({},o),c=await this.tuneMldevInternal(s);let A="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?A=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(A=c.name.split("/operations/")[0]),{name:A,state:OA.JOB_STATE_QUEUED}}}}async getInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=eP(e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>nd(p))}else{const g=$M(e);return f=ze("{name}",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>c0(p))}}async listInternal(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=oP(e);return f=ze("tuningJobs",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=iP(p),S=new Fp;return Object.assign(S,y),S})}else{const g=aP(e);return f=ze("tunedModels",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=rP(p),S=new Fp;return Object.assign(S,y),S})}}async cancel(e){var o,r,s,c;let A,f="",m={};if(this.apiClient.isVertexAI()){const g=qM(e);return f=ze("{name}:cancel",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=jM(p),S=new Kp;return Object.assign(S,y),S})}else{const g=VM(e);return f=ze("{name}:cancel",g._url),m=g._query,delete g._url,delete g._query,A=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(p=>p.json().then(y=>{const S=y;return S.sdkHttpResponse={headers:p.headers},S})),A.then(p=>{const y=YM(p),S=new Kp;return Object.assign(S,y),S})}}async tuneInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI()){const f=ZM(e,e);return c=ze("tuningJobs",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const p=g;return p.sdkHttpResponse={headers:m.headers},p})),s.then(m=>nd(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,r;let s,c="",A={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=WM(e);return c=ze("tunedModels",f._url),A=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const p=g;return p.sdkHttpResponse={headers:m.headers},p})),s.then(m=>uP(m))}}}class dP{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const gP=1024*1024*8,fP=3,hP=1e3,mP=2,Ll="x-goog-upload-status";async function pP(t,e,o){var r;const s=await u0(t,e,o),c=await s?.json();if(((r=s?.headers)===null||r===void 0?void 0:r[Ll])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function vP(t,e,o){var r;const s=await u0(t,e,o),c=await s?.json();if(((r=s?.headers)===null||r===void 0?void 0:r[Ll])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const A=py(c),f=new pd;return Object.assign(f,A),f}async function u0(t,e,o){var r,s;let c=0,A=0,f=new VA(new Response),m="upload";for(c=t.size;A<c;){const g=Math.min(gP,c-A),p=t.slice(A,A+g);A+g>=c&&(m+=", finalize");let y=0,S=hP;for(;y<fP&&(f=await o.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(A),"Content-Length":String(g)}}}),!(!((r=f?.headers)===null||r===void 0)&&r[Ll]));)y++,await SP(S),S=S*mP;if(A+=g,((s=f?.headers)===null||s===void 0?void 0:s[Ll])!=="active")break;if(c<=A)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function yP(t){return{size:t.size,type:t.type}}function SP(t){return new Promise(e=>setTimeout(e,t))}class CP{async upload(e,o,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pP(e,o,r)}async uploadToFileSearchStore(e,o,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vP(e,o,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yP(e)}}class TP{create(e,o,r){return new wP(e,o,r)}}class wP{constructor(e,o,r){this.url=e,this.headers=o,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const hv="x-goog-api-key";class EP{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(hv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hv,this.apiKey)}}}const bP="gl-node/";class ac{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new Mn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=o.interactions,this._interactions}constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const r=Sw(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new EP(this.apiKey);this.apiClient=new yI({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:bP+"web",uploader:new CP,downloader:new dP}),this.models=new UI(this.apiClient),this.live=new DI(this.apiClient,s,new TP),this.batches=new JE(this.apiClient),this.chats=new Pb(this.models,this.apiClient),this.caches=new xb(this.apiClient),this.files=new Fb(this.apiClient),this.operations=new zI(this.apiClient),this.authTokens=new tM(this.apiClient),this.tunings=new AP(this.apiClient),this.fileSearchStores=new cM(this.apiClient)}}var Xr;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Xr||(Xr={}));let kA=class extends Error{constructor(e,o,r){super(e),this.message=e,this.code=o,this.data=r}};const kP=t=>{var e,o;return t?.androidBridge?"android":!((o=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||o===void 0)&&o.bridge?"ios":"web"},xP=t=>{const e=t.CapacitorCustomPlatform||null,o=t.Capacitor||{},r=o.Plugins=o.Plugins||{},s=()=>e!==null?e.name:kP(t),c=()=>s()!=="web",A=y=>{const S=g.get(y);return!!(S?.platforms.has(s())||f(y))},f=y=>{var S;return(S=o.PluginHeaders)===null||S===void 0?void 0:S.find(E=>E.name===y)},m=y=>t.console.error(y),g=new Map,p=(y,S={})=>{const E=g.get(y);if(E)return console.warn(`Capacitor plugin "${y}" already registered. Cannot register plugins twice.`),E.proxy;const x=s(),k=f(y);let b;const M=async()=>(!b&&x in S?b=typeof S[x]=="function"?b=await S[x]():b=S[x]:e!==null&&!b&&"web"in S&&(b=typeof S.web=="function"?b=await S.web():b=S.web),b),O=(_,B)=>{var q,Z;if(k){const ne=k?.methods.find(U=>B===U.name);if(ne)return ne.rtype==="promise"?U=>o.nativePromise(y,B.toString(),U):(U,X)=>o.nativeCallback(y,B.toString(),U,X);if(_)return(q=_[B])===null||q===void 0?void 0:q.bind(_)}else{if(_)return(Z=_[B])===null||Z===void 0?void 0:Z.bind(_);throw new kA(`"${y}" plugin is not implemented on ${x}`,Xr.Unimplemented)}},N=_=>{let B;const q=(...Z)=>{const ne=M().then(U=>{const X=O(U,_);if(X){const F=X(...Z);return B=F?.remove,F}else throw new kA(`"${y}.${_}()" is not implemented on ${x}`,Xr.Unimplemented)});return _==="addListener"&&(ne.remove=async()=>B()),ne};return q.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(q,"name",{value:_,writable:!1,configurable:!1}),q},j=N("addListener"),L=N("removeListener"),H=(_,B)=>{const q=j({eventName:_},B),Z=async()=>{const U=await q;L({eventName:_,callbackId:U},B)},ne=new Promise(U=>q.then(()=>U({remove:Z})));return ne.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Z()},ne},P=new Proxy({},{get(_,B){switch(B){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?H:j;case"removeListener":return L;default:return N(B)}}});return r[y]=P,g.set(y,{name:y,proxy:P,platforms:new Set([...Object.keys(S),...k?[x]:[]])}),P};return o.convertFileSrc||(o.convertFileSrc=y=>y),o.getPlatform=s,o.handleError=m,o.isNativePlatform=c,o.isPluginAvailable=A,o.registerPlugin=p,o.Exception=kA,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o},IP=t=>t.Capacitor=xP(t),nr=IP(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Mo=nr.registerPlugin;let oc=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,o){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(o);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),r&&this.sendRetainedArgumentsForEvent(e);const A=async()=>this.removeListener(e,o);return Promise.resolve({remove:A})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,o,r){const s=this.listeners[e];if(!s){if(r){let c=this.retainedEventArguments[e];c||(c=[]),c.push(o),this.retainedEventArguments[e]=c}return}s.forEach(c=>c(o))}hasListeners(e){var o;return!!(!((o=this.listeners[e])===null||o===void 0)&&o.length)}registerWindowListener(e,o){this.windowListeners[o]={registered:!1,windowEventName:e,pluginEventName:o,handler:r=>{this.notifyListeners(o,r)}}}unimplemented(e="not implemented"){return new nr.Exception(e,Xr.Unimplemented)}unavailable(e="not available"){return new nr.Exception(e,Xr.Unavailable)}async removeListener(e,o){const r=this.listeners[e];if(!r)return;const s=r.indexOf(o);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const o=this.retainedEventArguments[e];o&&(delete this.retainedEventArguments[e],o.forEach(r=>{this.notifyListeners(e,r)}))}};const mv=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),pv=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);let MP=class extends oc{async getCookies(){const e=document.cookie,o={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,c]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=pv(s).trim(),c=pv(c).trim(),o[s]=c}),o}async setCookie(e){try{const o=mv(e.key),r=mv(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),A=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${o}=${r||""}${s}; path=${c}; ${A};`}catch(o){return Promise.reject(o)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const o of e)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}};Mo("CapacitorCookies",{web:()=>new MP});const PP=async t=>new Promise((e,o)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>o(s),r.readAsDataURL(t)}),RP=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,c,A)=>(s[c]=t[e[A]],s),{})},DP=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[c,A]=s;let f,m;return Array.isArray(A)?(m="",A.forEach(g=>{f=e?encodeURIComponent(g):g,m+=`${c}=${f}&`}),m.slice(0,-1)):(f=e?encodeURIComponent(A):A,m=`${c}=${f}`),`${r}&${m}`},"").substr(1):null,NP=(t,e={})=>{const o=Object.assign({method:t.method||"GET",headers:t.headers},e),s=RP(t.headers)["content-type"]||"";if(typeof t.data=="string")o.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[A,f]of Object.entries(t.data||{}))c.set(A,f);o.body=c.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const c=new FormData;if(t.data instanceof FormData)t.data.forEach((f,m)=>{c.append(m,f)});else for(const f of Object.keys(t.data))c.append(f,t.data[f]);o.body=c;const A=new Headers(o.headers);A.delete("content-type"),o.headers=A}else(s.includes("application/json")||typeof t.data=="object")&&(o.body=JSON.stringify(t.data));return o};let GP=class extends oc{async request(e){const o=NP(e,e.webFetchExtra),r=DP(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,c=await fetch(s,o),A=c.headers.get("content-type")||"";let{responseType:f="text"}=c.ok?e:{};A.includes("application/json")&&(f="json");let m,g;switch(f){case"arraybuffer":case"blob":g=await c.blob(),m=await PP(g);break;case"json":m=await c.json();break;default:m=await c.text()}const p={};return c.headers.forEach((y,S)=>{p[S]=y}),{data:m,headers:p,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}};Mo("CapacitorHttp",{web:()=>new GP});var vv;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(vv||(vv={}));var yv;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(yv||(yv={}));class BP extends oc{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Mo("SystemBars",{web:()=>new BP});const _P="modulepreload",LP=function(t){return"/MaestroTutor/"+t},Sv={},$o=function(e,o,r){let s=Promise.resolve();if(o&&o.length>0){let m=function(g){return Promise.all(g.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),f=A?.nonce||A?.getAttribute("nonce");s=m(o.map(g=>{if(g=LP(g),g in Sv)return;Sv[g]=!0;const p=g.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const S=document.createElement("link");if(S.rel=p?"stylesheet":_P,p||(S.as="script"),S.crossOrigin="",S.href=g,f&&S.setAttribute("nonce",f),document.head.appendChild(S),p)return new Promise((E,x)=>{S.addEventListener("load",E),S.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(A){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=A,window.dispatchEvent(f),!f.defaultPrevented)throw A}return s.then(A=>{for(const f of A||[])f.status==="rejected"&&c(f.reason);return e().catch(c)})};var Wr;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Wr||(Wr={}));class xA extends Error{constructor(e,o,r){super(e),this.message=e,this.code=o,this.data=r}}const UP=t=>{var e,o;return t?.androidBridge?"android":!((o=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||o===void 0)&&o.bridge?"ios":"web"},zP=t=>{const e=t.CapacitorCustomPlatform||null,o=t.Capacitor||{},r=o.Plugins=o.Plugins||{},s=()=>e!==null?e.name:UP(t),c=()=>s()!=="web",A=y=>{const S=g.get(y);return!!(S?.platforms.has(s())||f(y))},f=y=>{var S;return(S=o.PluginHeaders)===null||S===void 0?void 0:S.find(E=>E.name===y)},m=y=>t.console.error(y),g=new Map,p=(y,S={})=>{const E=g.get(y);if(E)return console.warn(`Capacitor plugin "${y}" already registered. Cannot register plugins twice.`),E.proxy;const x=s(),k=f(y);let b;const M=async()=>(!b&&x in S?b=typeof S[x]=="function"?b=await S[x]():b=S[x]:e!==null&&!b&&"web"in S&&(b=typeof S.web=="function"?b=await S.web():b=S.web),b),O=(_,B)=>{var q,Z;if(k){const ne=k?.methods.find(U=>B===U.name);if(ne)return ne.rtype==="promise"?U=>o.nativePromise(y,B.toString(),U):(U,X)=>o.nativeCallback(y,B.toString(),U,X);if(_)return(q=_[B])===null||q===void 0?void 0:q.bind(_)}else{if(_)return(Z=_[B])===null||Z===void 0?void 0:Z.bind(_);throw new xA(`"${y}" plugin is not implemented on ${x}`,Wr.Unimplemented)}},N=_=>{let B;const q=(...Z)=>{const ne=M().then(U=>{const X=O(U,_);if(X){const F=X(...Z);return B=F?.remove,F}else throw new xA(`"${y}.${_}()" is not implemented on ${x}`,Wr.Unimplemented)});return _==="addListener"&&(ne.remove=async()=>B()),ne};return q.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(q,"name",{value:_,writable:!1,configurable:!1}),q},j=N("addListener"),L=N("removeListener"),H=(_,B)=>{const q=j({eventName:_},B),Z=async()=>{const U=await q;L({eventName:_,callbackId:U},B)},ne=new Promise(U=>q.then(()=>U({remove:Z})));return ne.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Z()},ne},P=new Proxy({},{get(_,B){switch(B){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?H:j;case"removeListener":return L;default:return N(B)}}});return r[y]=P,g.set(y,{name:y,proxy:P,platforms:new Set([...Object.keys(S),...k?[x]:[]])}),P};return o.convertFileSrc||(o.convertFileSrc=y=>y),o.getPlatform=s,o.handleError=m,o.isNativePlatform=c,o.isPluginAvailable=A,o.registerPlugin=p,o.Exception=xA,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o},FP=t=>t.Capacitor=zP(t),ad=FP(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),bd=ad.registerPlugin;class A0{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,o){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(o);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),r&&this.sendRetainedArgumentsForEvent(e);const A=async()=>this.removeListener(e,o);return Promise.resolve({remove:A})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,o,r){const s=this.listeners[e];if(!s){if(r){let c=this.retainedEventArguments[e];c||(c=[]),c.push(o),this.retainedEventArguments[e]=c}return}s.forEach(c=>c(o))}hasListeners(e){var o;return!!(!((o=this.listeners[e])===null||o===void 0)&&o.length)}registerWindowListener(e,o){this.windowListeners[o]={registered:!1,windowEventName:e,pluginEventName:o,handler:r=>{this.notifyListeners(o,r)}}}unimplemented(e="not implemented"){return new ad.Exception(e,Wr.Unimplemented)}unavailable(e="not available"){return new ad.Exception(e,Wr.Unavailable)}async removeListener(e,o){const r=this.listeners[e];if(!r)return;const s=r.indexOf(o);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const o=this.retainedEventArguments[e];o&&(delete this.retainedEventArguments[e],o.forEach(r=>{this.notifyListeners(e,r)}))}}const Cv=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Tv=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class KP extends A0{async getCookies(){const e=document.cookie,o={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,c]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Tv(s).trim(),c=Tv(c).trim(),o[s]=c}),o}async setCookie(e){try{const o=Cv(e.key),r=Cv(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),A=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${o}=${r||""}${s}; path=${c}; ${A};`}catch(o){return Promise.reject(o)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const o of e)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}bd("CapacitorCookies",{web:()=>new KP});const HP=async t=>new Promise((e,o)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>o(s),r.readAsDataURL(t)}),QP=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,c,A)=>(s[c]=t[e[A]],s),{})},OP=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[c,A]=s;let f,m;return Array.isArray(A)?(m="",A.forEach(g=>{f=e?encodeURIComponent(g):g,m+=`${c}=${f}&`}),m.slice(0,-1)):(f=e?encodeURIComponent(A):A,m=`${c}=${f}`),`${r}&${m}`},"").substr(1):null,VP=(t,e={})=>{const o=Object.assign({method:t.method||"GET",headers:t.headers},e),s=QP(t.headers)["content-type"]||"";if(typeof t.data=="string")o.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[A,f]of Object.entries(t.data||{}))c.set(A,f);o.body=c.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const c=new FormData;if(t.data instanceof FormData)t.data.forEach((f,m)=>{c.append(m,f)});else for(const f of Object.keys(t.data))c.append(f,t.data[f]);o.body=c;const A=new Headers(o.headers);A.delete("content-type"),o.headers=A}else(s.includes("application/json")||typeof t.data=="object")&&(o.body=JSON.stringify(t.data));return o};class qP extends A0{async request(e){const o=VP(e,e.webFetchExtra),r=OP(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,c=await fetch(s,o),A=c.headers.get("content-type")||"";let{responseType:f="text"}=c.ok?e:{};A.includes("application/json")&&(f="json");let m,g;switch(f){case"arraybuffer":case"blob":g=await c.blob(),m=await HP(g);break;case"json":m=await c.json();break;default:m=await c.text()}const p={};return c.headers.forEach((y,S)=>{p[S]=y}),{data:m,headers:p,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}bd("CapacitorHttp",{web:()=>new qP});var wv;(function(t){t.missingKey="missingKey",t.invalidData="invalidData",t.osError="osError",t.unknownError="unknownError"})(wv||(wv={}));var Ev;(function(t){t[t.whenUnlocked=0]="whenUnlocked",t[t.whenUnlockedThisDeviceOnly=1]="whenUnlockedThisDeviceOnly",t[t.afterFirstUnlock=2]="afterFirstUnlock",t[t.afterFirstUnlockThisDeviceOnly=3]="afterFirstUnlockThisDeviceOnly",t[t.whenPasscodeSetThisDeviceOnly=4]="whenPasscodeSetThisDeviceOnly"})(Ev||(Ev={}));class gN extends Error{constructor(e,o){super(e),this.name="StorageError",this.code=o}}const is=bd("SecureStorage",{web:async()=>{const t=await $o(()=>import("./web-Cn2kv6Gb.js"),__vite__mapDeps([0,1]));return new t.SecureStorageWeb},ios:async()=>{const t=await $o(()=>import("./native-CEfK0Qmw.js"),__vite__mapDeps([2,1]));return new t.SecureStorageNative(is)},android:async()=>{const t=await $o(()=>import("./native-CEfK0Qmw.js"),__vite__mapDeps([2,1]));return new t.SecureStorageNative(is)}}),d0=Mo("Preferences",{web:()=>$o(()=>import("./web-o34V9Xyn.js"),[]).then(t=>new t.PreferencesWeb)}),Po="maestro.geminiApiKey.v1";let Or;const Ul=nr.isNativePlatform(),kd=()=>typeof window<"u"?window:void 0,YP=()=>{try{const t=kd();if(!t?.localStorage)return null;const e=t.localStorage.getItem(Po);return e||null}catch{return null}},jP=t=>{try{const e=kd();if(!e?.localStorage)return;e.localStorage.setItem(Po,t)}catch{}},g0=()=>{try{const t=kd();if(!t?.localStorage)return;t.localStorage.removeItem(Po)}catch{}},rc=t=>t.trim(),f0=t=>!(rc(t).length<20),JP=async()=>{try{const{value:t}=await d0.get({key:Po});return t||null}catch{return null}},zl=async()=>{try{return await d0.remove({key:Po}),!0}catch{return!1}},XP=async()=>{try{return await is.getItem(Po)??null}catch{return null}},h0=async t=>{try{return await is.setItem(Po,t),!0}catch{return!1}},m0=async()=>{try{return await is.removeItem(Po),!0}catch{return!1}},xd=async()=>{if(Or!==void 0)return Or;let t=null;if(Ul){if(t=await XP(),!t){const e=await JP();e&&await h0(e)&&(await zl(),t=e)}}else t=YP();return Or=t||null,Or},WP=async t=>{const e=rc(t);if(Or=e||null,!e){Ul&&(await m0(),await zl()),g0();return}if(Ul){if(!await h0(e))throw new Error("Secure storage unavailable");await zl()}else jP(e)},ZP=async()=>{Or=null,Ul&&(await m0(),await zl()),g0()},ic=async()=>{const t=await xd();if(!t){const e=new Error('Missing API key. Tap "API Key" in the top-right and paste your Gemini key.');throw e.code="MISSING_API_KEY",e}return t};class sc extends Error{status;code;cooldownSuggestSeconds;constructor(e,o){super(e),this.status=o?.status,this.code=o?.code,this.cooldownSuggestSeconds=o?.cooldownSuggestSeconds}}const ir=async()=>{try{const t=await ic();return new ac({apiKey:t})}catch(t){const e=t?.message||"Missing API key";throw new sc(e,{code:"MISSING_API_KEY"})}},$P=t=>t&&(t.startsWith("audio/")&&t.includes(";")?t.split(";")[0]:t),IA=10,eR=async(t,e=6e4,o=1e3)=>{const r=await ir();let s=t;const c=/\/files\/([^?\s]+)/.exec(t||"");c&&(s=`files/${c[1]}`);const A=Date.now();let f=0;for(;Date.now()-A<e;)try{const m=await r.files.get({name:s});if(m.state==="ACTIVE")return fa.logRequest("files.waitForActive","Files API",{name:s,state:"ACTIVE",waitMs:Date.now()-A}).complete({state:"ACTIVE"}),m;if(m.state==="FAILED"){const g=m.error?JSON.stringify(m.error):"Unknown error";throw new Error(`File processing failed: ${g}`)}await new Promise(g=>setTimeout(g,o))}catch(m){if(m.message?.includes("File processing failed"))throw m;if(f++,console.warn(`Error polling file state (attempt ${f}/${IA}), retrying...`,m.message),f>=IA)throw new Error(`Max retries (${IA}) exceeded while polling file ${s}: ${m.message}`);await new Promise(g=>setTimeout(g,o))}throw new Error(`Timeout waiting for file ${s} to become ACTIVE after ${e}ms`)},p0=async t=>{if(!t||!t.length)return{};const e=await ir(),o={};return await Promise.all(t.map(async r=>{try{let s=r;const c=/\/files\/([^?\s]+)/.exec(r||"");c&&(s=`files/${c[1]}`);const A=await e.files.get({name:s});o[r]={deleted:A.state==="FAILED",active:A.state==="ACTIVE"}}catch(s){s.status===404||Number(s.status)===404||s.status===void 0&&(s.message?.toLowerCase()==="not found"||s.message?.includes("404"))?o[r]={deleted:!0,active:!1}:o[r]={deleted:!1,active:!1}}})),o},od=async t=>{const e=t.map(r=>r.imageFileUri).filter(r=>r);if(e.length===0)return t;const o=await p0(e);return t.map(r=>{if(r.imageFileUri){const s=o[r.imageFileUri];if(s?.deleted||!s?.active){const{imageFileUri:c,imageMimeType:A,...f}=r;return f}}return r})},Va=async(t,e,o)=>{const r=await ir(),s=$P(e),c=t.split(",")[1],A=atob(c),f=new Array(A.length);for(let S=0;S<A.length;S++)f[S]=A.charCodeAt(S);const m=new Uint8Array(f),g=new Blob([m],{type:s}),p=new File([g],o||"upload",{type:s}),y=fa.logRequest("files.upload","Files API",{mimeType:s,displayName:o,size:g.size});try{const S=await r.files.upload({file:p,config:{displayName:o,mimeType:s}});if(!S)throw new Error("Upload failed: missing result");if(!S.uri||!S.uri.trim())throw new Error("Upload failed: missing uri");if(!S.mimeType||!S.mimeType.trim())throw new Error("Upload failed: missing mimeType");return S.state!=="ACTIVE"&&await eR(S.name||S.uri),y.complete(S),{uri:S.uri,mimeType:S.mimeType}}catch(S){throw y.error(S),S}},tR=async t=>{const e=await ir();let o=t;const r=/\/files\/([^?\s]+)/.exec(t||"");r&&(o=`files/${r[1]}`);try{return await e.files.delete({name:o}),{ok:!0}}catch{return{ok:!1}}};function nR(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,o){return new Proxy({},{get(r,s){return(c,A,f)=>{const m=t.Capacitor.Plugins[o];if(m===void 0){f(new Error(`Capacitor plugin ${o} not found`));return}if(typeof m[s]!="function"){f(new Error(`Method ${s} not found in Capacitor plugin ${o}`));return}(async()=>{try{const g=await m[s](c);A(g)}catch(g){f(g)}})()}}})}})}function aR(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,o){return t.cordova.plugins[o]}})}function oR(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?nR(window):window.cordova!==void 0&&aR(window))}var Fl;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",t.ExternalCache="EXTERNAL_CACHE",t.LibraryNoCloud="LIBRARY_NO_CLOUD",t.Temporary="TEMPORARY"})(Fl||(Fl={}));var Kl;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(Kl||(Kl={}));const bv=Mo("Filesystem",{web:()=>$o(()=>import("./web-DXhJgBbw.js"),[]).then(t=>new t.FilesystemWeb)});oR();const rR=Mo("Share",{web:()=>$o(()=>import("./web-1ywC9ClM.js"),[]).then(t=>new t.ShareWeb)}),v0=t=>Array.from(new Set(t)),Hl=t=>(t.role==="user"||t.role==="assistant")&&!t.thinking,iR=async()=>{try{const t=await fetch("/maestro-avatars/manifest.json",{cache:"force-cache"});if(t.ok){const e=await t.json();if(Array.isArray(e))for(const o of e){const r=`/maestro-avatars/${o}`;try{const s=await fetch(r,{cache:"force-cache"});if(s.ok)return await s.blob()}catch{}}}}catch{}return null},sR="ndjson-v1",rd="ndjson",kv="application/x-ndjson",lR=100*1024*1024,cR=1e6,uR=200,AR=(t,e)=>{const o=t.replace(/[\\/:*?"<>|]/g,"-").trim(),r=o.length>0?o:e,s=r.toLowerCase();return s.endsWith(".ndjson")||s.endsWith(".jsonl")?r:s.endsWith(".json")?r.slice(0,-5)+`.${rd}`:`${r}.${rd}`},dR=()=>JSON.stringify({type:"header",format:sR,version:fy,createdAt:new Date().toISOString()})+`
`,MA=t=>JSON.stringify(t)+`
`,gR=(t,e,o,r)=>`{"type":"chatChunk","pairId":${JSON.stringify(t)},"chunkIndex":${e}${o?',"isLast":true':""},"messages":[${r.join(",")}]}
`,PA=t=>{const e=(t instanceof Error?t.message:String(t)).toLowerCase();return e.includes("canceled")||e.includes("cancelled")||e.includes("abort")},fR=(t,e)=>{let o=!1,r;return{write:async c=>{if(!o){r=(await bv.writeFile({path:t,data:c,directory:e,encoding:Kl.UTF8}))?.uri,o=!0;return}await bv.appendFile({path:t,data:c,directory:e,encoding:Kl.UTF8})},close:async()=>{},getUri:()=>r}},hR=async t=>{const e=typeof window<"u"?window.showSaveFilePicker:void 0;if(typeof e=="function"){const s=await(await e({suggestedName:t,types:[{description:"Maestro Backup",accept:{[kv]:[".ndjson",".jsonl"]}}],excludeAcceptAllOption:!1})).createWritable();return{write:async c=>{await s.write(c)},close:async()=>{await s.close()}}}const o=[];return{write:async r=>{o.push(r)},close:async()=>{const r=new Blob(o,{type:kv}),s=URL.createObjectURL(r),c=document.createElement("a");c.href=s,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(s)}}},Id=t=>new Promise((e,o)=>{const r=new FileReader;r.onload=s=>e(String(s.target?.result||"")),r.onerror=s=>o(s),r.onabort=s=>o(s),r.readAsText(t)}),mR=async t=>{const e=(t.name||"").toLowerCase();if(e.endsWith(".ndjson")||e.endsWith(".jsonl"))return"ndjson";try{const r=(await Id(t.slice(0,2048))).trimStart();if(r.includes('"format":"ndjson-v1"')||r.startsWith('{"type":"header"'))return"ndjson"}catch{}return"json"},pR=async(t,e)=>{if(typeof t.stream!="function"){const f=(await Id(t)).split(/\r?\n/);for(const m of f){const g=m.trim();g&&await e(g)}return}const o=t.stream().getReader(),r=new TextDecoder;let s="";for(;;){const{value:A,done:f}=await o.read();if(f)break;s+=r.decode(A,{stream:!0});let m=s.indexOf(`
`);for(;m>=0;){const g=s.slice(0,m);s=s.slice(m+1);const p=g.trim();p&&await e(p),m=s.indexOf(`
`)}}s+=r.decode();const c=s.trim();c&&await e(c)},vR=({t})=>{const e=Q(y=>y.setMessages),o=Q(y=>y.setLoadingGifs),r=Q(y=>y.setTempNativeLangCode),s=Q(y=>y.setTempTargetLangCode),c=Q(y=>y.setIsLanguageSelectionOpen),A=T.useCallback(async y=>{const S=y?.auto===!0;try{const E=Q.getState().settings.selectedLanguagePairId;if(E)try{await oi(E,Q.getState().messages)}catch{}if(!await WR()){S||alert(t("startPage.noChatsToSave"));return}const k=await eD(),b=await Eo();let M=[];try{M=await HA()||[]}catch{}let O=null;try{O=await Dl()}catch{}const N=new Date().toISOString().slice(0,19).replace("T","_").replace(/:/g,"-"),j=S?"maestro-backup-":"maestro-all-chats-",L=y?.filename&&y.filename.trim().length>0?y.filename.trim():`${j}${N}.${rd}`,H=AR(L,`${j}${N}`),P=async _=>{await _.write(dR()),await _.write(MA({type:"globalProfile",text:b?.text||null})),await _.write(MA({type:"assets",loadingGifs:M,maestroProfile:O})),await ZR(async(B,q)=>{if(!B)return;if(Array.isArray(q)&&q.length>0){let ne=0,U=[],X=0;const F=async R=>{U.length&&(await _.write(gR(B,ne,R,U)),ne+=1,U=[],X=0)};for(let R=0;R<q.length;R++){const K=JSON.stringify(q[R]),V=U.length?1+K.length:K.length;U.length&&(X+V>cR||U.length>=uR)&&await F(!1),U.push(K),X+=V,R===q.length-1&&await F(!0)}}const Z=k&&k[B]||null;Z&&await _.write(MA({type:"meta",pairId:B,meta:Z}))}),await _.close()};if(nr.isNativePlatform()){const _=async B=>{const q=fR(H,B);await P(q);const Z=q.getUri();if(!Z)throw new Error("Missing file URI for backup");return Z};try{let B;try{B=await _(Fl.Documents)}catch{B=await _(Fl.Cache)}await rR.share({title:t("startPage.saveChats"),url:B,dialogTitle:t("startPage.saveChats")})}catch(B){if(PA(B))return;const q=B instanceof Error?B.message:String(B);console.error("Failed to save/share backup:",B),S||alert(`${t("startPage.saveError")}
${q}`)}return}try{const _=await hR(H);await P(_)}catch(_){if(PA(_))return;throw _}}catch(E){if(PA(E))return;const x=E instanceof Error?E.message:String(E);console.error("Failed to save all chats:",E),S||alert(`${t("startPage.saveError")}
${x}`)}},[t]),f=T.useCallback(async(y,S)=>{try{const E=await HA()||[];let x=[];try{const b=await fetch("/gifs/manifest.json",{cache:"force-cache"});b.ok&&(x=await b.json())}catch{}const k=v0([...E,...y||[],...x]);await my(k),o(k)}catch{}if(S)try{let E={...S};E.uri=void 0,await rs(E);try{window.dispatchEvent(new CustomEvent("maestro-avatar-updated",{detail:E}))}catch{}}catch{}},[o]),m=T.useCallback(async y=>{alert(t("startPage.loadSuccess",{count:y}));const S=Q.getState().settings.selectedLanguagePairId;if(S){const E=await E0(S);e(E)}else{const E=typeof navigator<"u"&&navigator.language||ko,x=uy(E)||Ay(E)||Yt.find(k=>k.langCode===ko);r(x.langCode),s(null),c(!0)}},[t,e,r,s,c]),g=T.useCallback(async y=>{let S=null,E=null,x=null;const k={};let b=null,M=[],O=0;await Iv({},null,null,null);const N=async H=>{H&&(await b0(H,M),O+=1,b=null,M=[])};await pR(y,async H=>{const P=JSON.parse(H);if(!P||typeof P!="object")return;const _=P.type;if(_!=="header"){if(_==="globalProfile"){S=typeof P.text=="string"?P.text:null;return}if(_==="assets"){if(Array.isArray(P.loadingGifs)&&(E=P.loadingGifs),P.maestroProfile&&typeof P.maestroProfile=="object"){const B=P.maestroProfile;B&&(typeof B.dataUrl=="string"||typeof B.uri=="string")&&(x={dataUrl:typeof B.dataUrl=="string"?B.dataUrl:void 0,mimeType:typeof B.mimeType=="string"?B.mimeType:void 0,uri:typeof B.uri=="string"?B.uri:void 0,updatedAt:typeof B.updatedAt=="number"?B.updatedAt:Date.now()})}return}if(_==="meta"){const B=typeof P.pairId=="string"?P.pairId:"";B&&(k[B]=P.meta||null);return}if(_==="chatChunk"){const B=typeof P.pairId=="string"?P.pairId:"";if(!B)return;b&&b!==B&&await N(b),b=B,Array.isArray(P.messages)&&P.messages.length&&M.push(...P.messages),P.isLast===!0&&await N(B);return}}}),b&&await N(b);const j=Object.entries(k);for(const[H,P]of j)if(P)try{await Rd(H,P)}catch{}const L=(S||"").trim();if(L)try{await gd(L)}catch{}await f(E,x),await m(O)},[f,m]),p=T.useCallback(async y=>{await A({auto:!0});try{if(await mR(y)==="ndjson"){await g(y);return}if(y.size>lR){alert(t("startPage.loadLegacyTooLarge"));return}const E=await Id(y),x=JSON.parse(E);if(typeof x!="object"||x===null)throw new Error("Invalid format");let k={},b=null,M=null,O=null,N=null;if("chats"in x){if(k=x.chats||{},b=x.metas||null,M=typeof x.globalProfile=="string"?x.globalProfile:null,x.assets&&Array.isArray(x.assets.loadingGifs)&&(O=x.assets.loadingGifs),x.assets&&x.assets.maestroProfile&&typeof x.assets.maestroProfile=="object"){const L=x.assets.maestroProfile;L&&(typeof L.dataUrl=="string"||typeof L.uri=="string")&&(N={dataUrl:typeof L.dataUrl=="string"?L.dataUrl:void 0,mimeType:typeof L.mimeType=="string"?L.mimeType:void 0,uri:typeof L.uri=="string"?L.uri:void 0,updatedAt:typeof L.updatedAt=="number"?L.updatedAt:Date.now()})}}else k=x;await Iv(k,b,null,M),await f(O,N);const j=Object.keys(k).length;await m(j)}catch(S){console.error("Failed to load chats:",S),alert(t("startPage.loadError"))}},[A,t,f,m,g]);return{handleSaveAllChats:A,handleLoadAllChats:p}},yR="app.title",ar="image-gen-camera",Ql=10,RA=[{id:"Zephyr",description:"Bright"},{id:"Puck",description:"Upbeat"},{id:"Charon",description:"Informative"},{id:"Kore",description:"Firm"},{id:"Fenrir",description:"Excitable"}],SR=()=>{const{t}=ei(),{handleSaveAllChats:e,handleLoadAllChats:o}=vR({t}),r=Q(lc),s=Q(W=>W.updateSetting),c=r.tts.voiceName||"Kore",A=Q(W=>W.addActivityToken),f=Q(W=>W.removeActivityToken),m=T.useCallback(W=>A(rn.UI,`${W}:${Date.now()}:${Math.random().toString(36).slice(2,8)}`),[A]),g=T.useCallback(W=>{W&&f(W)},[f]),[p,y]=T.useState(null),[S,E]=T.useState(!1),[x,k]=T.useState(!1),[b,M]=T.useState(""),[O,N]=T.useState(!1),[j,L]=T.useState(""),[H,P]=T.useState(!1),[_,B]=T.useState(null),q=T.useRef(null),Z=T.useRef(!1),ne=T.useRef(null),U=T.useRef(null),X=T.useRef(null),F=T.useRef(null),R=T.useRef(null),K=T.useRef(null);T.useEffect(()=>{let W=!0;return(async()=>{try{const he=await Dl();W&&y(he)}catch{}})(),()=>{W=!1}},[]),T.useEffect(()=>{const W=he=>{try{const Se=he?.detail||{};Se&&(typeof Se.dataUrl=="string"||typeof Se.uri=="string")?y(ue=>({dataUrl:typeof Se.dataUrl=="string"?Se.dataUrl:ue?.dataUrl,mimeType:typeof Se.mimeType=="string"?Se.mimeType:ue?.mimeType,uri:typeof Se.uri=="string"?Se.uri:ue?.uri,updatedAt:Date.now()})):Dl().then(ue=>y(ue)).catch(()=>{})}catch{}};return window.addEventListener("maestro-avatar-updated",W),()=>window.removeEventListener("maestro-avatar-updated",W)},[]);const V=T.useCallback(()=>{const W=RA.findIndex(Se=>Se.id===c),he=RA[(W+1)%RA.length];s("tts",{...r.tts,voiceName:he.id})},[c,s,r.tts]),ge=async()=>{try{const W=(await Eo())?.text??"";L(W),N(!0)}catch{L(""),N(!0)}},me=async()=>{try{await gd(j.trim());try{window.dispatchEvent(new CustomEvent("globalProfileUpdated"))}catch{}}finally{N(!1)}},G=T.useCallback(async()=>{try{await new Promise(W=>{let he=!1;try{const Se=indexedDB.deleteDatabase(gy);Se.onsuccess=()=>{he=!0,W()},Se.onerror=()=>{W()},Se.onblocked=()=>{W()}}catch{W()}setTimeout(()=>{he||W()},1500)})}catch{}},[]),D=async()=>{try{E(!0),X.current||(X.current=m(Pt.MAESTRO_AVATAR))}catch{}try{const W=p?.uri;if(W)try{await tR(W)}catch{}try{await gw()}catch{}y(null);try{window.dispatchEvent(new CustomEvent("maestro-avatar-updated",{detail:{}}))}catch{}}catch{}try{const W=await fetch("/maestro-avatars/manifest.json",{cache:"force-cache"});let he=!1;if(W.ok){const Se=await W.json();if(Array.isArray(Se))for(const ue of Se)try{const Ce=await fetch(`/maestro-avatars/${ue}`,{cache:"force-cache"});if(Ce.ok){const Pe=await Ce.blob(),Ge=Pe.type||"image/png",be=await new Promise((qe,Rt)=>{const gt=new FileReader;gt.onloadend=()=>qe(gt.result),gt.onerror=()=>Rt(gt.error||new Error("DataURL conversion failed")),gt.readAsDataURL(Pe)});let we,je=Ge;try{const qe=await Va(be,Ge,"maestro-avatar");we=qe.uri,je=qe.mimeType}catch{}const at={dataUrl:be,mimeType:je,uri:we,updatedAt:Date.now()};try{await rs(at)}catch{}y(at);try{window.dispatchEvent(new CustomEvent("maestro-avatar-updated",{detail:at}))}catch{}he=!0;break}}catch{}}if(!he){y(null);try{window.dispatchEvent(new CustomEvent("maestro-avatar-updated",{detail:{}}))}catch{}}}catch{y(null);try{window.dispatchEvent(new CustomEvent("maestro-avatar-updated",{detail:{}}))}catch{}}finally{try{E(!1)}catch{}try{K.current&&(K.current.value="",K.current.click())}catch{}X.current&&(g(X.current),X.current=null)}},te=async W=>{F.current&&(g(F.current),F.current=null);const he=W.target.files?.[0];if(!he){W.target.value="";return}if(!he.type.startsWith("image/")){W.target.value="";return}try{E(!0),X.current||(X.current=m(Pt.MAESTRO_AVATAR));const Se=await new Promise((Ge,be)=>{const we=new FileReader;we.onload=()=>Ge(String(we.result)),we.onerror=je=>be(je),we.readAsDataURL(he)});let ue,Ce=he.type;try{const Ge=await Va(Se,he.type,"maestro-avatar");ue=Ge.uri,Ce=Ge.mimeType}catch{}const Pe={dataUrl:Se,mimeType:Ce,uri:ue,updatedAt:Date.now()};await rs(Pe),y(Pe);try{window.dispatchEvent(new CustomEvent("maestro-avatar-updated",{detail:{uri:ue,mimeType:Ce,dataUrl:Se}}))}catch{}}catch(Se){console.error("Failed to save Maestro avatar:",Se)}finally{E(!1),W.target.value="",X.current&&(g(X.current),X.current=null)}},se=async W=>{const he=W.target.files?.[0];if(he&&o)try{U.current||(U.current=m(Pt.LOAD_POPUP)),await o(he)}finally{U.current&&(g(U.current),U.current=null)}W.target.value=""},re=async()=>{if(e){ne.current||(ne.current=m(Pt.SAVE_POPUP));try{await e()}finally{ne.current&&(g(ne.current),ne.current=null)}}},ve=async()=>{if(b==="DELETE")try{const W=`backup-before-reset-${new Date().toISOString().slice(0,10)}`;e&&await e({filename:`${W}.ndjson`,auto:!0}),await new Promise(he=>setTimeout(he,500)),await G(),window.location.reload()}catch{M("")}},Me=T.useCallback(()=>{if(Z.current){Z.current=!1;return}D()},[S]),Ve=T.useCallback(()=>{if(Z.current){Z.current=!1;return}V()},[V]),ae=W=>({Zephyr:ey,Puck:ny,Charon:ay,Kore:ts,Fenrir:ty})[W]||ts,Ne=W=>({Zephyr:"ring-cyan-300/50 bg-cyan-900/40",Puck:"ring-amber-300/50 bg-amber-900/40",Charon:"ring-emerald-300/50 bg-emerald-900/40",Kore:"ring-blue-300/50 bg-blue-900/40",Fenrir:"ring-rose-300/50 bg-rose-900/40"})[W]||"ring-blue-300/50 bg-blue-900/40",nt=ae(c),Te=Ne(c).split(" ")[1]||"bg-blue-900/40";return C.jsx("div",{className:"w-full py-3 px-4 min-h-[64px] flex items-center justify-between gap-4",children:x?C.jsxs("div",{className:"flex-1 flex items-center justify-between animate-fade-in gap-3",children:[C.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[C.jsx("span",{className:"text-xs font-bold text-red-300 uppercase tracking-wider whitespace-nowrap",children:"Reset:"}),C.jsx("input",{className:"flex-1 min-w-[100px] bg-red-950/30 border border-red-500/30 rounded px-2 py-1.5 text-sm text-red-100 placeholder-red-400/30 focus:outline-none focus:border-red-400 focus:bg-red-950/50 transition-colors",placeholder:'Type "DELETE"',value:b,onChange:W=>M(W.target.value),autoFocus:!0})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{type:"button",onClick:ve,disabled:b!=="DELETE",className:"p-2 bg-red-500/80 hover:bg-red-500 rounded-full text-white disabled:opacity-30 disabled:cursor-not-allowed transition-all shadow-lg shadow-red-900/20",children:C.jsx(tr,{className:"w-4 h-4"})}),C.jsx("button",{type:"button",onClick:()=>{k(!1),M("")},className:"p-2 bg-slate-700/50 hover:bg-slate-600 rounded-full text-slate-300 transition-colors",children:C.jsx(jr,{className:"w-4 h-4"})})]})]}):O?C.jsxs("div",{className:"flex-1 flex items-center justify-between animate-fade-in gap-3",children:[C.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[C.jsx("span",{className:"text-xs font-bold text-blue-300 uppercase tracking-wider whitespace-nowrap",children:"Profile:"}),C.jsx("input",{className:"flex-1 min-w-[100px] bg-blue-950/30 border border-blue-500/30 rounded px-2 py-1.5 text-sm text-blue-100 placeholder-blue-400/30 focus:outline-none focus:border-blue-400 focus:bg-blue-950/50 transition-colors",placeholder:"Your name or details...",value:j,onChange:W=>L(W.target.value),autoFocus:!0,onKeyDown:W=>W.key==="Enter"&&me()})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{type:"button",onClick:me,className:"p-2 bg-green-500/80 hover:bg-green-500 rounded-full text-white transition-all shadow-lg shadow-green-900/20",children:C.jsx(tr,{className:"w-4 h-4"})}),C.jsx("button",{type:"button",onClick:()=>N(!1),className:"p-2 bg-slate-700/50 hover:bg-slate-600 rounded-full text-slate-300 transition-colors",children:C.jsx(jr,{className:"w-4 h-4"})})]})]}):C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"flex items-center",children:C.jsx("button",{type:"button",onClick:ge,className:"group p-2.5 rounded-full text-slate-400 hover:text-white hover:bg-white/10 transition-all",title:"Edit User Profile",children:C.jsx(er,{className:"w-4 h-4 opacity-70 group-hover:opacity-100"})})}),C.jsxs("div",{className:"flex items-center bg-slate-800/60 backdrop-blur-sm rounded-full p-1 border border-white/5 shadow-inner",children:[C.jsx("button",{type:"button",onClick:re,className:"p-2 hover:bg-white/10 rounded-full text-slate-300 hover:text-white transition-colors",title:t("startPage.saveChats"),children:C.jsx(Ov,{className:"w-4 h-4"})}),C.jsx("div",{className:"w-px h-4 bg-white/10 mx-0.5"}),C.jsx("button",{type:"button",onClick:()=>R.current?.click(),className:"p-2 hover:bg-white/10 rounded-full text-slate-300 hover:text-white transition-colors",title:t("startPage.loadChats"),children:C.jsx(Vv,{className:"w-4 h-4"})}),C.jsx("div",{className:"w-px h-4 bg-white/10 mx-0.5"}),C.jsx("button",{type:"button",onClick:()=>k(!0),className:"p-2 hover:bg-red-500/20 rounded-full text-slate-300 hover:text-red-200 transition-colors",title:"Backup & Reset",children:C.jsx(jl,{className:"w-4 h-4"})})]}),C.jsx("input",{type:"file",ref:R,onChange:se,accept:".json,.ndjson,.jsonl",className:"hidden"}),C.jsxs("div",{ref:q,className:"relative group flex items-center justify-center w-14 h-10",onTouchStart:W=>{if(Z.current=!0,!q.current)return;const he=W.touches[0],Se=q.current.getBoundingClientRect(),ue=(he.clientX-Se.left)/Se.width;B(ue<.4?"left":ue>.6?"right":null),P(!0),W.preventDefault()},onTouchMove:W=>{if(!q.current)return;const he=W.touches[0],Se=q.current.getBoundingClientRect(),ue=(he.clientX-Se.left)/Se.width;B(ue<.4?"left":ue>.6?"right":null),W.preventDefault()},onTouchEnd:W=>{if(!q.current)return;const he=W.changedTouches[0];if(he){const Se=q.current.getBoundingClientRect(),ue=(he.clientX-Se.left)/Se.width;ue<.4?S||D():ue>.6&&V()}P(!1),B(null),setTimeout(()=>{Z.current=!1},500)},children:[C.jsxs("button",{type:"button",onClick:S?void 0:Me,className:`absolute left-1/2 -translate-x-[24px] top-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-slate-800 border border-slate-600 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 hover:border-slate-500 hover:z-20 hover:scale-110 transition-all duration-300 shadow-lg z-0 group-hover:-translate-x-[36px] ${H?"-translate-x-[36px] text-white bg-slate-700 border-slate-500 z-20 scale-110":""} ${_==="left"?"text-white bg-slate-700 border-slate-500 z-20 scale-110":""}`,title:t("general.clear")+" / Change Avatar",children:[C.jsx(zA,{className:"w-3.5 h-3.5"}),C.jsx(zA,{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-2.5 w-3 h-3 text-slate-500 opacity-100 group-hover:opacity-0 transition-opacity duration-300 ${H?"opacity-0":""}`})]}),C.jsxs("button",{type:"button",onClick:Ve,className:`absolute right-1/2 translate-x-[24px] top-1/2 -translate-y-1/2 w-8 h-8 rounded-full border flex items-center justify-center hover:z-20 hover:scale-110 transition-all duration-300 shadow-lg z-0 group-hover:translate-x-[36px] ${Ne(c)} ring-1 border-white/10 ${H?"translate-x-[36px]":""} ${_==="right"?"z-20 scale-110":""}`,title:`Voice: ${c}`,children:[C.jsx("div",{className:"absolute inset-0 pointer-events-none",children:C.jsx("div",{className:`absolute inset-0 rounded-full ${Te} animate-voice-ripple`},c)}),C.jsx(nt,{className:"w-3.5 h-3.5 text-white/90 animate-voice-swap"},c),C.jsx(Yv,{className:`absolute right-0 top-1/2 -translate-y-1/2 translate-x-2.5 w-3 h-3 text-white/70 opacity-100 group-hover:opacity-0 transition-opacity duration-300 ${H?"opacity-0":""}`})]}),C.jsx("div",{className:"relative z-10 w-10 h-10 pointer-events-none",children:C.jsxs("div",{className:`w-full h-full rounded-full overflow-hidden border-2 flex items-center justify-center bg-slate-900 transition-all duration-300
                    ${p?.dataUrl?"border-blue-400/60 shadow-[0_0_15px_rgba(96,165,250,0.5)]":"border-slate-600 border-dashed opacity-80"}`,children:[p?.dataUrl?C.jsx("img",{src:p.dataUrl,alt:"Maestro",className:"w-full h-full object-cover"}):C.jsx(cd,{className:"w-4 h-4 text-slate-500"}),S&&C.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center backdrop-blur-[1px]",children:C.jsx(Ya,{className:"w-4 h-4 text-white"})})]})}),C.jsx("input",{type:"file",ref:K,onChange:te,accept:"image/*",className:"hidden"})]})]})})},In=(t,e)=>({get current(){return e(t())},set current(o){}}),El=(t,e,o)=>({get current(){return e(t())},set current(r){o(r)}}),CR=({isLoadingHistory:t,selectedLanguagePairId:e,activityTokens:o,isVisualContextActive:r,triggerReengagementSequence:s,addActivityToken:c,removeActivityToken:A})=>{const f=Q(U=>U.reengagementPhase),m=Q(U=>U.setReengagementPhase),g=Q(U=>U.setReengagementDeadline),p=Q(U=>U.setIsUserActive),y=T.useRef({waitTimer:null,countdownTimer:null}),S=T.useRef({waitToken:null,countdownToken:null}),E=T.useRef(null),x=T.useRef(!1),k=T.useRef(()=>{}),b=T.useRef(()=>{}),M=T.useRef(()=>{}),O=T.useRef(()=>!1),N=T.useRef(s),j=T.useRef(c),L=T.useRef(A),H=T.useMemo(()=>In(Q.getState,U=>U.settings),[]);T.useEffect(()=>{N.current=s},[s]),T.useEffect(()=>{j.current=c},[c]),T.useEffect(()=>{L.current=A},[A]);const P=T.useCallback(()=>t||!e||r?!1:![...o].some(X=>!Pl(X)),[t,e,r,o]);T.useEffect(()=>{O.current=P},[P]);const _=T.useCallback(()=>{const U=y.current;U.waitTimer&&(clearTimeout(U.waitTimer),U.waitTimer=null),U.countdownTimer&&(clearTimeout(U.countdownTimer),U.countdownTimer=null);const X=S.current;X.waitToken&&(L.current(X.waitToken),X.waitToken=null),X.countdownToken&&(L.current(X.countdownToken),X.countdownToken=null),E.current=null,g(null),m("idle")},[g,m]);T.useEffect(()=>{b.current=_},[_]);const B=T.useCallback((U,X)=>{if(!O.current()){b.current();return}const F=y.current;F.waitTimer&&(clearTimeout(F.waitTimer),F.waitTimer=null),F.countdownTimer&&(clearTimeout(F.countdownTimer),F.countdownTimer=null);const R=S.current;R.countdownToken&&(L.current(R.countdownToken),R.countdownToken=null),R.waitToken&&(L.current(R.waitToken),R.waitToken=null);const K=Math.max(0,Math.floor(Number.isFinite(U)?U:0)),V=j.current(rn.UI,`${Pt.REENGAGE_WAIT}:${X}`);if(R.waitToken=V,K>1e4){const me=Math.floor(K*.6),G=K-me;E.current=Date.now()+K,g(E.current),m("waiting"),F.waitTimer=window.setTimeout(()=>{m("watching"),F.waitTimer=window.setTimeout(()=>{F.waitTimer=null,M.current("timer-elapsed")},G)},me)}else E.current=Date.now()+K,g(E.current),m("watching"),F.waitTimer=window.setTimeout(()=>{F.waitTimer=null,M.current("timer-elapsed")},K)},[g,m]),q=T.useCallback((U,X)=>{const F=H.current.smartReengagement.thresholdSeconds*1e3,R=typeof X=="number"&&Number.isFinite(X)?X:F;if(!O.current()){b.current();return}B(R,U)},[B]);T.useEffect(()=>{k.current=q},[q]);const Z=T.useCallback(U=>{if(x.current){k.current("user-active-during-countdown");return}if(!O.current()){k.current("countdown-blocked");return}const X=y.current;X.waitTimer&&(clearTimeout(X.waitTimer),X.waitTimer=null);const F=S.current;F.waitToken&&(L.current(F.waitToken),F.waitToken=null),F.countdownToken&&(L.current(F.countdownToken),F.countdownToken=null),X.countdownTimer&&(clearTimeout(X.countdownTimer),X.countdownTimer=null);const R=j.current(rn.UI,`${Pt.REENGAGE_COUNTDOWN}:${U}`);F.countdownToken=R,E.current=null,g(null),m("countdown"),X.countdownTimer=window.setTimeout(async()=>{if(X.countdownTimer=null,x.current){k.current("user-active-during-countdown");return}if(!O.current()){k.current("countdown-blocked");return}b.current(),await N.current()},5e3)},[g,m]);T.useEffect(()=>{M.current=Z},[Z]);const ne=T.useCallback(()=>{x.current=!0,p(!0),b.current(),setTimeout(()=>{x.current=!1,p(!1)},3e3)},[p]);return{reengagementPhase:f,scheduleReengagement:q,cancelReengagement:_,isReengagementToken:Pl,handleUserActivity:ne,setReengagementPhase:m}},TR=({isSettingsLoaded:t,settings:e,languagePairs:o,handleSettingsChange:r,isLanguageSelectionOpen:s,tempNativeLangCode:c,tempTargetLangCode:A,languageSelectorLastInteraction:f,setIsLanguageSelectionOpen:m,setTempNativeLangCode:g,setTempTargetLangCode:p})=>{const y=T.useCallback(()=>{const k=Q.getState();if(ja(k))return;m(!0);const b=k.settings.selectedLanguagePairId;if(b){const M=Xl(b);M?(g(M.nativeCode),p(M.targetCode)):(g(null),p(null))}},[m,g,p]),S=T.useCallback(k=>{g(k),k&&k===A&&p(null)},[g,A,p]),E=T.useCallback(k=>{p(k)},[p]),x=T.useCallback(async()=>{if(!c||!A)return;const k=`${A}-${c}`,b=Q.getState(),M=b.settings.selectedLanguagePairId;if(k!==M&&M)try{await oi(M,b.messages)}catch(N){console.error(`[useLanguageSelectionController] Failed to save chat history for pairId=${M}:`,N)}if(o.some(N=>N.id===k)){const N=b.settings.isSuggestionMode,j=Bn(N?c:A);r("stt",{...b.settings.stt,language:j}),r("selectedLanguagePairId",k)}m(!1)},[c,A,o,r,m]);return T.useEffect(()=>{if(t&&!e.selectedLanguagePairId){const k=typeof navigator<"u"&&navigator.language||ko,b=uy(k)||Ay(k)||Yt.find(M=>M.langCode===ko);g(b.langCode),p(null),m(!0)}},[t,e.selectedLanguagePairId,g,p,m]),T.useEffect(()=>{let k;return s&&c&&A&&(k=window.setTimeout(()=>{Date.now()-f>=4500&&x()},5e3)),()=>clearTimeout(k)},[s,c,A,x,f]),{handleShowLanguageSelector:y,handleTempNativeSelect:S,handleTempTargetSelect:E,handleConfirmLanguageSelection:x}},y0="singleton";async function wR(){const t=await _n();return new Promise((e,o)=>{const c=t.transaction(Jr,"readonly").objectStore(Jr).get(y0);c.onerror=()=>o(new Error("Error reading app settings from DB")),c.onsuccess=()=>e(c.result?c.result.settings:null)})}async function es(t){const e=await _n();return new Promise((o,r)=>{const A=e.transaction(Jr,"readwrite").objectStore(Jr).put({key:y0,settings:t});A.onerror=()=>r(new Error("Error saving app settings to DB")),A.onsuccess=()=>o()})}const xv=zT(),Md=50,DA={selectedLanguagePairId:null,selectedCameraId:ar,sendWithSnapshotEnabled:!0,tts:{provider:"gemini-live",speakNative:!0,voiceName:"Kore"},stt:{enabled:!1,language:Bn(Yt.find(t=>t.langCode===ko)?.code||NT[0].code),provider:"gemini"},smartReengagement:{thresholdSeconds:45,useVisualContext:!0},enableGoogleSearch:!0,imageGenerationModeEnabled:!0,imageFocusedModeEnabled:!0,isSuggestionMode:!1,historyBookmarkMessageId:null,maxVisibleMessages:void 0},lc=t=>t.settings,$a=t=>t.languagePairs.find(e=>e.id===t.settings.selectedLanguagePairId),S0=t=>{const e=t.settings.selectedLanguagePairId;if(e&&typeof e=="string"){const o=Xl(e);if(o)return o}return{targetCode:dd,nativeCode:ko}},C0=(t,e)=>Yt.find(o=>o.langCode===t)||Yt.find(o=>o.langCode===e)||Yt[0],cc=t=>{const{targetCode:e}=S0(t);return C0(e,dd)},Pd=t=>{const{nativeCode:e}=S0(t);return C0(e,ko)},ER=(t,e)=>({settings:DA,languagePairs:xv,isSettingsLoaded:!1,needsLanguageSelection:!1,selectedLanguagePair:void 0,currentSystemPromptText:"",currentReplySuggestionsPromptText:"",getSelectedLanguagePair:()=>{const o=e();return o.languagePairs.find(r=>r.id===o.settings.selectedLanguagePairId)},getCurrentSystemPromptText:()=>e().getSelectedLanguagePair()?.baseSystemPrompt||"",getCurrentReplySuggestionsPromptText:()=>e().getSelectedLanguagePair()?.baseReplySuggestionsPrompt||"",initSettings:async()=>{try{let r=await wR()||DA;(!r.tts||r.tts.provider!=="gemini-live")&&(r={...r,tts:{...r.tts,provider:"gemini-live"}}),r.tts?.voiceName||(r={...r,tts:{...r.tts,voiceName:"Kore"}}),(!r.stt||r.stt.provider!=="gemini")&&(r={...r,stt:{...r.stt,provider:"gemini"}}),(!r.selectedLanguagePairId||!xv.some(s=>s.id===r.selectedLanguagePairId))&&(r={...r,selectedLanguagePairId:null},t({needsLanguageSelection:!0})),t({settings:r,isSettingsLoaded:!0});try{await es(r)}catch{}}catch(o){console.error("Failed to load settings:",o),t({settings:DA,isSettingsLoaded:!0})}},updateSetting:(o,r)=>{t(s=>{const c={...s.settings,[o]:r};return es(c).catch(()=>{}),{settings:c}})},setSettings:o=>{t(r=>{const s=typeof o=="function"?o(r.settings):o;return es(s).catch(()=>{}),{settings:s}})},setNeedsLanguageSelection:o=>{t({needsLanguageSelection:o})},setIsSettingsLoaded:o=>{t({isSettingsLoaded:o})}}),bR=1e6,kR=4e6,xR=8e6,Zr=1e7,Ol=80,IR=t=>{const e={...t},o=A=>{if(!A||typeof A!="string")return;const f=A.match(/^data:([^;]+);base64,/i);return f?f[1]:void 0},r=A=>{const f=A.toLowerCase();return f.startsWith("video/")?kR:f.startsWith("image/")?bR:xR},s=A=>{if(!Array.isArray(A)||A.length===0)return;const f=new Set,m=[];if(A.forEach(g=>{if(!g)return;const p=typeof g.key=="string"?g.key:"",y=typeof g.audioDataUrl=="string"?g.audioDataUrl:"";!p||!y||y.length>Zr||f.has(p)||(f.add(p),m.push({key:p,langCode:g.langCode||"",provider:g.provider||"gemini-live",audioDataUrl:y,updatedAt:typeof g.updatedAt=="number"?g.updatedAt:Date.now(),voiceName:g.voiceName,voiceId:g.voiceId}))}),!!m.length)return m.length>Ol?m.slice(-Ol):m},c=A=>{const f={...A};if(Array.isArray(f.ttsAudioCache)){const m=s(f.ttsAudioCache);m&&m.length?f.ttsAudioCache=m:delete f.ttsAudioCache}return f};if(typeof e.storageOptimizedImageUrl=="string"&&e.storageOptimizedImageUrl&&(e.imageUrl=e.storageOptimizedImageUrl,e.imageMimeType=e.storageOptimizedImageMimeType||e.imageMimeType,delete e.storageOptimizedImageUrl,delete e.storageOptimizedImageMimeType),typeof e.imageUrl=="string"){const A=e.imageMimeType||o(e.imageUrl)||"image/*",f=r(A);e.imageUrl.length>f&&(e.imageUrl=void 0,e.imageMimeType=void 0)}if("storageOptimizedImageUrl"in e&&delete e.storageOptimizedImageUrl,"storageOptimizedImageMimeType"in e&&delete e.storageOptimizedImageMimeType,typeof e.rawAssistantResponse=="string"&&e.rawAssistantResponse.length>2e5&&(e.rawAssistantResponse=e.rawAssistantResponse.slice(0,2e5)),Array.isArray(e.ttsAudioCache)){const A=s(e.ttsAudioCache);A&&A.length?e.ttsAudioCache=A:delete e.ttsAudioCache}if(Array.isArray(e.replySuggestions)&&(e.replySuggestions=e.replySuggestions.map(c)),e.recordedUtterance){const A=typeof e.recordedUtterance.dataUrl=="string"?e.recordedUtterance.dataUrl:"";if(!A||A.length>Zr)delete e.recordedUtterance;else{const m=e.recordedUtterance.provider==="gemini"?"gemini":"browser";e.recordedUtterance={dataUrl:A,provider:m,langCode:e.recordedUtterance.langCode,transcript:e.recordedUtterance.transcript,sampleRate:e.recordedUtterance.sampleRate}}}return e},MR=t=>{let e=0;for(let o=0;o<t.length;o++)e=(e<<5)-e+t.charCodeAt(o),e|=0;return Math.abs(e).toString(36)},id=(t,e,o,r)=>{const s=`${o}::${r||""}::${e||""}::${t}`;return`${MR(s)}-${s.length.toString(36)}`},NA=(t,e)=>{if(!Array.isArray(t)||!e)return;const o=t.find(r=>r&&r.key===e);return o?o.audioDataUrl:void 0},GA=(t,e)=>{const o=Array.isArray(t)?t.filter(c=>c&&c.key!==e.key):[],r={...e,langCode:e.langCode,provider:e.provider,updatedAt:e.updatedAt||Date.now()},s=[...o,r];return s.length>Ol?s.slice(-Ol):s},PR=t=>t.messages,T0=t=>t.replySuggestions,RR=t=>t.latestGroundingChunks,DR=(t,e)=>({messages:[],isLoadingHistory:!0,replySuggestions:[],lastFetchedSuggestionsFor:null,sendPrep:null,latestGroundingChunks:void 0,imageLoadDurations:[],attachedImageBase64:null,attachedImageMimeType:null,loadHistoryForPair:async(o,r)=>{t({isLoadingHistory:!0,messages:[],replySuggestions:[]});try{const s=await E0(o),c=(s||[]).map(f=>{if(f.isGeneratingImage||f.thinking){const m={...f};return m.isGeneratingImage&&(m.isGeneratingImage=!1,m.imageGenError=r("chat.error.imageGenInterrupted")),m.thinking&&(m.thinking=!1,!m.text&&!m.translations?.length&&!m.rawAssistantResponse&&(m.role="error",m.text=r("chat.error.thinkingInterrupted"))),m}return f}),A=(s||[]).length>0&&JSON.stringify(s)!==JSON.stringify(c);t({messages:c}),A&&await oi(o,c);try{const f=await $R(o);f&&f.bookmarkMessageId?e().updateSetting("historyBookmarkMessageId",f.bookmarkMessageId):e().updateSetting("historyBookmarkMessageId",null)}catch{}}catch(s){console.error("Failed to load history from IndexedDB",s),t({messages:[]})}finally{t({isLoadingHistory:!1})}},addMessage:o=>{const r={...o,id:crypto.randomUUID(),timestamp:Date.now()};return t(s=>({messages:[...s.messages,r]})),r.id},updateMessage:(o,r)=>{t(s=>({messages:s.messages.map(c=>c.id===o?{...c,...r,timestamp:Date.now()}:c)}))},deleteMessage:o=>{t(r=>({messages:r.messages.filter(s=>s.id!==o)}))},setMessages:o=>{t(r=>({messages:typeof o=="function"?o(r.messages):o}))},setReplySuggestions:o=>{t(r=>({replySuggestions:typeof o=="function"?o(r.replySuggestions):o}))},setLastFetchedSuggestionsFor:o=>{t({lastFetchedSuggestionsFor:o})},setSendPrep:o=>{t(r=>({sendPrep:typeof o=="function"?o(r.sendPrep):o}))},setLatestGroundingChunks:o=>{t({latestGroundingChunks:o})},addImageLoadDuration:o=>{t(s=>{const c=[...s.imageLoadDurations,o];return{imageLoadDurations:c.length>100?c.slice(-100):c}})},setAttachedImage:(o,r)=>{t({attachedImageBase64:o,attachedImageMimeType:r})},upsertMessageTtsCache:(o,r)=>{!r||typeof r.audioDataUrl!="string"||r.audioDataUrl.length===0||r.audioDataUrl.length>Zr||t(s=>({messages:s.messages.map(c=>{if(c.id!==o)return c;const A=GA(c.ttsAudioCache,r);return{...c,ttsAudioCache:A}})}))},upsertSuggestionTtsCache:(o,r,s)=>{!s||typeof s.audioDataUrl!="string"||s.audioDataUrl.length===0||s.audioDataUrl.length>Zr||t(c=>{const A=c.messages.map(m=>{if(m.id!==o||!Array.isArray(m.replySuggestions))return m;const g=m.replySuggestions.map((p,y)=>{if(y!==r)return p;const S=GA(p.ttsAudioCache,s);return{...p,ttsAudioCache:S}});return{...m,replySuggestions:g}});let f=c.replySuggestions;return c.lastFetchedSuggestionsFor===o&&(f=c.replySuggestions.map((m,g)=>{if(g!==r)return m;const p=GA(m.ttsAudioCache,s);return{...m,ttsAudioCache:p}})),{messages:A,replySuggestions:f}})},trimHistoryByBookmark:o=>{const r=e().settings.historyBookmarkMessageId;if(!r||!o.some(c=>c.id===r))return o;const s=o.findIndex(c=>c.id===r&&!c.thinking);return s===-1?o:o.slice(s+1)},getHistoryRespectingBookmark:o=>e().settings.historyBookmarkMessageId?e().trimHistoryByBookmark(o):o,computeMaxMessagesForArray:o=>{const r=e().settings,s=o.filter(Hl);if(r.historyBookmarkMessageId){const c=s.findIndex(A=>A.id===r.historyBookmarkMessageId);if(c!==-1)return Math.max(0,s.length-(c+1))}},getMessages:()=>e().messages}),NR=t=>t.speakingUtteranceText,GR=(t,e)=>({transcript:"",sttError:null,isSpeechRecognitionSupported:typeof navigator<"u"&&!!navigator.mediaDevices?.getUserMedia,recordedUtterancePending:null,pendingRecordedAudioMessageId:null,sttInterruptedBySend:!1,speakingUtteranceText:null,isSpeechSynthesisSupported:typeof window<"u"&&(!!(window.AudioContext||window.webkitAudioContext)||typeof Audio<"u"),setTranscript:o=>{t({transcript:o})},clearTranscript:()=>{t({transcript:""})},setSttError:o=>{t({sttError:o})},setIsSpeechRecognitionSupported:o=>{t({isSpeechRecognitionSupported:o})},setRecordedUtterancePending:o=>{t({recordedUtterancePending:o})},setPendingRecordedAudioMessageId:o=>{t({pendingRecordedAudioMessageId:o})},setSttInterruptedBySend:o=>{t({sttInterruptedBySend:o})},setSpeakingUtteranceText:o=>{t({speakingUtteranceText:o})},setIsSpeechSynthesisSupported:o=>{t({isSpeechSynthesisSupported:o})},claimRecordedUtterance:()=>{const o=e().recordedUtterancePending;return o&&t({recordedUtterancePending:null}),o}}),BR=(t,e)=>({availableCameras:[],currentCameraFacingMode:"unknown",liveVideoStream:null,visualContextStream:null,visualContextCameraError:null,snapshotUserError:null,microphoneApiAvailable:typeof window<"u"&&!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),isCurrentlyPerformingVisualContextCapture:!1,setAvailableCameras:o=>{t({availableCameras:o})},setCurrentCameraFacingMode:o=>{t({currentCameraFacingMode:o})},setLiveVideoStream:o=>{const r=e().liveVideoStream;r&&r.getTracks().forEach(s=>s.stop()),t({liveVideoStream:o})},setVisualContextStream:o=>{const r=e().visualContextStream;r&&r.getTracks().forEach(s=>s.stop()),t({visualContextStream:o})},setVisualContextCameraError:o=>{t({visualContextCameraError:o})},setSnapshotUserError:o=>{t({snapshotUserError:o})},setIsCurrentlyPerformingVisualContextCapture:o=>{t({isCurrentlyPerformingVisualContextCapture:o})},cleanupStreams:()=>{const{liveVideoStream:o,visualContextStream:r}=e();o&&o.getTracks().forEach(s=>s.stop()),r&&r.getTracks().forEach(s=>s.stop()),t({liveVideoStream:null,visualContextStream:null})}}),_R=t=>({reengagementPhase:"idle",isUserActive:!1,reengagementDeadline:null,setReengagementPhase:e=>{t({reengagementPhase:e})},setIsUserActive:e=>{t({isUserActive:e})},setReengagementDeadline:e=>{t({reengagementDeadline:e})},markUserActive:()=>{t({isUserActive:!0,reengagementPhase:"idle",reengagementDeadline:null})}}),LR=t=>({liveSessionState:"idle",liveSessionError:null,setLiveSessionState:e=>{t(o=>({...o,liveSessionState:e,liveSessionError:e==="connecting"?null:o.liveSessionError}))},setLiveSessionError:e=>{t({liveSessionError:e})},resetLiveSession:()=>{t({liveSessionState:"idle",liveSessionError:null})}}),UR=t=>({showDebugLogs:!1,setShowDebugLogs:e=>{t({showDebugLogs:e})},toggleDebugLogs:()=>{t(e=>({showDebugLogs:!e.showDebugLogs}))}}),zR=typeof import.meta<"u"&&!1,Q=fT()(CT(yT((...t)=>({...ER(...t),...DR(...t),...GR(...t),...BR(...t),..._R(...t),...LR(...t),...IT(...t),...UR(...t)}),{name:"MaestroStore",enabled:zR}))),FR=Q.subscribe,w0=xa.memo(({message:t,isFocusedMode:e,speakingUtteranceText:o,estimatedLoadTime:r,loadingGifs:s,t:c,onToggleSpeakNativeLang:A,handleSpeakWholeMessage:f,handleSpeakLine:m,handlePlayUserMessage:g,speakText:p,stopSpeaking:y,onToggleImageFocusedMode:S,transitioningImageId:E,onSetAttachedImage:x,onUserInputActivity:k,registerBubbleEl:b})=>{const M=t.role==="user",O=Q(lc),N=Q($a),j=Q(cc),L=Q(Pd),H=Q($r),P=Q(ja),_=O.tts.speakNative,B=T.useMemo(()=>Bn(N?.targetLanguageCode||j?.code||"es"),[N,j]),q=T.useMemo(()=>Bn(N?.nativeLanguageCode||L?.code||"en"),[N,L]),[Z,ne]=T.useState(!1),[U,X]=T.useState(null),[F,R]=T.useState(null),[K,V]=T.useState(!1),ge=Z&&e,me=t.role==="assistant",G=t.role==="error",D=t.role==="status",[te,se]=T.useState(null),[re,ve]=T.useState(!1),Me=T.useRef(null),Ve=T.useRef(null),ae=T.useRef(null),[Ne,nt]=T.useState(null),[Te,W]=T.useState(!1),he=T.useRef(null),Se=T.useRef(null),ue=T.useRef(null),Ce=T.useRef(null),Pe=T.useRef(null),Ge=T.useRef(!1),be=T.useRef(null),we=T.useRef([]),je=T.useRef(null),at=T.useRef(0),qe=T.useRef(!0),[Rt,gt]=T.useState([]),[$e,mt]=T.useState(1),[Je,Ct]=T.useState({x:0,y:0}),ht=T.useRef(null),Tt=Q($=>$.addActivityToken),Ht=Q($=>$.removeActivityToken),Ut=T.useCallback($=>Tt(rn.UI,`${$}:${Date.now()}:${Math.random().toString(36).slice(2,8)}`),[Tt]),fn=T.useCallback($=>{$.stopPropagation();const Ee=$.currentTarget;Ee.setPointerCapture($.pointerId);const xe={x:$.clientX,y:$.clientY},Ue=40,ct=8;let ut=!1;const tn=Bt=>{const Xt=Bt.clientX-xe.x,wn=Bt.clientY-xe.y;ut||(e?(Xt<-Ue||wn<-Ue)&&(ut=!0,S(),Ze(Bt)):(Xt>Ue||wn>Ue)&&(ut=!0,S(),Ze(Bt)))},Ze=Bt=>{if(!ut){const Xt=Math.abs(Bt.clientX-xe.x),wn=Math.abs(Bt.clientY-xe.y);Xt<=ct&&wn<=ct&&S()}try{Ee.hasPointerCapture(Bt.pointerId)&&Ee.releasePointerCapture(Bt.pointerId)}catch{}window.removeEventListener("pointermove",tn),window.removeEventListener("pointerup",Ze),window.removeEventListener("pointercancel",Ze)};window.addEventListener("pointermove",tn),window.addEventListener("pointerup",Ze),window.addEventListener("pointercancel",Ze)},[e,S]),oe=T.useCallback($=>{if(!e||!$)return;ht.current||(ht.current=Ut(Pt.BUBBLE_ANNOTATE));let Ee=1;if(ue.current&&ue.current.naturalWidth>0){const xe=ue.current;Ee=xe.getBoundingClientRect().width/xe.naturalWidth}else if(Se.current&&Se.current.videoWidth>0){const xe=Se.current;Ee=xe.getBoundingClientRect().width/xe.videoWidth,R(xe.videoWidth/xe.videoHeight)}else Pe.current&&(Ee=1);mt(Ee),Ct({x:0,y:0}),X($),gt([]),qe.current=!0,k(),ne(!0)},[e,k,Ut]),it=()=>{const $=Se.current;if(!$)return;if(!$.paused){alert(c("chat.error.pauseVideoToAnnotate"));return}if($.videoWidth===0||$.videoHeight===0)return;R($.videoWidth/$.videoHeight);const Ee=document.createElement("canvas");Ee.width=$.videoWidth,Ee.height=$.videoHeight;const xe=Ee.getContext("2d");if(xe){xe.drawImage($,0,0,Ee.width,Ee.height);const Ue=Ee.toDataURL("image/jpeg",.92);oe(Ue)}},lt=$=>{ae.current={x:$.clientX,y:$.clientY}},Fe=($,Ee,xe,Ue,ct)=>{if(ae.current){const ut=Math.abs($.clientX-ae.current.x),tn=Math.abs($.clientY-ae.current.y);ut<10&&tn<10&&($.preventDefault(),H?y():P||m(Ee,xe,Ue,ct,t.id))}ae.current=null},wt=()=>{ae.current=null},Dt=$=>{if(!t.text){ae.current=null;return}if(ae.current){const Ee=Math.abs($.clientX-ae.current.x),xe=Math.abs($.clientY-ae.current.y);Ee<10&&xe<10&&($.preventDefault(),H?y():P||g(t))}ae.current=null};T.useEffect(()=>{let $;if(t.isGeneratingImage&&t.imageGenerationStartTime&&r>0){const Ee=()=>{const xe=Date.now()-t.imageGenerationStartTime,Ue=r*1e3,ct=Math.max(0,Ue-xe);se(`Est: ${(ct/1e3).toFixed(0)}s`),ct===0&&xe>Ue+5e3&&se(c("chat.generatingImageLoadingSlow"))};Ee(),$=window.setInterval(Ee,1e3)}else se(null);return()=>{$&&clearInterval($)}},[t.isGeneratingImage,t.imageGenerationStartTime,r,c]),T.useEffect(()=>()=>{Me.current&&(Ht(Me.current),Me.current=null)},[Ht]);const Nt=T.useCallback(()=>{X(null),ne(!1),Ge.current=!1,be.current=null,mt(1),Ct({x:0,y:0}),we.current=[],gt([]),qe.current=!0,ht.current&&(Ht(ht.current),ht.current=null)},[Ht]),pt=()=>{if(!Ce.current||!ue.current||!Pe.current)return;const $=ue.current,Ee=Ce.current,Ue=Pe.current.getBoundingClientRect(),ct=document.createElement("canvas");ct.width=Ue.width,ct.height=Ue.height;const ut=ct.getContext("2d");ut.save(),ut.translate(Ue.width/2,Ue.height/2),ut.translate(Je.x,Je.y),ut.scale($e,$e),ut.drawImage($,-$.naturalWidth/2,-$.naturalHeight/2,$.naturalWidth,$.naturalHeight),ut.drawImage(Ee,-$.naturalWidth/2,-$.naturalHeight/2,$.naturalWidth,$.naturalHeight),ut.restore();const tn=ct.toDataURL("image/jpeg",.9);x(tn,"image/jpeg"),k(),Nt(),ht.current&&(Ht(ht.current),ht.current=null)},cn=T.useCallback(()=>{const $=Ce.current,Ee=$?.getContext("2d");!$||!Ee||gt(xe=>{if(xe.length===0)return[];const Ue=xe.slice(0,-1);return Ee.clearRect(0,0,$.width,$.height),Ue.length>0&&Ee.putImageData(Ue[Ue.length-1],0,0),Ue})},[]),jt=T.useCallback($=>{const Ee=Ce.current;if(!Ee)return null;const xe=Ee.getBoundingClientRect(),Ue=($.clientX-xe.left)*(Ee.width/xe.width),ct=($.clientY-xe.top)*(Ee.height/xe.height);return{x:Ue,y:ct}},[]),Ae=T.useCallback($=>{if($.stopPropagation(),$.preventDefault(),we.current.push($),document.body.style.overscrollBehavior="none",$.currentTarget.setPointerCapture($.pointerId),we.current.length===1)Ge.current=!0,be.current=jt($),qe.current=!0;else if(we.current.length===2){Ge.current=!1;const Ee=Pe.current?.getBoundingClientRect();if(!Ee)return;const xe=we.current[0],Ue=we.current[1];at.current=Math.hypot(xe.clientX-Ue.clientX,xe.clientY-Ue.clientY),je.current={x:(xe.clientX+Ue.clientX)/2-Ee.left,y:(xe.clientY+Ue.clientY)/2-Ee.top}}},[jt]),Ke=T.useCallback($=>{$.preventDefault();const Ee=we.current.findIndex(xe=>xe.pointerId===$.pointerId);if(Ee!==-1){if(we.current[Ee]=$,we.current.length===1&&Ge.current&&be.current){const xe=jt($),Ue=Ce.current,ct=Ue?.getContext("2d");if(ct&&xe){if(qe.current&&Ue){const ut=ct.getImageData(0,0,Ue.width,Ue.height);gt(tn=>[...tn,ut]),qe.current=!1}ct.beginPath(),ct.moveTo(be.current.x,be.current.y),ct.lineTo(xe.x,xe.y),ct.stroke(),be.current=xe}}else if(we.current.length===2){const xe=Pe.current?.getBoundingClientRect();if(!xe)return;const Ue=we.current[0],ct=we.current[1],ut=Math.hypot(Ue.clientX-ct.clientX,Ue.clientY-ct.clientY),tn={x:(Ue.clientX+ct.clientX)/2-xe.left,y:(Ue.clientY+ct.clientY)/2-xe.top},Ze=je.current?tn.x-je.current.x:0,Bt=je.current?tn.y-je.current.y:0,Xt=at.current>0?ut/at.current:1;Ct(wn=>{const J={x:wn.x+Ze,y:wn.y+Bt},Ie={x:tn.x-xe.width/2,y:tn.y-xe.height/2};return{x:Ie.x-(Ie.x-J.x)*Xt,y:Ie.y-(Ie.y-J.y)*Xt}}),mt(wn=>Math.max(.2,Math.min(wn*Xt,15))),at.current=ut,je.current=tn}}},[jt]),De=T.useCallback($=>{$.preventDefault(),$.currentTarget.releasePointerCapture($.pointerId),we.current=we.current.filter(Ee=>Ee.pointerId!==$.pointerId),we.current.length<2&&(at.current=0,je.current=null),we.current.length<1&&(Ge.current=!1,be.current=null,document.body.style.overscrollBehavior="auto")},[]),Re=T.useCallback($=>{$.preventDefault();const Ee=$.deltaY>0?.9:1.1,xe=$.currentTarget.getBoundingClientRect(),Ue={x:$.clientX-xe.left,y:$.clientY-xe.top};mt(ct=>{const ut=Math.max(.2,Math.min(ct*Ee,15));return Ct(tn=>({x:Ue.x-(Ue.x-tn.x)*(ut/ct),y:Ue.y-(Ue.y-tn.y)*(ut/ct)})),ut})},[]);T.useEffect(()=>{if(!Z||!U)return;const $=Ce.current,Ee=$?.getContext("2d"),xe=ue.current;if(!$||!Ee||!xe)return;const Ue=()=>{xe.naturalWidth>0&&xe.naturalHeight>0&&($.width=xe.naturalWidth,$.height=xe.naturalHeight,Ee.strokeStyle="#EF4444",Ee.lineWidth=Math.max(5,xe.naturalWidth*.01),Ee.lineCap="round",Ee.lineJoin="round")};return xe.complete&&xe.naturalWidth>0?Ue():xe.addEventListener("load",Ue),()=>{xe&&xe.removeEventListener("load",Ue)}},[Z,U]);const Be=t.imageUrl||t.storageOptimizedImageUrl,He=t.imageMimeType||t.storageOptimizedImageMimeType,st=!!He?.startsWith("image/"),vt=!!He?.startsWith("video/"),rt=!!He?.startsWith("audio/"),et=st&&Be&&!t.isGeneratingImage&&!t.imageGenError,Ye=vt&&Be,We=rt&&Be&&!t.isGeneratingImage&&!t.imageGenError,_e=!st&&!vt&&!rt&&Be&&!t.isGeneratingImage&&!t.imageGenError,Le=T.useMemo(()=>{const $=s,Ee=$&&$.length>0?$:[];if(!t.isGeneratingImage||Ee.length===0)return null;const xe=`${t.id||""}|${t.imageGenerationStartTime||0}`;let Ue=0;for(let ut=0;ut<xe.length;ut++)Ue=(Ue<<5)-Ue+xe.charCodeAt(ut),Ue|=0;const ct=Math.abs(Ue)%Ee.length;return Ee[ct]},[t.id,t.imageGenerationStartTime,t.isGeneratingImage,s]);T.useEffect(()=>{V(!1)},[Le,t.id,t.isGeneratingImage]);const Qe=e&&(et||t.isGeneratingImage||_e||Ye||We);if(t.thinking&&!t.isGeneratingImage)return C.jsx("div",{className:"flex justify-start mb-3 animate-pulse",children:C.jsx("div",{className:"bg-gray-200 rounded-lg p-3 max-w-xl",children:C.jsx("p",{className:"text-sm text-gray-700",children:c("chat.thinking")})})});const Jt=M?"justify-end":"justify-start",Mt=t.text||t.translations&&t.translations.some($=>$.target||$.native)||t.rawAssistantResponse,Zt=t.text?t.text.replace(/\*/g,""):"",dn=M&&Zt&&o===Zt;let Gt="shadow relative overflow-hidden rounded-lg transition-all duration-300 ease-in-out";Qe?(Gt+=" w-full",!et&&!t.isGeneratingImage&&!_e&&!Ye&&(Gt+=" p-3",M?Gt+=" bg-blue-500 bg-opacity-90 text-white":G?Gt+=" bg-red-100 bg-opacity-90 text-red-700":D?Gt+=" bg-yellow-100 bg-opacity-90 text-yellow-700":Gt+=" bg-white bg-opacity-90 text-gray-800")):(Gt+=" p-3 max-w-[90%] sm:max-w-[80%] md:max-w-[70%] lg:max-w-[65%]",M?Gt+=" bg-blue-500 bg-opacity-90 text-white":G?Gt+=" bg-red-100 bg-opacity-90 text-red-700":D?Gt+=" bg-yellow-100 bg-opacity-90 text-yellow-700":Gt+=" bg-white bg-opacity-90 text-gray-800");const sn="relative rounded-lg group transition-all duration-300 ease-in-out";let ot="",dt="",ke="flex items-center justify-center";Qe?(ot="w-full max-h-[75vh]",t.isGeneratingImage||_e?dt="aspect-square":(et||Ye)&&(ge?(dt="bg-gray-800",ke=""):dt="")):(ot="w-full max-w-[250px] mx-auto my-2",dt="aspect-square");const Et=t.isGeneratingImage?Qe?M?"bg-blue-600/40":"bg-slate-700/50":M?"bg-blue-400/30":"bg-gray-200/50":"",xt={};return(et||Ye)&&t.id===E&&(xt.viewTransitionName=`image-transition-${t.id}`,xt.contain="layout"),(ge||e&&et)&&F&&(xt.aspectRatio=`${F}`),C.jsx("div",{className:`flex mb-4 ${Jt}`,children:C.jsxs("div",{className:Gt,style:{touchAction:"pan-y",containerType:"inline-size",width:"100%"},ref:b,children:[(t.isGeneratingImage||et||_e||Ye||We)&&C.jsxs("div",{ref:Pe,className:`${sn} ${ot} ${dt} ${Et} ${ke}`,style:{...xt,overflow:"hidden",touchAction:ge?"none":"auto",position:"relative"},onPointerDown:ge?Ae:void 0,onPointerMove:ge?Ke:void 0,onPointerUp:ge?De:void 0,onPointerCancel:ge?De:void 0,onWheel:ge?Re:void 0,children:[t.isGeneratingImage&&C.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end z-20",children:[C.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-black/30 drop-shadow-md flex items-center justify-center",children:Le&&!K?C.jsx("img",{src:Le,alt:c("chat.imagePreview.alt"),className:"w-full h-full object-contain opacity-90",onError:()=>V(!0)}):C.jsx(Ya,{className:"w-full h-full text-slate-100"})}),te&&C.jsx("p",{className:`mt-1 text-right text-xs px-1.5 py-0.5 rounded ${Qe?"text-slate-200 bg-slate-800/60":"text-gray-700 bg-gray-100/70"}`,children:te})]}),(et||ge&&U)&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{style:ge?{width:ue.current?.naturalWidth,height:ue.current?.naturalHeight,position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${Je.x}px, ${Je.y}px) scale(${$e})`,transition:we.current.length>0?"none":"transform 0.1s ease-out"}:{position:"relative",width:"100%",height:"100%"},children:[C.jsx("img",{ref:ue,src:ge?U:Be,alt:c(ge?"chat.annotateModal.editingPreviewAlt":"chat.imagePreview.alt"),className:`block w-full h-full pointer-events-none ${ge?"":"object-contain"}`,style:{opacity:ge?.7:1},onLoad:$=>{const Ee=$.currentTarget;if(Ee.naturalWidth>0&&Ee.naturalHeight>0&&(R(Ee.naturalWidth/Ee.naturalHeight),ge&&Pe.current)){const xe=Pe.current.clientWidth;mt(xe/Ee.naturalWidth),Ct({x:0,y:0})}}}),ge&&C.jsx("canvas",{ref:Ce,className:"absolute top-0 left-0 w-full h-full cursor-crosshair"})]}),!ge&&e&&et&&C.jsx("button",{onClick:()=>oe(Be),className:"absolute top-2 right-2 z-20 p-2 bg-black/50 text-white rounded-full hover:bg-black/75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-white transition-colors",title:c("chat.annotateImage"),"aria-label":c("chat.annotateImage"),children:C.jsx(er,{className:"w-5 h-5"})}),ge&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"absolute top-2 right-2 z-30 pointer-events-auto",onPointerDown:$=>{$.stopPropagation(),$.preventDefault()},onPointerUp:$=>{$.stopPropagation(),$.preventDefault()},onPointerCancel:$=>{$.stopPropagation(),$.preventDefault()},onClick:$=>{$.stopPropagation(),$.preventDefault()},children:C.jsx("button",{onClick:Nt,className:"p-2 bg-black/60 text-white rounded-full hover:bg-black/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-white transition-colors",title:c("chat.annotateModal.cancel"),"aria-label":c("chat.annotateModal.cancel"),children:C.jsx(qa,{className:"w-5 h-5"})})}),C.jsx("div",{className:"absolute bottom-2 left-2 z-30 pointer-events-auto",onPointerDown:$=>{$.stopPropagation(),$.preventDefault()},onPointerUp:$=>{$.stopPropagation(),$.preventDefault()},onPointerCancel:$=>{$.stopPropagation(),$.preventDefault()},onClick:$=>{$.stopPropagation(),$.preventDefault()},children:C.jsx("button",{onClick:cn,disabled:Rt.length===0,className:"p-2 bg-black/60 text-white rounded-full hover:bg-black/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:c("chat.annotateModal.undo"),"aria-label":c("chat.annotateModal.undo"),"aria-disabled":Rt.length===0,children:C.jsx(jr,{className:"w-5 h-5"})})}),C.jsx("div",{className:"absolute bottom-2 right-2 z-30 pointer-events-auto",onPointerDown:$=>{$.stopPropagation(),$.preventDefault()},onPointerUp:$=>{$.stopPropagation(),$.preventDefault()},onPointerCancel:$=>{$.stopPropagation(),$.preventDefault()},onClick:$=>{$.stopPropagation(),$.preventDefault()},children:C.jsx("button",{onClick:pt,className:"p-2 bg-white text-black rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-white transition-colors",title:c("chat.annotateModal.saveAndAttach"),"aria-label":c("chat.annotateModal.saveAndAttach"),children:C.jsx(tr,{className:"w-5 h-5"})})})]})]}),Ye&&!ge&&C.jsxs("div",{className:"relative",children:[C.jsx("video",{ref:Se,src:Be,controls:!0,onPlay:()=>{ve(!0),Me.current||(Me.current=Ut(Pt.VIDEO_PLAY))},onPause:()=>{ve(!1),Me.current&&(Ht(Me.current),Me.current=null)},onEnded:()=>{ve(!1),Me.current&&(Ht(Me.current),Me.current=null)},className:"block w-full h-full object-contain rounded-lg bg-black",children:c("chat.videoNotSupported")}),C.jsx("button",{onClick:it,disabled:re,className:"absolute top-2 right-2 z-20 p-1.5 bg-black/50 text-white rounded-full hover:bg-black/75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:c(re?"chat.error.pauseVideoToAnnotate":"chat.annotateVideoFrame"),"aria-label":c(re?"chat.error.pauseVideoToAnnotate":"chat.annotateVideoFrame"),children:C.jsx(er,{className:"w-4 h-4"})})]}),(et||Ye)&&!ge&&C.jsx("div",{ref:Ve,onPointerDown:fn,className:"absolute bottom-0 right-0 cursor-se-resize p-2 touch-none z-30 opacity-100",title:c(e?"chat.image.dragToShrink":"chat.image.dragToEnlarge"),children:C.jsx("div",{style:{filter:"drop-shadow(0 1px 1px rgba(0,0,0,0.7))"},children:C.jsx(Zv,{className:"w-4 h-4 text-white"})})}),_e&&C.jsxs("div",{className:`p-4 flex flex-col items-center justify-center text-center rounded-lg h-full ${M?"bg-blue-400":"bg-gray-200"}`,children:[C.jsx(Yl,{className:`w-10 h-10 ${M?"text-blue-100":"text-gray-500"}`}),C.jsx("p",{className:`mt-2 text-xs font-mono break-all ${M?"text-white":"text-gray-700"}`,children:t.imageMimeType}),C.jsx("p",{className:`mt-1 text-xs ${M?"text-blue-200":"text-gray-500"}`,children:c("chat.fileAttachment")})]}),We&&!ge&&C.jsxs("div",{className:"relative w-full",children:[C.jsx("audio",{src:Be,controls:!0,className:"w-full",children:c("chat.audioNotSupported")}),C.jsx("p",{className:`mt-2 text-xs font-mono break-all ${M?"text-white/80":"text-gray-700"}`,children:He})]})]}),t.imageGenError&&!t.isGeneratingImage&&C.jsxs("div",{className:`flex flex-col items-center justify-center p-2 rounded-lg 
                  ${Qe?"absolute inset-0 bg-black/60 z-20":`my-2 ${M?"bg-blue-400/60":"bg-gray-300/60"}`}
               `,children:[C.jsx(qa,{className:"w-8 h-8 text-red-300 mb-1"}),C.jsxs("p",{className:`text-xs text-center ${Qe?"text-red-200":"text-red-700"}`,children:[c("chat.imageGenError"),": ",t.imageGenError]})]}),Mt&&C.jsxs("div",{className:`transition-opacity duration-300
                ${Qe?"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/80 via-black/60 to-transparent text-white rounded-b-lg z-10":"relative z-10 mt-1"}
                ${ge?"opacity-0 pointer-events-none":"opacity-100"}
            `,children:[C.jsx("style",{children:`
        @keyframes pop-fade-speak { 0% { transform: scale(0.85); opacity: 0; } 20% { transform: scale(1.15); opacity: 1; } 80% { transform: scale(1.0); opacity: 1; } 100% { transform: scale(0.95); opacity: 0; } }
        .animate-speak-flash { animation: pop-fade-speak 900ms ease-out both; }
        `}),me&&Qe&&t.translations&&t.translations.length>0?C.jsx(C.Fragment,{children:C.jsx(oy,{translations:t.translations,speakingUtteranceText:o,currentTargetLangCode:B,currentNativeLangCode:q,t:c,isSpeaking:H,isSending:P,speakText:p,stopSpeaking:y,speakNativeLang:_,onToggleSpeakNativeLang:A,messageId:t.id})}):C.jsxs(C.Fragment,{children:[M&&t.text&&C.jsx("p",{className:`mb-1 whitespace-pre-wrap rounded-sm px-1 -mx-1 cursor-pointer transition-colors text-white ${dn?"bg-white/20 text-white":"hover:bg-white/10"}`,style:{fontSize:"3.8cqw",lineHeight:1.35},onPointerDown:lt,onPointerUp:Dt,onPointerLeave:wt,role:"button",tabIndex:P&&!H?-1:0,onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),H?y():P||g(t))},"aria-label":dn?c("chat.stopSpeaking")||"Stop playback":c("chat.speakThisLine")?`${c("chat.speakThisLine")}: ${Zt}`:"Play message audio","aria-disabled":P&&!H,children:t.text}),me&&t.translations&&t.translations.length>0&&t.translations.map(($,Ee)=>{const xe=$.target&&o===$.target.replace(/\*/g,""),Ue=$.native&&o===$.native.replace(/\*/g,""),ct=xe||Ue;return C.jsxs("div",{className:Ee>0&&!Qe?"mt-2":"",children:[$.target&&C.jsx("p",{className:`font-semibold whitespace-pre-wrap cursor-pointer transition-colors rounded-sm px-1 -mx-1 ${Qe?ct?"bg-sky-400 text-sky-900":"hover:text-sky-200 text-white":ct?"bg-sky-100 text-sky-800":"hover:text-blue-600 text-gray-800"}`,style:{fontSize:"4cqw",lineHeight:1.3},onPointerDown:lt,onPointerUp:ut=>{if(ae.current){const tn=Math.abs(ut.clientX-ae.current.x),Ze=Math.abs(ut.clientY-ae.current.y);if(tn<10&&Ze<10){if(ut.preventDefault(),H){y(),ae.current=null;return}if(P){ae.current=null;return}const Bt=Ee,Xt=[],wn={source:"message",messageId:t.id};for(let J=Bt;J<(t.translations?.length||0);J++){const Ie=t.translations[J],Oe=Ie.target?.trim(),bt=Ie.native?.trim();Oe&&Xt.push({text:Oe,langCode:B,context:wn}),_&&bt&&Xt.push({text:bt,langCode:q,context:wn})}Xt.length&&p(Xt,Xt[0].langCode)}}ae.current=null},onPointerLeave:wt,onKeyDown:ut=>{(ut.key==="Enter"||ut.key===" ")&&(ut.preventDefault(),H?y():P||m($.target,B,$.native,q,t.id))},role:"button",tabIndex:P&&!H?-1:0,"aria-label":`${c(H?"chat.stopSpeaking":"chat.speakThisLine")}: ${$.target.replace(/\*/g,"")}`,"aria-disabled":P&&!H,children:$.target}),$.native&&C.jsxs("p",{className:`italic mt-0.5 whitespace-pre-wrap pl-2 border-l-2 rounded-sm px-1 -mx-1 ${Qe?ct?"bg-slate-500 text-slate-100":"text-gray-200 border-gray-400":ct?"bg-slate-200 text-slate-800":"text-gray-500 border-gray-300"}`,style:{fontSize:"3.55cqw",lineHeight:1.3},onPointerDown:lt,onPointerUp:ut=>{if(ae.current){const tn=Math.abs(ut.clientX-ae.current.x),Ze=Math.abs(ut.clientY-ae.current.y);if(tn<10&&Ze<10){ut.preventDefault();const Bt=!_;nt(Ee),W(Bt),he.current&&clearTimeout(he.current),he.current=window.setTimeout(()=>{nt(null)},900),A()}}ae.current=null},onPointerLeave:wt,children:[$.native,Ne===Ee&&C.jsx("span",{className:"ml-1 inline-block align-middle animate-speak-flash",children:Te?"":""})]})]},Ee)}),me&&(!t.translations||t.translations.length===0)&&t.rawAssistantResponse&&(()=>{const $=t.rawAssistantResponse&&o===t.rawAssistantResponse.replace(/\*/g,"");return C.jsx("p",{className:`whitespace-pre-wrap cursor-pointer transition-colors rounded-sm px-1 -mx-1 ${Qe?$?"bg-sky-400 text-sky-900":"hover:text-sky-200 text-white":$?"bg-sky-100 text-sky-800":"hover:text-blue-600 text-gray-800"}`,style:{fontSize:"4cqw",lineHeight:1.3},onPointerDown:lt,onPointerUp:Ee=>Fe(Ee,t.rawAssistantResponse,B),onPointerLeave:wt,onKeyDown:Ee=>{(Ee.key==="Enter"||Ee.key===" ")&&(Ee.preventDefault(),H?y():P||m(t.rawAssistantResponse,B,void 0,void 0,t.id))},role:"button",tabIndex:P&&!H?-1:0,"aria-label":`${c(H?"chat.stopSpeaking":"chat.speakThisLine")}: ${t.rawAssistantResponse.replace(/\*/g,"")}`,"aria-disabled":P&&!H,children:t.rawAssistantResponse})})(),(G||D)&&t.text&&C.jsx("p",{className:`${Qe?G?"text-red-200 font-semibold":"text-yellow-200 font-semibold":""}`,style:{fontSize:"3.2cqw",lineHeight:1.25},children:t.text}),me&&!t.translations?.length&&!t.rawAssistantResponse&&!t.imageUrl&&!t.isGeneratingImage&&t.text&&C.jsx("p",{className:`whitespace-pre-wrap ${Qe?"text-white":"text-gray-800"}`,style:{fontSize:"3.6cqw",lineHeight:1.35},children:t.text})]})]})]})})});w0.displayName="ChatMessageBubble";const KR=({t,onToggleSuggestionMode:e,onSuggestionClick:o,stopSpeaking:r})=>{const s=Q(T0),c=Q(Jl),A=Q(Ad),f=Q($r),g=Q(lc).isSuggestionMode,y=Q(j=>j.microphoneApiAvailable),[S,E]=T.useState(null),[x,k]=T.useState(null),[b,M]=T.useState(null);T.useEffect(()=>{M(null)},[s]);const O=j=>{if(f){S&&(clearTimeout(S),E(null)),k(null),M(null),r();return}const L=Date.now();if(S&&(clearTimeout(S),E(null)),x&&x.suggestion.target===j.target&&L-x.timestamp<300)o(j,"native"),M(j.target),k(null);else{k({suggestion:j,timestamp:L});const H=window.setTimeout(()=>{o(j,"target"),M(null),k(null),E(null)},300);E(H),b!==null&&b!==j.target&&M(null)}};return C.jsx("div",{className:"pt-2 max-w-2xl w-full",role:"toolbar","aria-label":t("chat.suggestionsAriaLabel"),style:{containerType:"inline-size"},children:C.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[c&&C.jsx("span",{className:"inline-block px-3 py-1.5 text-gray-500 italic",style:{fontSize:"2.8cqw"},children:t("chat.loadingSuggestions")}),!c&&s.map((j,L)=>C.jsx("button",{onClick:H=>{H.stopPropagation(),O(j)},className:`inline-block px-3 py-1.5 rounded-full transition-colors text-gray-700 bg-gray-200 hover:bg-gray-300 ${b===j.target?"focus:outline-none focus:ring-2 focus:ring-sky-400":"focus:outline-none focus:ring-2 focus:ring-blue-400"}`,style:{fontSize:"3.1cqw"},title:t("chat.suggestion.speak",{suggestion:j.target}),"aria-label":t("chat.suggestion.ariaLabel",{suggestion:j.target}),tabIndex:0,children:j.target},L)),!c&&y&&s.length>0&&C.jsx("button",{onClick:j=>{j.stopPropagation(),e()},className:`inline-flex items-center justify-center w-[34px] h-[34px] text-sm rounded-full transition-colors disabled:opacity-50
                        ${g?"bg-sky-500 text-white animate-pulse":"text-gray-700 bg-gray-200 hover:bg-gray-300"}
                        focus:outline-none focus:ring-2 focus:ring-blue-400`,style:{fontSize:"3cqw"},title:t("chat.suggestion.toggleCreateMode"),"aria-label":t("chat.suggestion.toggleCreateMode"),"aria-pressed":g,disabled:A,children:A?C.jsx(Ya,{className:"w-5 h-5 text-sky-200"}):C.jsx(Wv,{className:"w-5 h-5"})})]})})},HR=({t,liveSessionState:e,isSuggestionMode:o,onStartLiveSession:r,onStopLiveSession:s})=>{const c=e==="active",A=e==="connecting",f=e==="error",m=t(c?"chat.liveSession.stop":f?"chat.liveSession.retry":"chat.liveSession.start"),g=c?"bg-red-600/80 hover:bg-red-500 text-white":f?"bg-yellow-500/80 hover:bg-yellow-500 text-slate-900":o?"bg-gray-700/80 hover:bg-gray-800 text-white":"bg-black/60 hover:bg-black/80 text-white",p=T.useCallback(()=>{c?s():Promise.resolve(r()).catch(y=>{console.error("Failed to start live session:",y)})},[c,r,s]);return C.jsxs("div",{className:"absolute top-1 right-1 flex items-center gap-2 z-30",children:[A&&C.jsx(Ya,{className:"w-5 h-5 text-white drop-shadow"}),C.jsx("button",{type:"button",onClick:p,disabled:A,className:`px-2 py-1 text-xs font-semibold rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-white/50 ${g} ${A?"opacity-70 cursor-wait":""}`,children:m})]})},QR=({t,isSuggestionMode:e,attachedImageBase64:o,attachedImageMimeType:r,showLiveFeed:s,isTwoUp:c,liveVideoStream:A,liveSessionState:f,liveSessionError:m,onStartLiveSession:g,onStopLiveSession:p,onRemoveAttachment:y,onAnnotateImage:S,onAnnotateVideo:E,onSetAttachedImage:x,onUserInputActivity:k,attachedPreviewVideoRef:b})=>{const M=Q(re=>re.addActivityToken),O=Q(re=>re.removeActivityToken),N=T.useCallback(re=>M(rn.UI,`${re}:${Date.now()}:${Math.random().toString(36).slice(2,8)}`),[M]),j=T.useCallback(re=>{re&&O(re)},[O]),L=T.useRef(null),[H,P]=T.useState(!1),_=T.useRef(null),[B,q]=T.useState(!1),Z=T.useRef(null),ne=T.useRef([]),U=T.useRef(null),X=T.useRef(null),F=T.useRef(null),R=()=>{const re=["video/webm;codecs=vp9,opus","video/webm;codecs=vp8,opus","video/webm"];for(const ve of re)if(window.MediaRecorder?.isTypeSupported?.(ve))return ve;return""},K=T.useCallback(()=>{const re=Z.current;if(re&&re.state==="recording"){try{re.requestData()}catch{}re.stop()}U.current&&(clearTimeout(U.current),U.current=null),q(!1),X.current&&(j(X.current),X.current=null)},[j]);T.useEffect(()=>()=>{const re=Z.current;if(re&&re.state==="recording")try{re.stop()}catch{}U.current&&(clearTimeout(U.current),U.current=null),F.current&&(clearTimeout(F.current),F.current=null),X.current&&(j(X.current),X.current=null)},[j]);const V=T.useCallback(()=>{if(!(B||!A))try{X.current||(X.current=N(Pt.VIDEO_RECORD));const re=R(),ve=re?{mimeType:re}:{},Me=new MediaRecorder(A,ve);Z.current=Me,ne.current=[],Me.ondataavailable=Ve=>{Ve.data&&Ve.data.size>0&&ne.current.push(Ve.data)},Me.onstop=()=>{const Ve=Me.mimeType||re||"video/webm",ae=ne.current;if(ne.current=[],!ae.length)return;const Ne=new Blob(ae,{type:Ve}),nt=new FileReader;nt.onloadend=()=>{x(nt.result,Ve),k()},nt.readAsDataURL(Ne),X.current&&(j(X.current),X.current=null)},Me.start(1e3),q(!0),U.current=window.setTimeout(()=>{Z.current?.state==="recording"&&(K(),alert(t("chat.error.recordingTimeExceeded",{maxMinutes:15})))},900*1e3)}catch(re){console.error("Failed to start media recorder:",re),X.current&&(j(X.current),X.current=null)}},[B,A,x,k,t,K,N,j]),ge=T.useCallback(()=>{if(!L.current||!A||!L.current.srcObject||L.current.videoWidth===0||L.current.videoHeight===0)return;const re=L.current,ve=document.createElement("canvas");ve.width=re.videoWidth,ve.height=re.videoHeight;const Me=ve.getContext("2d");if(Me){Me.drawImage(re,0,0,ve.width,ve.height);const Ve=ve.toDataURL("image/jpeg",.9);x(Ve,"image/jpeg"),k()}},[A,x,k]),me=()=>{F.current&&clearTimeout(F.current),F.current=window.setTimeout(()=>{V(),F.current=null},500)},G=()=>{F.current&&(clearTimeout(F.current),F.current=null,ge())},D=()=>{F.current&&(clearTimeout(F.current),F.current=null)};if(T.useEffect(()=>{L.current&&A?L.current.srcObject!==A?(L.current.srcObject=A,L.current.play().catch(re=>console.error("Error playing live preview:",re))):L.current.paused&&L.current.play().catch(re=>console.error("Error playing live preview:",re)):L.current&&!A&&(L.current.srcObject=null)},[A,o]),!o&&!s)return null;const te=f==="active",se=f==="connecting";return C.jsxs("div",{className:"flex flex-wrap justify-center items-start gap-2 mb-2 order-first w-full",children:[o&&C.jsxs("div",{className:`relative ${c?"w-[calc(50%-0.25rem)] sm:w-48":"w-48"} min-w-0 ${e?"bg-gray-300":"bg-blue-400"} p-1 rounded-md`,children:[r?.startsWith("image/")?C.jsxs("div",{className:"relative",children:[C.jsx("img",{src:o,alt:t("chat.imagePreview.alt"),className:"h-24 w-full object-cover rounded"}),C.jsx("button",{type:"button",onClick:S,className:"absolute top-1.5 right-1.5 p-1.5 bg-black/60 text-white rounded-full hover:bg-black",title:t("chat.annotateImage"),children:C.jsx(er,{className:"w-4 h-4"})})]}):r?.startsWith("video/")?C.jsxs("div",{className:"relative",children:[C.jsx("video",{ref:b,src:o,controls:!0,className:"h-24 w-full object-contain rounded bg-black",onPlay:()=>{P(!0),_.current||(_.current=N(Pt.VIDEO_PLAY))},onPause:()=>{P(!1),_.current&&(j(_.current),_.current=null)},onEnded:()=>{P(!1),_.current&&(j(_.current),_.current=null)}}),C.jsx("button",{type:"button",onClick:E,disabled:H,className:"absolute top-1.5 right-1.5 p-1.5 bg-black/60 text-white rounded-full hover:bg-black disabled:opacity-50",title:t(H?"chat.error.pauseVideoToAnnotate":"chat.annotateVideoFrame"),children:C.jsx(er,{className:"w-4 h-4"})})]}):r?.startsWith("audio/")?C.jsxs("div",{className:"relative",children:[C.jsx("audio",{src:o,controls:!0,className:"h-24 w-full object-contain rounded bg-black/5"}),C.jsx("span",{className:`text-xs mt-1 truncate max-w-full px-1 block ${e?"text-gray-600":"text-white"}`,children:r})]}):C.jsxs("div",{className:`h-24 w-full flex flex-col items-center justify-center ${e?"bg-gray-100":"bg-blue-300"} rounded`,children:[C.jsx(Yl,{className:`w-8 h-8 ${e?"text-gray-500":"text-blue-100"}`}),C.jsx("span",{className:`text-xs mt-1 truncate max-w-full px-1 ${e?"text-gray-600":"text-white"}`,children:r})]}),C.jsx("div",{className:"absolute -top-2 -right-2 flex items-center space-x-1",children:C.jsx("button",{type:"button",onClick:y,className:"p-1 bg-red-500/80 text-white rounded-full hover:bg-red-500","aria-label":t("chat.removeAttachedImage"),children:C.jsx(qa,{className:"w-4 h-4"})})})]}),s&&C.jsxs("div",{className:`relative ${c?"w-[calc(50%-0.25rem)] sm:w-48":"w-48"} min-w-0 ${e?"bg-gray-300":"bg-blue-400"} p-1 rounded-md`,children:[C.jsxs("div",{className:"relative group",children:[C.jsx("video",{ref:L,autoPlay:!0,playsInline:!0,muted:!0,className:"h-24 w-full object-cover rounded pointer-events-none"}),C.jsx(HR,{t,liveSessionState:f,isSuggestionMode:e,onStartLiveSession:g,onStopLiveSession:p}),C.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 group-hover:bg-black/40 transition-colors",children:te?C.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-red-600/80 text-white uppercase text-xs font-semibold tracking-wide",children:[C.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-white animate-pulse","aria-hidden":!0}),t("chat.liveSession.liveBadge")||"Live"]}):se?C.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-black/60 text-white text-xs",children:[C.jsx(Ya,{className:"w-4 h-4 text-white"}),C.jsx("span",{children:t("chat.liveSession.connecting")||"Connecting"})]}):B?C.jsx("button",{type:"button",onClick:K,className:"p-2 rounded-full bg-red-500/80 text-white group-hover:bg-red-500 transition-colors","aria-label":t("chat.camera.stopRecording"),children:C.jsx("div",{className:"w-4 h-4 bg-white rounded-sm"})}):C.jsx("button",{type:"button",onPointerDown:me,onPointerUp:G,onPointerLeave:D,onContextMenu:re=>re.preventDefault(),className:"p-2 rounded-full bg-white/30 text-white group-hover:bg-white/50 transition-colors","aria-label":t("chat.camera.captureOrRecord"),children:C.jsx($i,{className:"w-6 h-6"})})}),B&&!te&&!se&&C.jsxs("div",{className:"absolute top-1 left-1 flex items-center space-x-1 p-1 bg-black/50 rounded-lg z-20",children:[C.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),C.jsx("span",{className:"text-white text-xs font-mono",children:"REC"})]})]}),m&&C.jsx("div",{className:`mt-1 px-2 py-1 text-xs rounded ${e?"bg-red-100 text-red-700":"bg-red-600/20 text-red-100"}`,children:m})]})]})},OR=({t,inputText:e,placeholder:o,isDisabled:r,onChange:s,onKeyDown:c,bubbleTextAreaRef:A,prepDisplay:f})=>C.jsxs("div",{className:"relative w-full",children:[C.jsx("textarea",{ref:A,rows:1,className:"w-full py-3 px-4 bg-transparent border-none focus:ring-0 resize-none overflow-hidden placeholder-inherit min-h-[50px]",style:{fontSize:"3.6cqw",lineHeight:1.35},placeholder:o,value:e,onChange:s,onKeyDown:c,disabled:r,"aria-label":t("chat.messageInputAriaLabel")}),f&&C.jsx("output",{className:"sr-only","aria-live":"polite",children:f})]}),VR=({t,isLanguageSelectionOpen:e,isSttSupported:o,isSttGloballyEnabled:r,isListening:s,isSending:c,isSpeaking:A,targetLanguageDef:f,nativeLanguageDef:m,isSuggestionMode:g,onSttToggle:p,onSetAttachedImage:y,onUserInputActivity:S})=>{const E=Q(D=>D.addActivityToken),x=Q(D=>D.removeActivityToken),k=T.useCallback(D=>E(rn.UI,`${D}:${Date.now()}:${Math.random().toString(36).slice(2,8)}`),[E]),b=T.useCallback(D=>{D&&x(D)},[x]),[M,O]=T.useState(!1),N=T.useRef(null),j=T.useRef([]),L=T.useRef(null),H=T.useRef(null),P=T.useRef(null),_=T.useRef(!1),B=()=>{const D=["audio/webm;codecs=opus","audio/ogg;codecs=opus","audio/mp4","audio/webm"];for(const te of D)if(window.MediaRecorder?.isTypeSupported?.(te))return te;return""},q=T.useCallback(async()=>{if(!(M||r))try{const D=await navigator.mediaDevices.getUserMedia({audio:!0});L.current=D;const te=B(),se=te?{mimeType:te}:{},re=new MediaRecorder(D,se);N.current=re,j.current=[],re.ondataavailable=ve=>{ve.data&&ve.data.size&&j.current.push(ve.data)},re.onstop=()=>{const ve=re.mimeType||te||"audio/webm",Me=j.current;if(j.current=[],L.current){try{L.current.getTracks().forEach(Ne=>Ne.stop())}catch{}L.current=null}if(H.current&&(b(H.current),H.current=null),!Me.length)return;const Ve=new Blob(Me,{type:ve}),ae=new FileReader;ae.onloadend=()=>{y(ae.result,ve),S()},ae.readAsDataURL(Ve)},re.onerror=()=>{try{L.current?.getTracks()?.forEach(ve=>ve.stop())}catch{}L.current=null,O(!1),H.current&&(b(H.current),H.current=null)},H.current||(H.current=k(Pt.AUDIO_NOTE)),re.start(250),O(!0)}catch(D){console.error("Failed to start audio note recording:",D),O(!1),_.current=!1}},[M,r,y,S,k,b]),Z=T.useCallback(()=>{const D=N.current;if(D&&D.state==="recording"){try{D.requestData()}catch{}D.stop()}O(!1),H.current&&(b(H.current),H.current=null)},[b]),ne=T.useCallback(D=>{r||c||A||(D.preventDefault(),D.stopPropagation(),_.current=!1,P.current&&(clearTimeout(P.current),P.current=null),P.current=window.setTimeout(async()=>{P.current=null,_.current=!0,await q()},450))},[r,c,A,q]),U=T.useCallback(D=>{P.current&&(clearTimeout(P.current),P.current=null),!r&&_.current&&(Z(),D.preventDefault(),D.stopPropagation(),window.setTimeout(()=>{_.current=!1},200))},[r,Z]),X=T.useCallback(()=>{P.current&&(clearTimeout(P.current),P.current=null),!r&&_.current&&(Z(),_.current=!1)},[r,Z]),F=T.useCallback(D=>{if(_.current){_.current=!1,D.preventDefault(),D.stopPropagation();return}P.current&&(clearTimeout(P.current),P.current=null),p()},[p]);T.useEffect(()=>()=>{P.current&&(clearTimeout(P.current),P.current=null);const D=N.current;if(D&&D.state==="recording")try{D.stop()}catch{}if(N.current=null,L.current){try{L.current.getTracks().forEach(te=>te.stop())}catch{}L.current=null}H.current&&(b(H.current),H.current=null)},[b]);const R=()=>{if(M){try{const D=t("chat.mic.recordingAudioNote");if(D!=="chat.mic.recordingAudioNote")return D}catch{}return"Recording audio... release to attach"}return t(s?"chat.mic.listening":r?"chat.mic.disableStt":"chat.mic.enableStt")},K=Q(D=>D.setIsLanguageSelectionOpen),V=Q(D=>D.setTempNativeLangCode),ge=Q(D=>D.setTempTargetLangCode),me=Q(D=>D.settings.selectedLanguagePairId),G=T.useCallback(()=>{const D=Q.getState();if(ja(D))return;K(!0);const te=me;if(te&&typeof te=="string"){const se=Xl(te);se?(ge(se.targetCode),V(se.nativeCode)):(V(null),ge(null))}else V(null),ge(null)},[K,V,ge,me]);return C.jsxs("div",{className:"flex items-center space-x-1",children:[!e&&C.jsxs("button",{type:"button",onClick:G,className:`flex flex-col items-center justify-center p-1 rounded-full transition-colors ${g?"hover:bg-gray-100":"hover:bg-white/20"}`,title:t("chat.languageSelector.openGlobe"),disabled:c||A,children:[C.jsxs("span",{className:"flex items-center gap-0.5 leading-none",style:{fontSize:"10px"},children:[m.flag,Rl(m)&&C.jsx("span",{className:`text-[7px] font-bold ${g?"text-gray-500":"text-blue-100"}`,children:m.shortCode})]}),C.jsxs("span",{className:"flex items-center gap-0.5 leading-none",style:{fontSize:"14px"},children:[f.flag,Rl(f)&&C.jsx("span",{className:`text-[9px] font-bold ${g?"text-gray-500":"text-blue-100"}`,children:f.shortCode})]})]}),!e&&o&&C.jsxs("button",{type:"button",onClick:F,onPointerDown:ne,onPointerUp:U,onPointerCancel:X,onPointerLeave:X,onContextMenu:D=>{D.preventDefault(),D.stopPropagation()},style:{WebkitTouchCallout:"none"},className:`relative overflow-visible p-2 rounded-full transition-colors touch-manipulation select-none ${M?"bg-red-500 text-white ring-2 ring-red-300":s?"bg-red-500/80 text-white":g?"text-gray-500 hover:text-gray-900 hover:bg-gray-100":"text-blue-100 hover:text-white hover:bg-white/20"} disabled:opacity-50`,title:R(),disabled:c||A||e,"aria-pressed":s,children:[M&&C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"pointer-events-none absolute -inset-4 rounded-full bg-red-400/30 animate-ping"}),C.jsx("span",{className:"pointer-events-none absolute -inset-6 rounded-full bg-red-400/15 animate-ping",style:{animationDuration:"2s"}})]}),C.jsx(Hv,{className:`relative z-10 w-5 h-5 ${M?"drop-shadow-[0_0_6px_rgba(239,68,68,0.8)]":""}`})]})]})},qR=({t,isLanguageSelectionOpen:e,isSuggestionMode:o,fileInputRef:r,onImageAttach:s,onPaperclipClick:c,availableCameras:A,selectedCameraId:f,currentCameraFacingMode:m,isImageGenCameraSelected:g,sendWithSnapshotEnabled:p,useVisualContextForReengagementEnabled:y,imageGenerationModeEnabled:S,onSelectCamera:E,onToggleSendWithSnapshot:x,onToggleUseVisualContextForReengagement:k,onToggleImageGenerationMode:b,iconButtonStyle:M})=>{const O=p||y,N=T.useMemo(()=>{const H=[...A];return S&&H.push({deviceId:ar,label:t("chat.camera.imageGenCameraLabel"),facingMode:"unknown"}),H},[A,S,t]),j=()=>{p||x(),y||k()},L=()=>{p&&x(),y&&k()};return C.jsx("div",{className:"flex items-center space-x-1",children:!e&&C.jsxs(C.Fragment,{children:[C.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,application/pdf,text/plain,text/csv,text/markdown",ref:r,onChange:s,className:"hidden",id:"imageUpload"}),C.jsx("button",{type:"button",className:`p-2 cursor-pointer rounded-full transition-colors ${M}`,title:t("chat.attachImageFromFile"),onClick:c,children:C.jsx(Yl,{className:"w-5 h-5"})}),O&&N.length>0?C.jsxs("div",{className:`flex items-center p-0.5 ${o?"bg-gray-300/50":"bg-blue-600/50"} rounded-full`,children:[C.jsx("button",{type:"button",onClick:L,className:"p-1.5 rounded-full bg-red-500 text-white hover:bg-red-600",title:t("chat.camera.turnOff"),children:C.jsx(qa,{className:"w-4 h-4"})}),C.jsx("button",{type:"button",onClick:b,className:`p-1.5 ml-1 rounded-full transition-colors ${S?"bg-white text-purple-700":o?"text-gray-700 hover:bg-black/10":"text-blue-100 hover:bg-blue-400/80"}`,title:t("chat.bookIcon.toggleImageGen"),children:C.jsx(Qv,{className:"w-4 h-4"})}),C.jsx("div",{className:"flex items-center space-x-0.5 ml-1",children:N.map(H=>{const P=H.deviceId===f;let _;return H.deviceId===ar?_=_A:H.facingMode==="user"?_=kl:_=$i,C.jsx("button",{type:"button",onClick:()=>E(H.deviceId),className:`p-1.5 rounded-full transition-colors ${P?`${o?"bg-white text-gray-800":"bg-white text-blue-600"}`:`${o?"text-gray-600 hover:bg-black/10":"text-blue-100 hover:bg-blue-400/80"}`}`,title:H.label,children:C.jsx(_,{className:"w-4 h-4"})},H.deviceId)})})]}):C.jsx("button",{type:"button",onClick:j,className:`p-2 cursor-pointer rounded-full transition-colors touch-manipulation ${o?"text-gray-600 hover:text-black hover:bg-black/10":"hover:text-white hover:bg-blue-400/80"} ${g?o?"text-purple-600":"text-purple-300 hover:text-purple-200":""}`,title:t("chat.camera.turnOn"),children:g?C.jsxs("span",{className:"relative inline-flex items-center justify-center w-5 h-5",children:[m==="user"?C.jsx(kl,{className:"w-5 h-5"}):C.jsx($i,{className:"w-5 h-5"}),C.jsx(_A,{className:"w-3 h-3 absolute -top-1 -right-1"})]}):m==="user"?C.jsx(kl,{className:"w-5 h-5"}):C.jsx($i,{className:"w-5 h-5"})})]})})},YR=({onSttToggle:t,onSendMessage:e,onUserInputActivity:o,onStartLiveSession:r,onStopLiveSession:s,onToggleSuggestionMode:c,onCreateSuggestion:A,onToggleSendWithSnapshot:f,onToggleUseVisualContextForReengagement:m,onToggleImageGenerationMode:g})=>{const{t:p}=ei(),y=Q(J=>J.settings),S=Q(cc)||Yt[0],E=Q(Pd)||Yt[0],x=Q(J=>J.attachedImageBase64),k=Q(J=>J.attachedImageMimeType),b=Q(J=>J.sendPrep),M=Q(J=>J.transcript),O=Q(J=>J.sttError),N=Q(J=>J.liveVideoStream),j=Q(J=>J.liveSessionState),L=Q(J=>J.liveSessionError),H=Q(J=>J.availableCameras),P=Q(J=>J.currentCameraFacingMode),_=Q(J=>J.visualContextCameraError),B=Q(J=>J.snapshotUserError),q=Q(J=>J.isSettingsLoaded),Z=Q(J=>J.languagePairs),ne=Q(J=>J.isLanguageSelectionOpen),U=Q(J=>J.tempNativeLangCode),X=Q(J=>J.tempTargetLangCode),F=Q(J=>J.languageSelectorLastInteraction),R=Q(J=>J.setIsLanguageSelectionOpen),K=Q(J=>J.setTempNativeLangCode),V=Q(J=>J.setTempTargetLangCode),ge=Q(J=>J.updateLanguageSelectorInteraction),me=Q(J=>J.updateSetting),G=Q(J=>J.setAttachedImage),D=Q(J=>J.microphoneApiAvailable),te=Q(Ad);T.useMemo(()=>({get current(){return Q.getState().settings},set current(J){}}),[]),T.useMemo(()=>({get current(){return Q.getState().messages},set current(J){}}),[]),T.useMemo(()=>({get current(){return ja(Q.getState())},set current(J){}}),[]);const se=y.isSuggestionMode,re=y.stt.enabled,ve=y.stt.language,Me=D,Ve=y.sendWithSnapshotEnabled,ae=y.smartReengagement.useVisualContext,Ne=y.imageGenerationModeEnabled,nt=y.selectedCameraId,Te=nt===ar,W=T.useCallback((J,Ie)=>{G(J,Ie)},[G]),he=T.useCallback(J=>{me("selectedCameraId",J)},[me]),{handleShowLanguageSelector:Se,handleTempNativeSelect:ue,handleTempTargetSelect:Ce,handleConfirmLanguageSelection:Pe}=TR({isSettingsLoaded:q,settings:y,languagePairs:Z,handleSettingsChange:me,isLanguageSelectionOpen:ne,tempNativeLangCode:U,tempTargetLangCode:X,languageSelectorLastInteraction:F,setIsLanguageSelectionOpen:R,setTempNativeLangCode:K,setTempTargetLangCode:V}),[Ge,be]=T.useState(""),[we,je]=T.useState(""),at=T.useRef(null),qe=T.useRef(null),Rt=T.useRef(""),gt=T.useRef(null),$e=T.useRef(null),mt=!!ne,Je=Q(ja),Ct=Q($r),ht=Q(bT),Tt=Q(J=>J.addActivityToken),Ht=Q(J=>J.removeActivityToken),Ut=T.useCallback(J=>Tt(rn.UI,`${J}:${Date.now()}:${Math.random().toString(36).slice(2,8)}`),[Tt]),fn=T.useCallback(J=>{J&&Ht(J)},[Ht]),[oe,it]=T.useState(!1),[lt,Fe]=T.useState(null),[wt,Dt]=T.useState(null),[Nt,pt]=T.useState(1),[cn,jt]=T.useState({x:0,y:0}),[Ae,Ke]=T.useState([]),De=T.useRef(null),Re=T.useRef(null),Be=T.useRef(null),He=T.useRef(null),st=T.useRef(!1),vt=T.useRef(null),rt=T.useRef([]),et=T.useRef(null),Ye=T.useRef(0),We=T.useRef(!0),_e=!!(N&&(ae||Ve)&&!Te&&!mt),Le=!!(x&&_e);T.useEffect(()=>{if(M===Rt.current)return;if(re||ht){const Ie=M||"",Oe=Ie.match(/\[[^\]]*\]/g)||[],bt=Oe.length?Oe[Oe.length-1].trim():"";je(bt);const Wt=Ie.replace(/\[[^\]]*\]/g," ").replace(/\s+/g," ").trimStart();(Wt.length>0||re)&&(be(Wt),Wt.trim().length>=2&&o())}Rt.current=M},[M,re,ht,o]),T.useEffect(()=>{at.current&&(at.current.style.height="auto",at.current.style.height=`${at.current.scrollHeight}px`)},[Ge]);const Qe=J=>{const Ie=J.target.value;be(Ie),Ie.replace(/\[[^\]]*\]/g," ").trim().length>=2&&o()},Jt=async()=>{if(mt){Se();return}if(se){if(!Ge.trim()||te){Ge.trim()||c();return}const Oe=Ge.trim();be(""),await A(Oe);return}if(Je||Ct||!Ge.trim()&&!x)return;const J=Ge.trim();be(""),await e(J,x||void 0,k||void 0)&&(W(null,null),qe.current&&(qe.current.value=""))},Mt=J=>{J.key==="Enter"&&!J.shiftKey&&(J.preventDefault(),Jt())},Zt=T.useCallback(J=>{He.current||(He.current=Ut(Pt.COMPOSER_ANNOTATE)),Fe(J),setTimeout(()=>{if(Re.current){const Ie=Re.current;if(Ie.naturalWidth>0)if(Dt(Ie.naturalWidth/Ie.naturalHeight),De.current){const Oe=De.current.clientWidth;pt(Oe/Ie.naturalWidth)}else pt(1)}jt({x:0,y:0}),Ke([]),We.current=!0,it(!0)},0)},[Ut]),dn=T.useCallback(()=>{x&&Zt(x)},[x,Zt]),Gt=T.useCallback(()=>{const J=gt.current;if(!J)return;if(!J.paused){alert(p("chat.error.pauseVideoToAnnotate"));return}if(J.videoWidth===0||J.videoHeight===0)return;const Ie=document.createElement("canvas");Ie.width=J.videoWidth,Ie.height=J.videoHeight;const Oe=Ie.getContext("2d");if(!Oe)return;Oe.drawImage(J,0,0,Ie.width,Ie.height);const bt=Ie.toDataURL("image/jpeg",.92);Zt(bt)},[p,Zt]),sn=T.useCallback(J=>{const Ie=Be.current;if(!Ie)return null;const Oe=Ie.getBoundingClientRect();return{x:(J.clientX-Oe.left)*(Ie.width/Oe.width),y:(J.clientY-Oe.top)*(Ie.height/Oe.height)}},[]),ot=T.useCallback(J=>{if(J.preventDefault(),rt.current.push(J),J.currentTarget.setPointerCapture(J.pointerId),document.body.style.overscrollBehavior="none",rt.current.length===1)st.current=!0,vt.current=sn(J),We.current=!0;else if(rt.current.length===2){st.current=!1;const Ie=De.current?.getBoundingClientRect();if(!Ie)return;const[Oe,bt]=rt.current;Ye.current=Math.hypot(Oe.clientX-bt.clientX,Oe.clientY-bt.clientY),et.current={x:(Oe.clientX+bt.clientX)/2-Ie.left,y:(Oe.clientY+bt.clientY)/2-Ie.top}}},[sn]),dt=T.useCallback(J=>{J.preventDefault();const Ie=rt.current.findIndex(Oe=>Oe.pointerId===J.pointerId);if(Ie!==-1){if(rt.current[Ie]=J,rt.current.length===1&&st.current&&vt.current){const Oe=sn(J),bt=Be.current,Wt=bt?.getContext("2d");if(Wt&&Oe){if(We.current){const En=Wt.getImageData(0,0,bt.width,bt.height);Ke(Pn=>[...Pn,En]),We.current=!1}Wt.beginPath(),Wt.moveTo(vt.current.x,vt.current.y),Wt.lineTo(Oe.x,Oe.y),Wt.stroke(),vt.current=Oe}}else if(rt.current.length===2){const Oe=De.current?.getBoundingClientRect();if(!Oe)return;const[bt,Wt]=rt.current,En=Math.hypot(bt.clientX-Wt.clientX,bt.clientY-Wt.clientY),Pn={x:(bt.clientX+Wt.clientX)/2-Oe.left,y:(bt.clientY+Wt.clientY)/2-Oe.top},uc=et.current?Pn.x-et.current.x:0,Hn=et.current?Pn.y-et.current.y:0,Ro=Ye.current>0?En/Ye.current:1;jt(Do=>{const sr={x:Do.x+uc,y:Do.y+Hn},ma={x:Pn.x-Oe.width/2,y:Pn.y-Oe.height/2};return{x:ma.x-(ma.x-sr.x)*Ro,y:ma.y-(ma.y-sr.y)*Ro}}),pt(Do=>Math.max(.2,Math.min(Do*Ro,15))),Ye.current=En,et.current=Pn}}},[sn]),ke=T.useCallback(J=>{J.preventDefault(),J.currentTarget.releasePointerCapture(J.pointerId),rt.current=rt.current.filter(Ie=>Ie.pointerId!==J.pointerId),rt.current.length<2&&(Ye.current=0,et.current=null),rt.current.length<1&&(st.current=!1,vt.current=null,document.body.style.overscrollBehavior="auto")},[]),Et=T.useCallback(J=>{J.preventDefault();const Ie=J.deltaY>0?.9:1.1,Oe=J.currentTarget.getBoundingClientRect(),bt={x:J.clientX-Oe.left,y:J.clientY-Oe.top};pt(Wt=>{const En=Math.max(.2,Math.min(Wt*Ie,15));return jt(Pn=>({x:bt.x-(bt.x-Pn.x)*(En/Wt),y:bt.y-(bt.y-Pn.y)*(En/Wt)})),En})},[]),xt=T.useCallback(()=>{const J=Be.current,Ie=J?.getContext("2d");!J||!Ie||Ke(Oe=>{if(Oe.length===0)return Oe;const bt=Oe.slice(0,-1);return Ie.clearRect(0,0,J.width,J.height),bt.length>0&&Ie.putImageData(bt[bt.length-1],0,0),bt})},[]),$=T.useCallback(()=>{it(!1),Fe(null),st.current=!1,vt.current=null,pt(1),jt({x:0,y:0}),rt.current=[],Ke([]),We.current=!0,He.current&&(fn(He.current),He.current=null)},[fn]),Ee=T.useCallback(()=>{if(!Be.current||!Re.current||!De.current)return;const J=Re.current,Ie=Be.current,bt=De.current.getBoundingClientRect(),Wt=document.createElement("canvas");Wt.width=bt.width,Wt.height=bt.height;const En=Wt.getContext("2d");En.save(),En.translate(Wt.width/2,Wt.height/2),En.translate(cn.x,cn.y),En.scale(Nt,Nt),En.drawImage(J,-J.naturalWidth/2,-J.naturalHeight/2),En.drawImage(Ie,-J.naturalWidth/2,-J.naturalHeight/2),En.restore();const Pn=Wt.toDataURL("image/jpeg",.9);W(Pn,"image/jpeg"),o(),$()},[cn.x,cn.y,Nt,W,o,$]);T.useEffect(()=>{if(!oe||!lt)return;const J=Be.current,Ie=J?.getContext("2d"),Oe=Re.current;if(!J||!Ie||!Oe)return;const bt=()=>{Oe.naturalWidth>0&&(J.width=Oe.naturalWidth,J.height=Oe.naturalHeight,Ie.strokeStyle="#EF4444",Ie.lineWidth=Math.max(5,Oe.naturalWidth*.01),Ie.lineCap="round",Ie.lineJoin="round")};return Oe.complete&&Oe.naturalWidth>0?bt():Oe.addEventListener("load",bt),()=>Oe.removeEventListener("load",bt)},[oe,lt]);const xe=J=>{$e.current&&(fn($e.current),$e.current=null);const Ie=J.target.files?.[0];if(Ie)if(Ie.type.startsWith("video/")){const Oe=document.createElement("video");Oe.preload="metadata",Oe.onloadedmetadata=()=>{window.URL.revokeObjectURL(Oe.src);const bt=new FileReader;bt.onloadend=()=>{W(bt.result,Ie.type)},bt.readAsDataURL(Ie)},Oe.onerror=()=>{window.URL.revokeObjectURL(Oe.src),console.error(p("chat.error.videoMetadataError")),qe.current&&(qe.current.value="")},Oe.src=URL.createObjectURL(Ie)}else{const Oe=new FileReader;Oe.onloadend=()=>{W(Oe.result,Ie.type)},Oe.readAsDataURL(Ie)}},Ue=()=>{W(null,null),qe.current&&(qe.current.value="")};T.useEffect(()=>{const J=()=>{$e.current&&(fn($e.current),$e.current=null)};return window.addEventListener("focus",J),()=>window.removeEventListener("focus",J)},[fn]);const ct=T.useMemo(()=>{if(!b||!b.active)return null;const J=[];if(J.push(b.label||"Preparing..."),typeof b.done=="number"&&typeof b.total=="number"&&b.total>0&&J.push(`${b.done}/${b.total}`),typeof b.etaMs=="number"){const Ie=Math.ceil(b.etaMs/1e3);isFinite(Ie)&&J.push(`~${Ie}s`)}return J.join("  ")},[b]),ut=T.useMemo(()=>ve===S?.langCode?S.flag:ve===E?.langCode?E.flag:S?.flag,[ve,S,E]),tn=()=>mt?"":ct||(se?te?p("chat.suggestion.creating"):ht?we?`${p("chat.placeholder.suggestion.listening",{language:ut})}  ${we}`:p("chat.placeholder.suggestion.listening",{language:ut}):re?we?`${p("chat.placeholder.suggestion.sttActive",{language:ut})}  ${we}`:p("chat.placeholder.suggestion.sttActive",{language:ut}):p("chat.placeholder.suggestion.sttInactive",{language:ut}):ht?we?`${p("chat.placeholder.normal.listening",{language:ut})}  ${we}`:p("chat.placeholder.normal.listening",{language:ut}):re?we?`${p("chat.placeholder.normal.sttActive",{language:ut})}  ${we}`:p("chat.placeholder.normal.sttActive",{language:ut}):p("chat.placeholder.normal.sttInactive",{language:ut})),Ze=se?"bg-white text-gray-800 shadow-sm ring-1 ring-gray-300 focus-within:ring-2 focus-within:ring-gray-400":"bg-blue-400 text-white shadow-sm ring-1 ring-blue-300 focus-within:ring-2 focus-within:ring-white/80",Bt=se?"bg-gray-700 text-white hover:bg-gray-600 focus:ring-gray-400":"bg-white text-blue-600 hover:bg-blue-100 focus:ring-blue-200",Xt=se?"text-gray-500 hover:text-gray-900 hover:bg-gray-100":"text-blue-100 hover:text-white hover:bg-white/20",wn=()=>{$e.current||($e.current=Ut(Pt.ATTACH_FILE)),qe.current?.click()};return C.jsxs(C.Fragment,{children:[C.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(8px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 220ms ease-out both;
        }
      `}),C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:`relative w-full flex flex-col rounded-3xl overflow-hidden transition-colors ${Ze}`,children:[mt?C.jsx(SR,{}):C.jsx(OR,{t:p,inputText:Ge,placeholder:tn(),isDisabled:Je||ht&&re||se&&te,onChange:Qe,onKeyDown:Mt,bubbleTextAreaRef:at,prepDisplay:ct}),C.jsxs("div",{className:"flex items-center justify-between px-2 pb-2",children:[C.jsx(qR,{t:p,isLanguageSelectionOpen:mt,isSuggestionMode:se,fileInputRef:qe,onImageAttach:xe,onPaperclipClick:wn,availableCameras:H,selectedCameraId:nt,currentCameraFacingMode:P,isImageGenCameraSelected:Te,sendWithSnapshotEnabled:Ve,useVisualContextForReengagementEnabled:ae,imageGenerationModeEnabled:Ne,onSelectCamera:he,onToggleSendWithSnapshot:f,onToggleUseVisualContextForReengagement:m,onToggleImageGenerationMode:g,iconButtonStyle:Xt}),C.jsxs("div",{className:"flex items-center space-x-1",children:[C.jsx(VR,{t:p,isLanguageSelectionOpen:mt,isSttSupported:Me,isSttGloballyEnabled:re,isListening:ht,isSending:Je,isSpeaking:Ct,targetLanguageDef:S,nativeLanguageDef:E,isSuggestionMode:se,onSttToggle:t,onSetAttachedImage:W,onUserInputActivity:o}),C.jsx("button",{type:"button",onClick:Jt,className:`p-2 rounded-full focus:outline-none focus:ring-2 transition-colors disabled:opacity-50 shadow-sm ${Bt}`,disabled:Je||!Ge.trim()&&!x&&!mt||Ct||se&&te,"aria-label":mt?"Confirm language selection":se?p(te?"chat.suggestion.creating":"chat.suggestion.createAction"):b&&b.active?b.label||p("chat.sendPrep.finalizing"):p("chat.sendMessage"),children:mt?C.jsx(jr,{className:"w-5 h-5"}):se?te?C.jsx(Ya,{className:"w-5 h-5"}):C.jsx(cd,{className:"w-5 h-5"}):b&&b.active?C.jsx(Ya,{className:"w-5 h-5"}):C.jsx(qv,{className:"w-5 h-5"})})]})]})]}),!mt&&C.jsx("div",{className:"animate-fade-in-up",children:C.jsx(QR,{t:p,isSuggestionMode:se,attachedImageBase64:x,attachedImageMimeType:k,showLiveFeed:_e,isTwoUp:Le,liveVideoStream:N,liveSessionState:j,liveSessionError:L,onStartLiveSession:r,onStopLiveSession:s,onRemoveAttachment:Ue,onAnnotateImage:dn,onAnnotateVideo:Gt,onSetAttachedImage:W,onUserInputActivity:o,attachedPreviewVideoRef:gt})}),oe&&C.jsx("div",{className:"mt-2 w-full animate-fade-in-up",children:C.jsxs("div",{ref:De,className:"relative w-full max-h-[75vh] bg-black rounded-md overflow-hidden transition-all duration-300",style:{aspectRatio:wt||void 0,touchAction:"none"},onPointerDown:ot,onPointerMove:dt,onPointerUp:ke,onPointerCancel:ke,onWheel:Et,children:[C.jsxs("div",{style:{width:Re.current?.naturalWidth,height:Re.current?.naturalHeight,position:"absolute",top:"50%",left:"50%",transform:`translate(-50%,-50%) translate(${cn.x}px, ${cn.y}px) scale(${Nt})`,transition:rt.current.length>0?"none":"transform 0.1s ease-out"},children:[C.jsx("img",{ref:Re,src:lt,alt:p("chat.annotateModal.editingPreviewAlt"),className:"block w-full h-full object-contain pointer-events-none",style:{opacity:.7},onLoad:J=>{const Ie=J.currentTarget;if(Ie.naturalWidth>0&&(Dt(Ie.naturalWidth/Ie.naturalHeight),De.current)){const Oe=De.current.clientWidth;pt(Oe/Ie.naturalWidth),jt({x:0,y:0})}}}),C.jsx("canvas",{ref:Be,className:"absolute top-0 left-0 w-full h-full cursor-crosshair"})]}),C.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[C.jsx("div",{className:"absolute top-2 right-2 pointer-events-auto",onPointerDown:J=>{J.stopPropagation(),J.preventDefault()},onPointerUp:J=>{J.stopPropagation(),J.preventDefault()},onPointerCancel:J=>{J.stopPropagation(),J.preventDefault()},onClick:J=>{J.stopPropagation(),J.preventDefault()},children:C.jsx("button",{type:"button",onClick:$,className:"p-2 rounded-full bg-black/60 text-white hover:bg-black focus:outline-none focus:ring-2 focus:ring-white/40",title:p("chat.annotateModal.cancel"),"aria-label":p("chat.annotateModal.cancel"),children:C.jsx(qa,{className:"w-5 h-5"})})}),C.jsx("div",{className:"absolute bottom-2 left-2 pointer-events-auto",onPointerDown:J=>{J.stopPropagation(),J.preventDefault()},onPointerUp:J=>{J.stopPropagation(),J.preventDefault()},onPointerCancel:J=>{J.stopPropagation(),J.preventDefault()},onClick:J=>{J.stopPropagation(),J.preventDefault()},children:C.jsx("button",{type:"button",onClick:xt,disabled:Ae.length===0,className:"p-2 rounded-full bg-black/60 text-white hover:bg-black disabled:opacity-50 disabled:cursor-default focus:outline-none focus:ring-2 focus:ring-white/40",title:p("chat.annotateModal.undo"),"aria-label":p("chat.annotateModal.undo"),"aria-disabled":Ae.length===0,children:C.jsx(jr,{className:"w-5 h-5"})})}),C.jsx("div",{className:"absolute bottom-2 right-2 pointer-events-auto",onPointerDown:J=>{J.stopPropagation(),J.preventDefault()},onPointerUp:J=>{J.stopPropagation(),J.preventDefault()},onPointerCancel:J=>{J.stopPropagation(),J.preventDefault()},onClick:J=>{J.stopPropagation(),J.preventDefault()},children:C.jsx("button",{type:"button",onClick:Ee,className:"p-2 rounded-full bg-green-500 text-white hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300",title:p("chat.annotateModal.saveAndAttach"),"aria-label":p("chat.annotateModal.saveAndAttach"),children:C.jsx(tr,{className:"w-5 h-5"})})})]})]})}),mt&&C.jsx("div",{className:"mt-2 animate-fade-in-up",children:C.jsx(dw,{nativeLangCode:U||null,targetLangCode:X||null,onSelectNative:ue,onSelectTarget:Ce,onConfirm:Pe,t:p,onInteract:ge})}),O&&C.jsx("p",{className:`p-1 rounded mt-1 ${se?"text-red-800 bg-red-200/50":"text-red-200 bg-red-900/50"}`,style:{fontSize:"2.8cqw"},role:"alert",children:p("chat.error.sttError",{error:O})}),_&&C.jsx("p",{className:`p-1 rounded mt-1 ${se?"text-red-800 bg-red-200/50":"text-red-200 bg-red-900/50"}`,style:{fontSize:"2.8cqw"},role:"alert",children:p("chat.error.autoCaptureCameraError",{error:_})}),B&&C.jsx("p",{className:`p-1 rounded mt-1 ${se?"text-orange-800 bg-orange-200/50":"text-orange-200 bg-orange-900/50"}`,style:{fontSize:"2.8cqw"},role:"alert",children:p("chat.error.snapshotUserError",{error:B})})]})]})},xn=100,jR=t=>(t.role==="user"||t.role==="assistant")&&!t.thinking,JR=t=>{const{onDeleteMessage:e,bubbleWrapperRefs:o,onChangeMaxVisibleMessages:r,onSetAttachedImage:s,onSttToggle:c,speakText:A,stopSpeaking:f,onToggleSpeakNativeLang:m,onUserInputActivity:g,onToggleSendWithSnapshot:p,onToggleUseVisualContextForReengagement:y,onSuggestionClick:S,onToggleImageGenerationMode:E,onToggleImageFocusedMode:x,onStartLiveSession:k,onStopLiveSession:b,onToggleSuggestionMode:M,onCreateSuggestion:O,onBookmarkAt:N,onSendMessage:j}=t,{t:L}=ei(),H=Q(PR),P=Q(T0),_=Q(Jl),B=Q($r),q=Q(RR),Z=Q(lc),ne=Q($a),U=Q(cc)||Yt[0],X=Q(Pd)||Yt[0],F=Q(oe=>oe.loadingGifs),R=Q(oe=>oe.transitioningImageId),K=Q(NR),V=Q(oe=>oe.imageLoadDurations),ge=Z.isSuggestionMode,me=Z.tts.speakNative,G=Z.imageFocusedModeEnabled,D=Z.historyBookmarkMessageId??null,te=Z.maxVisibleMessages??Md,se=T.useMemo(()=>Bn(ne?.targetLanguageCode||U?.code||"es"),[ne,U]),re=T.useMemo(()=>Bn(ne?.nativeLanguageCode||X?.code||"en"),[ne,X]),ve=T.useMemo(()=>V.length>0?V.reduce((it,lt)=>it+lt,0)/V.length/1e3:15,[V]),Me=T.useMemo(()=>Math.max(1,te)+2,[te]),Ve=Q(oe=>oe.addActivityToken),ae=Q(oe=>oe.removeActivityToken),Ne=T.useCallback(oe=>Ve(rn.UI,`${oe}:${Date.now()}:${Math.random().toString(36).slice(2,8)}`),[Ve]),nt=T.useMemo(()=>{const oe=new Set;let it=0;for(let lt=H.length-1;lt>=0;lt--){const Fe=H[lt];jR(Fe)&&(it++,Fe.role==="assistant"&&!Fe.thinking&&it<=Me&&oe.add(Fe.id))}return oe},[H,Me]),Te=T.useRef(null),W=T.useRef(null),[he,Se]=T.useState("below"),[ue,Ce]=T.useState(0);T.useEffect(()=>{Se("below"),Ce(0),at(null)},[D]);const Pe=T.useRef(null);T.useEffect(()=>(he==="above"?Pe.current||(Pe.current=Ne(Pt.VIEWING_ABOVE)):Pe.current&&(ae(Pe.current),Pe.current=null),()=>{Pe.current&&(ae(Pe.current),Pe.current=null)}),[he,Ne,ae]);const Ge=T.useRef({messageId:null,startX:0,startY:0,isUser:!1,isSwiping:!1,trayWidth:0}),[be,we]=T.useState(null),[je,at]=T.useState(null),qe=T.useCallback((oe,it,lt)=>{const Fe=L(oe,lt);return Fe===oe?it:Fe},[L]),Rt=(oe,it,lt)=>{if(!(Ge.current.messageId||!oe.isPrimary)){if(be&&be!==it){const Fe=o.current.get(be);Fe&&(Fe.style.transition="transform 0.2s ease-out",Fe.style.transform="translateX(0px)"),we(null)}Ge.current={messageId:it,startX:oe.clientX,startY:oe.clientY,isUser:lt,isSwiping:!1,trayWidth:56}}},gt=oe=>{if(!Ge.current.messageId||!oe.isPrimary)return;const{startX:it,startY:lt,isUser:Fe,messageId:wt}=Ge.current,Dt=o.current.get(wt);if(!Dt)return;const Nt=oe.clientX-it,pt=oe.clientY-lt;if(!Ge.current.isSwiping&&(Math.abs(Nt)>10||Math.abs(pt)>10))if(Math.abs(Nt)>Math.abs(pt))Ge.current.isSwiping=!0,Dt.style.touchAction="none",Dt.style.cursor="grabbing";else{Ge.current={messageId:null,startX:0,startY:0,isUser:!1,isSwiping:!1,trayWidth:0};return}if(Ge.current.isSwiping){const cn=Ge.current.trayWidth+12;let jt;Fe?(jt=Math.min(0,Nt),jt=Math.max(jt,-cn)):(jt=Math.max(0,Nt),jt=Math.min(jt,cn)),Dt.style.transition="none",Dt.style.transform=`translateX(${jt}px)`}},$e=oe=>{if(!Ge.current.messageId||!oe.isPrimary)return;const{messageId:it,startX:lt,isUser:Fe,isSwiping:wt,trayWidth:Dt}=Ge.current,Nt=o.current.get(it);if(Nt&&(Nt.style.touchAction="pan-y",Nt.style.cursor="auto"),!wt||!Nt){Ge.current={messageId:null,startX:0,startY:0,isUser:!1,isSwiping:!1,trayWidth:0},we(null);return}const pt=oe.clientX-lt,cn=Fe?pt<-Dt/2:pt>Dt/2;Nt.style.transition="transform 0.2s ease-out",Nt.style.transform=cn?`translateX(${Fe?-Dt:Dt}px)`:"translateX(0px)",we(cn?it:null),Ge.current={messageId:null,startX:0,startY:0,isUser:!1,isSwiping:!1,trayWidth:0}},mt=oe=>{if(!Ge.current.messageId||!oe.isPrimary)return;const{messageId:it}=Ge.current,lt=o.current.get(it);lt&&(lt.style.transition="transform 0.3s ease-out",lt.style.transform="translateX(0px)",lt.style.touchAction="pan-y",lt.style.cursor="auto"),we(null),Ge.current={messageId:null,startX:0,startY:0,isUser:!1,isSwiping:!1,trayWidth:0}},Je=T.useMemo(()=>{if(!D)return{hasBookmark:!1,bookmarkIdx:-1,pre:[],post:H,hiddenCount:0};const oe=H.findIndex(Fe=>Fe.id===D);if(oe===-1)return{hasBookmark:!1,bookmarkIdx:-1,pre:[],post:H,hiddenCount:0};const it=H.slice(0,oe),lt=H.slice(oe);return{hasBookmark:!0,bookmarkIdx:oe,pre:it,post:lt,hiddenCount:it.length}},[H,D]);T.useEffect(()=>{if(he!=="above")return;const oe=Math.ceil(Je.hiddenCount/xn);if(oe<=0){Se("below"),ue!==0&&Ce(0);return}const it=oe-1;ue>it&&Ce(it)},[he,ue,Je.hiddenCount]);let Ct=H,ht=Je.hiddenCount,Tt=null;if(Je.hasBookmark&&Je.bookmarkIdx>=0)if(he==="above"&&ht>0){const oe=Math.ceil(ht/xn);if(oe>0){const it=oe-1,lt=Math.min(Math.max(ue,0),it),Fe=ht-lt*xn,wt=Math.max(0,Fe-xn);Ct=Je.pre.slice(wt,Fe),Tt={chunkCount:oe,chunkIndex:lt,chunkStart:wt,chunkEnd:Fe,displayStart:wt+1,displayEnd:Fe}}else Ct=Je.post}else Ct=Je.post;const Ht=T.useCallback(oe=>{if(B){f();return}if(oe.role==="assistant"){const it=[];let lt=se||"es";if(oe.translations&&oe.translations.length>0)me?oe.translations.forEach(Fe=>{Fe.target&&Fe.target.trim()&&it.push({text:Fe.target,langCode:se,context:{source:"message",messageId:oe.id}}),Fe.native&&Fe.native.trim()&&it.push({text:Fe.native,langCode:re,context:{source:"message",messageId:oe.id}})}):oe.translations.forEach(Fe=>{Fe.target&&Fe.target.trim()&&it.push({text:Fe.target,langCode:se,context:{source:"message",messageId:oe.id}})});else if(oe.rawAssistantResponse){let Fe=oe.rawAssistantResponse,wt=se;!Fe.match(/[]/i)&&re.startsWith("en")&&Fe.match(/[a-zA-Z]/)&&me&&(wt=re),Fe.trim()&&(it.push({text:Fe.trim(),langCode:wt,context:{source:"message",messageId:oe.id}}),lt=wt)}else if(oe.text){let Fe=oe.text,wt=se;!Fe.match(/[]/i)&&re.startsWith("en")&&Fe.match(/[a-zA-Z]/)&&me&&(wt=re),Fe.trim()&&(it.push({text:Fe.trim(),langCode:wt,context:{source:"message",messageId:oe.id}}),lt=wt)}if(it.length>0){A(it,lt);return}}else if(oe.text&&(oe.role==="error"||oe.role==="status")){const it=oe.text,lt=re||"en";it.trim()&&A([{text:it.trim(),langCode:lt,context:{source:"adHoc"}}],lt);return}},[B,f,me,se,re,A]),Ut=T.useCallback((oe,it,lt,Fe,wt)=>{if(B){f();return}if(!oe||!it)return;const Dt=wt?{source:"message",messageId:wt}:{source:"adHoc"},Nt=[];Nt.push({text:oe,langCode:it,context:Dt}),me&&lt&&Fe&&lt.trim()&&Nt.push({text:lt,langCode:Fe,context:Dt}),Nt.length>0&&A(Nt,Nt[0].langCode)},[B,f,me,A]),fn=T.useCallback(oe=>{if(!oe?.text)return;if(B){f();return}const it=oe.recordedUtterance;if(it&&typeof it.dataUrl=="string"&&it.dataUrl.length>0){const Fe=it.langCode||se||"es",wt=[{text:oe.text,langCode:Fe,cachedAudio:it.dataUrl,context:{source:"message",messageId:oe.id}}];A(wt,Fe);return}let lt=se||"es";oe.text&&re&&re.startsWith("en")&&!oe.text.match(/[]/i)&&/[a-zA-Z]/.test(oe.text)&&(lt=re),A([{text:oe.text,langCode:lt,context:{source:"message",messageId:oe.id}}],lt)},[B,f,se,re,A]);return C.jsx("div",{className:"flex flex-col h-full bg-slate-100",children:C.jsxs("div",{ref:Te,className:"flex-grow overflow-y-auto p-4 space-y-2",onPointerMove:gt,onPointerUp:$e,onPointerCancel:mt,children:[Je.hasBookmark&&ht>0&&C.jsxs("div",{className:"my-1 px-2 py-1 bg-slate-200 border border-slate-300 rounded flex items-center gap-2",role:"region","aria-label":L("chat.bookmark.hiddenHeaderAria")||"Hidden messages above",style:{containerType:"inline-size"},children:[C.jsx(LA,{className:"w-4 h-4 text-slate-600"}),C.jsx("span",{className:"text-slate-700",style:{fontSize:"2.8cqw"},children:he==="above"&&Tt?qe("chat.bookmark.showingAboveRange",`Showing messages above ${Tt.displayStart}-${Tt.displayEnd} of ${ht}`,{start:Tt.displayStart,end:Tt.displayEnd,total:ht}):qe("chat.bookmark.hiddenCount",`${ht} above messages hidden`,{count:ht})}),C.jsx("div",{className:"ml-auto flex items-center gap-2",style:{fontSize:"2.8cqw"},children:he==="above"&&Tt?C.jsx("button",{className:"px-2 py-1 rounded bg-white hover:bg-gray-100 text-slate-800 border border-slate-300 disabled:opacity-50",onClick:()=>{Tt&&Tt.chunkIndex<Tt.chunkCount-1&&Ce(oe=>Math.min(oe+1,Tt.chunkCount-1))},disabled:Tt.chunkIndex>=Tt.chunkCount-1,title:qe("chat.bookmark.showNextChunk",`Show ${xn} above`,{count:xn}),children:qe("chat.bookmark.showNextChunk",`Show ${xn} above`,{count:xn})}):C.jsx("button",{className:"px-2 py-1 rounded bg-white hover:bg-gray-100 text-slate-800 border border-slate-300",onClick:()=>{ht>0&&(Se("above"),Ce(0))},title:qe("chat.bookmark.showAboveChunk",ht>xn?`Show ${xn} above`:"Show messages above",{count:Math.min(ht,xn)}),children:qe("chat.bookmark.showAboveChunk",ht>xn?`Show ${xn} above`:"Show messages above",{count:Math.min(ht,xn)})})})]}),Ct.map((oe,it)=>{if(oe.role==="system_selection")return null;const lt=oe.role==="status",Fe=oe.role==="user",wt=oe.role==="assistant",Dt=oe.role==="error",Nt=(Fe||wt||Dt||lt)&&!oe.thinking&&!oe.isGeneratingImage;return C.jsxs("div",{style:{touchAction:"pan-y",position:"relative"},onPointerDown:be===oe.id?void 0:Nt?pt=>Rt(pt,oe.id,Fe):void 0,children:[D===oe.id&&C.jsxs("div",{className:`absolute top-1 ${Fe?"right-1":"left-1"} z-40 flex items-center gap-2`,onPointerDown:pt=>{pt.stopPropagation()},children:[Fe&&je===oe.id&&C.jsx("div",{className:"mr-1",children:C.jsx(bm,{t:L,message:oe,maxVisibleMessages:te,onChangeMaxVisibleMessages:r,updateMessage:t.updateMessage})}),C.jsx("button",{className:"p-1 rounded-full bg-amber-500/80 text-white hover:bg-amber-500 shadow-sm border border-amber-600",onClick:pt=>{pt.stopPropagation(),at(cn=>cn===oe.id?null:oe.id)},title:L("chat.bookmark.actionsToggleTitle")||"Bookmark options","aria-expanded":je===oe.id,children:C.jsx(UA,{className:"w-4 h-4"})}),!Fe&&je===oe.id&&C.jsx("div",{className:"ml-1",children:C.jsx(bm,{t:L,message:oe,maxVisibleMessages:te,onChangeMaxVisibleMessages:r,updateMessage:t.updateMessage})})]}),Nt&&C.jsxs("div",{className:`absolute ${Fe?"right-0":"left-0"} top-1/2 -translate-y-1/2 flex flex-col items-center gap-2`,style:{width:56,zIndex:50,pointerEvents:be===oe.id?"auto":"none",opacity:be===oe.id?1:0,transform:`translateY(-50%) ${be===oe.id?"translateX(0)":`translateX(${Fe?"8px":"-8px"})`}`,transition:"opacity 120ms ease, transform 120ms ease",touchAction:"none"},onPointerDown:pt=>{pt.stopPropagation()},"aria-hidden":be===oe.id?void 0:!0,children:[wt&&(oe.id===D||nt.has(oe.id))&&C.jsx("button",{className:`p-2 rounded-full ${ge?"bg-gray-300 text-gray-800":"bg-amber-400 text-white"} shadow`,onPointerDown:pt=>{pt.stopPropagation()},onClick:pt=>{pt.stopPropagation(),oe.id!==D&&N(oe.id)},title:oe.id===D?L("chat.bookmark.isHere")||"Bookmark is here":L("chat.bookmark.setHere")||"Set bookmark here","aria-pressed":oe.id===D,children:C.jsx(UA,{className:`w-5 h-5 ${oe.id===D?"opacity-100":"opacity-90"}`})}),C.jsx("button",{className:`p-2 rounded-full ${ge?"bg-gray-300 text-gray-800":"bg-red-500 text-white"} shadow`,onPointerDown:pt=>{pt.stopPropagation()},onClick:pt=>{pt.stopPropagation(),e(oe.id)},title:"Delete message",children:C.jsx(jl,{className:"w-5 h-5"})})]}),C.jsx(w0,{message:oe,isFocusedMode:G,speakingUtteranceText:K,estimatedLoadTime:ve,loadingGifs:F,t:L,onToggleSpeakNativeLang:m,handleSpeakWholeMessage:Ht,handleSpeakLine:Ut,handlePlayUserMessage:fn,speakText:A,stopSpeaking:f,onToggleImageFocusedMode:()=>x(oe.id),transitioningImageId:R,onSetAttachedImage:s,onUserInputActivity:g,registerBubbleEl:pt=>{pt?o.current.set(oe.id,pt):o.current.delete(oe.id)}},oe.id)]},oe.id)}),q&&q.length>0&&C.jsxs("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg shadow",style:{containerType:"inline-size"},children:[C.jsx("h4",{className:"font-semibold text-gray-600 mb-1",style:{fontSize:"2.9cqw"},children:L("chat.retrievedFromWeb")}),C.jsx("ul",{className:"space-y-1",children:q.map((oe,it)=>(oe.web||oe.retrievedContext)&&C.jsx("li",{children:C.jsx("a",{href:oe.web?.uri||oe.retrievedContext?.uri,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline truncate block",style:{fontSize:"2.8cqw"},title:oe.web?.title||oe.retrievedContext?.title||oe.web?.uri||oe.retrievedContext?.uri,children:oe.web?.title||oe.retrievedContext?.title?oe.web?.title||oe.retrievedContext?.title:oe.web?.uri||oe.retrievedContext?.uri})},it))})]}),Je.hasBookmark&&he==="above"&&C.jsxs("div",{className:"my-1 px-2 py-1 bg-slate-200 border border-slate-300 rounded flex items-center gap-2",role:"region","aria-label":L("chat.bookmark.hiddenBelowHeaderAria")||"Hidden messages below",style:{containerType:"inline-size"},children:[C.jsx(LA,{className:"w-4 h-4 text-slate-600"}),C.jsx("span",{className:"text-slate-700",style:{fontSize:"2.8cqw"},children:Tt?qe("chat.bookmark.showingAboveRange",`Showing messages above ${Tt.displayStart}-${Tt.displayEnd} of ${ht}`,{start:Tt.displayStart,end:Tt.displayEnd,total:ht}):qe("chat.bookmark.hiddenBelow","Messages are hidden below")}),C.jsxs("div",{className:"ml-auto flex items-center gap-2",style:{fontSize:"2.8cqw"},children:[Tt&&Tt.chunkIndex>0&&C.jsx("button",{className:"px-2 py-1 rounded bg-white hover:bg-gray-100 text-slate-800 border border-slate-300",onClick:()=>Ce(oe=>Math.max(oe-1,0)),title:qe("chat.bookmark.showPreviousChunk",`Show ${xn} below`,{count:xn}),children:qe("chat.bookmark.showPreviousChunk",`Show ${xn} below`,{count:xn})}),C.jsx("button",{className:"px-2 py-1 rounded bg-white hover:bg-gray-100 text-slate-800 border border-slate-300",onClick:()=>Se("below"),title:qe("chat.bookmark.returnToRecent","Back to messages below"),children:qe("chat.bookmark.returnToRecent","Back to messages below")})]})]}),C.jsxs("div",{className:"flex flex-col items-end mt-2",children:[C.jsx("div",{className:`transition-colors duration-300 rounded-xl p-3 shadow-lg w-full max-w-2xl ${ge?"bg-gray-200 text-gray-700":"bg-blue-500 text-white"} relative`,style:{containerType:"inline-size"},children:C.jsx(YR,{onSttToggle:c,onSendMessage:j,onUserInputActivity:g,onStartLiveSession:k,onStopLiveSession:b,onToggleSuggestionMode:M,onCreateSuggestion:O,onToggleSendWithSnapshot:p,onToggleUseVisualContextForReengagement:y,onToggleImageGenerationMode:E})}),(_||P.length>0)&&C.jsx(KR,{t:L,onToggleSuggestionMode:()=>M(),onSuggestionClick:S,stopSpeaking:f})]}),C.jsx("div",{ref:W})]})})},XR=xa.memo(JR),E0=async t=>{const e=await _n();return new Promise((o,r)=>{const A=e.transaction(da,"readonly").objectStore(da).get(t);A.onerror=()=>r(new Error("Error fetching history from DB")),A.onsuccess=()=>{o(A.result?A.result.messages:[])}})},b0=async(t,e)=>{if(!t)return;const o=e.filter(s=>s.role!=="system_selection").map(IR),r=await _n();return new Promise((s,c)=>{const m=r.transaction(da,"readwrite").objectStore(da).put({pairId:t,messages:o});m.onerror=()=>c(new Error("Error saving history to DB")),m.onsuccess=()=>s()})},oi=async(t,e,o=1)=>{try{return await b0(t,e),!0}catch(r){return o>0?(await Promise.resolve(),oi(t,e,o-1)):(console.warn("IndexedDB save failed for pair:",t,r),!1)}},WR=async()=>{const t=await _n();return new Promise((e,o)=>{const c=t.transaction(da,"readonly").objectStore(da).openCursor();c.onerror=()=>o(new Error("Error checking for chat histories")),c.onsuccess=A=>{const f=A.target.result;e(!!f)}})},ZR=async t=>{const e=await _n();return new Promise((o,r)=>{const A=e.transaction(da,"readonly").objectStore(da).openCursor();let f=Promise.resolve(),m=!1;A.onerror=()=>r(new Error("Error iterating chat histories")),A.onsuccess=g=>{const p=g.target.result;if(!p){f.then(()=>{m||(m=!0,o())}).catch(x=>{m||(m=!0,r(x instanceof Error?x:new Error(String(x))))});return}const y=p.value||{},S=typeof y.pairId=="string"?y.pairId:"",E=Array.isArray(y.messages)?y.messages:[];f=f.then(()=>t(S,E)),p.continue()}})},Iv=async(t,e,o,r)=>{const s=await _n();return new Promise((c,A)=>{const f=s.transaction([da,ua,xo],"readwrite"),m=f.objectStore(da),g=f.objectStore(ua),p=f.objectStore(xo);f.oncomplete=()=>c(),f.onerror=()=>A(new Error("Transaction error during bulk save"));const y=m.clear(),S=g.clear(),E=p.clear();y.onerror=()=>A(new Error("Error clearing store before bulk save")),S.onerror=()=>A(new Error("Error clearing meta store before bulk save")),E.onerror=()=>A(new Error("Error clearing profile store before bulk save")),S.onsuccess=()=>{},E.onsuccess=()=>{},y.onsuccess=()=>{for(const k in t)if(Object.prototype.hasOwnProperty.call(t,k)){const b=t[k].filter(M=>M.role!=="system_selection");m.add({pairId:k,messages:b})}if(e)for(const k in e)Object.prototype.hasOwnProperty.call(e,k)&&g.add({pairId:k,meta:e[k]});const x=(r||"").trim();if(x)try{p.put({key:"singleton",text:x,updatedAt:Date.now(),fingerprint:""})}catch{}}})},$R=async t=>{const e=await _n();return new Promise((o,r)=>{const A=e.transaction(ua,"readonly").objectStore(ua).get(t);A.onerror=()=>r(new Error("Error fetching chat meta from DB")),A.onsuccess=()=>o(A.result?A.result.meta:null)})},eD=async()=>{const t=await _n(),e=()=>new Promise((o,r)=>{const c=t.transaction(ua,"readonly").objectStore(ua);if(typeof c.getAll=="function"){const A=c.getAll();A.onerror=()=>r(A.error||new Error("getAll() failed for metas")),A.onsuccess=()=>o(A.result||[])}else r(new Error("getAll not supported"))});try{const o=await e(),r={};return(o||[]).forEach(s=>{r[s.pairId]=s.meta}),r}catch{return await new Promise((r,s)=>{const A=t.transaction(ua,"readonly").objectStore(ua),f={},m=A.openCursor();m.onerror=()=>s(new Error("Error fetching all chat metas from DB")),m.onsuccess=g=>{const p=g.target.result;if(p){const y=p.value;y&&typeof y.pairId=="string"&&(f[y.pairId]=y.meta),p.continue()}else r(f)}})}},Rd=async(t,e)=>{const o=await _n();return new Promise((r,s)=>{const A=o.transaction(ua,"readwrite").objectStore(ua);if(e){const f=A.get(t);f.onerror=()=>s(new Error("Error reading chat meta to merge")),f.onsuccess=()=>{const g={...f.result?.meta||{},...e},p=A.put({pairId:t,meta:g});p.onerror=()=>s(new Error("Error saving chat meta to DB")),p.onsuccess=()=>r()}}else{const f=A.delete(t);f.onerror=()=>s(new Error("Error deleting chat meta from DB")),f.onsuccess=()=>r()}})},Vl=(t,e)=>{const{roles:o=["user","assistant"],maxMessages:r,maxMediaToKeep:s=Ql,contextSummary:c,globalProfileText:A,placeholderLatestUserMessage:f}=e||{},m=new Set(o);let g=t.filter(S=>m.has(S.role)?S.role==="user"||S.role==="assistant"?!S.thinking:!0:!1);typeof r=="number"&&r>=0&&g.length>r&&(g=r>0?g.slice(-r):[]);const p=g.map(S=>{const E=S.uploadedFileUri||S.imageFileUri||void 0,x=E&&(S.uploadedFileMimeType||S.imageMimeType)||void 0;return{role:S.role==="user"||S.role==="assistant"?S.role:"user",text:S.text,rawAssistantResponse:S.rawAssistantResponse,imageFileUri:E,imageMimeType:x}});if(p.length>0&&Number.isFinite(s)&&s>=0){const S=[];for(let x=0;x<p.length;x++)p[x].imageFileUri&&S.push(x);const E=new Set(S.slice(-s));for(let x=0;x<p.length;x++)p[x].imageFileUri&&!E.has(x)&&(p[x].imageFileUri=void 0,p[x].imageMimeType=void 0)}const y=[];if(A&&A.trim()){const S=A.trim().slice(0,1e4);y.push(`Learner Profile (global):
${S}
END OF GLOBAL PROFILE MEMORY.`)}if(c&&c.trim()&&y.push(`Conversation Summary:
${c.trim().slice(0,1e4)}`),y.length>0){const S=y.join(`

`);p.length>0&&p[0].role==="user"?p[0].text=`${S}

${p[0].text||""}`:p.unshift({role:"user",text:S})}return f&&f.trim()&&p.push({role:"user",text:f.trim().slice(0,1e4)}),p},k0="maestro_gemini_models_v1",x0="maestro_gemini_models_url",tD="https://ronitervo.github.io/MaestroTutor/gemini-models.json",Wo={text:{default:"gemini-3-flash-preview",aux:"gemini-3-flash-preview",translation:"gemini-3-flash-preview"},image:{generation:"gemini-2.5-flash-image"},audio:{tts:"gemini-2.5-flash-preview-tts",live:"gemini-2.5-flash-native-audio-preview-12-2025"}};let I0={...Wo};const nD=()=>{const t="https://ronitervo.github.io/MaestroTutor/gemini-models.json";return Zo(t)?t:null},Zo=t=>typeof t=="string"&&t.trim().length>0,M0=t=>!t||typeof t!="object"?!1:Zo(t?.text?.default)&&Zo(t?.text?.aux)&&Zo(t?.text?.translation)&&Zo(t?.image?.generation)&&Zo(t?.audio?.tts)&&Zo(t?.audio?.live),aD=t=>({text:{default:t?.text?.default??Wo.text.default,aux:t?.text?.aux??Wo.text.aux,translation:t?.text?.translation??Wo.text.translation},image:{generation:t?.image?.generation??Wo.image.generation},audio:{tts:t?.audio?.tts??Wo.audio.tts,live:t?.audio?.live??Wo.audio.live}}),or=()=>I0,P0=t=>{I0=aD(t)},R0=t=>{try{return localStorage.getItem(t)}catch{return null}},D0=(t,e)=>{try{localStorage.setItem(t,e)}catch{}},oD=()=>R0(x0),rD=t=>{D0(x0,t)},iD=()=>nD()||oD()||tD,sD=()=>{const t=R0(k0);if(!t)return!1;try{const e=JSON.parse(t);if(M0(e))return P0(e),!0}catch{}return!1},lD=async t=>{const e=sD(),o=t?.url,r=new AbortController,s=window.setTimeout(()=>r.abort(),t?.timeoutMs??5e3);try{const c=await fetch(o,{signal:r.signal,cache:"no-store"});if(!c.ok)throw new Error(`Model registry fetch failed (${c.status})`);const A=await c.json();if(!M0(A))throw new Error("Model registry is missing required fields");return P0(A),D0(k0,JSON.stringify(A)),{updated:!0,source:"remote"}}catch(c){return{updated:!1,source:e?"cache":"default",error:c}}finally{window.clearTimeout(s)}},Mv=async(t,e,o,r,s,c,A,f,m)=>{const g=await ir(),p=[];o.forEach(b=>{const M=[],O=b.rawAssistantResponse||b.text;if(O&&M.push({text:O}),b.imageFileUri)M.push({fileData:{fileUri:b.imageFileUri,mimeType:b.imageMimeType||"image/jpeg"}});else if(b.imageUrl&&b.imageMimeType){const N=b.imageUrl.split(",")[1];N&&M.push({inlineData:{data:N,mimeType:b.imageMimeType}})}if(M.length>0){const N=b.role==="assistant"?"model":"user";p.push({role:N,parts:M})}});const y=[{text:e}];A&&y.push({fileData:{fileUri:A,mimeType:c||"image/jpeg"}}),p.push({role:"user",parts:y});const S={...m};r&&(S.systemInstruction=r),f&&(S.tools=[{googleSearch:{}}]);const E=b=>{if(!b||typeof b!="object")return b;if(Array.isArray(b))return b.map(E);const M={};for(const O of Object.keys(b))O==="inlineData"?M[O]="[REDACTED]":M[O]=E(b[O]);return M},x=E(p),k=fa.logRequest("generateContent",t,{contents:x,config:S});try{const b=await g.models.generateContent({model:t,contents:p,config:S});return k.complete({text:b.text,usage:b.usageMetadata}),{text:b.text,candidates:b.candidates,usageMetadata:b.usageMetadata}}catch(b){throw console.error("Gemini API Error:",b),k.error(b),new sc(b.message||"Gemini API failed",{status:b.status||500,code:b.code})}},cD=async(t,e,o)=>{const r=await ir(),s=`Translate the following text from ${e} to ${o}. Return ONLY the translation. Text: "${t}"`,c=or().text.translation,A=fa.logRequest("translateText",c,{prompt:s});try{const f=await r.models.generateContent({model:c,contents:s});return A.complete({text:f.text}),{translatedText:f.text||""}}catch(f){throw A.error(f),new sc(f.message||"Translation failed",{status:f.status||500,code:f.code})}},Pv=t=>{const e=Date.now(),o=Math.random().toString(36).substring(2,8);return`${t} <!-- ${e}_${o} -->`},Wi=async t=>{const e=await ir(),{prompt:o,latestMessageText:r,history:s,systemInstruction:c,maestroAvatarUri:A,maestroAvatarMimeType:f}=t,m=[];let g=s?s.map(k=>({...k})):[],p=0;for(let k=g.length-1;k>=0;k--){const b=g[k],M=(b.imageMimeType||"").toLowerCase(),O=M.startsWith("image/");if(b.imageFileUri)if(O)if(p>=3){b.imageFileUri=void 0;const N=" [Previous image context omitted]";b.rawAssistantResponse?b.rawAssistantResponse+=N:b.text=(b.text||"")+N}else p++;else{b.imageFileUri=void 0;const j=` [${M.split("/")[0]||"File"} context omitted]`;b.rawAssistantResponse?b.rawAssistantResponse+=j:b.text=(b.text||"")+j}}g.length>0&&g.forEach(k=>{const b=[],M=k.rawAssistantResponse||k.text;M&&b.push({text:M}),k.imageFileUri&&(k.imageMimeType||"").toLowerCase().startsWith("image/")&&b.push({fileData:{fileUri:k.imageFileUri,mimeType:k.imageMimeType||"image/jpeg"}}),b.length&&m.push({role:k.role==="assistant"?"model":"user",parts:b})});const y=[];if(o?y.push({text:Pv(o)}):r&&y.push({text:Pv(r)}),A){const k=(f||"").toLowerCase();(!k||k.startsWith("image/"))&&y.push({fileData:{fileUri:A,mimeType:f||"image/png"}})}if(y.length){const k=t.latestMessageRole==="assistant"?"model":t.latestMessageRole||"user";m.push({role:k,parts:y})}const S=or().image.generation,E={responseModalities:["IMAGE"],systemInstruction:c},x=fa.logRequest("generateImage",S,{contents:m,config:E});try{const k=await e.models.generateContent({model:S,contents:m,config:E});x.complete({candidates:k.candidates?.length});const b=k.candidates||[];for(const M of b)for(const O of M.content?.parts||[]){const N=O.inlineData;if(N&&N.mimeType?.startsWith("image/")&&typeof N.data=="string"&&N.data.trim()!=="")return{base64Image:`data:${N.mimeType};base64,${N.data}`,mimeType:N.mimeType}}return x.error(new Error("No image generated")),{error:"No image generated"}}catch(k){return x.error(k),{error:k.message}}},uD=t=>{const e=t.toLowerCase();return e.includes("front")||e.includes("user")?"user":e.includes("back")||e.includes("rear")||e.includes("environment")?"environment":"unknown"},AD=async(t,e)=>{const{maxDim:o=768,quality:r=.6,outputMime:s="image/jpeg"}=e||{},c=new Image;await new Promise((x,k)=>{c.onload=()=>x(),c.onerror=()=>k(new Error("Image load failed")),c.src=t});const A=c.naturalWidth||1,f=c.naturalHeight||1,m=Math.min(1,o/Math.max(A,f)),g=Math.max(1,Math.round(A*m)),p=Math.max(1,Math.round(f*m)),y=document.createElement("canvas");y.width=g,y.height=p;const S=y.getContext("2d");if(!S)throw new Error("Canvas 2D context not available");return S.drawImage(c,0,0,g,p),{dataUrl:y.toDataURL(s,r),mimeType:s}},dD=async(t,e)=>{const{fps:o=1,maxWidth:r=1920,mimeType:s="video/webm;codecs=vp9,opus"}=e||{},c=document.createElement("video");c.preload="metadata",c.muted=!0,await new Promise((P,_)=>{c.onloadedmetadata=()=>P(),c.onerror=()=>_(new Error("Video metadata load failed")),c.src=t});const A=c.videoWidth||r,f=c.videoHeight||r,m=Math.min(r,A),g=A>0?m/A:1,p=Math.max(1,Math.round(f*g)),y=document.createElement("canvas");y.width=m,y.height=p;const S=y.getContext("2d");if(!S)throw new Error("Canvas 2D context not available for video");const E=Number.isFinite(c.duration)&&c.duration>0?Math.round(c.duration*1e3):NaN;try{e?.onProgress&&e.onProgress(0,Number.isFinite(E)?E:0,Number.isFinite(E)?E:void 0)}catch{}const x=y.captureStream(Math.max(1,o));let k=x;try{let P=[];if(c.captureStream&&(P=c.captureStream().getAudioTracks()),!P.length){const _=window.AudioContext||window.webkitAudioContext,B=new _;try{await B.resume()}catch{}const q=B.createMediaElementSource(c),Z=B.createMediaStreamDestination();q.connect(Z),P=Z.stream.getAudioTracks()}k=new MediaStream([...x.getVideoTracks(),...P])}catch{k=x}const b=new MediaRecorder(k,{mimeType:s}),M=[];b.ondataavailable=P=>{P.data&&P.data.size&&M.push(P.data)};const O=new Promise(P=>{b.onstop=()=>{const _=new Blob(M,{type:s}),B=new FileReader;B.onloadend=()=>P(B.result),B.readAsDataURL(_)}});await c.play().catch(()=>{}),b.start();const N=Math.max(250,Math.round(1e3/Math.max(1,o))),j=window.setInterval(()=>{try{S.drawImage(c,0,0,m,p)}catch{}},N),L=window.setInterval(()=>{try{const P=Math.max(0,Math.round((c.currentTime||0)*1e3)),_=Number.isFinite(E)?E:P||0,B=Number.isFinite(E)?Math.max(0,E-P):void 0;e?.onProgress?.(P,_,B)}catch{}},Math.min(1e3,N));return await new Promise(P=>{c.onended=()=>P(),c.onerror=()=>P()}),window.clearInterval(j),window.clearInterval(L),b.stop(),{dataUrl:await O,mimeType:s}},gD=async(t,e)=>{const{at:o="start",maxDim:r=768,quality:s=.7,outputMime:c="image/jpeg",startOffsetSec:A=.12,endOffsetSec:f=.05}=e||{},m=document.createElement("video");m.preload="metadata",m.muted=!0,await new Promise((H,P)=>{m.onloadedmetadata=()=>H(),m.onerror=()=>P(new Error("Video metadata load failed")),m.src=t});const g=Number.isFinite(m.duration)?m.duration:0,p=.001,y=H=>Math.max(0,g>0?Math.min(H,Math.max(0,g-p)):0),S=()=>o==="middle"?g>0?g*.5:0:o==="end"?g>0?y(g-f):0:y(A),E=async H=>{try{await new Promise(P=>{const _=()=>{m.removeEventListener("seeked",_),P()};m.addEventListener("seeked",_);try{m.currentTime=H}catch{m.play().then(()=>{m.pause();try{m.currentTime=H}catch{}}).catch(()=>{P()})}})}catch{}};await E(S());const x=m.videoWidth||1,k=m.videoHeight||1,b=Math.min(1,r/Math.max(x,k)),M=Math.max(1,Math.round(x*b)),O=Math.max(1,Math.round(k*b)),N=document.createElement("canvas");N.width=M,N.height=O;const j=N.getContext("2d");if(!j)throw new Error("Canvas 2D context not available for keyframe");try{j.drawImage(m,0,0,M,O)}catch{}if(o==="start")try{const H=j.getImageData(0,0,Math.min(32,M),Math.min(32,O));let P=0;const _=H.data;for(let Z=0;Z<_.length;Z+=64){const ne=_[Z],U=_[Z+1],X=_[Z+2];P+=.2126*ne+.7152*U+.0722*X}const B=Math.ceil(_.length/64);if((B>0?P/B:255)<8&&g>0){const Z=[y(A+.15),y(A+.3)];for(const ne of Z){await E(ne);try{j.drawImage(m,0,0,M,O)}catch{}const U=j.getImageData(0,0,Math.min(32,M),Math.min(32,O));let X=0;const F=U.data;for(let V=0;V<F.length;V+=64){const ge=F[V],me=F[V+1],G=F[V+2];X+=.2126*ge+.7152*me+.0722*G}const R=Math.ceil(F.length/64);if((R>0?X/R:255)>=8)break}}}catch{}return{dataUrl:N.toDataURL(c,s),mimeType:c}};async function Vr(t,e,o){const r=o?.t?o.t("chat.sendPrep.optimizingImage"):"Optimizing image",s=o?.t?o.t("chat.sendPrep.optimizingVideo"):"Optimizing video";try{if(e.startsWith("image/")){o?.onProgress&&o.onProgress(r);const c=await AD(t,{maxDim:768,quality:.6,outputMime:"image/jpeg"});return{dataUrl:c.dataUrl,mimeType:c.mimeType,isOptimized:!0}}else if(e.startsWith("video/")){const c=await dD(t,{fps:1,maxWidth:1920,mimeType:"video/webm",onProgress:(A,f,m)=>{if(o?.onProgress){const g=Math.floor(A/1e3),p=Math.max(g,Math.floor((f||0)/1e3));o.onProgress(s,g,p,m)}}});return{dataUrl:c.dataUrl,mimeType:c.mimeType,isOptimized:!0}}}catch(c){console.warn("Media optimization failed, falling back to original",c)}return{dataUrl:t,mimeType:e,isOptimized:!1}}const fD=t=>{const{t:e,sendWithSnapshotEnabled:o,useVisualContext:r,selectedCameraId:s}=t,c=Q(q=>q.setAvailableCameras),A=Q(q=>q.setCurrentCameraFacingMode),f=Q(q=>q.setLiveVideoStream),m=Q(q=>q.setVisualContextCameraError),g=Q(q=>q.setSnapshotUserError),p=T.useRef(null),y=T.useRef(null),S=T.useRef([]),[E,x]=T.useState([]),[k,b]=T.useState("unknown"),[M,O]=T.useState(null),[N,j]=T.useState(null),[L,H]=T.useState(null);T.useEffect(()=>{S.current=E,c(E)},[E,c]),T.useEffect(()=>{A(k)},[k,A]),T.useEffect(()=>{f(M)},[M,f]),T.useEffect(()=>{m(N)},[N,m]),T.useEffect(()=>{g(L)},[L,g]),T.useEffect(()=>{const q=s;if(!q){b("unknown");return}const Z=S.current.find(ne=>ne.deviceId===q);b(Z?.facingMode||"unknown")},[s]);const P=typeof window<"u"&&!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),_=T.useCallback(async()=>{try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(Z=>Z.stop())}catch(q){console.warn("Could not get temporary video stream for robust device enumeration:",q)}if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){const ne=(await navigator.mediaDevices.enumerateDevices()).filter(X=>X.kind==="videoinput").map((X,F)=>({deviceId:X.deviceId,label:X.label||`Camera ${F+1}`,facingMode:uD(X.label)}));x(ne);const U=s;if(U){const X=ne.find(F=>F.deviceId===U);X?.facingMode&&b(X.facingMode)}}}catch(q){console.error("Error enumerating video devices:",q),x([])}},[s]);T.useEffect(()=>(_(),navigator.mediaDevices&&navigator.mediaDevices.addEventListener("devicechange",_),()=>{navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",_)}),[_]),T.useEffect(()=>{(o||r)&&_()},[o,r,_]),T.useEffect(()=>{const q=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){j(e("error.cameraAccessNotSupported"));return}try{y.current&&y.current.getTracks().forEach(F=>F.stop());const U=s?{deviceId:{exact:s}}:!0,X=await navigator.mediaDevices.getUserMedia({video:U});y.current=X,O(X),p.current&&(p.current.srcObject=X,p.current.muted=!0,p.current.playsInline=!0,p.current.play().catch(F=>{console.error("Error playing visual context video:",F),j(e("error.visualContextStreamPlayback",{details:F.message}))})),j(null)}catch(U){console.error("Error accessing camera for visual context:",U);let X=e("error.cameraUnknown");U instanceof Error&&(U.name==="NotAllowedError"||U.name==="PermissionDeniedError"?X=e("error.cameraPermissionDenied"):U.name==="NotFoundError"||U.name==="DevicesNotFoundError"?X=e("error.cameraNotFound"):U.name==="OverconstrainedError"?X=e("error.cameraOverconstrained",{errorMessage:U.message}):X=e("error.visualContextCameraGeneric",{details:U.message})),j(X),O(null)}},Z=()=>{y.current&&(y.current.getTracks().forEach(U=>U.stop()),y.current=null),O(null),p.current&&p.current.srcObject&&(p.current.srcObject=null,p.current.load())};return(r||o)&&s!==ar?q():(Z(),j(null)),()=>{Z()}},[r,o,s,e]);const B=T.useCallback(async(q=!1)=>{const Z=q?j:H;Z(null);const ne=p.current;if(!ne)return Z(e(q?"error.visualContextVideoElementNotReady":"error.snapshotVideoElementNotReady")),null;let U=null,X=!1;try{let F=M&&M.active?M:y.current&&y.current.active?y.current:null;if(F&&ne.srcObject===F&&ne.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA&&ne.videoWidth>0&&ne.videoHeight>0)U=F;else{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return Z(e(q?"error.visualContextCameraAccessNotSupported":"error.snapshotCameraAccessNotSupported")),null;const ge=s?{deviceId:{exact:s}}:!0;U=await navigator.mediaDevices.getUserMedia({video:ge}),X=!0,ne.srcObject=U,ne.muted=!0,ne.playsInline=!0,await ne.play(),await new Promise((me,G)=>{const D=q?"error.visualContextTimeout":"error.snapshotTimeout",te=q?"error.visualContextVideoDimensionsZero":"error.snapshotVideoDimensionsZero",se=q?"error.visualContextVideoError":"error.snapshotVideoError",re=setTimeout(()=>G(new Error(e(D))),3e3),ve=()=>{clearTimeout(re),ne.videoWidth>0&&ne.videoHeight>0?me(void 0):G(new Error(e(te)))};ne.onloadeddata=ve,ne.onerror=()=>{clearTimeout(re),G(new Error(e(se)))},ne.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA&&ne.videoWidth>0&&ne.videoHeight>0&&(clearTimeout(re),me(void 0))})}const R=document.createElement("canvas");R.width=ne.videoWidth,R.height=ne.videoHeight;const K=R.getContext("2d");if(!K)throw new Error(e(q?"error.visualContext2DContext":"error.snapshot2DContext"));K.drawImage(ne,0,0,R.width,R.height);const V=R.toDataURL("image/jpeg",.9);return{base64:V,mimeType:"image/jpeg",storageOptimizedBase64:V,storageOptimizedMimeType:"image/jpeg"}}catch(F){console.error(`Error capturing image (${q?"re-engagement":"snapshot"}):`,F);const R=F instanceof Error?F.message:e("error.imageCaptureGeneric"),K=q?"error.visualContextCaptureFailed":"error.snapshotCaptureFailed";return R.includes("Permission")||R.includes("NotAllowedError")?Z(e(`${K}Permission`)):R.includes("NotFoundError")||R.includes("DevicesNotFoundError")?Z(e(`${K}NotFound`)):R.includes("Timeout")||R.includes("dimensions zero")||R.includes("Video element error")?Z(e(`${K}NotReady`,{details:R})):Z(e(`${K}Generic`,{details:R})),null}finally{U&&X&&(U.getTracks().forEach(F=>F.stop()),ne.srcObject===U&&!((r||M)&&y.current===U)&&(ne.srcObject=null,ne.load()))}},[e,M,s,r]);return{availableCameras:E,availableCamerasRef:S,currentCameraFacingMode:k,liveVideoStream:M,setLiveVideoStream:O,visualContextVideoRef:p,visualContextStreamRef:y,visualContextCameraError:N,setVisualContextCameraError:j,snapshotUserError:L,setSnapshotUserError:H,captureSnapshot:B,fetchAvailableCameras:_,microphoneApiAvailable:P}},hD=({videoRef:t})=>C.jsx("video",{ref:t,playsInline:!0,muted:!0,className:"hidden w-px h-px"}),N0=t=>{if(!t)return"";const e=t.trim();if(!e)return"";try{const r=JSON.parse(e)?.error?.message;if(typeof r=="string"&&r.trim())return r.trim()}catch{}return e},mD=t=>{if(t.status===429)return!0;const e=(t.code??"").toString().toLowerCase();if(e==="429"||e.includes("resource_exhausted")||e.includes("quota"))return!0;const o=N0(t.message).toLowerCase();return o.includes("resource_exhausted")||o.includes("exceeded your current quota")||o.includes("rate limit")||o.includes("quota")},pD=t=>{const e=(t.message||"").toLowerCase();return e.includes("api_key_invalid")||e.includes("api key not valid")},vD=t=>{const{t:e,setSettings:o,addMessage:r,updateMessage:s,setMessages:c,getHistoryRespectingBookmark:A,computeMaxMessagesForArray:f,captureSnapshot:m,speakMessage:g,isSpeechSynthesisSupported:p,isListening:y,stopListening:S,startListening:E,clearTranscript:x,hasPendingQueueItems:k,claimRecordedUtterance:b,scheduleReengagementRef:M,cancelReengagementRef:O,transcript:N,currentSystemPromptText:j,currentReplySuggestionsPromptText:L,setReplySuggestions:H,handleToggleSuggestionModeRef:P,maestroAvatarUriRef:_,maestroAvatarMimeTypeRef:B,setSnapshotUserError:q,onApiKeyGateOpen:Z}=t,ne=Q(Ae=>Ae.setLastFetchedSuggestionsFor),U=Q(Ae=>Ae.setRecordedUtterancePending),X=Q(Ae=>Ae.setPendingRecordedAudioMessageId),F=Q(Ae=>Ae.setSttInterruptedBySend),R=T.useMemo(()=>In(Q.getState,Ae=>Ae.settings),[]),K=T.useMemo(()=>In(Q.getState,$a),[]),V=T.useMemo(()=>In(Q.getState,Ae=>Ae.messages),[]),ge=T.useMemo(()=>In(Q.getState,Ae=>Ae.isLoadingHistory),[]),me=T.useMemo(()=>In(Q.getState,$r),[]),G=T.useMemo(()=>({get current(){return Q.getState().lastFetchedSuggestionsFor},set current(Ae){ne(Ae)}}),[ne]),D=T.useMemo(()=>({get current(){return Q.getState().recordedUtterancePending},set current(Ae){U(Ae)}}),[U]),te=T.useMemo(()=>({get current(){return Q.getState().pendingRecordedAudioMessageId},set current(Ae){X(Ae)}}),[X]),se=T.useMemo(()=>({get current(){return Q.getState().sttInterruptedBySend},set current(Ae){F(Ae)}}),[F]),{sendPrep:re,latestGroundingChunks:ve,maestroActivityStage:Me,imageLoadDurations:Ve,attachedImageBase64:ae,attachedImageMimeType:Ne}=Q(ud(Ae=>({sendPrep:Ae.sendPrep,latestGroundingChunks:Ae.latestGroundingChunks,maestroActivityStage:Ae.maestroActivityStage,imageLoadDurations:Ae.imageLoadDurations,attachedImageBase64:Ae.attachedImageBase64,attachedImageMimeType:Ae.attachedImageMimeType}))),nt=Q(ja),Te=Q(Jl),W=Q(Ad),he=Q(Ae=>Ae.setSendPrep),Se=Q(Ae=>Ae.setLatestGroundingChunks),ue=Q(Ae=>Ae.addImageLoadDuration),Ce=Q(Ae=>Ae.setAttachedImage),Pe=Q(Ae=>Ae.setMaestroActivityStage),Ge=Q(Ae=>Ae.addActivityToken),be=Q(Ae=>Ae.removeActivityToken),we=T.useRef(!1),je=T.useRef(!1),at=T.useRef(null),qe=T.useRef(null),Rt=T.useRef(!0),gt=T.useRef(null),$e=T.useRef(null),mt=T.useRef(null);T.useEffect(()=>{we.current=nt},[nt]),T.useEffect(()=>{qe.current=re},[re]),T.useEffect(()=>()=>{Rt.current=!1},[]);const Je=T.useCallback(Ae=>typeof Ae!="string"?"":Ae.replace(/\[[^\]]*\]/g," ").replace(/\s+/g," ").trim(),[]),Ct=T.useCallback(Ae=>{if(typeof Ae!="string"||!Ae.trim()||!K.current)return[];const Ke=Ae.split(`
`).map(Be=>Be.trim()).filter(Be=>Be),De=[],Re=`[${cy(K.current.nativeLanguageCode)}]`;for(let Be=0;Be<Ke.length;Be++){const He=Ke[Be];if(He.startsWith(Re))De.push({target:"",native:He.substring(Re.length).trim()});else{let st=He,vt="";Be+1<Ke.length&&Ke[Be+1].startsWith(Re)&&(vt=Ke[Be+1].substring(Re.length).trim(),Be++),De.push({target:st,native:vt})}}return De.length===0&&Ae.trim()&&De.push({target:Ae.trim(),native:""}),De},[K]),ht=T.useCallback(()=>{const Ae=R.current.historyBookmarkMessageId;if(!Ae)return null;const Ke=V.current,De=Ke.findIndex(Be=>Be.id===Ae);if(De===-1)return null;let Re=Ke[De]&&typeof Ke[De].chatSummary=="string"?Ke[De].chatSummary.trim():void 0;if(!Re)for(let Be=De;Be>=0;Be--){const He=Ke[Be];if(He.role==="assistant"&&typeof He.chatSummary=="string"&&He.chatSummary.trim()){Re=He.chatSummary.trim();break}}return!Re||!Re.trim()?null:Re.trim()},[R,V]),Tt=T.useCallback(Ae=>{let Ke=A(Ae).filter(Hl);const De=f(Ke);return typeof De=="number"&&(Ke=Ke.slice(-Math.max(0,De))),Ke},[A,f]),Ht=T.useCallback(async(Ae,Ke)=>{const De=Tt(Ae),Re=[];for(let _e=0;_e<De.length;_e++){const Le=De[_e];(Le.storageOptimizedImageUrl&&Le.storageOptimizedImageMimeType||Le.imageUrl&&Le.imageMimeType||Le.uploadedFileUri&&Le.uploadedFileMimeType)&&Re.push(_e)}const Be=new Set(Re.slice(-10)),He=[];for(let _e=0;_e<De.length;_e++){if(!Be.has(_e))continue;const Le=De[_e],Qe=Le.uploadedFileUri,Jt=Le.uploadedFileMimeType;Qe&&Jt&&He.push(Qe)}let st={};try{const _e=Array.from(new Set(He));_e.length&&(st=await p0(_e))}catch{st={}}let vt=0;for(let _e=0;_e<De.length;_e++){if(!Be.has(_e))continue;const Le=De[_e],Qe=Le.storageOptimizedImageUrl,Jt=Le.storageOptimizedImageMimeType,Mt=Le.imageUrl,Zt=Le.imageMimeType,dn=Le.uploadedFileUri,Gt=Le.uploadedFileMimeType,sn=!!(Qe&&Jt||Mt&&Zt),ot=!(dn&&Gt),dt=!!(dn&&st[dn]?.deleted);(ot||dt)&&sn&&vt++}let rt=0;const et=Date.now(),Ye=()=>{if(!Ke)return;const _e=Date.now()-et,Le=rt>0?_e/rt:void 0,Qe=Math.max(0,vt-rt),Jt=Le!==void 0?Math.round(Le*Qe):void 0;Ke(rt,vt,Jt)},We={};for(let _e=0;_e<De.length;_e++){if(!Be.has(_e))continue;const Le=De[_e],Qe=Le.storageOptimizedImageUrl,Jt=Le.storageOptimizedImageMimeType,Mt=Le.imageUrl,Zt=Le.imageMimeType;if(!(Qe&&Jt)&&!(Mt&&Zt))continue;const dn=Le.uploadedFileUri,Gt=Le.uploadedFileMimeType;let sn=!1;if(dn&&Gt){try{const dt=st&&st[dn];sn=!!(dt&&dt.deleted)}catch{sn=!1}if(!sn)continue}let ot=null;try{if(Qe&&Jt)ot={dataUrl:Qe,mimeType:Jt};else if(Mt&&Zt){ot={dataUrl:Mt,mimeType:Zt};try{const dt=await Vr(Mt,Zt,{t:e});s(Le.id,{storageOptimizedImageUrl:dt.dataUrl,storageOptimizedImageMimeType:dt.mimeType})}catch{}}if(ot){const dt=await Va(ot.dataUrl,ot.mimeType,"send-history");s(Le.id,{uploadedFileUri:dt.uri,uploadedFileMimeType:dt.mimeType}),Le.uploadedFileUri=dt.uri,Le.uploadedFileMimeType=dt.mimeType,We[Le.id]={oldUri:dn,newUri:dt.uri}}}catch(dt){console.warn("Pre-send URI ensure failed for message",Le.id,dt)}try{rt++,Ye()}catch{}await new Promise(dt=>setTimeout(dt,0))}return We},[Tt,s,e]),Ut=T.useCallback(Ae=>{o(Ke=>{const De={...Ke,smartReengagement:{...Ke.smartReengagement,thresholdSeconds:Ae}};return es(De).catch(()=>{}),De})},[o]),fn=T.useCallback(()=>Ve.length>0?Ve.reduce((Ke,De)=>Ke+De,0)/Ve.length/1e3:15,[Ve]),oe=T.useCallback(async(Ae,Ke,De)=>{if(Te){H([]),$e.current&&(be($e.current),$e.current=null);return}if(!Ke.trim()||!K.current){H([]);return}{const et=V.current,Ye=et.findIndex(We=>We.id===Ae);if(Ye!==-1){const We=et[Ye];if(We&&Array.isArray(We.replySuggestions)&&We.replySuggestions.length>0){H(We.replySuggestions),$e.current&&(be($e.current),$e.current=null);return}}}$e.current=Ge(rn.GEN,Pt.SUGGESTIONS),H([]);const Re=A(De).filter(et=>et.role==="user"||et.role==="assistant").slice(-6).map(et=>et.role==="user"?`User: ${et.text||"(sent an image)"}`:`Tutor: ${et.translations?.[0]?.target||et.rawAssistantResponse||et.text||"(sent an image)"}`).join(`
`),Be=V.current;let He="";{const et=Be.findIndex(We=>We.id===Ae),Ye=et===-1?Be.length-1:et-1;for(let We=Ye;We>=0;We--){const _e=Be[We];if(_e.role==="assistant"&&typeof _e.chatSummary=="string"&&_e.chatSummary.trim()){He=_e.chatSummary.trim();break}}}let st="";try{st=(await Eo())?.text||""}catch{st=""}let vt=L.replace("{tutor_message_placeholder}",Ke).replace("{conversation_history_placeholder}",Re||"No history yet.").replace("{previous_chat_summary_placeholder}",He||"").replace("{existing_global_profile_placeholder}",st||"(none)");const rt=2;for(let et=0;et<=rt;et++)try{let We=((await Mv(or().text.aux,vt,[],void 0,void 0,void 0,void 0,!1,{responseMimeType:"application/json"})).text||"").trim();const _e=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,Le=We.match(_e);if(Le&&Le[2])We=Le[2].trim();else{const Mt=We.indexOf("{"),Zt=We.lastIndexOf("}");Mt!==-1&&Zt!==-1&&(We=We.substring(Mt,Zt+1))}const Qe=JSON.parse(We);if(Array.isArray(Qe.suggestions)&&Qe.suggestions.every(Mt=>typeof Mt=="object"&&Mt!==null&&"target"in Mt&&"native"in Mt&&typeof Mt.target=="string"&&typeof Mt.native=="string")){const Mt=Qe.suggestions;H(Mt),s(Ae,{replySuggestions:Mt});try{const Zt=R.current.selectedLanguagePairId;Zt&&await oi(Zt,V.current)}catch{}}else console.warn("Parsed suggestions not in expected format:",Qe.suggestions),H([]);typeof Qe.reengagementSeconds=="number"&&Qe.reengagementSeconds>=5&&Ut(Qe.reengagementSeconds);const Jt=typeof Qe.chatSummary=="string"?Qe.chatSummary.trim():"";Jt&&s(Ae,{chatSummary:Jt});try{const Mt=typeof Qe.globalProfile=="string"?Qe.globalProfile.trim().slice(0,1e4):"";if(Mt){await gd(Mt);try{window.dispatchEvent(new CustomEvent("globalProfileUpdated"))}catch{}}}catch(Mt){console.warn("Failed to update global profile:",Mt)}break}catch(Ye){console.error(`Error fetching reply suggestions (attempt ${et+1}/${rt+1}):`,Ye),et<rt?await new Promise(We=>setTimeout(We,500*(et+1))):H([])}$e.current&&(be($e.current),$e.current=null)},[L,Ut,A,V,K,R,Te,Ge,be,H,s]),it=T.useCallback(async Ae=>{const Ke=Je(Ae);if(!Ke||!K.current)return;mt.current=Ge(rn.GEN,Pt.CREATE_SUGGESTION);const De=R.current.stt.language,Re=os(De),Be=os(K.current.targetLanguageCode);let He,st,vt;Re===Be?(He=K.current.targetLanguageName,st=K.current.nativeLanguageName,vt=!0):(He=K.current.nativeLanguageName,st=K.current.targetLanguageName,vt=!1);try{const{translatedText:rt}=await cD(Ke,He,st),et={target:vt?Ke:rt,native:vt?rt:Ke},Ye=_e=>_e.target===et.target&&_e.native===et.native;H(_e=>_e.some(Ye)?_e:[et,..._e]);const We=G.current||V.current.slice().reverse().find(_e=>_e.role==="assistant"&&!_e.thinking)?.id;We&&(G.current||(G.current=We),c(_e=>_e.map(Le=>{if(Le.id===We){const Qe=Le.replySuggestions||[];return Qe.some(Ye)?Le:{...Le,replySuggestions:[et,...Qe]}}return Le})))}catch(rt){console.error("Failed to create suggestion via translation:",rt),r({role:"error",text:e("error.translationFailed")})}finally{mt.current&&(be(mt.current),mt.current=null),P?.current&&P.current(!1)}},[r,e,Je,K,R,G,V,c,H,P,Ge,be]),lt=T.useCallback((Ae,Ke)=>{K.current&&(me.current||!Ae.target&&Ae.native)},[K,me]),Fe=T.useCallback((Ae,Ke,De)=>{oe(Ae,Ke,De),G.current=Ae},[oe,G]),wt=T.useCallback(async Ae=>{const Ke=await Vr(Ae.dataUrl,Ae.mimeType,{t:e,onProgress:Ae.onProgress});je.current=!0,Ae.setUploadPrepLabel!==!1&&he(Re=>Re&&Re.active?{...Re,label:e("chat.sendPrep.uploadingMedia")||"Uploading media..."}:{active:!0,label:e("chat.sendPrep.uploadingMedia")||"Uploading media..."});const De=await Va(Ae.dataUrl,Ae.mimeType,Ae.displayName);return{optimized:Ke,upload:De}},[e,he]),Dt=T.useCallback(async Ae=>{let Ke=null,De=Ae.sanitizedText,Re=null,Be=typeof Ae.passedImageBase64=="string"&&Ae.passedImageBase64?Ae.passedImageBase64:void 0,He=typeof Ae.passedImageMimeType=="string"&&Ae.passedImageMimeType?Ae.passedImageMimeType:void 0,st,vt;if(Ae.messageType!=="user")return{userMessageId:Ke,userMessageText:De,recordedSpeechForMessage:Re,userImageToProcessBase64:Be,userImageToProcessMimeType:He,userImageToProcessStorageOptimizedBase64:st,userImageToProcessStorageOptimizedMimeType:vt};for(let Ye=0;Ye<2;Ye++){const We=typeof b=="function"?b():null;if(We&&typeof We.dataUrl=="string"&&We.dataUrl.length>0){Re=We,D.current=null;break}if(D.current&&typeof D.current.dataUrl=="string"&&D.current.dataUrl.length>0){Re=D.current,D.current=null;break}Ye===0&&await new Promise(_e=>setTimeout(_e,60))}if(Re&&Re.dataUrl.length>Zr&&(Re=null),Ae.currentSettingsVal.sendWithSnapshotEnabled&&!Be&&!Ae.shouldGenerateUserImage){const Ye=await m(!1);Ye&&(Be=Ye.base64,He=Ye.mimeType,st=Ye.storageOptimizedBase64,vt=Ye.storageOptimizedMimeType)}const rt=typeof Ae.passedImageBase64=="string"&&Ae.passedImageBase64?Ae.passedImageBase64:ae,et=typeof Ae.passedImageMimeType=="string"&&Ae.passedImageMimeType?Ae.passedImageMimeType:Ne;if(rt&&et&&et.startsWith("video/"))try{const Ye=await gD(rt,{at:"start",maxDim:768,quality:.75,outputMime:"image/jpeg"}),We=r({role:"user",text:De,imageUrl:Ye.dataUrl,imageMimeType:Ye.mimeType});try{je.current||(je.current=!0),s(We,{storageOptimizedImageUrl:Ye.dataUrl,storageOptimizedImageMimeType:Ye.mimeType});const _e=await Va(Ye.dataUrl,Ye.mimeType,"keyframe-image");s(We,{uploadedFileUri:_e.uri,uploadedFileMimeType:_e.mimeType})}catch{}De="",Be=rt,He=et}catch(Ye){console.warn("Failed to create keyframe from video; proceeding without keyframe image message",Ye)}if(!st&&ae&&Ne)try{je.current||(je.current=!0);const Ye=await Vr(ae,Ne,{t:e});st=Ye.dataUrl,vt=Ye.mimeType}catch{}return Ke=r({role:"user",text:De,recordedUtterance:Re||void 0,imageUrl:Be,imageMimeType:He,storageOptimizedImageUrl:st,storageOptimizedImageMimeType:vt}),{userMessageId:Ke,userMessageText:De,recordedSpeechForMessage:Re,userImageToProcessBase64:Be,userImageToProcessMimeType:He,userImageToProcessStorageOptimizedBase64:st,userImageToProcessStorageOptimizedMimeType:vt}},[r,ae,Ne,m,b,D,je,e,s]),Nt=T.useCallback(async Ae=>{const Ke=await Mv(or().text.default,Ae.geminiPromptText,Ae.sanitizedDerivedHistory,Ae.systemInstructionForGemini,void 0,Ae.imageForGeminiContextMimeType,Ae.imageForGeminiContextFileUri,Ae.currentSettingsVal.enableGoogleSearch,void 0),De=Ke.text||"",Re=Ct(De),Be=Ke.candidates?.[0]?.groundingMetadata?.groundingChunks;Be?.length&&Se(Be);const He={thinking:!1,translations:Re.length>0?Re:void 0,rawAssistantResponse:De,text:Re.length===0?De:void 0};return s(Ae.thinkingMessageId,He),{accumulatedFullText:De,finalMessageUpdates:He}},[Ct,Se,s]),pt=T.useCallback(async Ae=>{if(!Ae.shouldGenerateUserImage||!Ae.currentSettingsVal.sendWithSnapshotEnabled||Ae.messageType!=="user"||!Ae.userMessageText.trim()||!Ae.userMessageId||Ae.userImageToProcessBase64)return{};const Ke=Date.now();s(Ae.userMessageId,{isGeneratingImage:!0,imageGenerationStartTime:Ke,imageUrl:void 0,imageMimeType:void 0});const De=Ae.sanitizedDerivedHistory;let Re=null;for(let Be=0;Be<7;Be++){const He=KA.replace("{TEXT}",Ae.userMessageText),st=await Wi({history:De,latestMessageText:He,latestMessageRole:"user",systemInstruction:FA,maestroAvatarUri:_.current||void 0,maestroAvatarMimeType:B.current||void 0});if(Re=st,"base64Image"in st)break;Be<6&&await new Promise(vt=>setTimeout(vt,1500))}if(Re&&"base64Image"in Re){const Be=Date.now()-Ke;ue(Be);try{const{optimized:He,upload:st}=await wt({dataUrl:Re.base64Image,mimeType:Re.mimeType,displayName:"user-generated"});return s(Ae.userMessageId,{imageUrl:Re.base64Image,imageMimeType:Re.mimeType,storageOptimizedImageUrl:He.dataUrl,storageOptimizedImageMimeType:He.mimeType,uploadedFileUri:st.uri,uploadedFileMimeType:st.mimeType,isGeneratingImage:!1,imageGenError:null,imageGenerationStartTime:void 0}),{imageForGeminiContextFileUri:st.uri,imageForGeminiContextMimeType:st.mimeType}}catch{s(Ae.userMessageId,{imageUrl:Re.base64Image,imageMimeType:Re.mimeType,isGeneratingImage:!1,imageGenError:null,imageGenerationStartTime:void 0})}finally{he(He=>He&&He.active?{...He,label:e("chat.sendPrep.preparingMedia")||"Preparing media..."}:He)}}else s(Ae.userMessageId,{isGeneratingImage:!1,imageGenerationStartTime:void 0});return{}},[Wi,B,_,wt,ue,he,e,s]),cn=T.useCallback(async Ae=>{if(!Ae.currentSettingsVal.imageGenerationModeEnabled||!Ae.accumulatedFullText.trim())return;const Ke=Date.now();s(Ae.thinkingMessageId,{isGeneratingImage:!0,imageGenerationStartTime:Ke});const De=A(V.current).filter(Be=>Be.id!==Ae.thinkingMessageId);let Re;try{je.current=!0,he({active:!0,label:e("chat.sendPrep.preparingMedia")||"Preparing media...",done:0,total:0});const Be=await Ht(De,(He,st,vt)=>{he({active:!0,label:e("chat.sendPrep.preparingMedia")||"Preparing media...",done:He,total:st,etaMs:vt})});Re=De.map(He=>{const st=Be[He.id];return st&&st.newUri&&He.uploadedFileUri!==st.newUri?{...He,uploadedFileUri:st.newUri}:He}),await new Promise(He=>setTimeout(He,0))}catch{}for(let Be=0;Be<7;Be++){const He=Re||De;let st;try{st=(await Eo())?.text||void 0}catch{}const vt=Vl(He,{maxMessages:f(De.filter(We=>We.role==="user"||We.role==="assistant")),maxMediaToKeep:Ql,contextSummary:ht()||void 0,globalProfileText:st,placeholderLatestUserMessage:ly}),rt=await od(vt),et=KA.replace("{TEXT}",Ae.accumulatedFullText),Ye=await Wi({history:rt,latestMessageText:et,latestMessageRole:"user",systemInstruction:FA,maestroAvatarUri:_.current||void 0,maestroAvatarMimeType:B.current||void 0});if("base64Image"in Ye){const We=Date.now()-Ke;ue(We);try{const{optimized:_e,upload:Le}=await wt({dataUrl:Ye.base64Image,mimeType:Ye.mimeType,displayName:"assistant-generated",setUploadPrepLabel:!1});s(Ae.thinkingMessageId,{imageUrl:Ye.base64Image,imageMimeType:Ye.mimeType,storageOptimizedImageUrl:_e.dataUrl,storageOptimizedImageMimeType:_e.mimeType,uploadedFileUri:Le.uri,uploadedFileMimeType:Le.mimeType,isGeneratingImage:!1,imageGenError:null,imageGenerationStartTime:void 0})}catch{s(Ae.thinkingMessageId,{imageUrl:Ye.base64Image,imageMimeType:Ye.mimeType,isGeneratingImage:!1,imageGenError:null,imageGenerationStartTime:void 0})}break}else Be<6?await new Promise(We=>setTimeout(We,1500)):s(Ae.thinkingMessageId,{isGeneratingImage:!1,imageGenerationStartTime:void 0})}},[f,Ht,Wi,A,B,_,V,wt,ht,ue,he,e,s]),jt=T.useCallback(async(Ae,Ke,De,Re="user")=>{if(ge.current)return!1;const Be=Je(Ae);if(!Be&&!Ke&&Re==="user")return!1;if(!K.current)return console.error("No language pair selected, cannot send message."),r({role:"error",text:e("error.noLanguagePair")}),!1;if(we.current||me.current)return!1;if(gt.current=Ge(rn.GEN,Pt.RESPONSE),R.current.stt.enabled&&y){try{S()}catch{}se.current=!0,x()}else se.current=!1;je.current=!0,H([]),$e.current&&(be($e.current),$e.current=null),G.current=null,Re==="user"&&q&&q(null),te.current=null;const He=R.current,st=He.selectedCameraId===ar,vt=await Dt({sanitizedText:Be,passedImageBase64:Ke,passedImageMimeType:De,messageType:Re,shouldGenerateUserImage:st,currentSettingsVal:He});let{userMessageId:rt,userMessageText:et,userImageToProcessBase64:Ye,userImageToProcessMimeType:We,userImageToProcessStorageOptimizedBase64:_e,userImageToProcessStorageOptimizedMimeType:Le}=vt;const Qe=r({role:"assistant",thinking:!0});O.current();let Jt=V.current.filter(ot=>ot.id!==Qe);Re==="user"&&rt&&(Jt=Jt.filter(ot=>ot.id!==rt));let Mt,Zt=j;try{await Eo()}finally{Zt=LT(Zt)}if(Re==="user"&&Ye&&!_e&&We){je.current||(je.current=!0);try{he({active:!0,label:e("chat.sendPrep.preparingMedia")||"Preparing media..."});const ot=await Vr(Ye,We,{t:e,onProgress:(dt,ke,Et,xt)=>he({active:!0,label:dt,done:ke,total:Et,etaMs:xt})});_e=ot.dataUrl,Le=ot.mimeType,Re==="user"&&rt&&s(rt,{storageOptimizedImageUrl:ot.dataUrl,storageOptimizedImageMimeType:ot.mimeType})}catch(ot){console.warn("Failed to derive low-res for current user media, will omit persistence media",ot)}finally{he(ot=>ot&&ot.active?{...ot,label:e("chat.sendPrep.preparingMedia")||"Preparing media..."}:ot)}}let dn,Gt;Re==="user"?Ye?(dn=Ye,Gt=We):(dn=_e,Gt=Le):(dn=typeof Ke=="string"&&Ke?Ke:void 0,Gt=typeof De=="string"&&De?De:void 0);let sn;switch(Re){case"image-reengagement":Mt="...";break;case"conversational-reengagement":Mt="...",dn=void 0,Gt=void 0;break;default:Mt=et;break}if(Re==="image-reengagement"&&typeof Ke=="string"&&Ke&&typeof De=="string"&&De&&(dn=Ke,Gt=De),dn&&Gt)try{je.current||(je.current=!0),he({active:!0,label:e("chat.sendPrep.uploadingMedia")||"Uploading media..."});const ot=await Va(dn,Gt,"current-user-media");if(Gt=ot.mimeType,Re==="user"&&rt){const dt=(V.current||[]).find(Et=>Et.id===rt);!!(dt&&typeof dt.uploadedFileUri=="string"&&dt.uploadedFileUri)?(sn=dt.uploadedFileUri,Gt=dt.uploadedFileMimeType||Gt):(s(rt,{uploadedFileUri:ot.uri,uploadedFileMimeType:ot.mimeType}),sn=ot.uri)}else sn=ot.uri}catch{console.warn("Failed to upload current media to Files API; will send without media"),sn=void 0}finally{he(ot=>ot&&ot.active?{...ot,label:e("chat.sendPrep.preparingMedia")||"Preparing media..."}:ot)}Se(void 0);try{const ot=A(Jt);he({active:!0,label:e("chat.sendPrep.preparingMedia")||"Preparing media...",done:0,total:0});let dt={};try{dt=await Ht(ot,(Ze,Bt,Xt)=>{he({active:!0,label:e("chat.sendPrep.preparingMedia")||"Preparing media...",done:Ze,total:Bt,etaMs:Xt})})}finally{he(Ze=>Ze&&Ze.active?{...Ze,label:e("chat.sendPrep.finalizing")||"Finalizing..."}:Ze)}let ke=V.current.filter(Ze=>Ze.id!==Qe);Re==="user"&&rt&&(ke=ke.filter(Ze=>Ze.id!==rt));const Et=A(ke).map(Ze=>{if(dt[Ze.id]?.newUri){const Bt=dt[Ze.id].newUri;if(Ze.uploadedFileUri!==Bt)return{...Ze,uploadedFileUri:Bt}}return Ze});try{for(const Ze of Et){const Bt=dt[Ze.id];Bt&&Bt.newUri&&Ze.uploadedFileUri!==Bt.newUri&&(Ze.uploadedFileUri=Bt.newUri)}}catch{}let xt;try{xt=(await Eo())?.text||void 0}catch{}const $=Vl(Et,{maxMessages:f(Et.filter(Ze=>Ze.role==="user"||Ze.role==="assistant")),maxMediaToKeep:Ql,contextSummary:ht()||void 0,globalProfileText:xt}),Ee=await od($),xe=await pt({shouldGenerateUserImage:st,currentSettingsVal:He,messageType:Re,userMessageText:et,userMessageId:rt,userImageToProcessBase64:Ye,sanitizedDerivedHistory:Ee});xe.imageForGeminiContextFileUri&&(sn=xe.imageForGeminiContextFileUri,Gt=xe.imageForGeminiContextMimeType);const{accumulatedFullText:Ue,finalMessageUpdates:ct}=await Nt({thinkingMessageId:Qe,geminiPromptText:Mt,sanitizedDerivedHistory:Ee,systemInstructionForGemini:Zt,imageForGeminiContextMimeType:Gt,imageForGeminiContextFileUri:sn,currentSettingsVal:He});try{const Ze=ct.rawAssistantResponse||ct.translations?.find(Bt=>Bt.target)?.target||"";if(!$e.current&&Ze.trim()){const Bt=V.current.map(Xt=>Xt.id===Qe?{...Xt,...ct}:Xt);Fe(Qe,Ze,A(Bt))}}catch(Ze){console.warn("Failed to prefetch suggestions before TTS:",Ze)}const ut=V.current.find(Ze=>Ze.id===Qe);if(ut){const Ze={...ut,...ct};g(Ze)}Re==="user"&&(Ce(null,null),Be===Je(N||"")&&(N||"").length>0&&x()),await new Promise(Ze=>setTimeout(Ze,0)),await cn({thinkingMessageId:Qe,accumulatedFullText:Ue,currentSettingsVal:He});try{je.current=!1}catch{}gt.current&&(be(gt.current),gt.current=null),he(null),M.current("send-complete");const tn=me.current||typeof k=="function"&&k();if(se.current&&R.current.stt.enabled&&!tn)try{E(R.current.stt.language)}finally{se.current=!1}if(!p){const Ze=V.current.find(Bt=>Bt.id===Qe);if(Ze&&Ze.role==="assistant"&&(Ze.rawAssistantResponse||Ze.translations&&Ze.translations.length>0)&&!$e.current&&Ze.id!==G.current){const Bt=Ze.rawAssistantResponse||Ze.translations?.find(Xt=>Xt.target)?.target||"";Bt.trim()&&Fe(Ze.id,Bt,A(V.current))}}return!0}catch(ot){console.error("Error sending message (stream consumer):",ot);let dt=e("general.error");ot instanceof sc?ot.code==="MISSING_API_KEY"?(dt=e("error.apiKeyMissing"),Z?.({reason:"missing",instructionIndex:0})):pD(ot)?(dt=e("error.apiKeyInvalid"),Z?.({reason:"missing",instructionIndex:0})):mD(ot)?(dt=e("error.apiQuotaExceeded"),Z?.({reason:"quota",instructionIndex:9})):dt=N0(ot.message)||ot.code||`HTTP ${ot.status}`:ot instanceof Error&&(dt=ot.message),s(Qe,{thinking:!1,role:"error",text:dt,rawAssistantResponse:void 0,translations:void 0}),gt.current&&(be(gt.current),gt.current=null),he(null);try{je.current=!1}catch{}if(se.current&&R.current.stt.enabled&&!me.current)try{E(R.current.stt.language)}finally{se.current=!1}return M.current("send-error"),Re==="user"&&Ce(null,null),H([]),$e.current&&(be($e.current),$e.current=null),!1}},[e,r,s,Dt,O,M,A,f,Ht,ht,Nt,pt,cn,Fe,Je,g,p,y,S,E,x,k,j,ae,Ne,Ce,Ge,be,Se,H,he,q,Z,N]);return T.useEffect(()=>{at.current=jt},[jt]),{isSending:nt,isSendingRef:we,sendPrep:re,latestGroundingChunks:ve,maestroActivityStage:Me,isCreatingSuggestion:W,imageLoadDurations:Ve,handleSendMessageInternal:jt,handleSendMessageInternalRef:at,fetchAndSetReplySuggestions:oe,handleCreateSuggestion:it,handleSuggestionInteraction:lt,setMaestroActivityStage:Pe,parseGeminiResponse:Ct,stripBracketedContent:Je,resolveBookmarkContextSummary:ht,ensureUrisForHistoryForSend:Ht,computeHistorySubsetForMedia:Tt,handleReengagementThresholdChange:Ut,calculateEstimatedImageLoadTime:fn}},yD=({isSpeaking:t,fetchAndSetReplySuggestions:e,getHistoryRespectingBookmark:o})=>{const r=T.useRef(!1),s=Q(c=>c.setLastFetchedSuggestionsFor);T.useEffect(()=>{const c=r.current;if(r.current=t,c&&!t){const A=Q.getState();if(Jl(A))return;const f=A.messages,m=f.length>0?f[f.length-1]:null;if(m&&m.role==="assistant"&&!m.thinking&&m.id!==A.lastFetchedSuggestionsFor){const g=m.rawAssistantResponse||m.translations?.find(p=>p.target)?.target||"";g.trim()&&(s(m.id),e(m.id,g,o(f)).catch(()=>{s(null)}))}}},[t,e,o,s])},SD=()=>{T.useEffect(()=>{const t=FR(e=>({messages:e.messages,selectedLanguagePairId:e.settings.selectedLanguagePairId,isLoadingHistory:e.isLoadingHistory,historyBookmarkMessageId:e.settings.historyBookmarkMessageId,maxVisibleMessages:e.settings.maxVisibleMessages}),(e,o)=>{const r=e.selectedLanguagePairId;if(r&&!e.isLoadingHistory&&e.messages!==o?.messages&&oi(r,e.messages).catch(()=>{}),!(e.messages!==o?.messages||e.historyBookmarkMessageId!==o?.historyBookmarkMessageId||e.maxVisibleMessages!==o?.maxVisibleMessages||e.isLoadingHistory!==o?.isLoadingHistory||e.selectedLanguagePairId!==o?.selectedLanguagePairId)||!r||e.isLoadingHistory)return;const c=e.messages;if(!c||c.length===0)return;const A=[];for(let N=0;N<c.length;N++)Hl(c[N])&&A.push(N);const f=(e.maxVisibleMessages??Md)+2;if(A.length<=f)return;const m=e.historyBookmarkMessageId;let g=-1;m&&(g=c.findIndex(N=>N.id===m));const p=g>=0?g:0;let y=0;for(let N=p;N<c.length;N++)Hl(c[N])&&y++;if(y<=f)return;const S=Math.max(0,A.length-f),E=A[S];let x=-1;for(let N=E;N<c.length;N++)if(c[N].role==="assistant"&&!c[N].thinking){x=N;break}if(x===-1)return;const k=c[x].id;if((e.historyBookmarkMessageId||null)===(k||null))return;const b=Q.getState();b.setSettings(N=>({...N,historyBookmarkMessageId:k}));const O={...b.settings,historyBookmarkMessageId:k};es(O).catch(()=>{}),Rd(r,{bookmarkMessageId:k}).catch(()=>{})},{equalityFn:ry});return()=>t()},[])};class CD extends oc{async write(e){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(e.string!==void 0)await this.writeText(e.string);else if(e.url)await this.writeText(e.url);else if(e.image)if(typeof ClipboardItem<"u")try{const o=await(await fetch(e.image)).blob(),r=new ClipboardItem({[o.type]:o});await navigator.clipboard.write([r])}catch{throw new Error("Failed to write image")}else throw this.unavailable("Writing images to the clipboard is not supported in this browser");else throw new Error("Nothing to write")}async read(){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(typeof ClipboardItem<"u")try{const e=await navigator.clipboard.read(),o=e[0].types[0],r=await e[0].getType(o);return{value:await this._getBlobData(r,o),type:o}}catch{return this.readText()}else return this.readText()}async readText(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw this.unavailable("Reading from clipboard not supported in this browser");return{value:await navigator.clipboard.readText(),type:"text/plain"}}async writeText(e){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw this.unavailable("Writting to clipboard not supported in this browser");await navigator.clipboard.writeText(e)}_getBlobData(e,o){return new Promise((r,s)=>{const c=new FileReader;o.includes("image")?c.readAsDataURL(e):c.readAsText(e),c.onloadend=()=>{const A=c.result;r(A)},c.onerror=A=>{s(A)}})}}const TD=Mo("Clipboard",{web:()=>new CD}),wD=Mo("Browser",{web:()=>$o(()=>import("./web-DpE8wNqM.js"),[]).then(t=>new t.BrowserWeb)}),Rv=async t=>{if(typeof t!="string"||!t.trim())return;const e=t.trim();let o;try{o=new URL(e)}catch{return}if(!(o.protocol!=="https:"&&o.protocol!=="http:")){if(nr.isNativePlatform())try{await wD.open({url:e});return}catch{}typeof window<"u"&&window.open(e,"_blank","noopener,noreferrer")}},ED="https://aistudio.google.com/app/apikey",bD="https://ronitervo.github.io/MaestroTutor/public/privacy.html",BA=Array.from({length:12},(t,e)=>`/api-key-instructions/step-${e+1}.jpg`),kD=3200,Jo=9,xD=({isOpen:t,isBlocking:e,hasKey:o,maskedKey:r,isSaving:s=!1,error:c,instructionFocusIndex:A,onSave:f,onClear:m,onClose:g,onValueChange:p})=>{const{t:y}=ei(),[S,E]=T.useState(""),[x,k]=T.useState(!1),[b,M]=T.useState(!1),[O,N]=T.useState(0),[j,L]=T.useState(!0),H=!e,P=BA.length,_=O>=Jo,B=T.useMemo(()=>S.trim().length>=20&&!s,[S,s]);T.useEffect(()=>{t||(M(!1),N(0),L(!0))},[t]),T.useEffect(()=>{if(!t||typeof A!="number"||P<=0)return;const K=Math.max(0,Math.min(P-1,A));N(K),M(!0),L(!1)},[A,t,P]),T.useEffect(()=>{if(!b||!j||P<=1||_)return;const K=window.setInterval(()=>{N(V=>V>=Jo-1?0:V+1)},kD);return()=>window.clearInterval(K)},[b,j,P,_]);const q=BA[O]||"",Z=b||H,ne=y(b?"apiKeyGate.closeInstructions":"apiKeyGate.close"),U=b?()=>M(!1):g,X=K=>{if(P!==0){if(_){const V=Jo,ge=P-V;if(ge<=0)return;const G=(O-V+K+ge)%ge;N(V+G)}else{const V=Jo;N(ge=>(ge+K+V)%V)}L(!1)}},F=K=>{N(K),L(!1)},R=async()=>{if(S.trim())return;let K="";try{if(nr.isNativePlatform()){const{value:ge}=await TD.read();K=ge||""}else typeof navigator<"u"&&navigator.clipboard?.readText&&(K=await navigator.clipboard.readText())}catch{}if(!K)return;const V=rc(K);!V||!f0(V)||/\s/.test(V)||(E(V),p?.(V))};return t?C.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:C.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-white shadow-xl border border-slate-200",children:[C.jsxs("div",{className:"flex items-start justify-between px-6 pt-6",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-50 text-blue-600",children:C.jsx(ts,{className:"h-5 w-5"})}),C.jsxs("div",{children:[C.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:y(_?"apiKeyGate.billingTitle":"apiKeyGate.title")}),C.jsxs("p",{className:"text-sm text-slate-600",children:[y("apiKeyGate.subtitle")," ",C.jsx("button",{onClick:()=>Rv(bD),className:"text-blue-600 hover:underline inline-flex items-center",children:y("apiKeyGate.privacyPolicy")})]})]})]}),Z&&C.jsx("button",{onClick:U,className:"text-slate-400 hover:text-slate-700","aria-label":ne,children:C.jsx(qa,{className:"h-5 w-5"})})]}),C.jsx("div",{className:"px-6 py-4 space-y-4",children:b?C.jsx("div",{className:"flex flex-col items-center gap-4",children:C.jsxs("div",{className:"relative w-full max-w-[360px] overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[C.jsx("div",{className:"aspect-[9/16] w-full bg-slate-100",children:C.jsx("img",{src:q,alt:y("apiKeyGate.instructionStep",{step:O+1,total:P}),className:"h-full w-full object-contain",draggable:!1})}),P>1&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-between px-2",children:[C.jsx("button",{type:"button",onClick:()=>X(-1),"aria-label":y("apiKeyGate.previousInstruction"),className:"pointer-events-auto rounded-full bg-white/90 p-2 text-slate-600 shadow hover:bg-white",children:C.jsx(Jv,{className:"h-5 w-5"})}),C.jsx("button",{type:"button",onClick:()=>X(1),"aria-label":y("apiKeyGate.nextInstruction"),className:"pointer-events-auto rounded-full bg-white/90 p-2 text-slate-600 shadow hover:bg-white",children:C.jsx(Xv,{className:"h-5 w-5"})})]}),!_&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 rounded-full bg-white/90 px-3 py-1 shadow-sm",children:C.jsx("div",{className:"flex items-center gap-1.5",children:BA.slice(0,Jo).map((K,V)=>C.jsx("button",{type:"button","aria-label":y("apiKeyGate.instructionStep",{step:V+1,total:Jo}),onClick:()=>F(V),className:`h-2 w-2 rounded-full ${V===O?"bg-blue-600":"bg-slate-300"}`},`instruction-dot-${V}`))})}),C.jsxs("div",{className:"absolute right-3 top-3 rounded-full bg-white/90 px-2 py-1 text-xs text-slate-600 shadow-sm",children:[O+1," / ",Jo]})]})]})]})}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700 space-y-2",children:[C.jsx("div",{className:"font-medium text-slate-800",children:y("apiKeyGate.stepsTitle")}),C.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[C.jsx("li",{children:y("apiKeyGate.stepOne")}),C.jsx("li",{children:y("apiKeyGate.stepTwo")})]}),C.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[C.jsx("button",{className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-2 text-white hover:bg-blue-700",onClick:()=>Rv(ED),children:y("apiKeyGate.openAiStudio")}),C.jsx("button",{type:"button",onClick:()=>{N(0),M(!0),L(!0)},"aria-label":y("apiKeyGate.viewInstructions"),className:"inline-flex h-9 w-9 items-center justify-center rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-100",children:C.jsx(jv,{className:"h-5 w-5"})})]})]}),C.jsx("label",{className:"block text-sm font-medium text-slate-800",children:y("apiKeyGate.keyLabel")}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("input",{type:x?"text":"password",value:S,onChange:K=>{const V=K.target.value;E(V),p?.(V)},onClick:R,placeholder:y("apiKeyGate.placeholder"),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),C.jsx("button",{className:"rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-700 hover:bg-slate-100",onClick:()=>k(!x),type:"button",children:y(x?"apiKeyGate.hide":"apiKeyGate.show")})]}),c&&C.jsx("div",{className:"text-sm text-red-600",children:c}),o&&C.jsxs("div",{className:"rounded-lg bg-emerald-50 border border-emerald-200 p-3 text-sm text-emerald-800 flex items-center gap-2",children:[C.jsx(tr,{className:"h-4 w-4"}),y("apiKeyGate.currentKeySaved",{maskedKey:r?`(${r})`:""}).trim()]})]})}),!b&&C.jsxs("div",{className:"flex items-center justify-between px-6 pb-6",children:[C.jsx("button",{className:"text-sm text-slate-500 hover:text-slate-700",onClick:m,disabled:!o,children:y("apiKeyGate.clearSavedKey")}),C.jsxs("div",{className:"flex items-center gap-2",children:[H&&C.jsx("button",{onClick:g,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:y("apiKeyGate.cancel")}),C.jsx("button",{onClick:async()=>{await f(S)&&(E(""),H&&g())},disabled:!B,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:y(s?"apiKeyGate.saving":"apiKeyGate.saveKey")})]})]})]})}):null},ID=t=>{T.useEffect(()=>{document.title=t(yR)},[t]),T.useEffect(()=>{const e=document.getElementById("splash-screen");e&&e.remove()},[])},MD=2880*60*1e3-300*1e3,Dv="maestro-api-key-changed",PD=t=>{if(!t)return null;const e=t.match(/^data:([^;,]+)[;,]/);return e?e[1]:null},RD=({setLoadingGifs:t,setMaestroAvatar:e,maestroAvatarUriRef:o,maestroAvatarMimeTypeRef:r})=>{const s=T.useRef(!0);T.useEffect(()=>()=>{s.current=!1},[]);const c=T.useCallback((m,g,p)=>{s.current&&(o.current=p||null,r.current=g,e(m,g))},[r,o,e]),A=T.useCallback(async(m,g,p,y)=>{if(!m?.dataUrl)return;const S=typeof m.updatedAt=="number"?Date.now()-m.updatedAt:Number.POSITIVE_INFINITY;if(!(!(y||!m.uri||S>MD)||!await xd()))try{const k=m.mimeType||p||"image/png",b=await Va(m.dataUrl,k,"maestro-avatar"),M={dataUrl:m.dataUrl,mimeType:b.mimeType||k,uri:b.uri,updatedAt:Date.now()};await rs(M),c(g||M.dataUrl||b.uri,M.mimeType||null,b.uri);try{window.dispatchEvent(new CustomEvent("maestro-avatar-updated",{detail:M}))}catch{}}catch{}},[c]),f=T.useCallback(async m=>{try{let g=await Dl();if(g&&(g.dataUrl||g.uri)){const p=g?.mimeType&&typeof g.mimeType=="string"?g.mimeType:PD(g?.dataUrl),y=g.dataUrl||g.uri||null,S=!!m?.dropUri||!!m?.forceUpload;c(y,p,S?null:g.uri||null),await A(g,y,p,m?.forceUpload);return}try{const p=await iR();if(p){const y=p.type||"image/png",S=await new Promise((x,k)=>{const b=new FileReader;b.onloadend=()=>x(b.result),b.onerror=()=>k(b.error||new Error("DataURL conversion failed")),b.readAsDataURL(p)}),E={dataUrl:S,mimeType:y,uri:void 0,updatedAt:Date.now()};await rs(E),c(S,y,null);try{window.dispatchEvent(new CustomEvent("maestro-avatar-updated",{detail:{dataUrl:S,mimeType:y,uri:void 0}}))}catch{}await A(E,S,y,m?.forceUpload)}else c(null,null,null)}catch{c(null,null,null)}}catch{c(null,null,null)}},[c,A]);T.useEffect(()=>{f()},[f]),T.useEffect(()=>{if(typeof window>"u")return;const m=g=>{const p=!!g?.detail?.hasKey;f(p?{forceUpload:!0}:{dropUri:!0})};return window.addEventListener(Dv,m),()=>window.removeEventListener(Dv,m)},[f]),T.useEffect(()=>{const m=g=>{try{const p=g?.detail?.uri,y=g?.detail?.mimeType,S=g?.detail?.dataUrl;o.current=p||null,r.current=y&&typeof y=="string"?y:null,e(S||p||null,y||null)}catch{}};return window.addEventListener("maestro-avatar-updated",m),()=>window.removeEventListener("maestro-avatar-updated",m)},[r,o,e]),T.useEffect(()=>{(async()=>{try{const m=await HA()||[];let g=[];try{const y=await fetch("/gifs/manifest.json",{cache:"force-cache"});y.ok&&(g=await y.json())}catch{}const p=v0([...m,...g]);if(t(p),m.length===0&&p.length>0)try{await my(p)}catch{}}catch{}})()},[t])},DD=({maestroAvatarUriRef:t,maestroAvatarMimeTypeRef:e})=>{const{t:o}=ei();ID(o);const r=Q(P=>P.setLoadingGifs),s=Q(P=>P.setMaestroAvatar);RD({setLoadingGifs:r,setMaestroAvatar:s,maestroAvatarUriRef:t,maestroAvatarMimeTypeRef:e});const c=Q(P=>P.settings),A=Q($a),f=Q(P=>P.isLoadingHistory),m=Q(P=>P.replySuggestions),g=Q(P=>P.initSettings),p=Q(P=>P.updateSetting),y=Q(P=>P.setSettings),S=Q(P=>P.loadHistoryForPair),E=Q(P=>P.addMessage),x=Q(P=>P.updateMessage),k=Q(P=>P.deleteMessage),b=Q(P=>P.setMessages),M=Q(P=>P.getHistoryRespectingBookmark),O=Q(P=>P.computeMaxMessagesForArray),N=Q(P=>P.upsertMessageTtsCache),j=Q(P=>P.upsertSuggestionTtsCache),L=Q(P=>P.setReplySuggestions),H=T.useRef(null);return T.useEffect(()=>{Q.getState().isSettingsLoaded||g()},[g]),T.useEffect(()=>{const P=iD();rD(P),lD({url:P}).then(_=>{console.log(`[GeminiModels] Loaded from ${_.source}`,{url:P,updated:_.updated})}).catch(_=>{console.warn("[GeminiModels] Refresh failed",{url:P,error:_})})},[]),T.useEffect(()=>{const P=c.selectedLanguagePairId;P&&P!==H.current&&(H.current=P,S(P,o))},[c.selectedLanguagePairId,S,o]),{t:o,settings:c,handleSettingsChange:p,setSettings:y,selectedLanguagePair:A,isLoadingHistory:f,addMessage:E,updateMessage:x,deleteMessage:k,setMessages:b,getHistoryRespectingBookmark:M,computeMaxMessagesForArray:O,upsertMessageTtsCache:N,upsertSuggestionTtsCache:j,replySuggestions:m,setReplySuggestions:L}},ND=({isSpeaking:t,isSending:e,isListening:o,reengagementPhase:r,setMaestroActivityStage:s})=>{const c=T.useRef(s);T.useEffect(()=>{c.current=s},[s]),T.useEffect(()=>{t?c.current("speaking"):e?c.current("typing"):o?c.current("listening"):r==="countdown"||r==="engaging"?c.current("observing_high"):r==="watching"?c.current("observing_medium"):r==="waiting"?c.current("observing_low"):c.current("idle")},[t,e,o,r])},GD=({selectedLanguagePair:t,isBlockingActivity:e,isUserActive:o,reengagementPhase:r,scheduleReengagement:s,cancelReengagement:c})=>{const A=T.useRef(s),f=T.useRef(c);T.useEffect(()=>{A.current=s,f.current=c},[s,c]),T.useEffect(()=>{if(!t){f.current();return}if(e||o){f.current();return}r==="idle"&&A.current("became-idle")},[t,e,o,r])},Nv=t=>(t||"").split(",")[0].trim(),BD=xa.memo(({targetLang:t,nativeLang:e,currentSttLangCode:o,onSelectLang:r,t:s,isCollapsed:c,isInSuggestionMode:A})=>{const f=Nv(t.code),m=Nv(e.code),g=o===f||t.code.includes(o),p=o===m||e.code.includes(o),y=c?A?"p-0.5 bg-gray-300/60 rounded-full":"p-0.5 bg-blue-400/60 rounded-full":"p-0.5 bg-gray-200 rounded-full",S=c?"p-1.5 rounded-full":"p-2 rounded-full",E=c?"text-base leading-none":"text-lg leading-none",x=A?"bg-white/50":"bg-white/30",k=A?"bg-gray-800":"bg-blue-500",b=A?"hover:bg-black/20":"hover:bg-white/20";return C.jsxs("div",{className:`flex items-center space-x-0.5 ${y}`,children:[C.jsx("button",{onClick:()=>r(f),className:`${S} transition-colors ${g?c?x:k:c?`opacity-70 hover:opacity-100 ${b}`:"hover:bg-gray-300"}`,title:s("sttLang.selectLanguage",{language:t.displayName}),"aria-label":s("sttLang.selectLanguage",{language:t.displayName}),"aria-pressed":g,children:C.jsx("span",{className:`${E} ${g&&!c?"text-white":""}`,children:t.flag})}),C.jsx("button",{onClick:()=>r(m),className:`${S} transition-colors ${p?c?x:k:c?`opacity-70 hover:opacity-100 ${b}`:"hover:bg-gray-300"}`,title:s("sttLang.selectLanguage",{language:e.displayName}),"aria-label":s("sttLang.selectLanguage",{language:e.displayName}),"aria-pressed":p,children:C.jsx("span",{className:`${E} ${p&&!c?"text-white":""}`,children:e.flag})})]})});BD.displayName="SttLanguageSelector";const Gv=24e3,_D="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AAAAAAAA//8AAP///////////v/+//z/+//6//r/+//8//r//P/7//3//P/9//7/AAAAAAAAAQACAAIABAAEAAYABQAHAAkABQAIAAUACgAFAAcABgAFAAcABQAGAAUABQAEAAYAAgAFAAIABQACAAMAAQAAAAAA/f8AAP///v/9//z/+//6//j/+P/0//X/9P/1//b/9f/5//f/+//4//v/+v/+//7///8BAAAAAgAAAAMAAwAEAAUAAgAHAAEABgABAAQAAwACAAMAAAADAAAABAAAAAIAAgACAAIAAQADAAAAAwAAAAIAAAABAAMAAAAFAAIAAwAAAAIAAAAAAP////////3//v/8//7//f8AAP7////9//7////+/////////wAAAAAAAAEAAAABAAAAAAD+//3////8//3/+//+//3//v/9//////8AAAAA//8BAP//AgD//wMAAQACAAEAAQACAAEABAABAAQAAQAFAAMABAAFAAQABAAEAAYABQAHAAQABwAEAAYABAAEAAQAAgAFAAIAAwACAAIAAgAAAAAA///+//7/+f/6//j/9//3//X/9//2//f/9//5//f/+v/4//r/+v/7//z/+v/+//v//f/6//v/+v/7//r//f/6//////8AAAAA//8DAAAABQADAAUABwAGAAoABgAMAAYACgAGAAkABwAHAAYACAAJAAcACAAGAAgAAwAHAAAAAAD///z//v/6//v/+//8//z//f/+////AAABAAEAAgACAAIAAQABAAIAAAAAAAAA/v////v//P/7//r/+//6//v//P/8//////8CAAAABAADAAMAAwADAAUAAwADAAUABgAGAAcACAAJAAgACAAGAAYABgADAAUAAQADAAIAAwABAAMAAAACAAIAAAACAAEABQABAAQAAgACAAEAAQABAAAAAwD+/////v/9//z/+f/4//n/9v/4//T/9v/1//T/8v/x//L/8f/z//L/9P/0//X/9v/1//b/+v/6//3//P////7//v8AAP7//v////////8AAAAAAgAAAAIAAgAEAAcABAAGAAUABgADAAQABwAHAAsADAANAA4ADwAOAA4ADQAOAA8ADgAPAA0ADAALAAkACAAGAAYABgAEAAMAAQAEAAAAAgAAAAAAAgAAAAAA/f/+//v/+f/5//b/9//1//b/9P/0//b/8//1//f/9v/6//f/+f/5//v/+//8//z//v/+//7//f8AAP//AAABAP7/AgABAAEAAgADAAMAAwADAAIAAwADAAMAAQACAAAAAQD+////+//9//v//v/7//z/+//9//z//P/8//z/+//6//j/9//0//X/8f/0//H/8f/x//D/7v/v/+//8P/y//b/9v/8//v/AAAAAAUABQAJAAoACQALAAUACAADAAUABgAGAAsACwAQAA4AEQAOAA8ADgAPAAwADwAPABIAEgARABMAEgAUABIAEgATAA0ADwANAAkACAAGAAkABwAIAAYABwADAAQAAQAAAAAA/f/////////+//v//P/7//v/+//5//j/+v/3//b/9P/1//X/+v/6//3//f////7////6//z/+v/3//b/9v/1//b/9P/2//b/9//4//r//////wAAAwABAAMAAgACAAQAAgADAAMAAgACAAMAAwADAAMAAwACAAEAAQD+//7//v/7//3/+v/6//r/9//5//X/+f/2//n/9f/5//n/AAD+/wQABAAGAAkABgAGAAMAAwAAAPz//P/6//v//P/8////AAADAAMABwAFAAkABwAIAAcABQAFAAUABQAGAAoACQAJAAkACQAKAAcACAAGAAcABwAIAAUABQADAAIAAQAAAP////////7/AAD+/wAA//8DAAIACQAJAAsAEAAOAA8ACAAFAAEAAAD///3//f/8//z/+//9//3//v8AAP//AgD//wEAAAACAAAAAAAAAAEAAgD//wAA/P/8//f/+P/2//X/9f/z//P/8v/x//D/8P/s/+//7//x//L/9P/1//n/9P/5//f/+v/7//r/+//6//r/+P/5//X/9//6//r//v///wAAAgACAAIABAADAAYABgAIAAgACQAIAAYABwAFAAgABgAKAAkADAAKAAsACgAJAAcABwAEAAIAAgAAAAAAAAAAAAIAAQACAAQABAADAAEAAgACAAMABAACAAMAAgACAAIAAQD//wEA/v8AAP3//f/+//7////9/wEAAQAGAAYABwAFAAQABQACAAQABAABAAUAAwAGAAUABgAIAAYACAAHAAYAAwABAAAAAAD///7///8AAAEAAAAAAAAAAAD9//7//P/7//v/+f/4//j/+P/5//j/9//4//X/9f/z/+//8P/s/+7/7//u/+//8P/v//H/8f/w//P/9f/z//f/9v/5//r/+/8AAAEAAwAGAAgACwAMAAoACQAGAAkABAAEAAEABQAEAAoACQANAAsADwAMAA0ACgALAAkADAAOAAsADgAMAA4ADgAQABAAEAAMAA0ACQAHAAQAAgAAAAMAAwAFAAUABQAEAAUAAgACAAEABAAEAAMABAADAAUAAwAEAAQABAAEAAQAAwACAAAA///9//z//P/7//z//f/+//3//v/8//v//P/8//z//f/7//3//P/9//v/+/////7//////wAAAAD///7/+v/5//n/+P/4//X/+P/4//f/+P/4//n/9//3//X/9f/z//T/9P/0//X/9v/3//j/+P/2//f/9v/y//b/9P/1//b/8//z//P/9P/3//f/+f/5//f/+P/2//n/+f/7//7/AAABAAMABAAFAAYACQAJAA4ADAAPAA0ADwAMAAwADwAOAA4ADgANAAsACQAIAAcABwAJAAoACwALAAwACgANAA0ADgAMAA0ACwAMAAsACQAJAAUABgADAAIAAgAAAAAA/f/+//z/+//7//7//P/+//3//v/+//3//v/9//z//P/7//v/+//7//v/+//8//3//P/7//v/+//8//z//f/9//v/+v/3//j/+P/4//r//v/9/wAAAQABAAAAAAACAAEAAgACAAEAAQAAAAAAAAD+/wEAAAACAP/////+//3//P/7//z//P/9///////+//7//v/9//v/+//6//r/+//7//z/+//+//7//f/9//v/+P/4//j/+//6//r/+//6//z//P/8/wAAAwAGAAYABwAFAAMAAQD+/wAA/v8AAAAABQAHAAsADgAQAA8AEgASABMAFAASABQADgARAA8ADgANAA0AEAARABEAEAAPAAwACwAIAAYAAwAJAAQABgADAAQAAwADAAAA///8//j/9v/1//b/9P/3//X/9v/2//n/+P/3//f/+P/2//P/8f/w//L/9P/0//f/9f/5//n/+v/7//v//P/9/////f8AAAIAAgAEAAQABAAGAAQABAACAAIAAQABAAAAAQAAAAMAAwACAAQABQAFAAYABwAEAAUAAAABAAAA/f/8//3/+//8//z////9//z//P/7//v/+P/5//X/9P/0//b/9f/3//n/+f/6//v//f/7//////8AAP//AAABAAIAAwAFAAUACAAGAAcABQAIAAgACAAKAAoACwAMAA4AEQASABQAEgASAA8ACwAIAAMAAQD///7/AAAAAP//AAAAAAAAAgAAAP///v////z//P/6//r/+f/6//n/+P/3//j/+f/4//n/9//2//b/9P/2//T/9//3//j/9//6//j/+v/7//v/+f/6//v/+//9//r//P/6//z/+f/6//j//P/7//7//f/8//7//P8AAAEABQADAAMABAADAAIAAQACAAEAAgACAAIAAAACAAIAAQAAAAAAAQAAAAAAAAD7//z//v/9////AAAAAAAAAAADAAUABQAGAAcABwAJAAgACQAJAAgABgAFAAQABAAFAAgABwAGAAcABgAFAAUABgAFAAYABgAFAAUABQAFAAUABgAEAAUABAAGAAQAAwABAAEAAAD/////AAD//////v/8//z/+v/7//v/+v/6//v/+v/9//7//f/+//z//v/+//3/AAD//wAAAAAAAAEAAQAAAAIAAgABAAAA///8//r/+v/5//f/+f/7//3///8AAAEAAgADAAMABAACAAQAAwACAAQABAAFAAMAAwABAAMAAAAAAP7//f/+//j/+f/3//b/+//6//z//P/8/////P/+//n//f/8//z/+P/4//r/AAAAAAQABQAFAAYABgAGAAYABAAGAAYABQAIAAcABQAIAAcABwAHAAQABgAFAAYABwAGAAcACAAIAAcABwADAAUAAwAAAAEA/v///wAAAAAAAAAAAAAAAP7//v/9//7//v/8//3/+//7//3//P/8//r/+v/5//r/+f/5//r//f/9//7//P/6//v/+v/9//z//P/6//z//P/+////AAAAAAEAAQAAAP////8AAAEAAwAFAAUABQAFAAQABAACAAAA/////wAAAAAAAAAAAgADAAYABAADAAIAAAD///7//P/8//v//////wAAAAD+//v/+f/1//L/7//u//D/8f/w//L/8f/3//r//P/9/wAAAAD9//3//f8AAAMABAAFAAUABQAGAAYABgAGAAcACQAIAAYABwAHAAgACQAKAAsADAAMAAsACgAMAAoACQAJAAkACgAMAA0ADgANAA4ADAAMAAsACgAMAAoACAAGAAQAAgAAAP3//P/5//r/9//3//b/9v/1//T/9P/y//D/8P/u/+3/7v/s/+7/7v/w//H/8f/z//T/8//1//T/9v/2//v//f/9/wAA/v////3//v/9//3////+/wEAAAABAAMABgAHAAoACgANAA0AEAARABYAFQAWABQAEwAQAA0ADQAIAAkABgAFAAQABAACAAEAAAAAAP///P/8//v//f///wAA//8AAP//AAD///7//v/8//7//v/////////+//3//v/7//f/9//2//v//P/8//3//P/9/wAAAAAAAAEABQAGAAkACgAMAA4ADgAPAA0ADgANAAwADAALAAoACwAJAAgABwAIAAkABwAFAAUABQACAAMAAAAAAAAAAAD+/wAA/P/8//v/+v/7//n/9//3//b/9//2//b/9v/3//b/9f/0//L/8P/x//H/8//z//T/9v/1//f/9f/1//j/9v/3//f/9v/3//n//P/8//7///8DAAMABAAGAAkACQAKAAsACwANAAwADAAMAAoACgAKAAoACgAKAAoACgAKAAkACQAGAAUABAAEAAYABAADAAMAAwACAAEAAQAAAAAAAAD+//////////7//P/8//3//P/6//f/8//x/+//7v/u/+7/7//v//H/8P/x//H/8f/z//X/9//6//3/AgAEAAUACAAKAAsADQAQABAAEgASABMAEwARABIAEgARAA4ACwAHAAMAAQAAAP///v/9//z//f/8//z/+//5//n/+f/7//3//f/8//7//P/8//n/9v/0//H/7//s/+3/6v/u/+3/8P/u/+//7v/x//D/8v/0//T/9v/4//n//P/+//7/AgADAAgACAAMAA4AEQASABIAEgAUABMAEwATABIAEQAQAA8ADwARABEAEQASABEAEQASABEAEAAQABEAEAAQAA8AEAAPAAwADAAKAAwABwAEAAEAAAD9//r/+v/6//n/+f/5//X/8v/z//L/8v/y//D/7//u//D/8v/1//j/+v/9//v//v/8//v//f/7//3//P/7//v//v/+/wAA///+////AAAAAAAAAQACAAMABQADAAUABQAIAAYACAAHAAcABgAGAAUABAAFAAMAAgAAAAAA///9//v/+//7//v//P/8//r/+f/5//b/9v/3//n/+////wAAAAADAAEAAwADAAEAAAD///3/+//5//r/+v/6//z//v/7//n/9v/w//D/7P/u//D/9f/3//3/AAADAAQABAAHAAYACgAKAAoADQAOAA8AEQAPABEAEAARAA8ADQANAA4ADgAMAA4ADQAMAA0ADQAMAAwACwALAAkACQAIAAgABwAIAAYABQAEAAUAAQACAP//AAD//wAA/v/8//3/+v/8//r//P/6//n/+P/4//b/9//4//n/+v/6//j/+v/5//n/+P/3//b/9f/1//b/9v/3//r/+v/7//v/+//5//r/+f/8//3//v///wAAAQACAAAAAAAAAAAA/v8AAP//AAAAAAAAAgADAAQAAwABAP//+//5//j/9f/1//T/9f/1//X/9v/3//b/9f/1//T/9P/2//f/+P/8//7//v////7//v/9//r/+f/4//f/+P/4//j/+/8AAAAAAgAEAAYABwAIAAcACAAIAAoACgAMAA4ADwAOAA0ADAALAAkACwAJAAsADQANAA0ADQALAAoABwAHAAUABgAGAAYABwAIAAoADQANAA8ACgAJAAUABgADAAIAAgADAAIAAQAEAAQABgAAAP7/9//3//T/9f/0//b/+P/4//v/+v/5//n/9v/0//P/9P/3//j/+v/7//v//v/9//z//P/9//v/+//7//3//f///wAAAAACAAEAAQABAAEAAAABAAEAAgACAAIABQAGAAkACAAHAAMAAwADAAMAAQADAAIAAQABAP//AAD9//v/9v/1//T/9//3//j/+v/9/wAAAAAAAP//AAD8//v/+v/7//7/AAAAAAMABAACAAIA///+//v/+f/7//v//v///wMAAgAFAAcABQAFAAMAAwAFAAUACAAJAAwADQAOAA0AEAAPAA4ADQANAAsADAAKAAoACQALAAoACgAKAAkABwAGAAYABQAFAAgACQAKAAkACgAJAAgABQAAAP//+//7//j/9//2//f/9//3//f/+P/6//f/9//1//X/9f/2//X/9//6//3//v/9//v/+P/3//P/8f/v/+//7//x//T/+f/7//r/+//4//b/+P/7//z/AwADAAUABwAHAAsACwAMAAsACwALAAwACgALAA0ADQAPAAwACwAJAAYABAAAAAAA/////wAA/f8AAP////////7///////7///////3//v/8//z//P/7//j/+f/2//T/8v/w//P/9f/1//b/9f/1//X/8//x//D/8v/x//L/9v/6////AwAEAAMABgAHAAgABwAHAAgABgAGAAcABQAGAAcABQAGAAcACQAGAAkABQAFAAQABAADAAIABAAGAAcABwAGAAQABAAFAAAAAAD8//3/+f/4//f/+P/4//n/+f/5//n/+P/3//T/9P/y//T/9P/3//f/+//8//v/+//8//v//f/+/wAA/////////P/+//z/+//7//7/AAAAAAIABQAHAAoACQAJAAoADAALAAwACQAJAAgACgAKAAgADAAKAA0ACgALAAkACQAJAAgACAAIAAoACAAJAAgACAAJAAgABgAFAAYABQAEAAQAAQABAAAAAgABAAIAAgACAAAA///8//v/+P/3//f/9v/5//r//P/9//3/+f/4//f/9f/1//X/+P/8////AAD/////AAAAAAAAAAD+/wAA//8AAP//AQABAAIAAgADAAQAAwACAAEAAAACAAAAAQACAAEAAAAAAAAAAAAAAAAAAAACAAEAAwAEAAQAAwADAAAA///9//z//P/7//z//P/+//3//v/+/////f/8//v/+P/4//n/+f/7//z//////wAA/P/7//j/8v/x//D/8f/1//f/+v///wEABgAFAAcABAAGAAQAAwADAAUACQALAA0ADQAOAA8ADgAMAAsACwAJAAkACQAJAAoACgAKAAoACQAIAAYAAgADAAIAAwAFAAUABQAGAAUABAADAAIAAQD//wAAAAADAAMABAADAAQAAAD9//f/9f/x/+//7v/t/+7/8v/y//j/+P/4//j/9v/y//D/7f/s//H/8//4//z/AAAAAAEAAAAAAP7/AAACAAAABAADAAUABAAGAAYABQAHAAcABgAGAAYABQAFAAcABwAHAAYABwAFAAYABwAGAAkACgALAAoACQAKAAQAAwD//wAA/v/9//v/+f/7//v//f/8//z/+//8//n/+v/6//z//f////7///////7/+//6//f/9f/2//b/9//0//b/9v/5//v///8AAAEABQAFAAUABgAGAAgABwAIAAoACwAMAA4ADQAOAA4ADwAPAAwACgAGAAUAAAAAAP//AAAAAP///v/7//z/+f/6//f/9//4//n/+f/7//3//f/+//z//P/6//f/9//y//L/7//w/+//7v/t/+3/8P/v//D/8v/0//b/9//5//v/+//9//3/AAABAAUABgAKAAwADgAPAA8AEQARABAADwAPABAAEAAQAA8ADwAPAA4ADQAPAAsACwAIAAcABAAEAAMAAwACAAMABQAFAAYABwAGAAcABwAHAAQABgAFAAUAAgAAAP/////+//3/+v/6//r/9//2//j/9v/3//f/9//1//T/9v/1//X/9P/1//T/9f/2//j/+P/+//7/AgACAAMAAQACAAIAAgAEAAQABQAEAAQAAwADAAMABAACAAIAAwADAAQABQAHAAYABgAGAAUAAwABAAAA///+/wAA//8AAAAAAAAAAP///v/9//z//P/9//7///////7//f/+//z/+v/2//X/9P/1//f/9v/3//n/+v/8//z//P/7//r/+//9//z//f8AAAIABQAIAAUABwAIAAcABgAFAAYACAAIAAkABwAJAAgACAAGAAUABQAFAAQABgAHAAcABwAHAAYABwAHAAUABQAEAAUABQAGAAYABQAFAAQAAgADAAEAAgAAAAAAAAD9//7//v////7//v/9//3//////wAAAAAAAAAA///+//3//P/5//v/+//7//z/+P/3//P/8v/y//P/8//1//L/9f/6//v/AAAAAAIAAwADAAMAAgADAAMAAwACAAMABgAHAAgABwAGAAYABAAEAAMAAAAAAAAAAAABAAEAAwABAAEAAAD///7//v8AAAAAAAABAAEABAADAAIAAwAEAAQAAwADAAIAAQAAAAAAAAACAAIAAgABAAAAAAD//////v/+//z//P/9//7//v/9//z//P/6//v/+//+////AAAAAAAAAwACAAQAAwAEAAIAAwAEAAIABQAEAAIAAgADAAEAAwACAAIAAgABAAAAAAAAAAAAAQAAAAAAAAACAAAAAQD//wAA//8AAP7//v/9//r/+P/4//n/+P/3//X/9f/y//P/8v/y//T/9P/y//X/9f/3//X/9v/1//n//P///wQAAgAGAAQABQAFAAQAAwABAAAAAAD//wAAAQACAAIABQAHAAkADgALAAwADAANAAsACgALAAoACwALAAsACgALAAwACgAJAAoABwAGAAQAAwACAAIAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQAAAAEAAwACAAMAAQD///7//v/7//n/+f/3//f/9v/3//j/+v/3//n/9//6//v//P////////8AAAAA/v/+//v/+f/2//b/9v/4//v//f/9////AQACAAAA///+/////P/9//v/+v/7////AAABAAAAAgAEAAQABAADAAUABgAEAAYABQACAAAA/v/7//r/9P/1//L/8//z//X/+P/3//n/+f/7//3///8BAAIABgAGAAkACwANAAoACQAHAAMAAwABAAAAAAACAAIABQAHAAoACwAMAAwADQANAAwADwAOABIAFAAUABYAFwAZABgAGAAVABQAEQAPAA4ADgAMAAwACgAIAAUAAgD///7/+//7//z/+//5//z/+//8//r/+v/4//f/9//3//b/9//3//f/9//2//T/8v/w/+z/6v/p/+f/6f/s/+z/8P/y//b/+f/7//v/+//7//v/+v/6//z//P/9/////////wAAAAAAAAAAAAACAAIABAADAAMAAwACAAMAAgD//wAA///+//3//P/9/wAA//8BAAEAAgAEAAQAAwABAAEAAAD///3//P/7//n/+f/4//n//P/8//3//f8AAAAAAwADAAMAAwACAAEAAAD+//3//P/6//n/+f/6//v//v///wAABgAHAAwADQANAA0AEAAPAA4ADAAMAAwADQAMAA0ADAAMAAwADAAMAAsACgAJAAsACQAKAAgABgAGAAQAAwADAAEAAwAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAP7//v/9//7//f/8//r//P/8//3/+//5//v/+//9//z//f/+//7//f/+//7//v/8//r/9//3//b/9v/3//v//f/+//7///8AAAIAAAADAAEABAACAAIAAAAAAP///f/6//n/+f/7//v////+/wAAAgAEAAcACAALAAsADAAMAAoABwAFAAEAAAD//////f/7//v/+f/4//v/9//3//b/+f/8//3//P/9////AAAAAP////////7//v/9//7//v////7//v/9/////v/+//7//v/+//7//f/9//v/+v/8//7/AAAAAAMAAgAGAAUABgAIAAcACgAJAAoACwAMAAwACQAHAAUABAABAAEA///+//7/+//8//z//v/+/////v//////AAAAAP///v/+//z//f/8//3//f/7//v/+//8//r/+v/6//j/+f/6//n/+v/5//r/+P/4//X/9v/3//b/9v/3//r//P/+////AAAAAAIABAAEAAYACAAIAAgACQAIAAoACgAIAAoACgAKAAoACQAJAAkACgAJAAsACwAMAAwADAAOAAwADAAIAAYACAAIAAoACQAKAAgABQADAAAA///+//z/+v/3//f/9v/3//j/+v/5//v//P/9//z/+//8//z////9//7//v/+//v/+f/4//f/9//0//T/9P/4//v//f/9//3/AAAAAAAA/v/+//7//v///////v///wAAAAAAAAAAAgAAAAEAAQABAAAAAAAAAAAA/f/7//r/+f/2//b/9f/2//j/+P/7//3/AAABAAUABgAGAAUABQAEAAEAAAD+//z/+v/5//r//f/+//3//v/9/wIAAwAHAAgACgALAAoACgAIAAsACQAKAAkACgAJAAgABwAGAAgABwAIAAgACQAHAAgABwAGAAQABAABAAEAAQABAAAA////////AAD///7////+/wAA/////wAA//8AAAAAAAD//////f/+//3//P/7//n/+f/4//b/9v/0//b/9v/4//j/+f/7//3//v8AAAAAAQAFAAYABwAGAAYABgAFAAUAAgACAAEAAgADAAMAAQACAAAAAQABAAAAAAAAAP//AAAAAP//AAD///////////////8AAP///v/+/wAA//8AAP7//f/7//v/+v/4//j/9v/1//P/8//1//f/+P/5//v///8AAAAAAQACAAIAAgAAAAAAAAAAAP///////wAAAAAAAAIAAQADAAMAAwADAAIAAgACAAEAAQABAAEAAAAAAAAAAAAAAAEAAgADAAEAAwABAAIAAgABAAAAAAABAAAAAgABAAIAAwABAAEAAQACAAMAAwAFAAUABQAFAAcABwAGAAUABAACAAIA//8AAP//AAAAAAAAAgABAAEAAAAAAAAAAgABAAEAAgABAAEAAAAAAP//AAD+//3//P/8//r/+f/3//b/9P/1//X/9v/2//X/9P/2//j/+v/6//v//P/+//7/AAABAAEAAgADAAQABgAIAAgACgAJAAgACQAFAAcABgAEAAMAAwADAAYABQAFAAUABgAIAAcABwAJAAgACAAJAAgACAAJAAkACgAIAAYABAAAAAAAAAD9//7/+//7//3//f/+//3//f/9//3//P/7//v//P/8//3//P/8//3//v/+//3//f/8//7//v/+//7////////////9//7//P/+//3/AAAAAAAAAAD/////AAAAAAAAAgABAAMAAQACAAEAAwACAAEAAQAAAAEAAAD+//3//f/7//r/+f/6//n/+//6//r/+f/6//7//P/8//z/+//7//n/+//8////AAAAAP//AAD+/wAA///9//3/////////AAAAAAIAAgADAAEAAgADAAIABAABAAYABwAKAAwADQAPABAAEAAOAA8ACgANAAkACgAIAAMAAgACAAAAAgAAAAAAAQAAAP7//v////7///8AAAAAAAABAAAA//////7//P/9//v/+v/5//r/+f/6//r/+//7//7//f/9//3/AAD9//7//f//////AAD/////AAAAAAMAAAACAAIAAgADAAIAAQABAAMAAgACAAEAAAABAAMAAQACAAIAAwABAAEA/v/+//3////8//3//P/+//z//v/8//z///8AAAAAAAD+//7/+//7//r/+v/5//r/+P/4//b/9v/y//X/8v/z//P/9//5//z//f8AAAAAAwADAAYABQAGAAYABgAFAAQABgAEAAIAAwABAAQAAgAAAP//AQACAAQABAADAAIABQAFAAYABQAFAAcACAAHAAUABwAFAAgACAAIAAcABwAHAAcABgADAAIAAwADAAUAAwAAAAEAAAD+//3/+//4//n/+f/6//z//P/+/wEABAAGAAQABQAFAAQABQADAAEAAAACAAEAAgACAAEAAgABAAAAAAD9//z//P/+//7/////////AAAAAP///////wAAAAAAAAAA//////////8AAP///v/+//3/+//6//f/9v/2//f/+P/4//j/+//+/wAAAAAAAAAAAQADAAIAAQACAAEABAACAAAAAAAAAAEAAAAAAP//AAAAAAAA//////////8AAAAAAQABAAQAAwAEAAIABQAEAAQAAwACAAIAAQABAAAA///+//7//v/8//r/+f/5//n/9//5//j/+v/7//7//f8AAAIAAgADAAQAAgAEAAYAAwADAAIAAgADAAIAAgADAAMAAQABAAAAAAAAAAAAAQACAAIAAgADAAQAAwACAAMAAgADAAIAAQABAAEAAAAAAP////8AAP7//f/8//z//P/8//v//f/9/////f/8//3//f/+//3//P/8//z/AAAAAAEAAgABAAIAAwD//////f/9//v//P/5//z//P/+//3//f/8//3/+//8//r//f///wIAAwAIAAsADAANAA0ADQAOAAsACQAGAAYABgADAAIAAAAAAP7/AAD7//r/+f/6//v//f/+////AQAEAAUABgAEAAQABAAFAAMAAwADAAIAAQACAAAAAAAAAP/////+//z//f/+//7////+/wAAAAAAAAAAAAAAAAAAAAAAAAAAAgAFAAYABwAIAAcAAwACAAAA/f/7//n/+f/5//r/+//8//3//f/9//z//P/8//v/+//9//7///8AAAAAAgAAAAAA//////3//P/8//r/+v/6//v//P/9//z//f/7//v/+f/7//n//P/+/wAAAgACAAQABgAHAAcABgAFAAQABAADAAEAAQACAAIAAwACAAEAAQAAAAEA//////7/AAABAAQAAwADAAQABAACAAIAAAABAAAAAQAAAAAAAQACAAIAAAAAAAAA/v/7//v//P/7////AAACAAIAAwADAAIAAQABAAAAAwAEAAQABwAJAAsADAAKAAkACAAHAAMAAAD+//7//v/+//v/+v/8//3//f/6//r/+//7//r/+//9//3/AAAAAAAAAAAAAAAA///+//z//P/8//3//P/8//z/+f/5//r/+//9/////v8AAAAAAAAAAAAAAAAAAAAAAQABAAEAAgADAAQABAAEAAQAAgACAAAAAAAAAAAAAAABAAEAAwADAAUABAAFAAQAAwACAAEAAAAAAAIAAQADAAIAAgADAAIAAwABAAEAAAD/////AAD//wAAAAAAAAAAAAD///3//f/9//7/////////AAAAAAAAAAAAAAEAAwAEAAMABQAEAAMAAwABAAEAAAAAAAAAAAD///7/AAAAAAAAAAD+//z/+v/5//j/9f/z//T/9v/5//7//v8AAAAAAAD9//v/+v/4//j/+//9//3///8BAAQABAADAAIAAgACAAAA/v/+//3/AAAAAAIABQAHAAcACAAIAAcABgAGAAYABAAEAAQABQAFAAQABgAEAAQABAACAAAAAAAAAP//AAD/////AAAAAP//AAAAAAIAAgADAAIABAACAAEAAAAAAP/////+///////+/////v/8//r/+f/2//X/9f/1//b/9v/4//n//f///wAAAwADAAMAAgACAAMAAgADAAQABQAFAAUABQAGAAMAAgAAAAAA//////////8AAAAAAAAEAAQABgAHAAcACAAIAAcACAAGAAQAAQD//wAA///9//z/+v/4//n/9v/4//b/+f/6//z//f/9/wAAAAAAAAAAAAAAAAEAAgAAAAAAAAAAAP//AAD//////////wAA//8AAP///v/9//v/+v/4//r/+//+/wAAAgAEAAQABQAEAAUABAABAAEAAAABAAMABQAEAAYABgAHAAUABAADAAEAAQACAAIAAQABAAIAAgADAAMAAgADAAUAAgAAAAAA/v/+//7////9//3//P/7//v/+//6//r/+f/4//j/+P/5//r/+v/5//z//P/9/wAA/v8AAAAAAgABAAUABAAIAAcABwAGAAYABwAFAAQABgAHAAkACgAKAAwACwAMAAgABQADAAMAAQABAAIAAQACAAIAAgAAAP///f/+//z//P/8//3//v////7////+//7//f/7//j/9f/0//X/9v/2//j/+P/6//r/+//7//v//f/9////AAACAAMABAAEAAUABAAFAAQAAgACAAEAAAAAAAAAAQADAAYABgAHAAcACAAHAAcABwAGAAYABQAEAAMAAgABAAEAAAAAAP7//f/9//3//f/8//v/+v/7//z/+v/7//r//P/8//3/////////AAAAAAAAAAD///z//f/9//3///8AAAEAAQACAAEAAAD+//7//f/+//3///8AAP//AAAAAAIAAgABAAEAAwACAAMAAgABAAAA//8AAP//AAAAAAAAAAAAAP7////9//7//f///wAA///+////AAAAAAAAAAAAAAEAAQABAAAAAAD//////v///wAAAAAAAAAA/v/+//7//f/9//v//f/+/wAAAAADAAQABgAGAAUAAwAEAAIAAQAAAAEAAQAEAAMAAgABAAIAAgABAAIAAQABAAEAAQABAAIAAgADAAMAAgABAP/////9//v/+f/5//r/+//9//7/AAACAAUABAAEAAMABAADAAQAAwACAAIAAgACAAIAAgADAAMABQAGAAcABwAGAAUABAACAAIAAAAAAAAA/v/+//7//f/+//7////9//3/+//6//z//P/6//v/+f/7//r/+f/6//j/+P/4//j/9f/1//f/+v/+//3//v8AAAEAAQABAAAAAAAAAAEAAgADAAMAAgACAAMAAgACAAMAAwAEAAIAAgACAAMAAwADAAQABgAHAAkABwAGAAYABQAFAAYABQAEAAMAAgABAAAA///9//v/+//8//z//f/8//3//P/8//z//P/9//z/+//7//r/+v/4//j/+P/3//T/9f/1//f/+f/8//7/AgAFAAUABQAFAAQABQAEAAUABwAGAAcACAAHAAkACAAIAAgABwAIAAgABgAGAAYABwAHAAcABwAGAAUABQAGAAYABgAGAAYABQADAP///v/+//7//P/8//v/+//6//r//P/7//z/+//9//v/+//7//v//P/8//z//P/8//v/+v/5//n/+P/6//n/+f/4//r//f/+////AAABAAAAAQAAAAAAAAAAAAEAAgAEAAQABQAFAAYABQAEAAUABAAEAAMAAwADAAMAAwACAAMAAgACAAMAAwACAAMAAgADAAIAAgADAAMAAgD///3//P/7//n/+P/3//b/8//z//H/8f/v//D/8//0//b/+f/8////AAADAAEAAgADAAIAAgADAAMAAwADAAMABAADAAQABAADAAMAAwADAAMABQAEAAUACAAKAAwADQANAAoACQAGAAYABQAFAAUABgAFAAQABAABAAAA/v/9//3/+//7//v//P/8//z//P/8//v//P/7//r/+f/6//n/+f/4//n/+P/6//f/9//3//r/+f/7//z//P/+//7//f/9//7//v8AAAEAAAAAAAAAAwAFAAgABwAIAAoACgAJAAgABwAGAAYABgAHAAcABwAIAAcABQADAAEAAAAAAAAAAQACAAMAAgADAAMAAwADAAQABAAEAAQAAwADAAIAAwACAAAA/f/7//v//P/7//n/+v/4//n/+f/6//r/+v/7//v/+v/7//v/+//9//7//v///wAA/v/+/////////wAAAAAAAAIAAwADAAQABAAEAAMAAwADAAIABAAEAAUABAAEAAUABgAFAAQAAQABAAIAAQACAAIAAgACAAIAAQD///7//P/7//f/9v/y//H/8P/y//P/9f/3//n//f///wAA///7//z//f8AAAAAAAD//////v////7//v/+/wEAAwADAAQABQAFAAQABAACAAAAAQAAAAEAAQACAAUABQAJAAgACAAIAAgABwAHAAcABwAFAAQABQAEAAMABAAFAAYABQAGAAUABQAFAAUABgAHAAcABwAGAAUABAADAAMAAgACAAIABAAFAAQAAgAAAAAA/v/+//z/+v/4//j/+P/4//n/+P/5//v//P/7//v/+v/6//r/+f/4//j/+f/5//j/+P/4//f/+P/4//f/+v/6//v//P///wEAAQABAAAAAQACAAEAAQABAAAAAgACAAIAAgABAAEAAAAAAAAAAAAAAAAAAAD///7/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA/v/+//////////7////+//////8AAAAAAAAAAP/////9//7///8AAAMAAQABAAAA///+//z/+f/3//b/+P/8//3//f/8//3//v////7/AAAEAAYABwAHAAcABgAFAAQAAgABAAEAAAD//wAAAAAEAAYABgAGAAcABgAGAAMABAAFAAkACgAMAA0AEAARABIAEAAOAA4ADQALAAYAAQD///7/+//6//j/+P/3//v/+//8//z//f/8//3//f/8//3//f/8//z/+v/7//v/+v/5//n/+f/4//j/9//4//f/9//0//T/8//0//X/9v/3//n//v8AAAMABQAIAAkACgAJAAYABAAEAAIAAwADAAYABQAGAAgABgAGAAYABwAHAAcABwAFAAMAAwACAAIAAAABAAAAAQADAAQAAwABAAEAAgABAP//AAD//wAA//////3//P/9//3//v/9/////v////7//f/7//v/+//7//z/+//9//3//f/9//7//f//////AAAAAAAAAAAAAAEAAgAEAAQABQADAAQABAADAAIAAAAAAAAAAAAAAAAA//8AAAEAAAAAAAEAAgADAAQAAwAEAAMAAQAAAP///v/8//r/9//1//X/+f/+/wAAAAACAAEAAgABAAAAAAAAAAAAAAD/////AQAAAAAA/v/9//7/+//5//f/9v/1//T/8//z//L/9f/2//j/+v/7//7///8AAAEAAgADAAUABwAIAAcACQAJAAgACAAKAAkACgAKAAoADAALAAwACgAJAAsADAAOAA0ADQANAA4ADQAJAAcABwAHAAYAAQD///3//P/7//n/+P/4//j/9f/y/+//7//w//H/8//2//f/+f/6//j/9//5//v//P/+////AQACAAQAAgACAAEAAAABAAAA/v8AAAAAAgAFAAQABQAGAAYABgAEAAIAAgACAAEAAQABAAIAAwADAAIAAQABAAIAAAAAAAAAAQABAAEAAAAAAAAA///+//7//f/+/wAAAAAAAAEAAQACAAAAAAD//////v/+//7//f/9//7////+//7//f/8//z/+//6//r/+P/5//r/+f/8//3///8AAP7///8AAAIAAgACAAMAAwAFAAcABgAIAAsACgAJAAkACAAJAAoACgAJAAcABAADAAEAAAD/////AAAAAP//AAAAAAAAAQABAAIAAQABAAAAAAAAAAAAAAABAAIAAgACAAIAAQABAP7//v/8//v/+v/6//r/+f/4//b/9f/2//f/+f/6//z/AAAAAAAA/////wAAAAD9//3//v/+//////////////8AAAAA/v/9//3///8AAAAAAAAEAAYACQAIAAwADQANAAsACgAJAAcACAAGAAYABAAEAAMAAQAAAAAAAAAAAP3/+//5//n/+f/6//z//f8AAAAAAAAAAAAA//////7//v/9//7//v/8//n/9v/z//H/8//0//b/+f/9/wAAAQACAAQABQAFAAMAAgADAAEAAQAAAAMABgAIAAkACwAKAAsACgAHAAYABQADAAMAAgABAAMAAwADAAIAAQADAAYACAAIAAkACgALAAoABwAEAAUAAwACAAAA///+//7//v/9//3/+//6//r/+f/3//f/9v/3//b/9f/1//f/+v/7//z//P/8//3//P/6//v//P/8//v/+f/6//z//f////3///8AAAIAAAAAAAAAAQABAAAAAAD//wAAAQAAAP////8BAAAAAwAEAAUABgAHAAYABwAGAAYABwAGAAUABQADAAMAAgABAAEAAQACAAAA/v/+//v/+v/5//n/+v/8//7/AAD/////AAAAAAAAAAAAAAEAAAAAAP///////wAA//8AAP//AAABAAAAAAD+//7///8AAAAAAQABAAQAAgABAAEAAAABAAIABAAFAAUABAAEAAMAAgACAAEAAQABAAAAAAD+//7//f///////////wAAAAAAAAAA/////////v/+//////8AAP///f/8//z//P/+//3//v/8//7//f/+//3//f///wAA/v/+////AAAAAAEAAAACAAQABQAFAAQABAADAAIAAAAAAAAAAAABAAAAAAD+////AAAAAP///v///wAAAAAAAP///f////////8AAAEAAgABAAAA//8AAAEAAgADAAEAAQAAAAAA/v/+//7/AAAAAAAAAgACAAQAAgADAAIAAwAEAAQABAAEAAQABAAFAAQAAwADAAMAAgABAAEAAQABAAEAAgACAAIAAAAAAP//AAD//wAAAAAAAAAAAQABAAEAAAAAAAAAAAAAAAAAAAAAAAAA///9//7//f////7//v/9//z/+//7//r/+//8//3//f/9//7//////wAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAP///v/8//z//P/6//v//P/9//7///8AAAEAAwACAAEAAAAAAAEAAAAAAAIAAQACAAIAAAAAAP//AAD///7//v/+/wAA///+/wAAAAACAAEAAAABAAEAAQACAAEAAQADAAQABAAEAAMAAwADAAEAAgABAAEAAQABAAIAAQAAAAAAAAD//////v8AAAAAAAAAAAAAAAAAAAEAAgACAAIAAQABAP///v/9//7//v/+//////8AAAAAAAAAAAAAAAAAAAAAAAACAAIAAQAAAP////8AAAAA/////wAAAAD//wAAAQACAAAA/////////v/+//v/+//7//v/+v/6//z///////3/+//7//7///8AAAAAAAAAAAEAAQABAAIAAgABAAEAAAAAAAAAAAAAAAAA/v/9//3//////////f/9//7/AAAAAAAAAAD//wAA///+////AAAAAAEAAgAEAAYABAADAAQAAgABAAAAAAAAAAEAAQABAAEAAgAFAAUABQAHAAcABwAGAAYABQAGAAYABwAGAAcABgAHAAUABAAFAAQAAwABAAAAAAAAAP/////+//7//f/9//3//v///wAAAAAAAAEAAQAAAAAAAAAAAP///v/+////////////////////AAD///7//v/+//7//v/9//7//v/+//////8AAP//////////////////////////AAAAAP////////3//v/+/////f//////AAAAAP//AAD//wAA//8AAAAAAAAAAAEAAAAAAAAAAAD/////////////////////AAAAAP//AAD//////v/+//3//v/9//3//f///wAAAAAAAAAAAgABAAEAAQAAAAAAAQABAAEAAQABAAAAAAAAAP//AAAAAAAAAAABAAEAAAABAAEAAQABAAEAAAAAAAAAAAABAAEAAgAAAAAAAQABAAAAAAD+//7//v/9//z//f/+/wAA///9//3//f/+//3//v///wAAAQAAAAAAAQADAAMAAgACAAIAAQABAAAAAAAAAAAAAAD//wAAAAD//////v/+//7/AAAAAAAAAQAAAAEAAwAEAAQABAAFAAQABgAGAAYABgAGAAYABgAEAAIAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAP//AAD///7//v/+//////8AAP///////////////wAAAAAAAP//AAABAAEAAAABAAEAAQABAAEAAQABAAEAAgABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP//AAD//////v/9//3//f/9//z//P/8//r/+v/5//r/+//8//v/+//8//z//P/9//7///8AAAEAAQABAAAAAQABAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAQACAAIAAgABAAEAAwAEAAMABAADAAYABgAGAAYABgAGAAUABAAFAAQABQAFAAUABAADAAIAAQABAAAAAAAAAAAAAAAAAAAAAAD//////////////v/+//7//f/9//z/+//8//v/+v/6//n/+v/5//n/+f/6//v/+//8//7///8AAAAAAAACAAMAAwAEAAQABQAGAAUABAAEAAQABAADAAIAAgADAAMAAgACAAIAAgACAAIAAQABAAIAAgACAAMAAwADAAMAAgAAAAEAAAAAAP7//v/9//z/+//5//n/9//3//b/9v/2//b/9//2//b/9//2//f/9v/4//n/+//7//v//f///wAA//8AAAAAAAABAAEAAQACAAIAAgADAAUABwAIAAkACQAKAAkACwAKAAsACgAKAAwACwANAA0ADgAOAA4ADgANAAoACQAKAAkACAAHAAQABgAFAAUAAgACAAEAAAAAAAAA//8AAP///f/8//v/+//6//n/+P/4//j/+f/2//b/9P/0//T/9P/0//T/9v/2//f/9v/2//b/9//4//n/+v/6//v//P/8//z//f/+/wAAAQACAAMAAwACAAIAAAABAAIAAgAEAAQABgAGAAcABwAIAAgACQAIAAkACQALAAsACwALAAwADAAMAAsACgAJAAcABgAEAAMAAQABAAAAAAD//////v/9//3/+v/5//n/+P/5//n/+f/5//j/9//4//f/9v/3//j/9//3//f/+P/4//n/+P/6//v/+//7//v/+//7//3///8AAAIABQAGAAcABgAHAAgACQAKAAoADAAMAAwADgAOAA4ADAANAAsADQAMAAsACAAHAAYABgAEAAQAAwAFAAQABQADAAEAAAD///7//f/8//z//P/6//n/9v/0//T/8//0//P/9P/z//P/8v/y//H/8f/x//H/8f/y//P/8//1//X/9//4//v//f///////////wAAAAABAAMABAAGAAkACQAJAAkACgAJAAkACQAKAAoACgAKAAkACgALAAsACgALAAsACQAJAAgABwAHAAYABQAGAAYABQADAAEAAAD///z//P/7//z/+//8//v/+v/7//r/+f/5//n/+f/5//r/+v/6//r/+v/6//v/+//7//z//P/8//3//f/9//7///8AAAAAAAAAAAAA//////7//////wAAAgAEAAUABgAGAAYABgAFAAYABQAFAAcACAAHAAcABQAEAAMAAgACAAAAAQAAAAAA///9//z//f//////AAAAAP/////+//7//f/8//3//f/+/////v/+//3//v/+/////v/+//7//////wAA/v/+//7//v////7//f/+/wAAAQACAAIAAgACAAMAAgACAAEAAQADAAQABAAEAAQABAAFAAQAAwAEAAMAAwADAAMAAgACAAMAAwADAAMABAADAAMAAwACAAIAAgABAAEAAQABAAAAAAD////////+//7//f/9//3//v/+//7////////////+//7//v///wAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAEAAAAAAP/////+/////v////////8AAAAAAAAAAP//AAAAAAAA/////////v////7/AAABAAEAAQABAAIAAAABAPz/AwD+/wQAAAADAAIAAwADAAEABAAAAAUAAAAGAAAABAAAAAQAAAAAAAAAAAD///3//f/8//3/+f/9//v//f/8//3/+v/7//r/+v/5//n/+v/8//z//////wAA//8AAP//AAD+//////8BAAAAAAAAAAEAAAADAAIABAADAAUABAAGAAcABwAHAAgACQAKAAoACwALAAkACAAIAAgABwAJAAkACgAIAAcABAADAAIAAQAAAAAA//8AAP/////+//3//P/+//v/+//3//j/9f/2//X/9P/1//X/9f/2//T/8v/x//D/8f/y//T/9f/2//n/+v/7//v//P/8//7/AAABAAMAAwAGAAYACAAHAAgACAAJAAoACgAKAAcABgAFAAcACAAJAAkACgAKAAsACgAIAAYABgAGAAUABgAFAAUABQADAAIAAAAAAP7//f/9//z/+//7//r/+v/4//j/9//2//b/9v/3//f/9//3//j/+P/5//r/+//9//7//v/+//////8AAAAAAwAFAAcACQAKAAsACgAJAAgACQAKAAsADQANAA4ADgANAA0ADAAKAAsACgALAAkACQAHAAcABQADAAIAAAABAP///f/5//j/9f/1//P/9P/z//H/8f/x/+//7f/r/+r/6v/p/+r/6v/s/+z/7v/u/+//8f/y//P/9f/3//f/+P/6//7//v8AAAIABQAHAAgACwALAA0ADAAOAA8AEQARABIAEwAUABQAEgASABIAEgARABEAEQARABAADwANAAsACgAIAAYABQADAAEAAAD///3//v/+//7//P/7//r/+f/1//T/8v/x//H/8v/w//D/8P/w//D/8v/y//L/8//0//X/9//4//r/+//8//7///8AAAIAAwAFAAcACAALAAwADQAPABEAEQASABIAEgATABIAEgASABMAEwATABEADwAOAA4ADgALAAkACAAHAAUABAACAAEAAAAAAP///f/7//r/+P/4//b/9v/1//X/9f/0//P/8v/x/+//7//u/+//8f/x//H/8v/0//T/8//0//T/9v/4//n/+f/5//z//v///wAAAQAEAAMABQAEAAQABAAGAAUABgAGAAgACQAJAAoACQAKAAkACAAIAAgABwAIAAcABwAGAAQABAADAAIAAgABAAAAAAAAAP7//f/8//v/+v/6//n/9//2//X/9f/1//X/9f/2//j/+P/5//n/+P/3//f/+P/5//v//P/9//7//////wEAAAAAAAEAAQADAAIABAACAAQAAwAFAAUABwAGAAcACQAJAAoACQAIAAcACAAHAAcABgAHAAUABAAEAAMAAgAAAAAAAAD+//3//f/7//r/+f/3//f/9//1//X/9P/1//X/9P/z//T/8//0//T/9v/1//b/9f/0//X/9//4//n/+//7//3///8AAAIAAgADAAQABgAGAAgABwAJAAoACQALAAwADAAMAAwADAANAAwADAALAAsACgAKAAoACQAIAAgABwAFAAUABAAEAAQABAAEAAIAAgACAAIAAQABAAAAAAAAAP///v/9//3//P/8//z/+//8//z/+//7//v//P/7//7//f///wAAAAABAAAAAQACAAIAAwADAAQABAAGAAYABgAGAAUABgAGAAYABQAHAAcABwAGAAUABQAEAAQAAwADAAMAAQAAAAEAAAAAAAEAAAABAAAAAAAAAAAA//////7//v/+//3//f/8//3//P/+//3//P/8//z//P/8//z//f/9////AAAAAAAAAAAAAAAAAAAAAAAAAAD///////////7//f/8//z//P/7//v//P/+//3//v8AAAAAAAAAAAEAAAABAAEAAQABAAEAAgACAAIAAgABAAEAAQABAAEAAQAAAAEAAAABAAEAAQACAAIABAAEAAQABAAEAAQABQAFAAUABAAEAAMAAwABAAEA/////////v/+//7//v/+//z//P/7//v/+v/5//n/+v/6//v/+v/5//v/+//6//v/+//7//r/+//7//z//P/+//7////+//7//v/+//7//f/+//7///8AAAAAAQACAAEAAQABAAEAAQACAAIAAQABAAIAAAAAAAAAAAAAAP///v/9//7//P/9//z//P/9//z///8AAAAAAAAAAAAAAAD//wAAAAAAAAAAAAD//wAAAAAAAP//AAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAEAAgABAAIAAwADAAQAAwACAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA///+//7//f/+//7//v/+//7/////////AAAAAAAAAAAAAAAAAAD//wAA//8AAP/////////////+//7/AAAAAAAAAAAAAAAAAQABAAAAAAABAAEAAQACAAIAAgACAAIAAgACAAEAAgACAAAAAAAAAP///v/9//z//f/9//7///8AAAEAAgABAAEAAQABAAEAAQABAAIAAQABAAEAAgADAAMAAgACAAMAAgACAAIAAQABAAAAAAABAAMABQAGAAYABwAGAAcABgAGAAYABQAFAAUABAAFAAQABQAFAAQAAwADAAMAAwACAAEAAQAAAAAA///+//7/AAAAAAAA////////AAD//wAAAAD///7//v/9//3//f/9//3//f/9//3//f/9//3//P/8//v//P/9//7///8AAAAAAAAAAAAAAgADAAMABAAEAAQABQAFAAYABgAGAAYABgAGAAYABQAFAAQABAADAAQABAAFAAUAAwAEAAMAAgACAAEAAAAAAAAAAAAAAP///v/+//3//P/8//v/+v/5//j/9v/1//X/9v/2//f/9//4//X/9v/1//b/9//3//j/+f/6//v//P/8//7//v///wEAAgAEAAQABQAFAAYABgAFAAYACAAJAAkACgALAAsACwAKAAsADAAMAAsACwAKAAkACAAIAAcABwAGAAQAAgABAAAA/v/7//r/+P/2//b/9f/1//T/9P/z//L/8v/y//L/8v/z//L/8v/x//L/8v/0//X/9v/2//b/+P/3//n/+v/7//z//f///wAAAQACAAQABQAHAAcACQAJAAoACgAMAAwADgAOAA4ADgAOAA4ADQALAAsACgAIAAcABQABAAEAAAAAAAAA///9//z/+//7//r/+f/5//j/9//3//X/9P/z//P/8v/y//P/8//0//P/9P/0//T/9P/1//X/+P/4//r/+v/8//z//v///wAAAgAGAAYABgAHAAkACgALAAwADAAMAA0ADQANAA4ADgAOAA0ADgAOAA4ADgAOAA0ADAALAAkACgAJAAkABwAGAAYABgAFAAMAAQAAAP///f/9//z/+//6//n/+P/2//b/9P/3//b/9//3//f/9v/4//b/+P/4//n/+f/7//v//P/9//3//P/+//7///8AAAEAAQABAAMAAgAEAAUABgAIAAkACwALAAsACgANAAwADAAMAAwADAAKAAsACwAKAAoACQAJAAkABwAHAAUABQACAAIAAgABAAAAAAAAAAAA///+//3//P/7//v/+//7//v/+v/5//j/+P/4//j/+P/4//f/9//2//f/+P/4//j/+f/6//z//P/9//3//f/9//////8AAAAAAQABAAIAAgACAAMAAwAEAAQABAAFAAUABQAEAAQABAAEAAYABgAFAAUABQAFAAUABAADAAMAAwADAAMAAQABAAAAAAD////////+//7//v/8//v/+//6//f/9v/3//j/+f/5//n/+f/6//v/+v/6//r/+//7//z/+v/7//z//v/+/wAA//8AAAAAAAAAAAAAAAABAAAAAQABAAIAAgACAAIAAQACAAIAAwADAAMAAwAEAAMAAwADAAQABAAEAAMAAwACAAIAAQABAAIAAgACAAEAAAAAAAAAAAAAAAAA////////AAD//////v/+//7//v/9//7//v/+//3//v/9//3//P/9//z//P/8//z//P/9//3//v/9//7/////////AAD//wAA//8AAP//AAAAAAIAAQACAAEAAgACAAMABAADAAQABAAEAAYABQAFAAUABQAEAAQABAAEAAMAAwADAAMAAwADAAIAAwACAAMAAgABAAEAAAAAAAAAAAD///7//v/+//7//v/9//z//P/8//3/+//8//z//f/8//z//f/+//3//f/+//7//v/+/////////wAAAAAAAAAAAAABAAEAAQACAAMABAAEAAYABAAEAAQABQAFAAUABQAGAAYABgAHAAYABgAGAAYABQAGAAcABQAFAAQABAADAAMAAwACAAIAAgABAAEAAQAAAP//AAD////////////////+//7//v/+//7//v///////v////7//v////////////////8AAP7//v/9//3//f////7//v/+/////v/+/////v///wAA//8AAAAA//8AAP//AAAAAAAA//////////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAQACAAEAAQACAAEAAgACAAEAAQABAAAAAAAAAAAAAAD//////////////v////7//v/+//7//v/8//z//P/7//v/+//7//v/+//7//r/+//6//r/+//7//v/+//7//z//v/+//7//v/+/wAAAAAAAAAAAwADAAQABQAFAAYABwAIAAgACAAIAAgABgAGAAYABQAFAAUAAwAFAAQABAADAAMAAgACAAIAAgACAAEAAAD///7//f/9//z/+//7//r/+//5//n/+f/6//n/+v/5//r/+v/6//v/+//8//z//v/+//7///8AAAAAAAAAAAEAAgADAAMABAAFAAUABgAFAAUABgAHAAYABgAGAAYABwAGAAYABQAFAAUABgAFAAUABQAFAAQABAADAAIAAgABAAEAAQAAAAAAAAAAAP/////+/////v/+//7//////////v/+//7//v/+/////////wAAAAAAAP//AAAAAAAAAAAAAP//AAAAAP//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAEAAQAAAAEAAQABAAEAAQABAAIAAwACAAIAAwACAAIAAQABAAEAAQABAAAAAAAAAP/////////////+///////+//3//f/+//3//f/9//z//P/8//v/+//6//v/+v/8//z//P/7//z//P/8//z//f/+//7///8AAAAAAAAAAAEAAgACAAUABAAEAAUABQAGAAYABgAHAAYABwAHAAYABgAGAAcABgAHAAYABQAFAAQAAwADAAMAAgABAAAAAAD///7////+//3//f/9//z//f/9//z//P/7//v/+v/6//n/+v/6//v/+v/6//n/+v/6//z//P/8//3//f///////////wAAAAAAAAAAAQABAAIAAwADAAQAAwAEAAQABAAFAAUABgAGAAUAAwADAAQAAwACAAIAAgACAAEAAQABAAAAAAAAAAAA//////7//v/+//7//f/9//z/+//7//z//P/7//v/+v/7//v/+//7//z//P/7//r/+//8//3//v/+//7//v/+////AAAAAAEAAQABAAIAAwADAAUABQAFAAUABAAEAAUABQAGAAUABgAGAAYABQAGAAYABgAFAAYABAAFAAQABQAFAAQABAACAAEAAQAAAAAAAAD//////f/9//z/+//6//n/+f/5//j/9//3//f/+P/4//j/+v/5//r/+f/6//v/+//8//z//P/8//3//v8AAAAAAAABAAIAAwAEAAQABQAFAAYABwAGAAgACQAJAAkACgAKAAoACgAKAAoACgAKAAoACgAJAAgACAAHAAYABAAEAAMAAgABAAEAAAAAAP7////9//3//f/9//v/+//6//j/+P/4//j/9//4//f/9//2//f/9//2//b/9v/2//f/+P/5//r/+f/7//v/+//9//7///8AAAEAAQADAAMABAAEAAUABwAGAAcABwAJAAgACQAJAAoACgAJAAkACQAJAAkACAAHAAYABQAFAAQABAADAAIAAQAAAAAAAAD//////v/9//3/+//8//v/+v/5//n/+P/3//b/9P/1//b/9v/3//b/9//3//j/+P/4//j/+v/7//z//P/9//7///8AAP//AAAAAAAAAwAEAAYABQAGAAYABwAGAAgACAAJAAkACQAIAAgACAAIAAgACAAHAAcABwAGAAUABgAEAAYABQAEAAMAAwACAAIAAQAAAAAAAAD//////v/9//3//f/8//v//P/7//v/+//7//v/+//6//r/+v/6//v/+//8//z/+//8//z//P/8//3//f/9//7//v/+////////////AAAAAAAAAAABAAEAAQABAAIAAgACAAMAAwADAAQABAAEAAQABAAFAAUABQAFAAQABQAEAAQAAwADAAIAAwACAAIAAQAAAAAAAAAAAAAAAAD///7////9//7//f/8//z/+//6//r/+f/5//r/+v/7//v//P/7//v/+v/7//z//P/9//3//f/+//3//f////////8AAAEAAQACAAEAAgACAAQABAAEAAUABQAIAAYACAAHAAcABwAIAAcABgAHAAcABgAGAAYABQAFAAUABAAFAAQAAwACAAIAAgABAAEAAAABAAAAAAAAAAAAAAAAAAAAAAD///7//v/9//z//P/8//v/+//7//v/+v/7//v/+//7//v/+//7//v/+v/7//z//P/9//7//v///wAAAAAAAAAAAQACAAEAAgACAAMAAgADAAIAAwADAAMAAwADAAIAAgABAAEAAAACAAEAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAP///v/+//7//v/+//3//f/8//z//P/7//v//P/9//7///8AAAAAAAAAAAAAAAAAAAEAAQABAAIAAgABAAEAAQABAAAAAQAAAAEAAQABAAEAAQACAAEAAgADAAIAAwADAAIAAQACAAIAAQABAAEAAgABAAIAAQACAAIAAQAAAP//AAD//////v/+/wAA//8AAAAA//8AAP////8AAP7//////////////////////////////wAA/////////v/+//7///8AAP//AAD////////+//7//v/9//3//f/9//7//v//////AAAAAAAAAAAAAAAAAQAAAAEAAAABAAEAAQABAAEAAgABAAIAAQABAAEAAQACAAEAAAABAAEAAgACAAMAAwADAAMAAwADAAIAAgACAAEAAQABAAAAAAAAAAAAAAAAAP/////+//7//v///wAA/////////v/+//7//v////7//////////v/+////AAAAAAAAAAAAAAAAAAAAAAAAAQACAAIAAwADAAMAAwADAAQABAADAAQABAAEAAQABAAEAAQABQAGAAYABgAFAAQAAwACAAEAAQABAAAAAAAAAP///////wAA//////7//P/8//v//P/7//v/+//7//n/+f/6//n/+v/6//n/+f/4//f/9//3//f/+P/5//v/+//9//7//v/9//7//v8AAP//AAAAAAAAAAAAAAAAAgAEAAMABQAGAAcABgAGAAYABgAHAAgACAAIAAgACAAIAAgACAAIAAgACAAHAAcABgAGAAUABAAEAAQAAwADAAIAAgABAAAAAAD//////v/+//3//f/9//z//P/8//v/+//7//v/+v/6//r/+f/5//n/+v/6//r/+v/6//v/+//8//z//f/9//z//f/+//7/AAAAAAEAAQACAAIAAgADAAQABAAFAAYABgAGAAcABgAGAAcABwAHAAUABQAEAAQABAADAAMAAgACAAIAAgABAAEAAAAAAAAA//////7//v/9//z/+//6//r/+v/4//n/+P/3//X/9f/1//X/9f/3//f/+P/4//n/+f/6//r/+//7//v//f/9//7///8AAAAAAQADAAQABQAFAAYABgAHAAcABwAHAAgACQAKAAkACgALAAwADAAMAAsACwAKAAoACQAJAAoACQAKAAoACgAIAAgABwAFAAQAAQAAAAAAAAD///7//v/9//3//f/7//v/+//6//r/+f/5//j/9//3//j/+P/3//j/+P/4//j/+f/5//n/+f/6//r/+//9//z//v/+//7///8AAAAAAAAAAAEAAgACAAMABAADAAMABAAFAAQABQAFAAQABQAEAAUABAAFAAQABAACAAMAAwACAAIAAQABAAAAAQAAAAAA/////////v/9//z/+//7//v/+//8//z/+//7//z//P/9//3//v/9//3//P/9//3//v/+//7//////wAAAAAAAAAAAAAAAAEAAgAEAAQAAwAEAAUABQAFAAUABQAFAAUABAAEAAUABAAFAAUABQAFAAUABQAFAAYABQAEAAQABAADAAMAAgACAAMAAwACAAEAAQABAAAA///+//7//f/8//3//P/9//3//f/9//3//f/8//z//P/8//z//P/7//v/+//9//3//f/+//7////+//7//f/9//3//v/+//7/AAAAAP//AAAAAAAAAAAAAP///v///wAAAAABAAEAAQABAAIAAAABAAAAAAAAAP//AAD//wAAAAAAAAAAAgABAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA//8AAAAAAAAAAAAAAAABAAEAAAABAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAAAAQAAAAAAAAAAAAEAAAAAAAEAAgABAAEAAQAAAAAAAAAAAP//////////AAAAAAAAAAAAAP///v/+//7//f/9//7///////////8AAAAA//8AAAAAAAD//////v/+///////+////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAgABAAIAAgACAAIAAgACAAIAAQACAAIAAQABAAEAAQACAAIAAgACAAEAAgABAAEAAQABAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQAAAAAA//////7//v/+//7//v/+//3//v/+//z//P/7//3//f/9//z//f/+//7//P/9//7//v/+//7//v/+//7//v/+//7///8AAAAAAAAAAAAAAAAAAAAAAQAAAAEAAgACAAQAAwAEAAQAAwAEAAMAAwADAAIAAwADAAQAAwADAAMAAwADAAIAAgADAAIAAgABAAEAAgACAAEAAQABAAEAAQABAAEAAAABAAAAAQACAAEAAQABAAIAAgABAAEAAgABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/////////////+//7////+///////9//3//f/9//3//f/9//3//P/9//z//f/8//v//P/8//3//f////7//v/9//7//v//////AAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAwACAAIABAAFAAQABAAEAAUABAAFAAQABAADAAQAAwADAAMAAgACAAIAAgABAAEAAAAAAAAA//8AAP///v/+//7//v/9//z//f/9//7//v/8//3//f/9//7//f/+//3//f/9//3//v//////AAAAAAAAAAAAAAAAAQACAAIAAwAEAAQABQAFAAYABgAGAAcABwAFAAYABAAEAAQABAAEAAQABQAGAAUABQAEAAMAAgABAAAAAAD+///////+//3//v/9//3//f/8//z/+//6//r/+v/6//r/+//6//r/+v/5//j/+f/5//n/+v/6//v//P/9//7////+//7///8AAAAAAAAAAAEAAgAEAAQABAADAAUABQAFAAUABAAEAAUABQAGAAYABQAFAAQABAAEAAQAAwACAAEAAQABAAEAAAAAAP///v/+//7//f/9//z//P/8//z/+//6//n/+f/4//n/+P/4//n/+v/7//v/+//8//z//f/9//7/AAAAAP//AAAAAAAAAgADAAQABQAGAAcABwAIAAcABwAIAAkACAAJAAoACAAIAAgACAAHAAcABwAHAAcABwAIAAcABgAEAAMAAgACAAAAAAD+//7//f/8//z/+//6//j/+P/3//f/9f/1//X/9v/0//T/9P/1//X/9f/2//f/+P/4//n/+f/7//z//f8AAAAAAQABAAMABAAEAAQABAAHAAcACAAJAAoADAANAA0ADQAMAA0ADQANAAwADQAMAAwACgAJAAkACQAHAAYABQAEAAIAAAAAAAAA///+//3//P/8//v/+//5//n/+P/3//f/9//2//b/9v/1//b/9v/2//b/9v/3//j/+v/6//r/+v/6//z//P/9//3//v///wAAAQABAAIAAwAFAAYABwAHAAgACQAKAAsACwALAAwADAAKAAoACQAJAAgACAAHAAcABwAGAAUAAwACAAAAAAD///3//f/8//r/+v/4//f/9v/2//T/9P/0//T/8//z//L/8P/y//L/8//0//X/9v/3//n/+v/7//v//P/+/wAAAAACAAIAAwADAAQABQAFAAcABwAHAAgACAAKAAkACgAJAAkACgAKAAsACwAKAAoACQAJAAgACAAIAAYABQADAAQAAwADAAEAAAD//////v/9//z//P/8//v/+f/6//j/+P/3//b/+P/3//f/+f/6//v//P/8//3//v/+//3//f/9//7//////wAA//8AAAAAAAAAAAEAAQABAAEAAQABAAEAAgACAAIAAwACAAIAAwADAAQAAwADAAMABAAEAAQAAwADAAIAAwABAAEAAAABAAAA///+///////+//7//v///////v////7//v/9//3//f/8//3//f/9//z//f/+/////v/+//7//v/+//7//v///////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAP////8AAAAAAAD//wAA//////r/9//1//T/9//5//z//f/6//r/9//x/+3/6P/j/93/2//W/9D/yf/H/8b/xf/E/8f/yf/M/9L/0v/T/8z/x//G/8X/yP/O/9H/2v/n//L/9f/y//D/8P/s/+b/6P/p/+v/8f/8/wIACQASAB0AGwAaACAAMAA1ADMAMQA1ADsARABQAGAAYgBqAGsAaABhAFkATABBADcAIgAZACQALQArACQA///M/5P/f/+B/5v/wP/g/woANAAzADMAOAAxACYAAADp/+f/7v8QAFEAuAAvAXEBbgEFAZwAMADi/+P/GgBEAGAAeACKAFkAcQBJAAIAo/8Y/1r+vv1t/aL9M/7P/mz/tf9jAJUAtAAcAVQBOgEwARMBBQHaAAEBAgHtAPkAAgGKAHIALgC9/43/d/8+/w7/Bv/w/v3++/4V/zn/Sf97/5//v//7/zIAKwAnADIANgA+ADcAMQAvAC0ANABAAB8ADwAaABcADQAOAAMA/f8IAAkA+v/s/wkA+//s/+P/7f/v/+X/3P/e//f/EwAKAP7/zP+1/1n/XP8s/2v/Zf+j/9X/EgA8AFEAKgD8/8v/pv+F/4b//P8NALIAzQCEAd0BvQE9AcQAbQAZAEgAEACWAMYA+ABqAdgA6gFAAdwCzAFgBFIDsATjA0cAJwKp/lcDdf5qBSgDAAvDBkMLlQfrBQIFYAGFA90AzwP0/z0A1f1k/qT9Bv0T/gv8L/t++7H5lPhN+Uj5tve3+Un4mfpe+Zb7gvps/dH8/v0o/Sn9X/7T/N/9x/xk/Yv8sP3G/f7+KQG1AMkBswIVA8QDfwOcAuUDZQWoBzcJNguPCmMM/BF+G+MttDm/SD5Bhzu1JLoVTAEl9KLr5ecg37fcpNbS0VTNO8osymfFAsZ8wY6/Gr2hvhLDrMUmzU/TTd7Z6rP5QAh5FRAc5x1CGlkSeAouAYD7svud/ekFuA/AFrIcXh8MHgIcShblD7YJYAM3/7r9wP4k/7kBzQSKB5UKYAySDS8NLQvxBj8DFv0i933yqu7u7FzvxvMT+ev/zQSLB6kI/wVGAqv9VvvQ+l79ewHKBv4LexCXFKsX8BpXHakeax4UHYEa9Re3E6wRxRABEKsRNBJsEqYSwBFmENwOXQ0RC5sIIgXCAFD+wv06/jgBHQLcBO4FkQiGCK8GVwWRAhsBavwBAKH/FgXPBIIIdgekCJAKtwubDPIN6g5XDKsLmQrNCeoHFAk1CyUK+wq4Cp4JxAdsCIkIJwa3BVICEgBW/HD7+Plg+0D+0AL6B6oM0RAKD3oO8Qh+BOb9SPrN9uH1w/U49QD2zfCK7hvq5+W+4ITggN7G2+7czNwg36Tc7+Ci3dLc8Nsy3xvj2uSh6ZPoZOWu41HjjuNA5FPpi+287u7vOvMS84Dy1fO88zDwTPF48pbzLveL/NH/zgHLAhQDQAL9ApMFgQn4DGgSsxafGQAdaB60HjwfYR4TH44g+yF7JAYnRyczJy8lTyJuHtwczRpCGnobARsRGicXgBOJDsAKmwbTBH4DQgIoATEACf7S+kL4JvaL86byN/D97wDukOzW693q2Ohx50Hn0uTl5evlyuZ/5ELjed+4217Ye9aM1czYu9p53U3dytyP2k/Y3dVx1GDVstQw1tbVidWJ0qDQCM5tzU7PGdGj1GLVqNQT1NLSJdPQ1dTZz91P4Z/jyeTK5W3mJOYa6BHoo+qO6nbs2uwa7DLut+888sj0n/eR98H3cvbG9c/2dPkv/Ib+ugCT/rD9fvzo/bYBwgarC48OeA7MCsYG5QMHA+8E8AdSCmcL5QonCpsKwAv0D20X7iH9MLlDLFidapd1KHYNbYVdL05lRqpJBVdHaKB3ZH+pfTJ2jWvQY11gYGA2Ygli6lzxUWFC7jCHI5YdPSBiKZsypzYiMgElBxRbBO/4lPT28/30b/WS81HxRu7K653qBOs17K7tde7S7NXo1eIN3dTZ3Nvw4kDtk/e9AF4GcQlJC2YLeQoqB0ACq/ze+EH5vv1GBUoMPBGEErUPXguJBYMACPxq94HyiO3y58HjUOCX30ripua068XtYetV5KDZ986PxwLFHcf2y0XRjtOS023SiNDxz0XPXdBuz2rNbMkBxaLB+cFlxXfLXtM424nh/uM249bestog1rnUu9WG2TLe6OEG42vjK+NJ5DPmhegd6qjpaebn4AHbPNbo003THNQo1c3VWtbo1YfUqNIe0K/OUc5W0FXVF9706V/4LAhlGYcq8zmIRQdLRUnFQbE4kDIiND8+I04PX/tqFm9pbDBmZGD5XX1eSl//XLJV70htOS4q8h4GG+cdESWjK/MsCSYCF7cE8fLo5jDh5t/a32vdztc40f7K1cejx7rJz8ykzhzOb8rhxOK+R7rWuB68I8Qzz/nZsuF65Rfm6+Vu5o3pPe7F8p72Z/n6+0AB2QrzF1EmYTKGN5g0+yppHtgT9Q5XEC8WuxzMIE0f0hjZD5kHCAN4AkYDQALJ+wfvw97Fz9bGC8hc0UfdCeaM5uHfLdRcyQbE7cS0ynrRhdXF1cDSHM/xzVrQkdfU4WPriPAN75vncd4Y2B3YD98o6333HQAMAyIAUPvC95T3jvr4/m4CxwL2/7/66fbf9eX41P1CAzkGJAZ7Asb7p/Ts7v/rH+zi7X3vxO9a7hftWu/u9nAEIhW8JaczJj7HRhJOaVSvWBpZI1ZUUhJQSFLGWQhlT3APeTp9BX15erR1k3F3bRxqU2auYQBbVFJuSB4/FTmBN+05RTx0O0s0Myc2FwYImf3b9zn2S/WM8srtwucB4gje79t626rbatvu2VvWrdFFzNvHu8ahyTzQ2Nh74K7keeUR5H/jRuXy6VDwf/YM+3P9ov8KAuQFZwqED5IUUxoQIe0okzDoNOE0vi77JJcaVxSpEngUrBdXGZAXUxKUCskB6fkK9JbwDe6V6kflutwZ0kLIosLZw2LKGdNq2F/Xgs9yxNq6ibbnuMa/acf8y73MF8vgyAnJy8sJ0aPXFN2h3/3d9dgn06HPktBG143hW+wV89HzM+9i6B7j9OFm5A/o2ep26mfn9OI14GbgO+MD58zpHuoV6BrkH99s2vbW1dRw1IPUWtTp09TTGtaj3O7oRPphDQMf2SvvM0M4mzofO0g68zcDNtc2gzuqRBRQCVsHY6NlD2XzYoxgal4nWyNWyk5+RYQ8zzPlLHgoUibTJe0lHyQ8HjsU8AYy+S7uDOel43XhlN6s2anTSc4Ty/rJmMqdy1/Ldcn1xfbB771Wu1S7WL7qxKPNZdZt3Vnh9eKQ4xvlU+hG7cny+Pfu+6/+XwGIBOMIpg4UFUYbTiBGI2QkTCRfJGMltidzKqcrQyo+JoogGRvEF6AW4hb1FocU3g6kBmT9fvWL8IDuR+6A7QDrQ+bR30jahNdM2KLbat/94ILfLdup1hvUoNXH2vnhLuip67rrqOl753rmuOfv6kDvfPK084fyi+/G7ODrC+7Y8r74Q/13/hz8f/d58oHvq+6+74/xrvLA8ijxHe8Y7SHrYOq06SvpS+ix5inkEOET3mvbVNnn14HW2NWN1vrareNB8SUCrBOnI7MwtTqeQlNI5ktCTO5J4UaVRZVIwFDnWzRntG/yc5p0VnN3caZuEGrHYjNZyk4pRRc9QTfgMpkwTy8ZL4ot+iirIHIUzQZ8+k/yxu2C6pPmnuC62enTYtG70TfTLNS40n/PlsuxyODGb8ZEx8vJhM4r1jTf1ed47tzxtvPd9Yz5Hf/aBMQJnQxIDpkQYRQXGlcghiUsKVMrlSz3LFMsIipXJiUjUSInJSIreTGKNDEyxCoiIWEYyRLcEKcQchDVDaYIywHi+qb1JfOd8ljzDvMw8I3qC+IH2WbS088y0pHXWN2o4FLgM93v2dvYkNvD4GXmpenP6VbnceQ848Hkn+jo7TvyXfSp84bwbOyw6M3mIOd86TTsne2o7E/pFeWT4Z3g/eGD5PflYuXC4bTcYNiT1u/XUduo3t/fR95Q2jzWIdM40pLSy9J00drO2sw5zu3Up+F88vMEZhZoJWAxnTqOQA5DyUGJPos7xjsyQJ9I5lKfXDZkemmXbEZuu202amFjSVnhTVFCwDfMLbkk/xwOGH8WaxcBGJ8U6gtB/uPvWeS03VHahtfv0lvM7sVywhDDAse8yx/Ppc8FzhnLucgrx97GvceAyrvPCtdx32rnju2b8bL0RPj6/J0CDwjWCyENSQ0/DZ4PvBMpGn8f0CPUJQMmDiUbI+Mf3huCF0YVfRWlGKUcAR6ZG78U6wx/BnEDQQNvA4gBB/0w9mfvzOoJ6T7poupo66jqTugP5KveMtmt1RHVFNgd3eDhWeQ/40LgSt2A3Wrhz+e77d3wN/AG7Wbqp+lN7HHw6vTs9u/2mfSY8e7uCe3367jrBew+7FzsI+ub6HLlZuIc4VThyuLR4w7je9/n2gnX4dWB11LbYN8w4pvjr+PN4wHksORg5Q3mMuaq5dTjQuBl3PHZq9sH5EzyggQdFz4nKzTKPj9IH1CeVAdUl075R1hEXkeIUH1c2GbYbPFuwm9NcWpzpXPFbnlk3lUTRz06fjC/KJAikx3fGgcadhl3FpAOJQIJ9IHo8OFv3y3ento31GPNCcqVzDXUW92E47vkcuE73dHaHtsd3eHes9/X4GLk+urG8/77WAGfAyoEewWPCA4NcRD2EMMO7gtLCz4O7xMdGmQezR9tH30ech2+G0UYJhNYDZ0J1AnxDXETuxY2FXMPRQgSA50BrgJkA7cByfzB9ijyQPHE8wn42fvw/ZL+X/6F/cD7rPjn9E3yR/JK9ev5Uv3r/YP7XfhL9/P5Bv97Ax8EDgAz+b7yhu8s8O3yU/XE9dLzrvDb7frrc+pk6EfljeHD3jrd89zD3D7cCdtf2g3bVt3Z38ngMd9d25bXgdYN2V/e8OOh56ToKujy5yHptevJ7qLw2fBu73Ture2U7H7qkeay4sngS+PF6jr1ywBRCxEVSh/bK+A5+UaLTr9OB0iOP2E67juDQyNNh1QYWGtYsFiIWmpdlF5OWxlTE0jDPGQzGCuVInkZMBEoDOgLhQ5QEBgN9wMF9zPraeT44gfkl+Nv3/nY3tOA02DYpt+05Z7njeXp4ULf1t5a33LfPN4B3QrejOKh6dbwTvVE9jH1w/QL9477ewAyA+0CCwEYAFMCeQcXDlYTLhaLFh0WtxV+FTgUrRHiDdMKdApYDUISQBaiFvASGA3lBw4GNAf2CMkILwUu/475tvaD99z6Vf70/y7/3Pzg+bz2Z/N477XrIumL6ErpMOqF6Rbnw+PI4VHiheXu6GvqLehU4xDeINt7203ewuHe4+XjeeLk4CDgSuB44Onfm95b3Qfd5N083xDgMuD438fg9+L/5Vvoo+hq5vfiO+Dq3yrisOW06CHq+elF6bDo0Ogv6XzpYunW6FPoG+gv6K/oPuj05tDjPOCn3WncP92238Tky+uQ9A0Aeg4JH+8vUD4fR1ZIVUO2O9014zSZOfRAKkhQTQ1QgVKcVjZctmE1ZKxhfVpUUINFiDsTMg0q0CMOIWQiMSY8KQ0oOyFuFuQL8gSYAmYChwCh+qLxdOmm5Z3nWe2T8jf0ZvHb6+Lm8uPR4kji7OBa3ybfAOLn5yDvLPVD+MX4qfiY+Xz8QwCxAsIC1ADm/mT/KQMxCYIP+hMRFocWZxYqFnMVyxNaETIPLQ+/EW8WZho4G4sYORQJEU0QvBHlEhwRpgv8Azr9e/lf+ZT7vf0K/oL8+/lD99H0BvJF7nrqeOdY5iPnvein6UHpOejQ567pmu0d8rb0z/PS79nqVOcc55rpHu1774Hvne0y66PpgunL6V7pQefI4+nf3Nwb22raU9qt2nfbDd0x3wzhd+Ee4Gjd4tro2eraJd1b35Dg1uBU4ZjiKeU26Jrqm+tP6ybqEelV6Prn5ufc57PnQOcS5jjkReK14dLjFOkk8Z36SwVfEQQf5i32O/BGrUu3SQFEtj67Pa5BJEiKTetPFlCSUY1WlF6DZnNpR2XVW2BQJUcJQfw72TUBLn0mTSILI7ImHCmoJj4e9xIiCZID/gGWABz8rfPu6SrjkOJV5+/tx/Fh8KHqN+Q04A3gAeJK45LicuBv3x7iTegj8Hv2TvlK+ab4mPm8/KcAJQPoAlABgwDkAnsITQ+bFNUWThb3FJ8UZBUpFngVMxPhELkQvxPcGEkdYB6DG6cWcxIlEeERGhIxD+sIQwFY+/j4SPrh/OD9+Pt997PyFO/f7CLrjOh45Frgjd0W3dLeA+FW4g7i5uBb4GTheuMS5V7kA+Et3CDY9tbD2Cjcpd6Y3u/bQ9iB1aXUCtUK1XDTPtAUzXrLd8xrz7TSTdXg1hbYztkC3AText7J3bPbxtlc2dXant2A4GXiBuPw4grjE+T25U3oIurR6oPqiun96BzpzOlS6orpD+fF4xjh9uDI4z3pye959rr9CwfJE1Ej2jLuPaRB1z1qNtMwvDCsNVI8C0GBQppCAEUrTKJWQmDVZIFidVtlU8NNpkqAR+hBljl8MTMt2C4HNGE4LDfrLtoikhddES4QChFYD/gIOv+j9v7yxvVX/A8CdAM6//r3xvBl7NXq4Oqo6mPqjeov7ZXyUPnS/9oDXAWXBecFTwdCCRQKDwmfBrgEqQUuCkIRjBhqHXceJRxSGKgUbBJiEXsQ7w6zDAILZwukDrATYRhwGVkVUwwYAar2Ku9K61npkujR5wPon+js6aDrW+2G7hLtEur35VHhxNym2SvZD9xP4r/qe/IM9wT4e/Wy8Yrus+yC69npvOYx4ofdO9pX2QfbKd6k4JfgDd021tLNmMW6v6m8yryQv33D3ceoy/zOQdKu1RDZ79vZ3ZPeS96F3ercHt0233/jdekm8Kr1avnl+q36LvmL9+H1c/Ul9qD32vhP+Sj5wvgg+BT2AvKc69XkUN/F3eDgs+ij9EEDNRUMKpBCj1y8c/9//3+/cKFZQUUqO9U+6EpWWKxfRF9YWrVV7lRXVjVVK0t1Nv4ZX/0r6Grd2dz44c/pB/Hd9tj5Efmr9Gvt3+WG4OLffuSS7Xb4FANsDJAVuSB2Ldk6ckSvR9BDEDtuMWUqYShGK4QxIji6PDQ9NDnoMU0oyB1+EjgHs/v58KXnF+Bi20fZnNq+3mbkVukk6/PoBuPy2zjWM9Rg1ubbXuMd6/ry1PvRBxQXMSiENgI9UDkELf4dEhJ2DbkPRBZ2HDkf6ByiFjUPMgilAub7gvGt4pDRIMKVt06z6rRyu8XDF8yN0E7Q3coZw+27+LewuAC9MMV1zXzVaNuI3xbk0Oi67hHyZvFl65DhateTz6zMes5R1Ejb7ODt4nTh5N012kbYV9ew14HY79mH3BvgxOQb6q7vZfU9+mv9Uf4//PD3p/I27pfs/e1j8j73fPpM+jT2BPC06cvkaeH33vnaH9XlzszK4cp70D7aBuaN8aH7fgb3FBgrDkgzZiN9/3/cd5dg7kg5Pd8/xk0NXO1hgly7TkFAMjfvM3sxyylEGMH/ruaX0rHJxshSzvbWp9/j6NvvVfTe9Bjy8O7n7gn0IwA5EGUg8C0nNvY7s0FQSXJTJVp1XHtWS0mAO1kt1CVZIykk5CbQJa0h7xiXDGv/jfHB5ADaJNJyzBLKeMhyyFvKks2A1NDb5+Oc6bTrT+v46IToK+tR8rb84gc5Ej0bkCLzKlYzUjomPpk6azHQIwQXRg5xCmkKhgp7CLECGvpv8JHnv9/318vO6cTNuoe0cbJwtVa8fMSozezUv9vs3s3hA+J14nzjS+X+6qrxlPvIA+4JhgxeC8MI6AS+AGD7ZfQu7D3ja9s61lbTi9M61ELUe9Kvzl/K3MYwxePF1Mh0zV3ULty55Mntp/V3/UUDmwfjCdcJDwkTB5wFywQ3BRcHvAnfC8YMHwtzBz4C0Ptn9T/uyed14infWt6w317hiOIp4wXkoObS6vjwV/f2/dIFXBFmJepAKWD0eP9/RXnjY1dMbT40PStGwFFwVsNS/0VYOPEuOStCKn0l6RimBT3xvN7v0+HO79Hx2rnmD/OR+eT75fj39C/xR/FA9tsAVg8OHHwlmSk0Ld8xcTksQc9F2kUHQDA1IygZG1QShw8HEBwT3RJCEMsKcwHr9t7pBt5L1afQec/NzwnR89LZ1q7bMeIk6crv6/UL+Wn60Pm6+tf97APhC8QSABlOHSoioihYL0MzhDBTJcsVtQZq/Wv6QPts/FX6e/SW66ri0Nt02C7W+NI+zafGYsKBwVfErsmR0BXZCOKj6LHs2+xg7Nrryexj78Xyp/ij/rEEbgeFBz4FZgKAAJD9cvnF81/steXf347ckNuV3cHgHuJw4vLettsz2Q3YLNmi2ijfSOTp69byhPjC/On/rgO6BogJ9glYCHcFFgNeARoDWwYIC8sOIg/fC9YEXf129m/yIvD075PvaO+Y7ojtku0f7xnxvvF075Lqu+WD4onkh+js74/3+P+uC+0cazbkVItx/3+QfElmVUqRM9UsYjMuQv1OUVLTTLs/ejV5LQoqEyMMF5AC2+yc2o7PdM7f0OXaz+V78kn8/gBF/7j5hfJa7Tjur/WFBZAWLSeyL0Q06TXsOKQ9WUD1P205BS8fIXIUiwkeBocG6wpjDpUMEAh1/U7x0eIC1bvKUsZGxzDMidEG1oraTN4w5NvpwO9N9a73rfhu91z2EPne/lUIhRFBGNccnB9GIw4nayixJPAaTQ3gAI74zvXk9jD48Pfc8yLtXeUP37PaYdiu1CfQjMsDyTPLSs9E1nTcUuPo6WfuUPGR8WPxh/FA89f1VfoiAAkHxwznDo4NdQhoA+D+tvqW9s3xhex+6OnkF+PQ4pXjsuWB5Y7kf+Gx3mLdQ91v3q/gkeQq6mnxyPe+/T0BagSCB+YJdwztDIEMwAoGCdEHwQczCRELEg3qDFoLXgZoAa77B/gI9iz1yvWS9Ub2+vRG9HryR/IJ8rXyifE876fsvurR7E7w0feg/YEEoQmHEOIcvjEfTiNqIH1ge3Np6ExSNnktaTNpQqdNL1CuSPs6oi0KJkohRh2pEqYCou6/3iPVQtLI1abcaOf78Z77Cv6u+4f03+zZ53TnTPD5/aUQGiEtKVMspyqmKpgs+C/xMGctgSVwGS0N8gIXAAECsgehCzcJowGs9Ufpc9zu0kvM3sn7y9PP3NNn1wHbq95q4wrofu218Uz2E/kW+j38BgC8BpUO7RUhGuQdziF+JhIpnifLH0kUWAhBABv82fuZ/EH7RPem7wboYuAQ3T3a/tdB1HDQRc7BztPTJdky4h3p5vD69LH3Ufdo9/j4WfvG/1wD9QnsDWgT+xPSEdgMggc4A5L+sPsk9sDx++z46MjlzuRV5QHnCuiD5hHjmN683G/c8N5f4jTnVOyb8vz3lPypAOgD0AfGCQIMwQuCCyQLvwpHCwYMdQ0WDpQN7AqABk0B7/wm+i34Avjx9tH2E/a59SL1VfSq8+ryZ/L08GPwpe7Q7uLuhfC78nr1CfnN/P7/oALcBbwLlhkkMB9OZWpgfIR7CWuNUu884DL9M9M9PEdeSeNCDzc9Kn8i/xv5FXQKhPoW6ivbXtEjzGzNvdIb3nnp3fKt+AH4M/UM75TqBOsI8jMBExL/IAQqDC1OLuUtyC8kMFcvqStxIvQWDwrrAOT8CP7j/5AABf4q+Nvw2OUc20rQDMlYxzbJTs7a0+fYFN2g4G3j+efz7OHySve7+bb61fts/80EsgujEgAYsRtKHoAfWyGWHw4c8xJHBwj92vUA9Pj0/Paj9eTxLupT4hfbKteY1OLSadH4z3jRSNRt25Xhqeik7ajxPvR+9U/33PcI+7H9NwIIB3AM1xBWEw0TWQ6yCE0B8Pvo9pPzzvC37f/rAOpe6HLnC+d35nDlx+ML4Y7f9N/m4QHmweqx8IH2NPzOAK0C9ANKBBIFnQe3Cl8O1xDzEmwTaxNsEx8S4g84DFwHwwKc/0v+gv5Z/zIAlf+s/qX8tPqG+HH3e/Ys9pr2Tfej+E36o/zY/UP/YP9L/kD9fvzH/doAJAXVCJwLXw/WGMkq4kSFYFBzQnUdZdlLCTTYKdcs5zg7Re5HzUIaNl4p9CCtG90W7A2j/6rvduD11uTSvdPD2W/iyu3c9qn94/2v+UnzGu0X7Wr0xAPXFYMlNC7QL2IukSxhLPgsKyv0J0MgehYzDL8Bl/0A/Bf+Wf9p/Mr2Iu1D4tvWycyvxvHFesmcz/jUzNke3ZHg1+NJ53/rX/A89aX4FfvH+xb/rAM0CjYS0xc1HSYfqh4/G1sUwA3SBfD/Z/uR+I/3yfZg9Rbxxesw5dvgxdwo26fYg9bu1WTVJ9n63F/j5OkO75byoPRt9N71HvjX+rX/HAOAB7sKBQ28DSwMxwkUBsoCP/+V/Cr6Kfgo9qfzGfHK7nXtJOys6/PpyOep5ufk5+Wa5zvqG+4K8cLzwvXO9jf5BPsv/u0AWgNlBoAJWg1rEN0SrxKfEf4OtgwwCtAI/gfrBtcGsAXgBcAFugVpBFwBL/2v+Qz3SvYa9pb1H/ap9tj41Pvm/ioCaQSsBdgEQQPDADX/+v7r/usALQPlBhAKeAzsDqsUoiKaNxxQ82EcZuRatUSvLzgilCJvLdM5fUGmPTczbCRKG/UUPBD9CSn+ovIq5rDfFNt03Vzi4enP8j/4ffzl+iv3CfCx6fDoNfCf/lARTCDtKOgphiaqIdMddR3ZGwwcAxhxEhAMvwWFA8YBEgIcAU7+hvkW8uDng9y/017Ns8160fjWON0k4Fzhk98i3qbe0uGa59Tt5fIh94D6yv1kAtwHnQ+UFZMajxoJF6gSNgwOCBEDUQCZ/b/8t/pn+Hn0uu+p6vXkod9x2nrXGdbz1kTY8duS3yzln+nC7V7wc/I69cT2JPm6+sX8qwCbBGcJCg1bDzkQpw71C/0GRQKi/U/6RfeT9Sr0jPNQ81ryEvAK7inrEuoB6eHomumm6s3toO8Q8+H0xPcm+nT8/P5tAOoCtQRDBrkHgAivCuMMww8UEVAQTw70CtMIMQdFBycHewfNBjIFyQPGAusCDATsA+cClf9//BT6DPlM+g77Ff0e/jP/zP9j/0j/SP+0/9T/KP/v/Gn6Bvhr9+746vwuAhcHuwllC/MORRrbLlhJ81+qaFJf+knSMqsmtyikNSVEiUoiR4g6/i2cJKIgSh2yFSEKzvoN7+Xmg+S/40LmV+iM7TvyzfTJ9Mvu5eZU30XdZOT182UGihbiHdYdZxoxF0YXwBgZGmsZXRb6EaEM4gj/BSYFSwSdAggA1/pN9E3q394u05jMRcsp0BDYJd6S4f/gX9553BTdduHI5wbuVPOm9XD42/smAi8KBRJcGDYbQhvRF/MTYBCWDsIM3AuLB6QEAwBY/eX4VPSI7m3oN+S+31LeTNtu23jar9um3GvfteMk57Lsa+5l8cXy6fTe9qT5UfyW/9MDhAbXCMgIrgjeBvMFdwMGAU7+zPxo++/52fjX9Tf0yPGi8KLumO077fvs1u4i8MnxIfOe843zaPOT9Pf2lPpE/swAlQGIAtsCzANqBaEGCgjDCFgJFAgyByIG8AVwBxkJ/ArjCk0K9AZHBJ4BHAHmAD0BiQCN/gv9/fvJ/K39h/4e/rX8kPsP+r745vdl9wj4D/nJ+lL6aflC9mL0tfLZ9Aj3X/tR/ugE3g4gI3c711T7YlNhBFGLOtUq7yY9MQY/gUreSjtDbjggLm4pVCMcGykN3/wg71DmEORZ5HPmMOdH6XDrVe1k7nfqkuOy3JrYbN837cgAQhNTHfIhsh5lHCIZAxq0GfMa2xnyF38VFhPID7kN0Al2BkID/P50+dfw2OXW2unTjdHV1QXbAuCz4oPg09082uHY/Npu3zTkpOln7dbyj/fP/eACzgc+DaYSLhhtGvoaQRZZEUQMogjQCDEJngyVCagGUfz5803r3+bn4xfiI+Ez3+jeL91P3Wrd699i4prmBulu7GvuGPDf8Xb0tfh8/3sHDg30EAIQFw2dCk4IWghBCGkIDAgBBnoDQP+l+5j3zPVb8svwJ+5q7OPqbulz6ILnHelr6pfsae4J77vv7fC/8sD1jvl2/m4BGwVEBoUHAwgoCi0LawxqDLQJTggKBkoHcAgsCwoMtgs+CdoF5wFn/mD81/rh+k/7Qvzk/FD9T/28/Nf8zvwZ/Yz8UPsD+rT3H/hm93z41/h/+vD76v7JAA0BMAF4AnwJ9xiYLwBJ6FmTXvxQ7DxOKv0kZSzsO/1IOUz1RlU6dS9RJmkhHBs4EgEGaPg67rrndOWs5Qnni+kL7XDvbO/56o7i19on1hrbhOdz+iIMWhgRHDwZ+xRmEr0TpRdTGysdXBzWGR8XPxXiE8kS9hBFDVYJVQMh/DvzDOkN4tndhd/C4jjm/+an44jefti/1VrWF9tp4FflO+jI6Wvsi+9k9PX4SP6VAv0H+wx4Dy0RaA8hDrkNAg8yEL8QaA+/C2EGOgAG+7j2vvRa8iPvz+uW6ETm5+Ql44nij+LP4wvmb+hG6p/sFe5k8Kvz9/dz/V0CeAWnBpcGKgeTCAkL6QsWC88I/wUVBBMCbgCH/VX66Pb28i7wLe5p7f3rC+t86Fbn+OZn5+vnFeip6C7pU+vP7RvxhPSb9w76mvzY/hgCKAUQCBkJGwkjCCoImAicCRoKsAgkBy4EIAMKAhkDdAMSAgr/OvqG9gj2tvf0+sP9Jf9///X/PP9N/5X92/zr+zP8Jf3D/uf9zPzy+I33OfiX/OcBYAXBBkMI7g8gIJw5YlGMYPFcpEoSM00jniPOMbhDMVC6TmtFBTgpLl0p4CQIHVkRUwM1+a7zNPLi8Tnw+O3N7ZTtVu+97efmD96w1GrTqtv17C8AtA7EFLwSwQ16Cu8Jhw1eEYYUQxdTFxgZihk1GQMZkBSGEPUL/gZhAlH8gPPI7FvnHOfw6Z/s9ezo6Lfg59jB0s/R8tTv2ljgzOSl6GrrT+/t8o31cfjP+hn/UAUGDBQS5RT9EtcReA44D/wQOhHIEJQLGAV//vv45fZ69WfzJ/FK7CrpMOZX5DjjUOH+33HfXuAN4iDlEeYN6J7pYuyS8aL2tvvQ/p//1v6N/mv/kwEeBDMFWgWhBMEDvAIVAVL+oPtv94f0KfLg78Xu2e3m697qLOqd6UvqZuoN6uTp7OlA66ztx/CN9Fb3pfqB/XIA5QNyBkcI3wjYCGQIAQhaCHEIXgihCBEI2wctB7gGggQRAob+8fv3+u37gf4FAKEBMwGe/4X9Y/rQ+Jv3UPgc+sz73/0Y/6n+jP40/vX+7wAEAzgECAnwEkUmkD82VnJghVgiQpUq6RwkIfMz/0jgVUZVREkkO0oxCS39KRojyRY7CTT/5vpQ/aj/BQJTAOP8KvkX9G7tBONS2dvRrtMp36zyegUaEYESlQpgAS77MvulACgImA40E2EVkReEGaMabxp7FvYRNgwbCBoDxv7U+J30LvMC9Ib2pvck9J7sJeOZ2V7V59WN2kPh1uUR6RbqDevZ7Evuve8T8QTz3/bO/W0FEQ0JErQSwBAZDekKugmfCi0LWQq1CTIIBQb9AlL/m/kR9VHwuO0J6wTqnuho5vLkZeQ85BblyuWj43vhW+BD4C/jhugj7fjwVfTD9C71tfU79oL2Hfc5+Mr5yvsn/50Azf9p/8j74viW9wz2gfSh8wXymO9Z71rvDO/r7nvue+wl61TrWOvh7GfvDfJt9Jb30/qP/Cf/qACAAAIB/wAuARgCJARCBvUHNgkLCe0GnwTAArsACgEpAtICZAPGAg8BUf80/nz9PP2G/fD9Ff4G/jz+h/3t/Hj9NP61AWMGpQrNDHENKw0DFBwiyDghTmha51RJQrYqtByqHocv50SSUwhUT0mCOHQqaiIFHuMa4RYxER0M4QeFBPkBTf/B/v3+nf4B/Ub26eu74bjaKdx15mf2ZQS3DHkLxgIP+bfy3fI3+X8DgAzfEtcUwBQ5EoYQsg+iDYQNzgxGC24JSQZxAv3+wf1T/R79Wvv09kbvAOfn4D3dGt9d45ToCetm68znSuNx4HzfeuFs5anp1OxY717zffljA7cMwxJDD2YHePxV9vj3Vf/YCYARCRSpD/AH5v3+9hLxAe/a7crtVe8I8J/vxO3M693pcuq+6avpUedB5FDhQ+D04/nqQvVX/VIBn//3+eLz5fAx8Vr1a/pE/6sCIgODAj3/G/uQ9/7zwfJE85/0NvWH9DvyKPAf74nwNPFE8evv7+w+65zrM+4R8673Gfuk+5X6uvgl9zT3bPjT+p3+bQJCBvsHlwdQBfcBQv/f/rT/dQISBboFQQUoAy4Bhf+9/uz92P22/c7+p/6+/ib9lPv1+jn9JwLjBwoNQA2rDPcLUhRkJY09IVNKWnBSxztDKFMd5ibHODtO/lZnUipFiTTvKiMk6iEsHcsW+A/YCt8HbATAAgH+nfxa+oT5Evah70Xnmd5N3MvfgOsl+SkEBwnjBA/+ifUf8gL0z/ruA3kMJxLNE1QTGxAPDgwMYAu8C00M5QuNCj0HlQTMAZwBHAGHAHr9NPia8X/qHudj5bLoIezB7xjwee7r6dPlKOPI4Uvkxebm6g7tIO8f8Qj0DvpT/8cF4gUxBRP/n/t++Z79JgMACsQNRQ37CXoDU/4++Ar18fKt8X/ydPHP8TPuFexd6PjllOWU5X/la+Q+4mLgJeAJ48rnMe0v8SbyfPCZ7f/rU+yF7yH0/vgg/Nr9kP0m+yf55vaT9Rn22/a8+D75FvqQ+aT4SfgZ+Cf3qPbm9OPygPLM8q/1Dfn0/IP/nf9y/rT6yfct9W31kfdg+4YAvgOvBWYE5QG4/ov9Cv56/08BwQGXAXwB9AHkA0EFXQb0BMoB5v2y+hT6v/l8/Kf8R//5AKQEYwfYCUMKkgs9EKgavixXPptMwkygQcwwoyXkJRMz+kQJUUtTnkm6PEoxYisQKg0nHiLWGTQRCAzaCWAI0wejBEYBMf0V+CHyPuqK4zDfEeGJ6DH07f5fBOkDFP0A9vjx9/LT+JIBAAkJDlcQ/A4KDqYLIAtiChMKkAkqCZYHDQaBBFkC4QGtAI7/iPwx+Cbyxezu6BLoTOp97W3wFPHW7l3rMecy5IbjcOTb5kHq0OvV7K3s3+vz7QbxAfi5/LsAz/5g+9T20Pfv/HoEdQ3VDvsNUgfuAgr+lv4//zMAFgB+/Yf7u/bi9BDxd+4A7T7sueso6xXqXeYL5ZvjneX56P/sN+9H7t3rIunn55XqNu9u9DH4d/pC+nX5+fhS+Jj4MPof/D3+VgCJACsA0f1z/Bf73vpg/K77G/tu+CH3/vVD+Iv6Pf2m/pb+vvyv+jH4yPZz9rf3svrz/TYBrgGy/8P6B/do9Er2LPox/usAGgCQ/pT7Gvuf+y79Zv6a/az8yfog+8/7Rf02/iT/tv9eAjMFtwmUC+UQ+xTcIXUu1T8RRyRGxTlcK6YiPyaMNLtGsFLMVEtK7z3/L9Ep5SXDI1YhORziGMAV/hKHEaMMHAnUAlH+m/fr8XvqZOVi49/m9e6S+FgAhgHk/Sn2SO+L7QzwFPkKAjYK6Q9nD7MOlgssCZII1wc7CQsJxgpyCtQKWwm/CMkFtwNeAHj8Ffkz9Hzx4e1A7fDtTu+I8Wzxku/Q61Dmu+KK4Pzhw+Wm6ZDtmu5l7mzs8OqX6d3rJfBZ+FX9ugJm/lj6v/OU83P4QQB7CQsLIgmxAZD8yPjc+j7/wwCuAj3+l/vW9enzXPNm8q7ztfMv8QLvm+vT5/jkJ+YX6PDrafDl8FDvTerA53rljOcz7TfxzPSo9Yf1s/J28yX0g/Uj+Jz6rvsb/R3+6v0x/sz9X/+Q/uz/0v4E/TP7lPkV+vX6hf6WACMBpgAT/gf8uvrL+in94P0IAW0A2f+t/cX6cvmY+Cn7yPwu/+r++/wO+sH38PcW+iT9BABzABP/rv1s+7r8Of3yAAgDWAZsCWQLdQ9XEcAYbh8WLbI5KUQwR28+WDO5JXsljy74P3BQoFUJUIpA5DC8J/cjQiYPJssj8h1rGE8VLBGyD7EJBwTv/BX3SfIV7IHoRuPs46TmwO4L9VT48vUX7iDmxOKy5BntnvcEAX0GvwdpBq4DVwEfAUMBYAOSBgMKcQ2bDsEO3wtDCQAHtgQ9Ay0A+vzl93P1GvRB9h340flT9/fxYOwy5sLjg+NI5XroaeoC7RTtnOwb60DobOVl5XTpYPHy+lwA0AEj+BP0mO089Dz8RwfJDYoKOAee/5r/5P9WBpgGkQWQAgz9q/0w+gD+dvyd+5z8V/kM+D31e/B77MHo+uq77VHyZPbg8TLu/OW040TjcufE7e7uzO/37pfs6eyS78DwO/I/8+rzW/Wt97j6W/yV/En++f11/2MApgAwAKP+Yv7s/g8AygOHA1wDOQCm/M77V/qC/C39Of1h/Un7fvr0+Er4g/aH9RH0jPO09D31JPfx9g73svWZ9Q31/vX49h/4s/lX+kz85Pzh/rUAIgUxCAoN8RDeFQEcwCXdL1A6Jj73Pb81cC62KzgxzjzJScVQYk9cRkw6ITINLBEstCtCKT8mOCD7HO0XlRQsD+wIHgIK/Ov1PvHX7ADqqunI6v/vufFN9H3xyusm56PjMOYr7PzzcPtd/4AAJgDa/F39rvtE/ocADASrCK4L7g6QDngNyAo/CMQF1wTmAiACpAGQAHIBkgAcAUf+8vqr9TvwjeyB6lTqkOpU67zr4esm67PpcOZE45ngTuGF5Q3sSvPv9Y31ZfGl7j7vhPS3+oEAjQKBAVL/R/65/2ICywUxB+cGdASjAkQALv8p/9D/6wCpAVIBaf7E+uz1xvJ/8TPzgvXD9jL2EPIn7oTq5OkW68ftI+/97ivtOOuC6gPqc+x77XvvGfHA8e7ySPNF9Ar1IfZL+FH6mvwn/oH+QP85/zUBlgJCBO8E1wNDAqIAjAAkAUQD8wMJBcEDwAKtAAr+O/vZ9xz2SvX79t/4dvov+hr4f/XJ8nfyMvFw8oHxMvLS8gL1M/il+qT7T/vy+RL6//yzAbsIsw1EFLUY1yDMKJ8y/zZFOMszHS1YLf4ujT2JRr5RolCoSQ8/aDToL90tazAQL6UusSlRJkcgvxv0E5oLjgO4+1L3i/JO8a7toOxo66fsUewQ7cLpTeSm34XbIN6o4iDs+PLe9wL4nvYq8yfyTPOp9eL6DP8gBY4Izgx+DVcN5AqeCOQGigZ+B1IIfAkWCa8J2gijCOIGmAOu/0P6zvbC8yzzIfPy89nzXfPp8AjtWOk95GHi3uGo5Kbo2utY7arrhOgO6ALocu0z8Vj16/Ze9UT2a/b3+bn9kwHSA6sEUAX2BJUFIgWtBoEGwgcACaUIOQipBUYDPgA0/zH/KP+K/hP8Kfiq89Xwo++R72/wrfCB75vtROyU6pbp3OkA6RTpiens6tfrBO2U7UrtWu1J7tnv9PHy8x32tPZA+PL5TPxE/iIAAQFoAPYAbgCsAWcCgwTTBQAGoQYdBdoDgQEzABL+ov0f/db8u/xc+5X6BvhC9snzBPJ38EnwA/AN8e7xZ/OS8zP0mvM989jz+PV3+ST+RgOdB6gKgw4rE4cbwSQxL1QzIzSELvgp2SlrMJ8+AErkUjZQ8Ef9PPo14TSCNy08lTz3OVk04i4UKXsk3R7/F9MQlwmpBEj/UPzU91H1u/Jw8ebwU+7+6Zbja92F2mfbYeDx52HsJu9f7Tzqb+d55lrpqe3Y82X5Ef+fAaUDdQMQA+0CZAObBTQHTQl2CjkLWQtPC7gLBAuZCV8HiANrAPX96Pzd/Wz++v59/XX56vSE7z7szeqG69vsJO2m7IfprOeo5SPn2udx6oHqWOmi6A3n/enp65bxK/Ve9+X4FvdT92X1Q/fa+K78zQA6BPQF0gWRBAICGQHUABsCFAOpA/8CawAI/y39WPyr+4b6o/gX9RvzL/Hk76PwSvA88Onu4u1g7N/q7OmW6Dros+cC6VjqIuxN7Tzul+5H78Lw2PEz9Ef1IPeG+GX6fP1x/5QBwALhApsD4gOYBfsGGQiKCJMHhwYkBUwEzQOFA1YDRQO+Ac8AHv6D+2n57fcA+JX40fll+gL5n/gB9vT1OPWU9lL4GfrZ/r0A8wXsBRMKzQm4ENQXtSHxKf4rcipOI7AhDyRvLwY8IUZQSDtB6DhbMMkvXDPGOcU9pDtYN2QvRClnJYchFiAYGxEXlBE8Cj4Gov9n/JH5D/j69jH05+/j6UPjlN/Z3krgAuVf5/Toz+VL46zga9+t4nnmtus48PDybvbT9vj41Pr/+1/+eQCxAsAEvgbrB8cIBwm5CfQJqAkzCXgHqAW3BLYEAQbcBUEGOQO1/1X8dvkm+V34R/hB9jn0yvG88h7yN/PA8ZftF+qV5pDn/egN7Xru3O5V7eLs5ux67Svv/O6B78jvsvJq9Sz5FPtX+2z6vfmY+ij8qP2C/9n+bf5F/2z/OgG8AKX/oPyn+c/40Pha+uP6ZPpr99b07/L48cLxpvGM8Oju8+2L7dnuWO+c8HTvwu4B7kbu/O+G8Z/zCPTC9AD1sfXr9hz40fgl+WX5Q/qd+xr9zv4k/23/Bv/j/iv/Ov+f/9j+w/6t/gz/wf+N/z3/nP1p/bP8C/7W/rP/mP+k/r3+sv4CAB0BVgEVASABfgK+BdkJwA3FDswODw9vEmkaByR8LE4uPiroIu0evyDkK4k3KUEuQYI6CzGHKWcqVy6nNYw3SDepMFgrFicoJeAk4yKEIHIbNBYeEdYMAwm2BuMEkAPBAXj/uPpn9BHvG+p06ffqfu5t8L7vZ+wC6FXksuMM5qfoROy17XLuBO/n76TxafL1837zk/RE9aD3Kvpz+1f94vwM/lf+wP++/zf/Jv5z/GD9uf0aAAIAQgDg/Yv8D/up+uz5svjv95T2N/e495j4lPbE9FPwQO+d7a7w+fDN8Yzwje0L7fLrre777vzvuO6K7bzsfe7H8Mby1fM085vypfE19A/16/fm+E75evlb+b769vpv+9P6ifr0+QX7DPzF/N/8sPtd+tH43vjf+AT5nPjX99v2Y/ap9nz3KvdS9xP2LvWk9GH1iPZU91r49vfd90n3WPer95L3d/iC+Cf5wfm1+sn6c/st+6P7yPse/I38ffyN/NP8DP3j/Xv+rv5b/nb9C/0N/ab9Q//j/z8AS//P/vD9n//oACQDnQLuAVwAbADJA/QIew4OEKMPVQt4C5EPBhrmJWUsBS1rJOoc8hg+HzorVjecPtg64zMfKlcngij4LjU0sTQAMigsgChiJcok4CO6IUYepBqVFl8Sbg+bCwsJjwfDBWYFpQGX/Ub32vHc7tbu2vG/84f1AvNi7qbqwOZS57zob+sq7u7unu/J7z/wkPCc8X3x7/EJ8l3zxPSO9iz5qflB+x/6evoU+a74Z/kt+RX7Tvsi/cz8uP2Z/Ub9wvww+3/51vfe9o349/mq/Fj9Yftj+CX0DvLr8JPyP/Qw9aT1uvRa9GTzYfNT8inxnu9373jvKfGH85b0wvUj9Xr0x/Ny887zaPRa9Rz39/h5+sP7ePs4+h348vYb9nb3cPgj+nH6o/k0+dn3LPe99tL1HfVL9Bb0pfQR9Qj2YPXi9CnzbPLQ8cHxePIV88Xzt/R+9Wb2NfYV9mb10/Qv9Vj22/ec+Zj6W/sA+wD7Hvsa+/j7bPzj/Rb/3wCFAoQDmgOxAhEBuv+K/+YAegOEBpMIjwlJCLMGKAQuAxEDGATBBmcIBwsXC/ILwgpHDMIMxQ8ZEFQQRw7dDa4RXhmmJQ0uZTDoKLkcvhODEh4esy25Oy1BejkPMY4kvCOAJc8rqDDJL1MvHCv4KtYpiCmVJpUiIB0gGYgVIBPPEvcP2xHKD+4PBw1YBpMAE/eb86Ly2vVF+4n9L/1q93LwgOrC5vTn4ulX7Vzv9++j8KfvU++Z7VPsG+qG6oDrh+6p8cPz2/SB8xbzJPGz8UjxgPIV81jzQ/XN9WP5VPrf+w76M/aX8pvv/vB/9Kn60f2p/uH6l/WR8JvuHe8v8j71Qffl93H24PSx8sDwhu/u7pLvw/BT8qDz0fO78+XylPJ88v7xQfKM8e7xXfMb9Vv46flM+sL4EPYL9EDz7PRX91L6Qvzi/Fb8sfot+UL30vXW9RX2PPg7+kj8jvxP+075QvbN9Lrzx/Sg9aD39vif+Rn6L/k1+Dv2IfVc9Jn08vWU9yT5x/lF+lv52PjF95b3OPev9/T4nfqZ/MT+n/8RACX/Zv56/Wn9nP4VAMQCAgVMB5IILAiVB1kFvARUBN8GBwkMDE4NYAzYCo0I3ggPCr0NxhDZEgARfw9xCzUO4BHrHSQm0ivdKAgfZBVuEY8Y7CXUNBM8izjrLikjMyCAIWspii9dMFIvPyoVKfUmsyaDJYggoB7dGcwZ+Bc1F2YVqRFPEMENLQ3pCWEHzwBC/C756vjj/H/+wACF+8/1tO7m6nDrEu6+8RrySvEM7yzuOu6s7uvtG+xf6q/q5uzd8CLzVPT38rrxnfEz8qLzD/Qe9P30GvcE+7b9Wv8O/TL6cffR9l75Avs3/jD9tP0V+/P6cfmT93b3cfSC9QD11/Wt9r700PN38a/vye/f7uXupO2U7NPrOeyI7WzvL++87vPru+lG6bXpV+1v79nx9fKH8ebxjvBu8PbwwvCH8uPzcfaa+Hf5vPiP91b1DfVc9dD22feQ+O/4vvjm+Bz5h/jb97z2fvac9vH3fPk6+oD6jfks+bX3D/h491n4hvgW+Xj6M/pd+836V/q0+Tv5AvrR+mD84vxp/Vn8S/yE/CD99/4g/9X/RP9d/yEA9wC7Au4D3gQpBgoHWQhtCDMJUQgzCf8I1QuKDPMO/Q9BEOUQkxCWEpITsBWsFs8UCBPrEWAXnh7uKr0uvCzTH7kULhFnGOco5jelO9w1JCkDIXsezyNmKh8ssirdJ3EmJyZCKPYm7SPOHT4aaheVFA4XpRRQFAIRzw9IDO8KvwhvBW3/Wfk79+j1+vorAXgAZv0p853scOcE6tjvjPHz8YPvo+wG7Z/tLu/W7NDoj+jd6JvsNvLP8nvxf+6/7HHvOvE69mr2lvMI8k3whfOL9mn7WPzk+Xr3tvMp9Jzz7/e09xD5KPj89jv2f/No8/vvye+G7w7xGfIr8gzxg+1A6xnqLOtI7PTt9e0f7BfreepF60vsYu2I7dzrUOsx61rsae1i76rvZO/e7+bvgPCU8NrwEPHb8J7zjPQV96H2fvZt9GjzdPMC9W32F/j3+H74Bvjz90739PdC9zL4Ufha+ZD6OvtU+6z69fkN+Un5DvrW+q37Svva+0X7Bfwl/Bj8vfs/+8T7NfwP/uT+x//Z/yIA7v/2/xwAXgBWAbwCmAR4BfsF1gV3Bo0HOgn2CpkKsQnpCIQJfgzdD5USyBITEHgOdgzyDU8PjxFZEiwSkBJKEmwTchMSFPQTRhRVFFYTCRNZEvQTcBgvHcYhHCGRHMYWwBBnEs0W2h9HJDgozSMeIHUawhcTGOIXER1iHQchnB9kH9AbHxkvGI4V2RbCFL0VnhOrEq0SaRDyEFkPRQ+qCwgJywQ7AZoAhAH6A7QEhwOBACT68/Yu9Hv0g/Qd9v/1dPQZ9E/yEvIb8Sjwxu8P7Fnsa+rT7DTtjvEz8Qfyk+9Y7STrSOi/6fXpYe3k73zyJPKr76bsT+gA54zmpulb64PuvO6L7gvsouo+6AHnGOe75xLpSOrX6xTshOvs6p3pTOg86BHoCukO6Qnq+urC6sfs3usR7erqEOtI6YjpJ+vv7MPv9fDu8Trw0O/97Z7u4e7s8I7y+/M49ez1VPX89CD0PvTk9Fj2Hfjy+AH6e/rz+mD7wfva+7/7DfzG/B7+A/++AIUAnwHnAH4BwQDQABEBEAKKA2YFbgb6Bp0GngZuBtQGwgeSCM4Jrws5DdoOGw/xDiAO7Q2TDvwPmBEeE6ITYhSZFLEURxVkFDUVsRPQFM0UIRbiFsMXgRfvFtYV2hRCFFQTrxM5E8YT/RMuFK0TkBIFETEP8g1YDXUNlg3GDuYNHA7UDNcLAQssCgUK6AnICcAK3gtIDAEObQ1kDR4NlQy8DcwNmA4cEKkQ2xLvFEAVSRbkEzITmRLhEkEVwxabFyQYJhcjFhAWexOGE2gRohANEZQQMhLzEEIQ2Q0YC7AIpgf8BakGFgUcBW8DiwGUAIr+Lv17+4v5bPct9qb0o/SP8/HyofE878ztjetY6t/oxecM5zjmNub+5VTlB+S14n/g898h35Dfm9+F3zrflt7x3X7dFt2O3HHcS9wM3F/cPdzr3KvcMt3N3Gbchtxs3GXdVN4i38/f39/634DgIeEe4jPjD+RD5RnmYudL6F7pE+rR6hjsJu3/7nHwqvHT8nnzlPR59b/2KfiH+QX7VPxs/Rz+5/6Q/7AAxgEyA00EIQXMBX4GwgaHB9oHkghNCfwJ2wp5C6YLRgyXDPsMgA1dDZ4NeA0dDhkPQBAHEUQR/xB4EAEQFhBpEAkRwxHzErQTLhThE2UTShL1ETkSXRNMFGEVvxWFFUcVjxSsFDwUqBRGFWAVshUjFVIU2hNBE8oT6RP/E20TERLREJUPFg/6DrgPcQ/sD+cOzA19DJsKWwqzCQEK7QrBChILXQp8CYsIbQf8BigHIAdoCKAIsgjMCP4HZQeOB90G0QfkB2wIUwmRCDcJLQhSCEwI1wiwCbMJGwozCYYI1geqB+YHhQiFCAkJoAdLB6wF5gQhBMwDKQSEBOUEwARABP8BUQEB/yf/EP9l/3UAWP9I/279Gvy1+qr5Jfmj+HT4cvib9zX3OPYX9U709fKy8ujxevGm8eLwsvDn7z3vwu4z7gfu9e0J7f7sJ+zh6+Tro+vk64brI+sr6yTqp+qD6SjqrumJ6UrqjunY6f7pI+ns6vvoK+yO6Xfstenz7MnpBO4n62TvZO0778vva+478QXvv/Jp8NjzH/Je9PPzTfXz9TD2O/fD9oH43vfy+f/5rvqv+4j7mfwK/Y39UP78/g//ZgCw/1gBPwDmASUBnAKDAjUDkgOtA6sDxwPGA7sDYwRNBC8FFQUdBeYEfASKBKYEFQU/BVEFKgX3BIIFJQUXBpIF7gXcBe4FlgaYBpAGsgb2BdcGqAYkCAII7whKCJgIHgiBCLMIcwn5CewKBQumCz4LXgsvC1sLqAvXC3kMjQxKDSYNiQ3aDIMMNAwLDJ4M3QxyDTwNGA2wDDUMzwthC5kLXgsZDGEMIQwhDMUKywqkCQMK7glCCikKYgrzCaEJIgmMCEoI2Ad0CB4IUAhLCMEH2werB9UHtQdJBxEHbQb3BdMFAgYEBnwGjQYxBnIFJgReA00CXQLkAgEDqQPgApQCMQFhAG//6P6E/qr+bf69/gn+y/29/Gf8hPuP+8j68/o3+gH6LPrH+Sn6B/rP+Y759vih+G34Afhq+G34nvjW+Mn4mvg++Jr3VffN9s32E/dJ93/3k/dO9x/3rfZ29kP2LPZT9lz25fba9kT3/vYt9772x/Z69sX2W/bj9rT2Bfcl90P3mPdm9133NffL9vL2E/ei9wX4bfhc+Gj4Lfgr+FT4Dfh8+DD43fgA+a758vn0+Sv64Pk5+lf6yPoU+2f7ifsg/C389fzm/G/9HP1y/Uv9ef3d/fL9nP63/if/MP8n///+8v7O/hL/Wv/N/yIAYgBQACUA5f/p/wAAWQCYANkAtgCYAJAAeADHANAAFAHeAN8AvgDBAPoAGgFrAWcBiAGVAZ4BoAG1AYYBrwGvAU0CigLcAtAClgJYAm4CswIvA3UDuQOQA6gDwAP/A0wEUARNBCoECQROBIYE6gQBBQYFxwS4BMEE5QRaBT8FeQVEBWEFfgWtBawFtgVOBVgFTwWLBYMFnQVbBVgFQwWqBcUFDwaZBbYFRwVhBX4FzgW6BeAFlAXJBXcFiwVJBQoFwgS5BOQEOgVKBWsF7ASjBA0ECwT9AywEeARmBKMENQQ5BNcDsQO3A5sD9wPaAwEEzwOeA8YDXAMkBHgDKwQ4A6ED8AIWAyID1AJgA50CbQOvAgcDkAIIAuQBHwGJAUQBbAHKAQsBZwFIAJgATv/g/6D+Nf99/rP+x/5a/oz+7v2u/Sb90Px//Dv8WPw8/HX8Yvxn/D38H/zB+5b7HvsR+9L6J/te+9P7K/wI/Df8bvuH++76VvtJ++b7TfyL/OP8qfys/Fr8W/xe/JL8qvz4/OX8L/0y/X79o/2f/bb9h/2D/Xj9sf26/SH+K/59/lj+f/4T/j3+7/09/k3+hf6l/pr+k/55/o7+gf6//r/+0/7o/tv+B//i/vz+6P7X/vL+Dv8o/z7/Mv/6/tH+r/62/vr+5/4y/9n+yf6i/pv+s/6g/sj+oP6p/pr+kf55/lL+Rv4j/lL+Wv6E/nj+Nf4X/uf93/0X/gv+U/4K/jL+8P3q/ev99/0+/jX+ZP45/iz+Ev4Z/hj+N/5L/mD+a/6M/n3+g/5B/nT+TP5//pr+qf6n/oX+ff6P/q3+Af8k/yb/FP/d/uf+zv4a/xr/k//K/wQANwDu/w4Amf+n//P/4f/PAMQAQQEXATIBXQEyAWIBfwGnAbUBQAIsAt0C1wIuAzIDDQNRAy8DQwOiA4gDFgRBBKYE1QTiBKsElgRPBI0E0AQABXUFegWLBY8FRAWRBUMFcAUOBR0FHgVvBX0FGwUqBekEnAQ8BEwEVQR/BD8E5gMQA3kDKAR3A3YCWAKOAvICkAHnAtsAOALPARsBhQBqAIYBrgCo/7oA6gCD/9gAHf/k/8L+NACX/5X+ff86APT+J/+f/1f+S/+I/hv/jv7B/rP/Ov7F/tn/Cv7g/kj/Tf63/jr+/f4u/0r++v/s/oj+hv8A/6X+lv5T/0X/5v79/t//xv6T/z//r/5N/2n/a//3/gD/dv+b/9f+yP8w/yT/5f8I/7n+i/8S/zj/Of9v/wb/a//K/hn/8v4G/1v/Hv+j/lD/8P4H/8L+Iv9T/87+cv9P/wD/Zv89/8T+dv97/y7/6P86/wAAMv8AAHH/nP+o/0MAjf87AN3/agCd/0oATQDy/1cAYQCv/3IAzP9IAFIAEwBoADQA0f+GALr/5//e////wP8LAOP/AwDX/7P/i//o/oT/vP60///+mf/y/u3+Iv9F/hj/Y/37/7z9Hv9B/pX9jv5r/3n8uQAD+ScD7fpr/5z9Iv3a/Mj/KvvY/8f6Kf+Q/uv6j/4z/ST9KP1v/RL8sf3v/aX87Psj/776Mv93/NT8gvzE/tf7hP3v/Ur8Zv7x/Bn9O/8M/ED+rf4o/EX/ff6f/LD/Y/5x/ZAAT/01/9f/6P5J/nsB4v7y/uMB/v7H/6QCf/9dAGQCJgFJAYwChQERAZgELwEwA1sDzQLEAwAEBwNDBFEEQgTIBLUDVgWEBLsEEwXmBPMEfwVZBaYEMgUQBbQELAWwBGwEDgVHBDAEJARKBFYDMgQ1A/wCNwO8AmcCnAIkAiYC8QHJASMB0QHnAAABsgDBAGwAhACCANT/OgAaAIv/5v+T/6v/8P9Q/8///v7m/y7/ov9w/9L+GQBz/wf/w/9R/5v/9/8k/9H/sv/j/8z/v/8NANj/TwAiABYAHwAEAer/pACTAHAAnQDBAGsABgHlABABvwD2AOQA7wAPAdQA1gAUAfwAGwEhARUB/gBHAcMAvwAaAYcACwHVAHsANwG7ANcAdgCGAIsAHgCDACwAKQCiAOj/DgDC/5j/mv+X/x3/bv8x/+j+xf4G/xf+wP5m/tv9E/7W/cj9yv3B/WH9gf0h/UH9Uf0G/Q797/y0/PH8N/2h/PX85vy1/P/8svzc/Mb8Nf3P/An9wPzo/CT9JP0K/S79D/0v/SH9HP0x/TX9Xv2D/Ur9lf3U/Z/91/2//b79y/0O/v/96f08/j7+Wf5h/r7+Wf6d/o7+df54/tH+rv4C/0f/BP9Z/3D/Mf9o/4r/I//D/7H/3P/0/xUAIwCnABwARwB9ADEA6AChAKwADAHfACoBYAEfASgBhwFDAUoBhwFiAZwBewGhAccBswGTAacBiAG1AXQBsgGIAX4BfQG4AVABZgFGAZ8B4QB0ASQBEAEBARABAgH4AMkADQGKAAkB0QC3AIwA6QB9ALgAywBxAL0AzgCzAJMAvQB8AM4AwQCuAJQACwGeAAoBwAAgAbAAEwHwAPAA+ABVAQ8BNAEeAUkBAAFOAQgBEAE1ASgBGgEJASsBMwGtACIBlwDFAMIA5QCQALsAdQC9AFAAYABpACkARABFAE0A5f85ABkAEQAtAN7/5P/t/+3/wv8PAOX/y/8SANf/u//e/6j/p/+k/9P/pv/d/6r/x/99/8P/W/+V/47/jv9t/5v/kP+d/5b/dv9m/5H/dv9b/17/ff9y/4b/cP90/5f/kf9d/4H/bP+F/5L/lf+W/73/q//i/73/tP/0/+3/+v8jADsAQgBbAHEAlACYAMcAtgDAAAsB8gAgAS0BOAFdAYYBbAF4AXABcQGVAYEBagGHAZUBjwFpAXoBRAFSARcBIAEeAfcAFwH3ANQAyADaAJMAowCIAIYAhQB+AGwAdgB1AIQAZwB0AHwAbACKAFUAlACSAKgAvAC+AM0AyAD7ANwA9gAAARIBOwElAWMBKgF2AVkBggGGAYIBlAGYAbIBqwGwAZwBrwG/AYABmwGJAW4BkQGKAWUBZwEsASQBDwHoAMIA8QCjAKkAmwB6AE8AJQAMANz/3/+x/7j/ef+L/0L/UP8d/xP/3P7R/sP+nP6x/n/+nP5R/m3+UP49/i3+LP4S/ij+BP4c/vP9IP74/RX+Ev4F/hz+G/4d/h/+N/5O/lD+V/5z/nb+dv6Y/ov+0v66/vX+DP/z/kH/B/85/zH/Mf9b/3r/YP+I/6D/tv+x/6D/n/+t/7X/wv/P/8v/x//y/8v/r//C/8f/qf+z/4T/e/+b/4r/ZP9m/1r/Mv87/wr/5/7V/uD+w/6c/oT+sf5c/pb+QP45/jL+If4F/gf+C/76/f391f3Z/fH95P3e/cf9y/3s/d795/3j/eb9/v3v/fL97/3w/Sj+C/4D/hX+Nv7+/UP+LP4y/kL+TP5Q/lr+Vf5x/of+YP6e/p3+vf69/rr+6v7L/gf//P43/xP/Z/9d/4b/d//A/9D/8P/6/zYAPAB5AIMAkwC6AP8AyABuAecAiwF8AVYB/gFXATICugEcAhkCQwIZAnECPAJiAm8CWAKrAisCbgKiAlYCRAJnAooC7wFyAi0CnwGOAmYBEQLGAXsBswGeAT4BbQE/AUoBJgEXAf4AJAHZAPAA5wABAbkATQG4ABEBBwEtAR8BUAEpAW0BaAF9AZMB2QGkASMCGQLxAZsCRgJbAqoCpwKxAgQD7gIIAzMDJQMhAzYDJQMvAykDOAMLAwcDBAPrApoCxAJrAl0CLQL/AbIBoAE6AUQB9gCKAI0AQAACAMv/cf9H/yr/uf7I/lv+af4c/hr+x/2E/Z/9Wv1P/Sf9A/0c/fz85/zw/OT81vwk/d78H/0k/Tj9gP1v/YP9r/3s/fT9Qf5G/pj+3v4F/xH/ef96/9n/FQA4AEoAwADlABEBUAFwAbMB0gEOAiICTAKaAosC9QLgAhADMgNLA2IDeAOOA5ED4wOrA+4D4wPxA/QDCgQNBOgDMgT/AxQE7wMJBO8D2gPVA9YDnQPBA4ADiQNbA1sDNQMcA+wCzAK8ApACVQJrAv4BIALXAbgBgAF4ASMBFwHeAKEAmABmAAoAFgDB/5b/ff8q/yD/7v6+/nv+k/4d/hn+9v2m/aP9hv0p/Tz9Av3T/NP8g/x+/D38PPzw++L7rPuP+3b7E/sV+9n6lPqh+jn6F/oN+qf5mflz+SH5Dfng+MT4kPiD+E74S/gv+B/4EfgJ+Pv37/cH+Nf3IPgN+Dn4Pvhp+JL4mPjC+O34C/lR+Yb5z/n4+Wr6nPrS+mD7Z/v/+0L8nvwH/Xb97P1E/sL+Nf+a/x4AiQAFAXIBxAFbArcCOwORAygEgQTRBFMFjQXzBUUGqgbdBjkHcAfCB+wHCghHCGsIcQicCJ4IoAibCJYIighkCEAIPgjgB8IHbgdFB90GnwYvBtsFkgUeBaYEXgSlA2oD3wJgAvABcAECAZgACQCs/xX/x/5E/vP9e/0o/fD8ffxC/OX7n/uC+y37Efva+sf6vvqf+pf6jfqY+pj6uvq4+uL6Bfs5+1r7r/u5+xv8TPyS/Ob8NP14/dv9Gf5y/s/+Gv9s/9H/IABnAMcAGwFIAbsB8wEwAncCvgIBA04DfQO8AwYEFgR7BH0EuQT1BPEERwUpBVsFigWTBY8FtAWUBb4FqgWgBZsF";function Bv(t){let e="";const o=t.byteLength;for(let r=0;r<o;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function sd(t){const e=atob(t),o=e.length,r=new Uint8Array(o);for(let s=0;s<o;s++)r[s]=e.charCodeAt(s);return r}function LD(t){const e=sd(t);return new Int16Array(e.buffer)}function UD(t){const e=t.reduce((s,c)=>s+c.length,0),o=new Int16Array(e);let r=0;for(const s of t)o.set(s,r),r+=s.length;return o}function zD(t,e,o=24e3,r=1){const s=new Int16Array(t.buffer,t.byteOffset,t.byteLength/2),c=s.length/r,A=e.createBuffer(r,c,o);for(let f=0;f<r;f++){const m=A.getChannelData(f);for(let g=0;g<c;g++)m[g]=s[g*r+f]/32768}return A}const _v=24e3,FD=3e5,Lv=1e4;async function KD(t){const{lines:e,audioContext:o,abortSignal:r,voiceName:s="Kore",onLineStart:c,onLineComplete:A,onStatusUpdate:f,onError:m}=t;if(!e.length)return{isComplete:!0,audioSegments:[]};let g;try{g=await ic()}catch(k){const b=k?.message||"Missing API key";return m?.(b),{isComplete:!1,error:b,audioSegments:[]}}const y=`You are a professional Text-to-Speech engine. Your ONLY task is to read the following text aloud, exactly as written, when the user says "Play". 
IMPORTANT RULES:
- Read EXACTLY what is written, character by character
- Speak each line clearly with a brief pause between lines
- Do NOT add any intro, outro, commentary, or acknowledgment
- Do NOT modify, translate, or interpret the text
- Just speak the text immediately
TEXT TO READ:
${e.map(k=>`[${k.langCode||""}] ${k.text}`).join(`

`)}`,S=or().audio.live,E={responseModalities:[Ja.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}},systemInstruction:{parts:[{text:y}]},outputAudioTranscription:{}},x=fa.logRequest("streamGeminiLiveTts",S,{lineCount:e.length,systemInstructionText:y});return new Promise(async k=>{let b=o.currentTime,M=!1,O=null,N=null,j=!1;const L=[];let H=!1,P=null;const _=[],B=[];let q=null;const Z=()=>{if(q!==null)return;const D=()=>{if(_.length===0){q=null;return}const te=o.currentTime;for(;_.length>0&&_[0].startTime<=te;){const se=_.shift();se&&c?.(se.lineIndex,se.text)}q=requestAnimationFrame(D)};q=requestAnimationFrame(D)},ne=(D,te,se)=>{if(P===null){B.push({lineIndex:D,text:te,startSample:se});return}const re=P+se/_v;_.push({lineIndex:D,text:te,startTime:re}),_.sort((ve,Me)=>ve.startTime-Me.startTime),Z()},U=[];let X=0;const F=[];let R=0,K="",V=null;const ge=()=>{for(M=!1,O&&O(),q!==null&&(cancelAnimationFrame(q),q=null);L.length>0;){const D=L.pop();try{D?.stop()}catch{}try{D?.disconnect()}catch{}}},me=D=>{j||(j=!0,k(D))},G=D=>{if(H)return;H=!0;const te=UD(U),se=[],re=D==="turn-complete";if(F.length>0&&te.length>0){let ve=0;const Me=[...new Set(F)].sort((Ve,ae)=>Ve-ae).filter(Ve=>Ve>0&&Ve<te.length);for(const Ve of Me)Ve>ve&&(se.push(te.slice(ve,Ve)),ve=Ve);re&&ve<te.length&&se.push(te.slice(ve))}else te.length>0&&re&&se.push(te);for(let ve=0;ve<se.length&&ve<e.length;ve++)A?.(ve,se[ve]);return{audioSegments:se}};try{N=await new ac({apiKey:g}).live.connect({model:S,config:E,callbacks:{onopen:()=>{f?.("CONNECTED / STREAMING")},onmessage:Ne=>{const nt=Ne.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;if(nt)try{const Te=LD(nt);U.push(Te),X+=Te.length,V===null&&(V=Math.min(R,e.length-1));const W=sd(nt),he=zD(W,o,_v),Se=o.createBufferSource();if(Se.buffer=he,Se.connect(o.destination),L.push(Se),Se.onended=()=>{const ue=L.indexOf(Se);ue!==-1&&L.splice(ue,1);try{Se.disconnect()}catch{}},b=Math.max(o.currentTime,b),P===null){P=b;const ue=Math.min(R,e.length-1);if(ue>=0&&e[ue]&&ne(ue,e[ue].text,0),B.length>0){for(const Ce of B)ne(Ce.lineIndex,Ce.text,Ce.startSample);B.length=0}}Se.start(b),b+=he.duration}catch(Te){console.warn("[GeminiLiveTts] Audio decode failed",Te)}if(Ne.serverContent?.outputTranscription?.text){K+=Ne.serverContent.outputTranscription.text;const W=(K.replace(/\r\n/g,`
`).replace(/\n+/g,`
`).match(/\n/g)||[]).length;if(W>R){const he=W-R;for(let Se=0;Se<he;Se++)F.push(X);if(V!==null)for(let Se=0;Se<he;Se++){const ue=R+Se+1;ue<e.length&&ne(ue,e[ue].text,X)}R=W}}if(Ne.serverContent?.turnComplete){ge();const Te=G("turn-complete");N.close(),x.complete({status:"complete",segmentCount:Te?.audioSegments.length||0,transcript:K}),me({isComplete:!0,audioSegments:Te?.audioSegments||[]})}},onclose:()=>{ge()},onerror:Ne=>{ge();const nt=Ne?.message||"Connection error";x.error({message:nt,transcript:K}),m?.(nt),me({isComplete:!1,error:nt,audioSegments:[]})}}}),M=!0,f?.("TRIGGERING...");const te=sd(_D);let se=0;const re=100,ve=Math.floor(Gv*re/1e3)*2,Me=Date.now();let Ve=null;Ve=setTimeout(()=>{if(M){ge(),N?.close();const Ne="Session timeout - no response from model";x.error({message:Ne,transcript:K}),m?.(Ne),me({isComplete:!1,error:Ne,audioSegments:[]})}},FD);const ae=setInterval(()=>{if(!M||!N){clearInterval(ae),Ve&&clearTimeout(Ve);return}const Ne=Date.now()-Me;if(Ne>Lv&&se>=te.length)return;let nt="";if(se<te.length){const Te=Math.min(se+ve,te.length),W=te.slice(se,Te);nt=Bv(W),se=Te}else if(Ne<=Lv){const Te=new Uint8Array(ve);nt=Bv(Te)}else return;try{N.sendRealtimeInput({media:{mimeType:`audio/pcm;rate=${Gv}`,data:nt}})}catch{ge(),clearInterval(ae),Ve&&clearTimeout(Ve)}},re);if(O=()=>{clearInterval(ae),Ve&&clearTimeout(Ve)},r){if(r.aborted){ge();try{N?.close()}catch{}const Ne=G("aborted");x.complete({status:"aborted",segmentCount:Ne?.audioSegments.length||0,transcript:K}),me({isComplete:!1,error:"ABORTED",audioSegments:Ne?.audioSegments||[]});return}r.addEventListener("abort",()=>{ge();try{N?.close()}catch{}const Ne=G("aborted");x.complete({status:"aborted",segmentCount:Ne?.audioSegments.length||0,transcript:K}),me({isComplete:!1,error:"ABORTED",audioSegments:Ne?.audioSegments||[]})},{once:!0})}}catch(D){ge();const te=D?.message||"Connection failed";x.error({message:te,transcript:K}),m?.(te),me({isComplete:!1,error:te,audioSegments:[]})}})}function Zi(t){const e=t.reduce((s,c)=>s+c.length,0),o=new Int16Array(e);let r=0;for(const s of t)o.set(s,r),r+=s.length;return o}function ql(t,e=24e3,o=1){const r=new ArrayBuffer(44+t.byteLength),s=new DataView(r);bl(s,0,"RIFF"),s.setUint32(4,36+t.byteLength,!0),bl(s,8,"WAVE"),bl(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,o,!0),s.setUint32(24,e,!0),s.setUint32(28,e*o*2,!0),s.setUint16(32,o*2,!0),s.setUint16(34,16,!0),bl(s,36,"data"),s.setUint32(40,t.byteLength,!0),new Uint8Array(r,44).set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength));const A=new Uint8Array(r);let f="";const m=A.byteLength,g=32768;for(let p=0;p<m;p+=g)f+=String.fromCharCode.apply(null,A.subarray(p,Math.min(p+g,m)));return"data:audio/wav;base64,"+btoa(f)}function bl(t,e,o){for(let r=0;r<o.length;r++)t.setUint8(e+r,o.charCodeAt(r))}function G0(t,e=16e3,o=500,r=150){const s=Math.floor(r/1e3*e);let c=-1;for(let g=0;g<t.length;g++)if(Math.abs(t[g])>o){c=g;break}if(c===-1)return new Int16Array(0);let A=-1;for(let g=t.length-1;g>=c;g--)if(Math.abs(t[g])>o){A=g;break}const f=Math.max(0,c-s),m=Math.min(t.length,A+s);return t.slice(f,m)}const HD=t=>{const{onQueueComplete:e,onQueueStart:o,pauseSttForPlayback:r}=t||{},s=typeof window<"u"&&(!!(window.AudioContext||window.webkitAudioContext)||typeof Audio<"u"),[c,A]=T.useState(!1),[f,m]=T.useState(null),g=T.useRef([]),p=T.useRef(null),y=T.useRef(null),S=T.useRef(!1),E=T.useRef(0),x=T.useRef(null),k=T.useRef(!1),b=T.useRef({onQueueComplete:e,onQueueStart:o,pauseSttForPlayback:r});T.useEffect(()=>{b.current={onQueueComplete:e,onQueueStart:o,pauseSttForPlayback:r}},[e,o,r]);const M=T.useCallback(()=>{A(!1),m(null),b.current.onQueueComplete?.()},[]),O=T.useCallback(async()=>{if(y.current&&y.current.state==="closed"&&(y.current=null),!y.current){if(k.current){await new Promise(q=>setTimeout(q,50));const B=y.current;if(B)return B.state==="suspended"&&await B.resume(),B}k.current=!0;try{const B=window.AudioContext||window.webkitAudioContext;y.current=new B({sampleRate:24e3})}finally{k.current=!1}}const _=y.current;return _.state==="suspended"&&await _.resume(),_},[]),N=T.useCallback(async()=>{if(S.current)return;const _=g.current;if(_.length===0){M();return}const B=[];for(const q of _){if(q.provider!=="gemini-live"||q.audioDataUrl||q.cachedAudio)break;B.push(q)}if(B.length!==0){S.current=!0,A(!0),b.current.pauseSttForPlayback?.();try{const q=await O(),Z=B.map(U=>({text:U.text,langCode:U.langCode,voiceName:U.voiceName,cacheKey:U.cacheKey,onAudioCached:U.onAudioCached?X=>{U.onAudioCached&&!U.cacheNotified&&(U.onAudioCached(X,{cacheKey:U.cacheKey,provider:"gemini-live",langCode:U.langCode,fromCache:!1}),U.cacheNotified=!0)}:void 0})),ne=new AbortController;x.current=ne,await KD({lines:Z,audioContext:q,voiceName:B[0]?.voiceName,abortSignal:ne.signal,onLineStart:(U,X)=>{m(X)},onLineComplete:(U,X)=>{const F=B[U];if(F&&X&&X.length>0){const R=ql(X,24e3);F.onAudioCached&&!F.cacheNotified&&(F.onAudioCached(R,{cacheKey:F.cacheKey,provider:"gemini-live",langCode:F.langCode,fromCache:!1}),F.cacheNotified=!0)}},onError:U=>{console.error("[GeminiLiveTts] Error:",U)}}),g.current=g.current.filter(U=>!B.includes(U))}catch(q){console.error("[GeminiLiveTts] Exception:",q)}finally{S.current=!1,x.current=null,g.current.length>0?j():M()}}},[O,M]),j=T.useCallback(async()=>{const _=g.current;if(_.length===0){!p.current&&!S.current&&M();return}const B=_[0],q=()=>{_.length&&_[0].id===B.id&&_.shift()};if(!B.audioDataUrl&&B.cachedAudio&&(B.audioDataUrl=B.cachedAudio),B.provider!=="gemini-live"&&(B.provider="gemini-live"),!B.audioDataUrl){N();return}if(!p.current&&(A(!0),m(B.text),b.current.pauseSttForPlayback?.(),B.audioDataUrl)){const Z=new Audio(B.audioDataUrl);p.current=Z,Z.onended=()=>{p.current=null,q(),j()},Z.onerror=()=>{p.current=null,q(),j()};try{await Z.play()}catch{p.current=null,q(),j()}}},[M,N]),L=T.useCallback((_,B)=>{const q=typeof _=="string"?[{text:_,langCode:B}]:_,Z="gemini-live";g.current.length===0&&b.current.onQueueStart?.(),q.forEach(ne=>{ne.text.trim()&&g.current.push({id:`tts-${Date.now()}-${E.current++}`,text:ne.text,langCode:ne.langCode||B,voiceName:ne.voiceName,provider:Z,cacheKey:ne.cacheKey,cachedAudio:ne.cachedAudio,onAudioCached:ne.onAudioCached})}),j()},[j]),H=T.useCallback(()=>{if(p.current&&(p.current.pause(),p.current=null),S.current){try{x.current?.abort()}catch{}S.current=!1,x.current=null}if(y.current&&y.current.state==="running")try{y.current.suspend()}catch{}if(y.current){try{y.current.close()}catch{}y.current=null}S.current=!1,g.current=[],M()},[M]);T.useEffect(()=>()=>{if(x.current){try{x.current.abort()}catch{}x.current=null}if(p.current){try{p.current.pause()}catch{}p.current=null}if(y.current){try{y.current.close()}catch{}y.current=null}g.current=[]},[]);const P=T.useCallback(()=>g.current.length>0||S.current,[]);return T.useMemo(()=>({isSpeechSynthesisSupported:s,isSpeaking:c,speakingUtteranceText:f,speak:L,stopSpeaking:H,hasPendingQueueItems:P}),[s,c,f,L,H,P])},QD="/MaestroTutor/assets/floatToInt16Processor.worklet-CZdRWuEu.js",B0=QD,_0="float-to-int16-processor";let OD=0;function VD(t){let e="";const o=t.byteLength;for(let r=0;r<o;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function qD(){const[t,e]=T.useState(""),[o,r]=T.useState(!1),[s,c]=T.useState(null),A=T.useRef(null),f=T.useRef(null),m=T.useRef(null),g=T.useRef(null),p=T.useRef([]),y=T.useRef(0),S=T.useRef(0),E=T.useRef(null),x=T.useRef(!1),k=T.useRef(0),b=T.useRef(!1),M=T.useRef(""),O=T.useRef(""),N=T.useRef(""),j=T.useCallback(()=>{if(p.current.length===0)return null;let Z=Zi(p.current);return Z.length>0&&(Z=G0(Z,16e3)),p.current=[],Z},[]),L=T.useCallback(async()=>{if(!b.current){if(b.current=!0,k.current=0,g.current){g.current.port.onmessage=null;try{g.current.disconnect()}catch{}g.current=null}if(m.current&&(m.current.getTracks().forEach(Z=>{try{Z.stop()}catch{}}),m.current=null),f.current){const Z=f.current;if(f.current=null,Z.state!=="closed")try{await Z.close()}catch{}}if(A.current){const Z=A.current;A.current=null;try{typeof Z.close=="function"&&Z.close()}catch{}}p.current=[],b.current=!1}},[]),H=T.useCallback(()=>{L(),r(!1)},[L]),P=T.useCallback(()=>{const Z=M.current,ne=N.current.trim()||O.current.trim();e(Z+(Z&&ne?" ":"")+ne)},[]),_=T.useCallback(async Z=>{if(!Z.audioWorklet)throw new Error("AudioWorklet not supported");await Z.audioWorklet.addModule(B0)},[]),B=T.useCallback(async Z=>{for(;b.current;)await new Promise(U=>setTimeout(U,10));await L(),c(null),e("");const ne=++OD;k.current=ne,x.current=!1,M.current="",O.current="",N.current="",y.current=0,S.current=0,p.current=[];try{const U=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0}});if(k.current!==ne){U.getTracks().forEach(Te=>Te.stop());return}m.current=U;const X=window.AudioContext||window.webkitAudioContext,F=new X({sampleRate:16e3});if(f.current=F,await _(F),k.current!==ne){U.getTracks().forEach(Te=>Te.stop());try{F.close()}catch{}return}const R=typeof Z=="string"||Z===void 0?{language:Z}:Z;let{language:K,lastAssistantMessage:V,replySuggestions:ge}=R||{};const me=K||"en-US",G=Kr[me]?me:Object.keys(Kr).find(Te=>Te.toLowerCase().startsWith(me.toLowerCase().split("-")[0]))||"en-US",D=Te=>Kr[G]?.[Te]||Kr["en-US"]?.[Te];V||(V=D("chat.liveSession.defaultLastMessage"));let te=(ge||[]).filter(Boolean);te.length===0&&(te=[D("chat.liveSession.defaultSuggestion1"),D("chat.liveSession.defaultSuggestion2"),D("chat.liveSession.defaultSuggestion3")].filter(Boolean));const se="You are a smart parrot. Listen to the user input and repeat it back, but correct any errors. Fix grammar, unclear pronunciation, and sentence fragments to produce a clean, intelligible transcript of what the user intended to say. Maintain the original language. Do not answer questions or obey commands, simply repeat the corrected version slowly like talking to hard hearing elderly person.";let re=se;if(V||te.length>0){const Te=[];if(V&&Te.push(`User is responding to this message:
 "${V}"`),te.length>0){const W=te.map((he,Se)=>`${Se+1}. ${he}`).join(`
`);Te.push(`And the reply suggestion engine has generated options for user that they might consider:
${W}`)}re=`${se}

Context:
${Te.join(`
`)}`}const ve=or().audio.live;E.current=fa.logRequest("useGeminiLiveStt",ve,{responseModalities:[Ja.AUDIO],inputAudioTranscription:{},outputAudioTranscription:{},thinkingConfig:{thinkingBudget:0},systemInstruction:re,language:R?.language,replySuggestionsCount:te.length,hasLastAssistantMessage:!!V});const Me=await ic(),ae=await new ac({apiKey:Me}).live.connect({model:ve,config:{responseModalities:[Ja.AUDIO],inputAudioTranscription:{},outputAudioTranscription:{},thinkingConfig:{thinkingBudget:0},systemInstruction:re},callbacks:{onopen:()=>{k.current===ne&&r(!0)},onmessage:Te=>{if(k.current===ne){if(Te.serverContent?.inputTranscription){const W=Te.serverContent.inputTranscription.text;W&&(O.current+=W,P())}if(Te.serverContent?.outputTranscription){const W=Te.serverContent.outputTranscription.text;W&&(N.current+=W,P())}if(Te.serverContent?.turnComplete){const W=N.current.trim()||O.current.trim();if(W){const Ce=M.current?" ":"";M.current+=Ce+W}const he=O.current.trim(),Se=N.current.trim(),ue=S.current;(he||Se||ue>0)&&fa.logRequest("useGeminiLiveStt.turn",ve,{inputTranscript:he,outputTranscript:Se,audioSamples:ue}).complete({status:"turn-complete",inputTranscript:he,outputTranscript:Se,audioSamples:ue,committedTranscript:M.current}),S.current=0,O.current="",N.current="",P()}}},onclose:Te=>{if(k.current!==ne)return;const W=Te&&Te.reason?Te.reason:"Connection closed by server";c(W),E.current&&!x.current&&(x.current=!0,E.current.complete({status:"closed",committedTranscript:M.current,audioSamples:y.current})),r(!1)},onerror:Te=>{k.current===ne&&(console.error("Gemini Live STT error:",Te),E.current&&!x.current&&(x.current=!0,E.current.error({message:Te?.message||"Connection error",committedTranscript:M.current,audioSamples:y.current})),c(Te.message||"Connection error"),H())}}});if(A.current=ae,k.current!==ne){try{ae.close()}catch{}return}const Ne=F.createMediaStreamSource(U),nt=new AudioWorkletNode(F,_0);g.current=nt,nt.port.onmessage=Te=>{if(k.current!==ne)return;const W=Te.data;if(W&&W.length>0&&(p.current.push(W),y.current+=W.length,S.current+=W.length,A.current)){const he=new Uint8Array(W.buffer),Se={data:VD(he),mimeType:"audio/pcm;rate=16000"};try{A.current.sendRealtimeInput({media:Se})}catch{}}},Ne.connect(nt)}catch(U){console.error("STT Start Error",U),E.current&&!x.current&&(x.current=!0,E.current.error({message:U?.message||"Failed to start Gemini Live STT",committedTranscript:M.current,audioSamples:y.current})),c(U.message||"Failed to start Gemini Live STT"),r(!1),L()}},[L,H,_,P]),q=T.useRef(L);return q.current=L,T.useEffect(()=>()=>{q.current()},[]),{start:B,stop:H,transcript:t,isListening:o,error:s,getRecordedAudio:j}}const YD=t=>{const{onEngineCycleEnd:e,onSpeechQueueCompleted:o}=t||{},[r,s]=T.useState(!1),[c,A]=T.useState(""),[f,m]=T.useState(null),g=typeof navigator<"u"&&!!navigator.mediaDevices?.getUserMedia,p=T.useRef(!1),y=T.useRef(e);T.useEffect(()=>{y.current=e},[e]);const S=qD();T.useEffect(()=>{S.isListening&&A(S.transcript)},[S.transcript,S.isListening]),T.useEffect(()=>{s(S.isListening),S.error&&m(S.error)},[S.isListening,S.error]);const E=T.useCallback(()=>{const q=t?.isGlobalSttEnabled?.()??!1;(r||q)&&(p.current=!0,S.stop())},[r,S,t]),{isSpeaking:x,speak:k,stopSpeaking:b,speakingUtteranceText:M,isSpeechSynthesisSupported:O,hasPendingQueueItems:N}=HD({pauseSttForPlayback:E,onQueueComplete:()=>{o?.(),p.current&&t?.isGlobalSttEnabled?.()?(p.current=!1,t.getGlobalSttLanguage&&setTimeout(()=>{t.isGlobalSttEnabled?.()&&L(t.getGlobalSttLanguage())},100)):p.current=!1}}),j=T.useRef(!1);T.useEffect(()=>{j.current&&!S.isListening&&(p.current||y.current?.(!!S.error)),j.current=S.isListening},[S.isListening,S.error]);const L=T.useCallback(q=>{if(x||N()){p.current=!0;return}S.start(q)},[x,N,S]),H=T.useCallback(()=>{p.current=!1,S.stop()},[S]),P=T.useCallback(()=>{A("")},[]),_=T.useCallback(()=>{const q=S.getRecordedAudio();return q&&q.length>0?{dataUrl:ql(q,16e3),provider:"gemini",langCode:t?.getGlobalSttLanguage?t.getGlobalSttLanguage():"en",transcript:c}:null},[S,t,c]),B=T.useRef(S.stop);return B.current=S.stop,T.useEffect(()=>()=>{B.current()},[]),{isSpeaking:x,speak:k,stopSpeaking:b,isSpeechSynthesisSupported:O,isListening:r,transcript:c,startListening:L,stopListening:H,sttError:f,isSpeechRecognitionSupported:g,clearTranscript:P,speakingUtteranceText:M,claimRecordedUtterance:_,hasPendingQueueItems:N}},Uv=16e3,zv=24e3;let jD=0;function JD(t){let e="";const o=t.byteLength;for(let r=0;r<o;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function XD(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return{data:JD(e),mimeType:"audio/pcm;rate=16000"}}function L0(t){const e=atob(t),o=e.length,r=new Uint8Array(o);for(let s=0;s<o;s++)r[s]=e.charCodeAt(s);return r}function WD(t){const e=L0(t);return new Int16Array(e.buffer)}async function ZD(t,e,o,r){const s=new Int16Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/2)),c=Math.floor(s.length/r),A=e.createBuffer(r,c,o);for(let f=0;f<r;f++){const m=A.getChannelData(f);for(let g=0;g<c;g++){const p=s[g*r+f];m[g]=p/32768}}return A}const $D=t=>new Promise((e,o)=>{const r=new FileReader;r.onloadend=()=>{const s=r.result,[,c]=s.split(",",2);e(c||"")},r.onerror=o,r.readAsDataURL(t)});function eN(t={}){const[,e]=T.useState("idle"),o=T.useRef(null),r=T.useRef(null),s=T.useRef(null),c=T.useRef(null),A=T.useRef(null),f=T.useRef(null),m=T.useRef(null),g=T.useRef(null),p=T.useRef(0),y=T.useRef(new Set),S=T.useRef(null),E=T.useRef(!1),x=T.useRef(""),k=T.useRef(null),b=T.useRef(0),M=T.useRef(!1),O=T.useRef(""),N=T.useRef(""),j=T.useRef([]),L=T.useRef([]),H=T.useRef(0),P=T.useRef([]),_=T.useRef(0),B=T.useRef(t);T.useEffect(()=>{B.current=t},[t]);const q=T.useCallback(V=>{e(V),B.current.onStateChange?.(V)},[]),Z=T.useCallback(()=>{y.current.forEach(V=>{try{V.stop()}catch{}}),y.current.clear(),p.current=0},[]),ne=T.useCallback(async()=>{if(!M.current){if(M.current=!0,b.current=0,r.current&&(window.clearInterval(r.current),r.current=null),g.current){try{g.current.port.onmessage=null,g.current.disconnect()}catch{}g.current=null}if(A.current&&(A.current.getTracks().forEach(V=>{try{V.stop()}catch{}}),A.current=null),s.current){const V=s.current;if(s.current=null,V.state!=="closed")try{await V.close()}catch{}}if(c.current){Z();const V=c.current;if(c.current=null,V.state!=="closed")try{await V.close()}catch{}}if(f.current){try{f.current.parentElement===document.body&&f.current.style.position==="fixed"&&(f.current.pause(),f.current.srcObject=null,document.body.removeChild(f.current))}catch{}f.current=null}if(m.current=null,o.current){const V=o.current;o.current=null;try{typeof V.close=="function"&&V.close()}catch{}}O.current="",N.current="",j.current=[],L.current=[],H.current=0,P.current=[],_.current=0,k.current=null,M.current=!1}},[Z]),U=T.useCallback(async V=>{if(!V.audioWorklet||typeof V.audioWorklet.addModule!="function")throw new Error("AudioWorklet is not supported");await V.audioWorklet.addModule(B0)},[]),X=T.useCallback(async(V,ge)=>{if(ge&&ge.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&ge.videoWidth>0&&ge.videoHeight>0)return f.current=ge,ge;const me=ge??document.createElement("video");return me.muted=!0,me.playsInline=!0,me.srcObject=V,ge||(me.style.position="fixed",me.style.width="0px",me.style.height="0px",me.style.opacity="0",document.body.appendChild(me)),await me.play().catch(()=>{}),(me.videoWidth===0||me.videoHeight===0)&&await new Promise(G=>{const D=()=>{me.removeEventListener("loadedmetadata",D),G()};me.addEventListener("loadedmetadata",D)}),f.current=me,me},[]),F=T.useCallback(async V=>{const{stream:ge,videoElement:me,systemInstruction:G,voiceName:D}=V;for(;M.current;)await new Promise(re=>setTimeout(re,10));q("connecting"),await ne();const te=++jD;b.current=te;const se=async()=>{if(b.current!==te){for(;M.current;)await new Promise(re=>setTimeout(re,10));return await ne(),!0}return!1};try{if(!ge||!ge.active)throw new Error("No active stream provided");if(await X(ge,me),await se())return;const re=document.createElement("canvas");m.current=re;const ve=window.AudioContext||window.webkitAudioContext,Me=new ve({sampleRate:Uv});s.current=Me;const Ve=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0}});if(A.current=Ve,await se())return;const ae=Me.createMediaStreamSource(Ve);if(await U(Me),await se())return;const Ne=new AudioWorkletNode(Me,_0,{numberOfInputs:1,numberOfOutputs:0});g.current=Ne;const nt=new ve({sampleRate:zv});c.current=nt;const Te=or().audio.live;x.current=Te,E.current=!1,S.current=fa.logRequest("useGeminiLiveConversation",Te,{responseModalities:[Ja.AUDIO],systemInstruction:G||"",inputAudioTranscription:{},outputAudioTranscription:{}});const W=await ic(),Se=await new ac({apiKey:W}).live.connect({model:Te,config:{responseModalities:[Ja.AUDIO],systemInstruction:G,inputAudioTranscription:{},outputAudioTranscription:{},speechConfig:D?{voiceConfig:{prebuiltVoiceConfig:{voiceName:D}}}:void 0},callbacks:{onopen:()=>{b.current===te&&q("active")},onmessage:async ue=>{if(b.current!==te)return;const Ce=ue.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;if(Ce&&c.current)try{const Pe=WD(Ce);L.current.push(Pe),H.current+=Pe.length;const Ge=c.current,be=await ZD(L0(Ce),Ge,zv,1),we=Ge.createBufferSource();we.buffer=be,we.connect(Ge.destination);const je=Math.max(p.current,Ge.currentTime);we.start(je),p.current=je+be.duration,y.current.add(we),we.addEventListener("ended",()=>y.current.delete(we))}catch(Pe){console.warn("Audio decode failed",Pe)}if(ue.serverContent?.inputTranscription?.text&&(O.current+=ue.serverContent.inputTranscription.text),ue.serverContent?.outputTranscription?.text){const Pe=ue.serverContent.outputTranscription.text;N.current+=Pe;const be=(N.current.match(/\n/g)||[]).length;if(be>_.current){const we=be-_.current;for(let je=0;je<we;je++)P.current.push(H.current);_.current=be}}if(ue.serverContent?.turnComplete){const Pe=O.current.trim(),Ge=N.current.trim();let be=Zi(j.current);be.length>0&&(be=G0(be,Uv));const we=Zi(L.current),je=[];if(P.current.length>0&&we.length>0){let Rt=0;const gt=[...new Set(P.current)].sort(($e,mt)=>$e-mt).filter($e=>$e>0&&$e<we.length);for(const $e of gt)$e>Rt&&(je.push(we.slice(Rt,$e)),Rt=$e);Rt<we.length&&je.push(we.slice(Rt))}else we.length>0&&je.push(we);const at=O.current,qe=N.current;if(Ge){let Rt=Pe,gt=be,$e=at;const mt=k.current;mt&&(Rt=mt.text||Pe,$e=mt.transcript||at,mt.audio.length>0&&be.length>0?gt=Zi([mt.audio,be]):mt.audio.length>0&&(gt=mt.audio),k.current=null),B.current.onTurnComplete?.(Rt,Ge,gt,je),S.current&&!E.current&&S.current.complete({status:"turn-complete",userText:Rt,modelText:Ge,inputTranscript:$e,outputTranscript:qe,modelAudioLinesCount:je.length,userAudioSamples:gt.length}),fa.logRequest("useGeminiLiveConversation.turn",x.current||"gemini-live",{inputTranscript:$e,outputTranscript:qe}).complete({status:"turn-complete",userText:Rt,modelText:Ge,inputTranscript:$e,outputTranscript:qe,modelAudioLinesCount:je.length,userAudioSamples:gt.length})}else{if(Pe||be.length>0||at)if(k.current){const Rt=k.current,gt=[Rt.text,Pe].filter(Boolean).join(`
`).trim(),$e=[Rt.transcript,at].filter(Boolean).join(" ").trim(),mt=Zi([Rt.audio,be]);k.current={text:gt,transcript:$e,audio:mt}}else k.current={text:Pe,transcript:at,audio:be};S.current&&!E.current&&S.current.complete({status:"no-model-response",userText:Pe,inputTranscript:at,modelAudioLinesCount:je.length,userAudioSamples:be.length})}O.current="",N.current="",j.current=[],L.current=[],H.current=0,P.current=[],_.current=0}ue.serverContent?.interrupted&&(Z(),N.current="",L.current=[],H.current=0,P.current=[],_.current=0)},onclose:()=>{b.current===te&&(o.current=null,S.current&&!E.current&&(E.current=!0,S.current.complete({status:"closed",inputTranscript:O.current,outputTranscript:N.current})),q("idle"),ne())},onerror:ue=>{if(b.current!==te)return;q("error");let Ce="Connection error";try{ue instanceof Error?Ce=ue.message:typeof ue=="string"?Ce=ue:ue&&typeof ue=="object"&&(ue.type==="error"&&!ue.message?Ce="Connection Failed: Network or API Error":ue.message?Ce=String(ue.message):Ce=JSON.stringify(ue))}catch{Ce="Unknown Connection Error"}S.current&&!E.current&&(E.current=!0,S.current.error({message:Ce,inputTranscript:O.current,outputTranscript:N.current})),B.current.onError?.(Ce),ne()}}});if(o.current=Se,b.current!==te){try{Se.close()}catch{}return}Ne.port.onmessage=ue=>{if(b.current!==te)return;const Ce=ue.data;if(!(!(Ce instanceof Int16Array)||!Ce.length)){j.current.push(Ce.slice());try{o.current?.sendRealtimeInput({media:XD(Ce)})}catch{}}},ae.connect(Ne),r.current=window.setInterval(()=>{if(b.current!==te)return;const ue=o.current,Ce=f.current,Pe=m.current;if(!ue||!Ce||!Pe||Ce.videoWidth===0)return;const Ge=Pe.getContext("2d");Ge&&(Pe.width=Ce.videoWidth,Pe.height=Ce.videoHeight,Ge.drawImage(Ce,0,0),Pe.toBlob(async be=>{if(be&&o.current){const we=await $D(be);o.current.sendRealtimeInput({media:{data:we,mimeType:"image/jpeg"}})}},"image/jpeg",.5))},1e3)}catch(re){q("error"),S.current&&!E.current&&(E.current=!0,S.current.error({message:re instanceof Error?re.message:String(re),inputTranscript:O.current,outputTranscript:N.current})),B.current.onError?.(re instanceof Error?re.message:String(re)),await ne()}},[q,ne,Z,U,X]),R=T.useCallback(async()=>{q("idle"),S.current&&!E.current&&(E.current=!0,S.current.complete({status:"stopped",inputTranscript:O.current,outputTranscript:N.current})),await ne()},[ne,q]),K=T.useRef(ne);return K.current=ne,T.useEffect(()=>()=>{K.current()},[]),{start:F,stop:R}}const tN=t=>{const{upsertMessageTtsCache:e,upsertSuggestionTtsCache:o,setMessages:r}=t,s=Q(ae=>ae.setTranscript),c=Q(ae=>ae.setSttError),A=Q(ae=>ae.setSpeakingUtteranceText),f=Q(ae=>ae.addActivityToken),m=Q(ae=>ae.removeActivityToken),g=T.useRef(!1),p=Q(ae=>ae.setMessages),y=Q(ae=>ae.setRecordedUtterancePending),S=Q(ae=>ae.setPendingRecordedAudioMessageId),E=Q(ae=>ae.setSttInterruptedBySend),x=r||p,k=T.useMemo(()=>In(Q.getState,ae=>ae.settings),[]),b=T.useMemo(()=>In(Q.getState,ae=>ae.messages),[]),M=T.useMemo(()=>In(Q.getState,$a),[]),O=T.useMemo(()=>In(Q.getState,ja),[]),N=T.useMemo(()=>In(Q.getState,ae=>ae.replySuggestions),[]),j=T.useMemo(()=>El(Q.getState,ae=>ae.lastFetchedSuggestionsFor,ae=>Q.getState().setLastFetchedSuggestionsFor(ae)),[]),L=T.useMemo(()=>El(Q.getState,ae=>ae.recordedUtterancePending,y),[y]),H=T.useMemo(()=>El(Q.getState,ae=>ae.pendingRecordedAudioMessageId,S),[S]),P=T.useMemo(()=>El(Q.getState,ae=>ae.sttInterruptedBySend,E),[E]),_=T.useRef(null),B=T.useRef(null),{isSpeaking:q,speak:Z,stopSpeaking:ne,isSpeechSynthesisSupported:U,isListening:X,transcript:F,startListening:R,stopListening:K,sttError:V,isSpeechRecognitionSupported:ge,clearTranscript:me,speakingUtteranceText:G,claimRecordedUtterance:D,hasPendingQueueItems:te}=YD({onEngineCycleEnd:ae=>{k.current.stt.enabled&&!ae&&!k.current.isSuggestionMode&&!O.current&&!g.current?setTimeout(()=>{k.current.stt.enabled&&re(k.current.stt.language)},100):ae&&console.warn("STT cycle ended with error. STT will not automatically restart unless manually toggled.")},isGlobalSttEnabled:T.useCallback(()=>k.current.stt.enabled,[]),getGlobalSttLanguage:T.useCallback(()=>k.current.stt.language,[]),onSpeechQueueCompleted:T.useCallback(()=>{g.current=!1,P.current&&k.current.stt.enabled&&!O.current&&setTimeout(()=>{k.current.stt.enabled&&!O.current&&(re(k.current.stt.language),P.current=!1)},100)},[]),onRecordedUtteranceReady:T.useCallback(ae=>{if(!ae||typeof ae.dataUrl!="string"||ae.dataUrl.length===0||ae.dataUrl.length>Zr){L.current=null,H.current=null;return}L.current=ae;const Ne=H.current;Ne&&(H.current=null,x(nt=>nt.map(Te=>Te.id===Ne?{...Te,recordedUtterance:ae}:Te)),L.current=null)},[x])}),se=T.useCallback(()=>{const ae=b.current||[];let Ne;for(let Te=ae.length-1;Te>=0;Te-=1)if(ae[Te]?.role==="assistant"){Ne=ae[Te]?.text||ae[Te]?.rawAssistantResponse||"";break}const nt=(N.current||[]).map(Te=>Te?.target||Te?.native).filter(Boolean);return{lastAssistantMessage:Ne,replySuggestions:nt}},[]),re=T.useCallback(ae=>{const Ne=se();if(typeof ae=="string"||ae===void 0){R({language:ae,...Ne});return}R({...Ne,...ae})},[se,R]);T.useEffect(()=>{g.current=q,q&&!_.current?_.current=f(rn.TTS,Pt.SPEAK):!q&&_.current&&(m(_.current),_.current=null)},[q,f,m]),T.useEffect(()=>{X&&!B.current?B.current=f(rn.STT,Pt.LISTEN):!X&&B.current&&(m(B.current),B.current=null)},[X,f,m]),T.useEffect(()=>{s(F)},[F,s]),T.useEffect(()=>{c(V)},[V,c]),T.useEffect(()=>{A(G)},[G,A]);const ve=T.useCallback((ae,Ne)=>{const nt="gemini-live",Te=k.current.tts.voiceName||"Kore";return ae.map(W=>{const he=(W.text||"").trim(),Se=W.langCode||Ne,ue=W.context;let Ce=W.cacheKey,Pe=W.cachedAudio,Ge=W.onAudioCached;const be=W.voiceName||Te;if(!he)return{...W,text:he,langCode:Se};if(!Ce&&ue&&ue.source==="message"&&ue.messageId){Ce=id(he,Se,nt,be);const we=b.current.find(je=>je.id===ue.messageId);if(Pe=Pe||NA(we?.ttsAudioCache,Ce),console.debug(`[TTS Cache] LOOKUP key=${Ce.substring(0,20)}... text="${he.substring(0,30)}..." voice=${be} hit=${!!Pe} cacheSize=${we?.ttsAudioCache?.length||0}`),!Ge){const je=ue.messageId;Ge=at=>{Ce&&e(je,{key:Ce,langCode:Se,provider:nt,audioDataUrl:at,updatedAt:Date.now(),voiceName:be})}}}else if(!Ce&&ue&&ue.source==="suggestion"&&ue.messageId&&typeof ue.suggestionIndex=="number"){const we=ue.suggestionIndex;if(we>=0){Ce=id(he,Se,nt,be);const je=b.current.find(at=>at.id===ue.messageId);if(Pe=Pe||NA(je?.replySuggestions?.[we]?.ttsAudioCache,Ce),!Pe&&j.current===ue.messageId){const at=N?.current?.[we];Pe=Pe||NA(at?.ttsAudioCache,Ce)}if(console.debug(`[TTS Cache] LOOKUP suggestion key=${Ce.substring(0,20)}... text="${he.substring(0,30)}..." voice=${be} hit=${!!Pe}`),!Ge){const at=ue.messageId;Ge=qe=>{Ce&&o(at,we,{key:Ce,langCode:Se,provider:nt,audioDataUrl:qe,updatedAt:Date.now(),voiceName:be})}}}}return{...W,text:he,langCode:Se,cacheKey:Ce,cachedAudio:Pe,onAudioCached:Ge,voiceName:be}})},[e,o,j]),Me=T.useCallback(ae=>{const Ne=M.current;if(!Ne)return;const nt=k.current.tts.voiceName||"Kore";if(ae.role==="assistant"){const Te=[],W=Bn(Ne.targetLanguageCode),he=Bn(Ne.nativeLanguageCode);let Se=W||"es";if(ae.translations&&ae.translations.length>0)k.current.tts.speakNative?ae.translations.forEach(ue=>{ue.target&&ue.target.trim()&&Te.push({text:ue.target,langCode:W,context:{source:"message",messageId:ae.id},voiceName:nt}),ue.native&&ue.native.trim()&&Te.push({text:ue.native,langCode:he,context:{source:"message",messageId:ae.id},voiceName:nt})}):ae.translations.forEach(ue=>{ue.target&&ue.target.trim()&&Te.push({text:ue.target,langCode:W,context:{source:"message",messageId:ae.id},voiceName:nt})});else if(ae.rawAssistantResponse){let ue=ae.rawAssistantResponse,Ce=W;!ue.match(/[]/i)&&he.startsWith("en")&&ue.match(/[a-zA-Z]/)&&k.current.tts.speakNative&&(Ce=he),ue.trim()&&(Te.push({text:ue.trim(),langCode:Ce,context:{source:"message",messageId:ae.id},voiceName:nt}),Se=Ce)}else if(ae.text){let ue=ae.text,Ce=W;!ue.match(/[]/i)&&he.startsWith("en")&&ue.match(/[a-zA-Z]/)&&k.current.tts.speakNative&&(Ce=he),ue.trim()&&(Te.push({text:ue.trim(),langCode:Ce,context:{source:"message",messageId:ae.id},voiceName:nt}),Se=Ce)}if(Te.length>0){const ue=ve(Te,Se);Z(ue,Se)}}else if(ae.text&&(ae.role==="error"||ae.role==="status")){const Te=ae.text,W=Bn(Ne.nativeLanguageCode)||"en";if(Te.trim()){const he=ve([{text:Te.trim(),langCode:W,context:{source:"adHoc"}}],W);Z(he,W)}}},[ve,Z,k,M]),Ve=T.useCallback((ae,Ne)=>{const Te=ve(typeof ae=="string"?[{text:ae,langCode:Ne,context:{source:"adHoc"}}]:ae,Ne);Z(Te,Ne)},[ve,Z]);return{isSpeaking:q,speak:Z,stopSpeaking:ne,isSpeechSynthesisSupported:U,speakingUtteranceText:G,hasPendingQueueItems:te,isListening:X,transcript:F,startListening:re,stopListening:K,sttError:V,isSpeechRecognitionSupported:ge,clearTranscript:me,claimRecordedUtterance:D,speechIsSpeakingRef:g,recordedUtterancePendingRef:L,pendingRecordedAudioMessageRef:H,sttInterruptedBySendRef:P,prepareSpeechPartsWithCache:ve,speakMessage:Me,speakWrapper:Ve}},nN=({transcript:t,attachedImageBase64:e,attachedImageMimeType:o,clearTranscript:r,handleCreateSuggestion:s,handleSendMessageInternal:c,stableMs:A})=>{const f=T.useRef(null),m=T.useRef(""),g=T.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null),m.current=""},[]);return T.useEffect(()=>{const{settings:p}=Q.getState();if(!p.stt.enabled){g();return}const y=(t||"").trim();if(g(),!(y.length<2))return m.current=y,f.current=window.setTimeout(()=>{const S=m.current,E=(t||"").trim(),x=Q.getState(),k=ja(x),b=$r(x);x.settings.stt.enabled&&!k&&!b&&E.length>=2&&E===S&&(r(),x.settings.isSuggestionMode?s(E):c(E,e||void 0,o||void 0,"user")),g()},A),()=>{g()}},[t,e,o,r,s,c,A,g]),{clearAutoSend:g}},aN=({isListening:t,startListening:e})=>{const o=T.useRef(!1),r=T.useRef(null);T.useEffect(()=>{const s=o.current;if(o.current=t,r.current!==null&&(clearTimeout(r.current),r.current=null),s&&!t){const{settings:c}=Q.getState();c.isSuggestionMode&&c.stt.enabled&&(r.current=window.setTimeout(()=>{r.current=null;const A=Q.getState();A.settings.stt.enabled&&A.settings.isSuggestionMode&&e(A.settings.stt.language)},100))}return()=>{r.current!==null&&(clearTimeout(r.current),r.current=null)}},[t,e])},oN=t=>{const{t:e,setSettings:o,addMessage:r,updateMessage:s,getHistoryRespectingBookmark:c,computeMaxMessagesForArray:A,fetchAndSetReplySuggestions:f,upsertMessageTtsCache:m,liveVideoStream:g,setLiveVideoStream:p,visualContextVideoRef:y,visualContextStreamRef:S,captureSnapshot:E,isListening:x,stopListening:k,startListening:b,clearTranscript:M,addActivityToken:O,removeActivityToken:N,scheduleReengagement:j,cancelReengagement:L,handleUserInputActivity:H,currentSystemPromptText:P,parseGeminiResponse:_,resolveBookmarkContextSummary:B,computeHistorySubsetForMedia:q,maestroAvatarUriRef:Z,maestroAvatarMimeTypeRef:ne}=t,U=Q(W=>W.setLastFetchedSuggestionsFor),X=T.useMemo(()=>In(Q.getState,W=>W.settings),[]),F=T.useMemo(()=>In(Q.getState,$a),[]),R=T.useMemo(()=>In(Q.getState,W=>W.messages),[]),K=T.useMemo(()=>({get current(){return Q.getState().lastFetchedSuggestionsFor},set current(W){U(W)}}),[U]),V=Q(W=>W.liveSessionState),ge=Q(W=>W.liveSessionError),me=Q(W=>W.setLiveSessionState),G=Q(W=>W.setLiveSessionError),D=T.useRef(!1),te=T.useRef(null),se=T.useRef(null),re=T.useCallback(()=>{if(te.current){const{stream:W,created:he}=te.current;he&&W&&W.getTracks().forEach(Se=>Se.stop()),te.current=null}p(null)},[p]),ve=T.useCallback(()=>{if(D.current){const W=X.current.stt.language;o(he=>({...he,stt:{...he.stt,enabled:!0}})),D.current=!1,setTimeout(()=>{X.current.stt.enabled&&b(W)},100)}},[b,X,o]),Me=T.useCallback(async()=>{let W=P;const he=q(R.current),Se=Vl(he,{maxMessages:10,contextSummary:B()||void 0,globalProfileText:(await Eo())?.text||void 0});let ue="";return Se.forEach(Ce=>{const Pe=Ce.rawAssistantResponse||Ce.text||"(image)",Ge=Ce.role==="user"?"User":"Maestro";ue+=`${Ge}: ${Pe}
`}),ue&&(W+=`

--- CURRENT CONVERSATION CONTEXT (History) ---
${ue}
--- END CONTEXT ---`),W},[P,B,q,R]),Ve=T.useCallback(async(W,he,Se,ue)=>{let Ce="",Pe=null,Ge=null;if(W){try{Pe=await E(!1)}catch{}let be;Se&&Se.length>0&&(be={dataUrl:ql(Se,16e3),provider:"gemini",langCode:X.current.stt.language,transcript:W}),Ce=r({role:"user",text:W,imageUrl:Pe?.base64,imageMimeType:Pe?.mimeType,storageOptimizedImageUrl:Pe?.storageOptimizedBase64,storageOptimizedImageMimeType:Pe?.storageOptimizedMimeType,recordedUtterance:be}),Pe&&Ce&&(Ge=(async()=>{let we=Pe.storageOptimizedBase64,je=Pe.storageOptimizedMimeType;try{const at=await Vr(Pe.base64,Pe.mimeType,{t:e});we=at.dataUrl,je=at.mimeType}catch(at){console.warn("Optimization failed, using original for persistence",at)}try{const at=await Va(Pe.base64,Pe.mimeType,"live-user-snapshot");return s(Ce,{storageOptimizedImageUrl:we,storageOptimizedImageMimeType:je,uploadedFileUri:at.uri,uploadedFileMimeType:at.mimeType}),{uri:at.uri,mimeType:at.mimeType}}catch(at){return console.warn("Upload failed",at),s(Ce,{storageOptimizedImageUrl:we,storageOptimizedImageMimeType:je}),null}})())}if(he){const be=r({role:"assistant",text:he,rawAssistantResponse:he});if(F.current){const we=he,je=_(we);let at=[...R.current];if(Ce&&at.push({id:Ce,role:"user",text:W,timestamp:Date.now()}),at.push({id:be,role:"assistant",rawAssistantResponse:we,translations:je,timestamp:Date.now()}),ue&&ue.length>0){const qe=Bn(F.current.targetLanguageCode),Rt=Bn(F.current.nativeLanguageCode),gt=[];je.forEach(Je=>{Je.target&&gt.push({text:Je.target,lang:qe}),Je.native&&gt.push({text:Je.native,lang:Rt})});const $e=Math.max(0,gt.length-ue.length);if($e>0){const Je=gt.slice(0,$e).map(Ct=>Ct.text).join(" / ");console.debug(`[Live] Audio-text offset: ${$e} intro text lines without audio. Skipped: "${Je.substring(0,80)}${Je.length>80?"...":""}"`)}else gt.length!==ue.length&&console.debug(`[Live] Audio-text count: ${ue.length} audio segments for ${gt.length} text lines.`);const mt=X.current.tts.voiceName||"Kore";for(let Je=0;Je<ue.length&&Je+$e<gt.length;Je++){const Ct=ue[Je],ht=gt[Je+$e];if(Ct&&Ct.length>0&&ht){const Tt=ht.text.trim(),Ht=id(Tt,ht.lang,"gemini-live",mt);console.debug(`[TTS Cache] STORE key=${Ht.substring(0,20)}... text="${Tt.substring(0,30)}..." voice=${mt}`),m(be,{key:Ht,langCode:ht.lang,provider:"gemini-live",audioDataUrl:ql(Ct,24e3),updatedAt:Date.now(),voiceName:mt})}}}s(be,{rawAssistantResponse:we,translations:je}),f(be,we,c(at)),K.current=be}if(X.current.imageGenerationModeEnabled){const we=Date.now();s(be,{isGeneratingImage:!0,imageGenerationStartTime:we});const je=q(R.current).filter(Je=>Je.id!==be);let at;try{at=(await Eo())?.text||void 0}catch{}const qe=Vl(je,{maxMessages:A(c(R.current)),maxMediaToKeep:Ql,contextSummary:B()||void 0,globalProfileText:at});let Rt,gt;if(Ge)try{const Je=await Ge;Je?.uri&&(Rt=Je.uri,gt=Je.mimeType)}catch{}if(W&&!qe.some(Je=>Je.role==="user"&&Je.text===W)&&qe.push({role:"user",text:W}),W&&Rt){const Je=[...qe].reverse().findIndex(Ct=>Ct.role==="user"&&Ct.text===W);if(Je>=0){const Ct=qe.length-1-Je;qe[Ct].imageFileUri=Rt,qe[Ct].imageMimeType=gt}else qe.push({role:"user",text:W,imageFileUri:Rt,imageMimeType:gt})}qe.push({role:"user",text:ly});const $e=KA.replace("{TEXT}",he),mt=await od(qe);Wi({history:mt,latestMessageText:$e,latestMessageRole:"user",systemInstruction:FA,maestroAvatarUri:Z.current||void 0,maestroAvatarMimeType:ne.current||void 0}).then(async Je=>{if(Je.base64Image){const Ct=await Vr(Je.base64Image,Je.mimeType,{t:e}),ht=await Va(Je.base64Image,Je.mimeType,"live-gen");s(be,{imageUrl:Je.base64Image,imageMimeType:Je.mimeType,storageOptimizedImageUrl:Ct.dataUrl,storageOptimizedImageMimeType:Ct.mimeType,uploadedFileUri:ht.uri,uploadedFileMimeType:ht.mimeType,isGeneratingImage:!1,imageGenerationStartTime:void 0})}else s(be,{isGeneratingImage:!1})}).catch(()=>{s(be,{isGeneratingImage:!1})})}}},[r,E,e,_,f,c,q,B,m,A,s,Z,ne]),{start:ae,stop:Ne}=eN({onStateChange:W=>{if(me(W),W==="connecting"&&G(null),W==="active"){if(!se.current){const he=O(rn.LIVE,Pt.SESSION);se.current=he}}else se.current&&(N(se.current),se.current=null);(W==="idle"||W==="error")&&(ve(),re())},onError:W=>{G(W),ve()},onTurnComplete:Ve}),nt=T.useCallback(async()=>{if(V==="connecting"||V==="active")return;G(null);let W=g&&g.active?g:null,he=!1;try{if(!W||!W.active){const Ce=S.current;Ce&&Ce.active&&(W=Ce)}if(!W||!W.active){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error(e("error.cameraAccessNotSupported"));const Ce=X.current.selectedCameraId?{deviceId:{exact:X.current.selectedCameraId}}:!0;W=await navigator.mediaDevices.getUserMedia({video:Ce,audio:!0}),W.getAudioTracks().forEach(Pe=>Pe.stop()),he=!0,p(W)}if(!W||!W.active)throw new Error(e("error.cameraStreamNotAvailable"));te.current={stream:W,created:he},X.current.stt.enabled?(D.current=!0,o(Ce=>({...Ce,stt:{...Ce.stt,enabled:!1}})),x&&k(),M()):D.current=!1,H(),L();const Se=await Me(),ue=X.current.tts.voiceName||"Kore";await ae({stream:W,videoElement:y.current,systemInstruction:Se,voiceName:ue})}catch(Se){re(),ve();const ue=Se instanceof Error?Se.message:e("general.error");throw G(ue),Se}},[L,M,Me,H,x,V,g,re,ve,p,o,ae,k,e,S,y]),Te=T.useCallback(async()=>{try{await Ne()}catch(W){console.warn("Failed to stop live session",W)}finally{re(),ve(),G(null),j("live-session-stopped")}},[re,ve,j,Ne]);return{liveSessionState:V,liveSessionError:ge,handleStartLiveSession:nt,handleStopLiveSession:Te}},Fv=t=>{try{typeof window<"u"&&window.dispatchEvent(new CustomEvent("maestro-api-key-changed",{detail:{hasKey:t}}))}catch{}},rN=()=>{const[t,e]=T.useState(null),[o,r]=T.useState(!0),[s,c]=T.useState(null);T.useEffect(()=>{let g=!0;return xd().then(p=>{g&&(e(p),r(!1))}).catch(()=>{g&&(e(null),c("Failed to load saved API key. Please paste it again."),r(!1))}),()=>{g=!1}},[]);const A=T.useCallback(async g=>{const p=rc(g);if(!p)return c("Please paste your Gemini API key."),!1;if(!f0(p))return c("That key looks too short. Please paste the full Gemini API key."),!1;try{return await WP(p),e(p),c(null),Fv(!0),!0}catch{return c("Failed to save API key securely. Please try again."),!1}},[]),f=T.useCallback(async()=>{await ZP(),e(null),c(null),Fv(!1)},[]),m=t?`${t.slice(0,4)}${t.slice(-4)}`:null;return{apiKey:t,maskedKey:m,isLoading:o,hasKey:!!t,error:s,setError:c,saveApiKey:A,clearApiKey:f}},iN=250,sN=()=>{const t=T.useRef(!1),e=T.useRef(new Map),o=T.useRef(null),r=T.useRef(null),s=Q(ke=>ke.activityTokens),c=Q(ke=>ke.addActivityToken),A=Q(ke=>ke.removeActivityToken),f=Q(xT),m=Q(ke=>ke.setLastFetchedSuggestionsFor),{t:g,settings:p,handleSettingsChange:y,setSettings:S,selectedLanguagePair:E,isLoadingHistory:x,addMessage:k,updateMessage:b,deleteMessage:M,setMessages:O,getHistoryRespectingBookmark:N,computeMaxMessagesForArray:j,upsertMessageTtsCache:L,upsertSuggestionTtsCache:H,replySuggestions:P,setReplySuggestions:_}=DD({maestroAvatarUriRef:o,maestroAvatarMimeTypeRef:r}),{hasKey:B,maskedKey:q,isLoading:Z,error:ne,setError:U,saveApiKey:X,clearApiKey:F}=rN(),[R,K]=T.useState(!1),[V,ge]=T.useState(null),me=!B||R,G=T.useCallback(ke=>{U(null),K(!0),typeof ke?.instructionIndex=="number"?ge(ke.instructionIndex):ge(null)},[U]),D=T.useMemo(()=>In(Q.getState,ke=>ke.settings),[]),te=T.useMemo(()=>In(Q.getState,$a),[]),se=T.useMemo(()=>In(Q.getState,ke=>ke.isLoadingHistory),[]),re=T.useMemo(()=>In(Q.getState,ke=>ke.lastFetchedSuggestionsFor),[]);SD();const{availableCamerasRef:ve,liveVideoStream:Me,setLiveVideoStream:Ve,visualContextVideoRef:ae,visualContextStreamRef:Ne,setSnapshotUserError:nt,captureSnapshot:Te}=fD({t:g,sendWithSnapshotEnabled:p.sendWithSnapshotEnabled,useVisualContext:p.smartReengagement.useVisualContext,selectedCameraId:p.selectedCameraId}),W=Q(ke=>ke.showDebugLogs),he=Q(ke=>ke.isUserActive),Se=Q(ke=>ke.languagePairs.find(xt=>xt.id===ke.settings.selectedLanguagePairId)?.baseSystemPrompt||""),ue=Q(ke=>ke.languagePairs.find(xt=>xt.id===ke.settings.selectedLanguagePairId)?.baseReplySuggestionsPrompt||""),Ce=Q(ke=>ke.setTransitioningImageId),Pe=Q(ke=>ke.setShowDebugLogs),Ge=Q(ke=>ke.setAttachedImage),be=4e3,we=Q(ke=>ke.attachedImageBase64),je=Q(ke=>ke.attachedImageMimeType),at=T.useRef(()=>{}),qe=T.useRef(()=>{}),Rt=T.useRef(void 0),{isSpeaking:gt,stopSpeaking:$e,isSpeechSynthesisSupported:mt,hasPendingQueueItems:Je,isListening:Ct,transcript:ht,startListening:Tt,stopListening:Ht,clearTranscript:Ut,claimRecordedUtterance:fn,speechIsSpeakingRef:oe,speakMessage:it,speakWrapper:lt}=tN({upsertMessageTtsCache:L,upsertSuggestionTtsCache:H,setMessages:O}),{isSending:Fe,isSendingRef:wt,handleSendMessageInternal:Dt,handleSendMessageInternalRef:Nt,handleCreateSuggestion:pt,handleSuggestionInteraction:cn,setMaestroActivityStage:jt,parseGeminiResponse:Ae,resolveBookmarkContextSummary:Ke,computeHistorySubsetForMedia:De,fetchAndSetReplySuggestions:Re}=vD({t:g,setSettings:S,addMessage:k,updateMessage:b,setMessages:O,getHistoryRespectingBookmark:N,computeMaxMessagesForArray:j,captureSnapshot:Te,speakMessage:it,isSpeechSynthesisSupported:mt,isListening:Ct,stopListening:Ht,startListening:Tt,clearTranscript:Ut,hasPendingQueueItems:Je,claimRecordedUtterance:fn,scheduleReengagementRef:at,cancelReengagementRef:qe,transcript:ht,currentSystemPromptText:Se,currentReplySuggestionsPromptText:ue,setReplySuggestions:_,handleToggleSuggestionModeRef:Rt,maestroAvatarUriRef:o,maestroAvatarMimeTypeRef:r,setSnapshotUserError:nt,onApiKeyGateOpen:G}),{clearAutoSend:Be}=nN({transcript:ht,attachedImageBase64:we,attachedImageMimeType:je,clearTranscript:Ut,handleCreateSuggestion:pt,handleSendMessageInternal:Dt,stableMs:be});yD({isSpeaking:gt,fetchAndSetReplySuggestions:Re,getHistoryRespectingBookmark:N}),aN({isListening:Ct,startListening:Tt});const He=T.useCallback(async()=>{if(se.current||wt.current||oe.current||t.current)return;_([]),m(null);let ke=!1;if(D.current.smartReengagement.useVisualContext&&Ne.current&&Ne.current.active){t.current=!0;try{const xt=await Te(!0);xt&&Dt&&(ke=await Dt("",xt.base64,xt.mimeType,"image-reengagement"))}finally{t.current=!1}}!ke&&Dt&&await Dt("",void 0,void 0,"conversational-reengagement")},[Te,D,Ne,Dt,se,wt,oe,_,m]),{reengagementPhase:st,scheduleReengagement:vt,cancelReengagement:rt,handleUserActivity:et}=CR({isLoadingHistory:x,selectedLanguagePairId:p.selectedLanguagePairId,activityTokens:s,isVisualContextActive:t.current,triggerReengagementSequence:He,addActivityToken:c,removeActivityToken:A});GD({selectedLanguagePair:E,isBlockingActivity:f,isUserActive:he,reengagementPhase:st,scheduleReengagement:vt,cancelReengagement:rt}),ND({isSpeaking:gt,isSending:Fe,isListening:Ct,reengagementPhase:st,setMaestroActivityStage:jt}),T.useEffect(()=>{at.current=vt,qe.current=rt},[vt,rt]);const Ye=T.useCallback(()=>{Be(),et()},[Be,et]),We=T.useCallback((ke,Et)=>{Ge(ke,Et)},[Ge]),_e=T.useCallback(ke=>{M(ke)},[M]),Le=T.useCallback(ke=>{const Et=typeof ke=="boolean"?ke:!D.current.isSuggestionMode;if(Et===D.current.isSuggestionMode)return;const xt=D.current.stt,$=xt.enabled;let Ee=xt.language;te.current&&(Ee=Bn(Et?te.current.nativeLanguageCode:te.current.targetLanguageCode));const xe=Ee!==xt.language;S(Ue=>({...Ue,isSuggestionMode:Et,stt:{...Ue.stt,language:Ee}})),xe&&$&&Ct?(Ht(),setTimeout(()=>{D.current.stt.enabled&&(Ut(),Tt(Ee))},iN)):xe&&Ut()},[Ct,Ht,Tt,Ut,D,te,S]);T.useEffect(()=>{Rt.current=Le},[Le]);const Qe=T.useCallback(()=>{if(D.current.stt.enabled){const xt={...D.current,stt:{...D.current.stt,enabled:!1}};S(xt),Q.getState().setSttError(null),Be(),Ht();return}const ke=D.current.stt,Et={...D.current,stt:{...ke,enabled:!0}};S(Et),Q.getState().setSttError(null),Ut(),Tt(ke.language)},[Be,Ut,Tt,Ht,D,S]),Jt=T.useCallback(()=>{y("sendWithSnapshotEnabled",!D.current.sendWithSnapshotEnabled)},[y,D]),Mt=T.useCallback(()=>{y("smartReengagement",{...D.current.smartReengagement,useVisualContext:!D.current.smartReengagement.useVisualContext})},[y,D]),Zt=T.useCallback(()=>{y("tts",{...D.current.tts,speakNative:!D.current.tts.speakNative})},[y,D]),dn=T.useCallback(()=>{const ke=!D.current.imageGenerationModeEnabled;if(y("imageGenerationModeEnabled",ke),!ke&&D.current.selectedCameraId===ar){const Et=ve.current[0];y("selectedCameraId",Et?Et.deviceId:null)}},[y,D,ve]),Gt=T.useCallback(()=>{y("imageFocusedModeEnabled",!D.current.imageFocusedModeEnabled)},[y,D]),sn=T.useCallback(ke=>{if(!document.startViewTransition){Gt();return}Ce(ke),document.startViewTransition(()=>{Gt()}).finished.finally(()=>{Ce(null)})},[Gt]),{handleStartLiveSession:ot,handleStopLiveSession:dt}=oN({t:g,setSettings:S,addMessage:k,updateMessage:b,getHistoryRespectingBookmark:N,computeMaxMessagesForArray:j,fetchAndSetReplySuggestions:Re,upsertMessageTtsCache:L,liveVideoStream:Me,setLiveVideoStream:Ve,visualContextVideoRef:ae,visualContextStreamRef:Ne,captureSnapshot:Te,isListening:Ct,stopListening:Ht,startListening:Tt,clearTranscript:Ut,addActivityToken:c,removeActivityToken:A,scheduleReengagement:vt,cancelReengagement:rt,handleUserInputActivity:Ye,currentSystemPromptText:Se,parseGeminiResponse:Ae,resolveBookmarkContextSummary:Ke,computeHistorySubsetForMedia:De,maestroAvatarUriRef:o,maestroAvatarMimeTypeRef:r});return Z?C.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-slate-50",children:C.jsxs("div",{className:"text-center",children:[C.jsx(Ya,{className:"w-8 h-8 text-gray-500 block mx-auto"}),C.jsx("p",{className:"mt-2 text-gray-600",children:"Loading app..."})]})}):x&&p.selectedLanguagePairId?C.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-slate-50",children:C.jsxs("div",{className:"text-center",children:[C.jsx(Ya,{className:"w-8 h-8 text-gray-500 block mx-auto"}),C.jsx("p",{className:"mt-2 text-gray-600",children:g("chat.loadingHistory")})]})}):C.jsxs("div",{className:"flex flex-col min-h-screen antialiased text-gray-800 bg-gray-100",children:[C.jsx(dy,{onOpenApiKey:()=>{U(null),ge(null),K(!0)},hasApiKey:B}),W&&C.jsx(hw,{onClose:()=>Pe(!1)}),C.jsx(hD,{videoRef:ae}),C.jsx(xD,{isOpen:me,isBlocking:!B,hasKey:B,maskedKey:q,error:ne,instructionFocusIndex:V,onSave:X,onClear:F,onValueChange:()=>U(null),onClose:()=>{U(null),ge(null),K(!1)}}),C.jsx("div",{className:"flex flex-1 overflow-hidden",children:C.jsx("main",{className:"flex-1 flex flex-col bg-slate-50",children:C.jsx(XR,{onSendMessage:Nt.current||Dt,onDeleteMessage:_e,updateMessage:b,onBookmarkAt:ke=>{S(xt=>({...xt,historyBookmarkMessageId:ke}));const Et=D.current.selectedLanguagePairId;Et&&(async()=>{try{await Rd(Et,{bookmarkMessageId:ke})}catch(xt){console.error(`[App] Failed to persist bookmark for pairId=${Et}, messageId=${ke}:`,xt)}})()},onChangeMaxVisibleMessages:ke=>{const Et=Math.max(1,Math.min(100,Math.floor(ke||Md)));S(xt=>({...xt,maxVisibleMessages:Et}))},bubbleWrapperRefs:e,onSetAttachedImage:We,onSttToggle:Qe,speakText:lt,stopSpeaking:$e,onToggleSpeakNativeLang:Zt,onUserInputActivity:Ye,onToggleSendWithSnapshot:Jt,onToggleUseVisualContextForReengagement:Mt,onSuggestionClick:(ke,Et)=>{if(cn(ke,Et),!oe.current&&te.current){const xt=Et==="target"?ke.target:ke.native,$=Bn(Et==="target"?te.current.targetLanguageCode:te.current.nativeLanguageCode);if(xt&&$){const Ee=re.current,xe=P.findIndex(ct=>ct.target===ke.target&&ct.native===ke.native),Ue=Ee&&xe>=0?{source:"suggestion",messageId:Ee,suggestionIndex:xe,suggestionLang:Et}:{source:"adHoc"};lt([{text:xt,langCode:$,context:Ue}],$)}}Ye()},onToggleImageGenerationMode:dn,onToggleImageFocusedMode:sn,onStartLiveSession:ot,onStopLiveSession:dt,onToggleSuggestionMode:Le,onCreateSuggestion:pt})})})]})},U0=document.getElementById("root");if(!U0)throw new Error("Could not find root element to mount to");const lN=eT.createRoot(U0);lN.render(C.jsx(xa.StrictMode,{children:C.jsx(sN,{})}));export{ad as C,Kl as E,Ev as K,gN as S,oc as W,A0 as a,NP as b,xA as c,wv as d};
